function fD(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var bE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function I4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function MW(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var lw={exports:{}},Tp={},cw={exports:{}},vn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function LW(){if(wE)return vn;wE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(H){return H===null||typeof H!="object"?null:(H=h&&H[h]||H["@@iterator"],typeof H=="function"?H:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function v(H,ie,de){this.props=H,this.context=ie,this.refs=y,this.updater=de||g}v.prototype.isReactComponent={},v.prototype.setState=function(H,ie){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ie,"setState")},v.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function w(){}w.prototype=v.prototype;function N(H,ie,de){this.props=H,this.context=ie,this.refs=y,this.updater=de||g}var k=N.prototype=new w;k.constructor=N,x(k,v.prototype),k.isPureReactComponent=!0;var C=Array.isArray,j=Object.prototype.hasOwnProperty,R={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function A(H,ie,de){var ke,we={},Ee=null,Ce=null;if(ie!=null)for(ke in ie.ref!==void 0&&(Ce=ie.ref),ie.key!==void 0&&(Ee=""+ie.key),ie)j.call(ie,ke)&&!_.hasOwnProperty(ke)&&(we[ke]=ie[ke]);var Re=arguments.length-2;if(Re===1)we.children=de;else if(1<Re){for(var se=Array(Re),Te=0;Te<Re;Te++)se[Te]=arguments[Te+2];we.children=se}if(H&&H.defaultProps)for(ke in Re=H.defaultProps,Re)we[ke]===void 0&&(we[ke]=Re[ke]);return{$$typeof:t,type:H,key:Ee,ref:Ce,props:we,_owner:R.current}}function O(H,ie){return{$$typeof:t,type:H.type,key:ie,ref:H.ref,props:H.props,_owner:H._owner}}function L(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function D(H){var ie={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(de){return ie[de]})}var q=/\/+/g;function V(H,ie){return typeof H=="object"&&H!==null&&H.key!=null?D(""+H.key):ie.toString(36)}function ne(H,ie,de,ke,we){var Ee=typeof H;(Ee==="undefined"||Ee==="boolean")&&(H=null);var Ce=!1;if(H===null)Ce=!0;else switch(Ee){case"string":case"number":Ce=!0;break;case"object":switch(H.$$typeof){case t:case e:Ce=!0}}if(Ce)return Ce=H,we=we(Ce),H=ke===""?"."+V(Ce,0):ke,C(we)?(de="",H!=null&&(de=H.replace(q,"$&/")+"/"),ne(we,ie,de,"",function(Te){return Te})):we!=null&&(L(we)&&(we=O(we,de+(!we.key||Ce&&Ce.key===we.key?"":(""+we.key).replace(q,"$&/")+"/")+H)),ie.push(we)),1;if(Ce=0,ke=ke===""?".":ke+":",C(H))for(var Re=0;Re<H.length;Re++){Ee=H[Re];var se=ke+V(Ee,Re);Ce+=ne(Ee,ie,de,se,we)}else if(se=p(H),typeof se=="function")for(H=se.call(H),Re=0;!(Ee=H.next()).done;)Ee=Ee.value,se=ke+V(Ee,Re++),Ce+=ne(Ee,ie,de,se,we);else if(Ee==="object")throw ie=String(H),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return Ce}function J(H,ie,de){if(H==null)return H;var ke=[],we=0;return ne(H,ke,"","",function(Ee){return ie.call(de,Ee,we++)}),ke}function ee(H){if(H._status===-1){var ie=H._result;ie=ie(),ie.then(function(de){(H._status===0||H._status===-1)&&(H._status=1,H._result=de)},function(de){(H._status===0||H._status===-1)&&(H._status=2,H._result=de)}),H._status===-1&&(H._status=0,H._result=ie)}if(H._status===1)return H._result.default;throw H._result}var te={current:null},X={transition:null},Q={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:X,ReactCurrentOwner:R};function G(){throw Error("act(...) is not supported in production builds of React.")}return vn.Children={map:J,forEach:function(H,ie,de){J(H,function(){ie.apply(this,arguments)},de)},count:function(H){var ie=0;return J(H,function(){ie++}),ie},toArray:function(H){return J(H,function(ie){return ie})||[]},only:function(H){if(!L(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},vn.Component=v,vn.Fragment=n,vn.Profiler=r,vn.PureComponent=N,vn.StrictMode=s,vn.Suspense=c,vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,vn.act=G,vn.cloneElement=function(H,ie,de){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var ke=x({},H.props),we=H.key,Ee=H.ref,Ce=H._owner;if(ie!=null){if(ie.ref!==void 0&&(Ee=ie.ref,Ce=R.current),ie.key!==void 0&&(we=""+ie.key),H.type&&H.type.defaultProps)var Re=H.type.defaultProps;for(se in ie)j.call(ie,se)&&!_.hasOwnProperty(se)&&(ke[se]=ie[se]===void 0&&Re!==void 0?Re[se]:ie[se])}var se=arguments.length-2;if(se===1)ke.children=de;else if(1<se){Re=Array(se);for(var Te=0;Te<se;Te++)Re[Te]=arguments[Te+2];ke.children=Re}return{$$typeof:t,type:H.type,key:we,ref:Ee,props:ke,_owner:Ce}},vn.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:i,_context:H},H.Consumer=H},vn.createElement=A,vn.createFactory=function(H){var ie=A.bind(null,H);return ie.type=H,ie},vn.createRef=function(){return{current:null}},vn.forwardRef=function(H){return{$$typeof:l,render:H}},vn.isValidElement=L,vn.lazy=function(H){return{$$typeof:d,_payload:{_status:-1,_result:H},_init:ee}},vn.memo=function(H,ie){return{$$typeof:u,type:H,compare:ie===void 0?null:ie}},vn.startTransition=function(H){var ie=X.transition;X.transition={};try{H()}finally{X.transition=ie}},vn.unstable_act=G,vn.useCallback=function(H,ie){return te.current.useCallback(H,ie)},vn.useContext=function(H){return te.current.useContext(H)},vn.useDebugValue=function(){},vn.useDeferredValue=function(H){return te.current.useDeferredValue(H)},vn.useEffect=function(H,ie){return te.current.useEffect(H,ie)},vn.useId=function(){return te.current.useId()},vn.useImperativeHandle=function(H,ie,de){return te.current.useImperativeHandle(H,ie,de)},vn.useInsertionEffect=function(H,ie){return te.current.useInsertionEffect(H,ie)},vn.useLayoutEffect=function(H,ie){return te.current.useLayoutEffect(H,ie)},vn.useMemo=function(H,ie){return te.current.useMemo(H,ie)},vn.useReducer=function(H,ie,de){return te.current.useReducer(H,ie,de)},vn.useRef=function(H){return te.current.useRef(H)},vn.useState=function(H){return te.current.useState(H)},vn.useSyncExternalStore=function(H,ie,de){return te.current.useSyncExternalStore(H,ie,de)},vn.useTransition=function(){return te.current.useTransition()},vn.version="18.3.1",vn}var NE;function hy(){return NE||(NE=1,cw.exports=LW()),cw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function BW(){if(SE)return Tp;SE=1;var t=hy(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(l,c,u){var d,h={},p=null,g=null;u!==void 0&&(p=""+u),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(g=c.ref);for(d in c)s.call(c,d)&&!i.hasOwnProperty(d)&&(h[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)h[d]===void 0&&(h[d]=c[d]);return{$$typeof:e,type:l,key:p,ref:g,props:h,_owner:r.current}}return Tp.Fragment=n,Tp.jsx=a,Tp.jsxs=a,Tp}var kE;function zW(){return kE||(kE=1,lw.exports=BW()),lw.exports}var o=zW(),a1={},uw={exports:{}},Ri={},dw={exports:{}},hw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function VW(){return CE||(CE=1,(function(t){function e(X,Q){var G=X.length;X.push(Q);e:for(;0<G;){var H=G-1>>>1,ie=X[H];if(0<r(ie,Q))X[H]=Q,X[G]=ie,G=H;else break e}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var Q=X[0],G=X.pop();if(G!==Q){X[0]=G;e:for(var H=0,ie=X.length,de=ie>>>1;H<de;){var ke=2*(H+1)-1,we=X[ke],Ee=ke+1,Ce=X[Ee];if(0>r(we,G))Ee<ie&&0>r(Ce,we)?(X[H]=Ce,X[Ee]=G,H=Ee):(X[H]=we,X[ke]=G,H=ke);else if(Ee<ie&&0>r(Ce,G))X[H]=Ce,X[Ee]=G,H=Ee;else break e}}return Q}function r(X,Q){var G=X.sortIndex-Q.sortIndex;return G!==0?G:X.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,g=!1,x=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(X){for(var Q=n(u);Q!==null;){if(Q.callback===null)s(u);else if(Q.startTime<=X)s(u),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(u)}}function C(X){if(y=!1,k(X),!x)if(n(c)!==null)x=!0,ee(j);else{var Q=n(u);Q!==null&&te(C,Q.startTime-X)}}function j(X,Q){x=!1,y&&(y=!1,w(A),A=-1),g=!0;var G=p;try{for(k(Q),h=n(c);h!==null&&(!(h.expirationTime>Q)||X&&!D());){var H=h.callback;if(typeof H=="function"){h.callback=null,p=h.priorityLevel;var ie=H(h.expirationTime<=Q);Q=t.unstable_now(),typeof ie=="function"?h.callback=ie:h===n(c)&&s(c),k(Q)}else s(c);h=n(c)}if(h!==null)var de=!0;else{var ke=n(u);ke!==null&&te(C,ke.startTime-Q),de=!1}return de}finally{h=null,p=G,g=!1}}var R=!1,_=null,A=-1,O=5,L=-1;function D(){return!(t.unstable_now()-L<O)}function q(){if(_!==null){var X=t.unstable_now();L=X;var Q=!0;try{Q=_(!0,X)}finally{Q?V():(R=!1,_=null)}}else R=!1}var V;if(typeof N=="function")V=function(){N(q)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,J=ne.port2;ne.port1.onmessage=q,V=function(){J.postMessage(null)}}else V=function(){v(q,0)};function ee(X){_=X,R||(R=!0,V())}function te(X,Q){A=v(function(){X(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,ee(j))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(X){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var G=p;p=Q;try{return X()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,Q){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var G=p;p=X;try{return Q()}finally{p=G}},t.unstable_scheduleCallback=function(X,Q,G){var H=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?H+G:H):G=H,X){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=G+ie,X={id:d++,callback:Q,priorityLevel:X,startTime:G,expirationTime:ie,sortIndex:-1},G>H?(X.sortIndex=G,e(u,X),n(c)===null&&X===n(u)&&(y?(w(A),A=-1):y=!0,te(C,G-H))):(X.sortIndex=ie,e(c,X),x||g||(x=!0,ee(j))),X},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(X){var Q=p;return function(){var G=p;p=Q;try{return X.apply(this,arguments)}finally{p=G}}}})(hw)),hw}var TE;function UW(){return TE||(TE=1,dw.exports=VW()),dw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function WW(){if(IE)return Ri;IE=1;var t=hy(),e=UW();function n(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,r={};function i(f,m){a(f,m),a(f+"Capture",m)}function a(f,m){for(r[f]=m,f=0;f<m.length;f++)s.add(m[f])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},h={};function p(f){return c.call(h,f)?!0:c.call(d,f)?!1:u.test(f)?h[f]=!0:(d[f]=!0,!1)}function g(f,m,b,S){if(b!==null&&b.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return S?!1:b!==null?!b.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function x(f,m,b,S){if(m===null||typeof m>"u"||g(f,m,b,S))return!0;if(S)return!1;if(b!==null)switch(b.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function y(f,m,b,S,E,P,W){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=S,this.attributeNamespace=E,this.mustUseProperty=b,this.propertyName=f,this.type=m,this.sanitizeURL=P,this.removeEmptyString=W}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){v[f]=new y(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var m=f[0];v[m]=new y(m,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){v[f]=new y(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){v[f]=new y(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){v[f]=new y(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){v[f]=new y(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){v[f]=new y(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){v[f]=new y(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){v[f]=new y(f,5,!1,f.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function N(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var m=f.replace(w,N);v[m]=new y(m,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var m=f.replace(w,N);v[m]=new y(m,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var m=f.replace(w,N);v[m]=new y(m,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){v[f]=new y(f,1,!1,f.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){v[f]=new y(f,1,!1,f.toLowerCase(),null,!0,!0)});function k(f,m,b,S){var E=v.hasOwnProperty(m)?v[m]:null;(E!==null?E.type!==0:S||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(x(m,b,E,S)&&(b=null),S||E===null?p(m)&&(b===null?f.removeAttribute(m):f.setAttribute(m,""+b)):E.mustUseProperty?f[E.propertyName]=b===null?E.type===3?!1:"":b:(m=E.attributeName,S=E.attributeNamespace,b===null?f.removeAttribute(m):(E=E.type,b=E===3||E===4&&b===!0?"":""+b,S?f.setAttributeNS(S,m,b):f.setAttribute(m,b))))}var C=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),R=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),D=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),X=Symbol.iterator;function Q(f){return f===null||typeof f!="object"?null:(f=X&&f[X]||f["@@iterator"],typeof f=="function"?f:null)}var G=Object.assign,H;function ie(f){if(H===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);H=m&&m[1]||""}return`
`+H+f}var de=!1;function ke(f,m){if(!f||de)return"";de=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Fe){var S=Fe}Reflect.construct(f,[],m)}else{try{m.call()}catch(Fe){S=Fe}f.call(m.prototype)}else{try{throw Error()}catch(Fe){S=Fe}f()}}catch(Fe){if(Fe&&S&&typeof Fe.stack=="string"){for(var E=Fe.stack.split(`
`),P=S.stack.split(`
`),W=E.length-1,ce=P.length-1;1<=W&&0<=ce&&E[W]!==P[ce];)ce--;for(;1<=W&&0<=ce;W--,ce--)if(E[W]!==P[ce]){if(W!==1||ce!==1)do if(W--,ce--,0>ce||E[W]!==P[ce]){var ye=`
`+E[W].replace(" at new "," at ");return f.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",f.displayName)),ye}while(1<=W&&0<=ce);break}}}finally{de=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?ie(f):""}function we(f){switch(f.tag){case 5:return ie(f.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return f=ke(f.type,!1),f;case 11:return f=ke(f.type.render,!1),f;case 1:return f=ke(f.type,!0),f;default:return""}}function Ee(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case _:return"Fragment";case R:return"Portal";case O:return"Profiler";case A:return"StrictMode";case V:return"Suspense";case ne:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case D:return(f.displayName||"Context")+".Consumer";case L:return(f._context.displayName||"Context")+".Provider";case q:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case J:return m=f.displayName||null,m!==null?m:Ee(f.type)||"Memo";case ee:m=f._payload,f=f._init;try{return Ee(f(m))}catch{}}return null}function Ce(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=m.render,f=f.displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(m);case 8:return m===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function Re(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function se(f){var m=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Te(f){var m=se(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,m),S=""+f[m];if(!f.hasOwnProperty(m)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var E=b.get,P=b.set;return Object.defineProperty(f,m,{configurable:!0,get:function(){return E.call(this)},set:function(W){S=""+W,P.call(this,W)}}),Object.defineProperty(f,m,{enumerable:b.enumerable}),{getValue:function(){return S},setValue:function(W){S=""+W},stopTracking:function(){f._valueTracker=null,delete f[m]}}}}function Me(f){f._valueTracker||(f._valueTracker=Te(f))}function Ye(f){if(!f)return!1;var m=f._valueTracker;if(!m)return!0;var b=m.getValue(),S="";return f&&(S=se(f)?f.checked?"true":"false":f.value),f=S,f!==b?(m.setValue(f),!0):!1}function me(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function xe(f,m){var b=m.checked;return G({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??f._wrapperState.initialChecked})}function $e(f,m){var b=m.defaultValue==null?"":m.defaultValue,S=m.checked!=null?m.checked:m.defaultChecked;b=Re(m.value!=null?m.value:b),f._wrapperState={initialChecked:S,initialValue:b,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function Ze(f,m){m=m.checked,m!=null&&k(f,"checked",m,!1)}function bt(f,m){Ze(f,m);var b=Re(m.value),S=m.type;if(b!=null)S==="number"?(b===0&&f.value===""||f.value!=b)&&(f.value=""+b):f.value!==""+b&&(f.value=""+b);else if(S==="submit"||S==="reset"){f.removeAttribute("value");return}m.hasOwnProperty("value")?at(f,m.type,b):m.hasOwnProperty("defaultValue")&&at(f,m.type,Re(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(f.defaultChecked=!!m.defaultChecked)}function $t(f,m,b){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var S=m.type;if(!(S!=="submit"&&S!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+f._wrapperState.initialValue,b||m===f.value||(f.value=m),f.defaultValue=m}b=f.name,b!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,b!==""&&(f.name=b)}function at(f,m,b){(m!=="number"||me(f.ownerDocument)!==f)&&(b==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+b&&(f.defaultValue=""+b))}var nt=Array.isArray;function Xt(f,m,b,S){if(f=f.options,m){m={};for(var E=0;E<b.length;E++)m["$"+b[E]]=!0;for(b=0;b<f.length;b++)E=m.hasOwnProperty("$"+f[b].value),f[b].selected!==E&&(f[b].selected=E),E&&S&&(f[b].defaultSelected=!0)}else{for(b=""+Re(b),m=null,E=0;E<f.length;E++){if(f[E].value===b){f[E].selected=!0,S&&(f[E].defaultSelected=!0);return}m!==null||f[E].disabled||(m=f[E])}m!==null&&(m.selected=!0)}}function dn(f,m){if(m.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},m,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function Zn(f,m){var b=m.value;if(b==null){if(b=m.children,m=m.defaultValue,b!=null){if(m!=null)throw Error(n(92));if(nt(b)){if(1<b.length)throw Error(n(93));b=b[0]}m=b}m==null&&(m=""),b=m}f._wrapperState={initialValue:Re(b)}}function Gn(f,m){var b=Re(m.value),S=Re(m.defaultValue);b!=null&&(b=""+b,b!==f.value&&(f.value=b),m.defaultValue==null&&f.defaultValue!==b&&(f.defaultValue=b)),S!=null&&(f.defaultValue=""+S)}function Jn(f){var m=f.textContent;m===f._wrapperState.initialValue&&m!==""&&m!==null&&(f.value=m)}function $n(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ms(f,m){return f==null||f==="http://www.w3.org/1999/xhtml"?$n(m):f==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var In,As=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,b,S,E){MSApp.execUnsafeLocalFunction(function(){return f(m,b,S,E)})}:f})(function(f,m){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=m;else{for(In=In||document.createElement("div"),In.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=In.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;m.firstChild;)f.appendChild(m.firstChild)}});function gs(f,m){if(m){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=m;return}}f.textContent=m}var Ne={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];Object.keys(Ne).forEach(function(f){ft.forEach(function(m){m=m+f.charAt(0).toUpperCase()+f.substring(1),Ne[m]=Ne[f]})});function on(f,m,b){return m==null||typeof m=="boolean"||m===""?"":b||typeof m!="number"||m===0||Ne.hasOwnProperty(f)&&Ne[f]?(""+m).trim():m+"px"}function Sn(f,m){f=f.style;for(var b in m)if(m.hasOwnProperty(b)){var S=b.indexOf("--")===0,E=on(b,m[b],S);b==="float"&&(b="cssFloat"),S?f.setProperty(b,E):f[b]=E}}var An=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pn(f,m){if(m){if(An[f]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(n(137,f));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(n(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(n(61))}if(m.style!=null&&typeof m.style!="object")throw Error(n(62))}}function Ss(f,m){if(f.indexOf("-")===-1)return typeof m.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rn=null;function hn(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var qi=null,Ci=null,Hs=null;function ar(f){if(f=dp(f)){if(typeof qi!="function")throw Error(n(280));var m=f.stateNode;m&&(m=wx(m),qi(f.stateNode,f.type,m))}}function dt(f){Ci?Hs?Hs.push(f):Hs=[f]:Ci=f}function ns(){if(Ci){var f=Ci,m=Hs;if(Hs=Ci=null,ar(f),m)for(f=0;f<m.length;f++)ar(m[f])}}function ss(f,m){return f(m)}function xs(){}var Lr=!1;function _n(f,m,b){if(Lr)return f(m,b);Lr=!0;try{return ss(f,m,b)}finally{Lr=!1,(Ci!==null||Hs!==null)&&(xs(),ns())}}function cs(f,m){var b=f.stateNode;if(b===null)return null;var S=wx(b);if(S===null)return null;b=S[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(f=f.type,S=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!S;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(n(231,m,typeof b));return b}var Rs=!1;if(l)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){Rs=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{Rs=!1}function gr(f,m,b,S,E,P,W,ce,ye){var Fe=Array.prototype.slice.call(arguments,3);try{m.apply(b,Fe)}catch(tt){this.onError(tt)}}var ca=!1,On=null,Br=!1,tc=null,nc={onError:function(f){ca=!0,On=f}};function Xd(f,m,b,S,E,P,W,ce,ye){ca=!1,On=null,gr.apply(nc,arguments)}function So(f,m,b,S,E,P,W,ce,ye){if(Xd.apply(this,arguments),ca){if(ca){var Fe=On;ca=!1,On=null}else throw Error(n(198));Br||(Br=!0,tc=Fe)}}function za(f){var m=f,b=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,(m.flags&4098)!==0&&(b=m.return),f=m.return;while(f)}return m.tag===3?b:null}function Su(f){if(f.tag===13){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function ku(f){if(za(f)!==f)throw Error(n(188))}function Yd(f){var m=f.alternate;if(!m){if(m=za(f),m===null)throw Error(n(188));return m!==f?null:f}for(var b=f,S=m;;){var E=b.return;if(E===null)break;var P=E.alternate;if(P===null){if(S=E.return,S!==null){b=S;continue}break}if(E.child===P.child){for(P=E.child;P;){if(P===b)return ku(E),f;if(P===S)return ku(E),m;P=P.sibling}throw Error(n(188))}if(b.return!==S.return)b=E,S=P;else{for(var W=!1,ce=E.child;ce;){if(ce===b){W=!0,b=E,S=P;break}if(ce===S){W=!0,S=E,b=P;break}ce=ce.sibling}if(!W){for(ce=P.child;ce;){if(ce===b){W=!0,b=P,S=E;break}if(ce===S){W=!0,S=P,b=E;break}ce=ce.sibling}if(!W)throw Error(n(189))}}if(b.alternate!==S)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?f:m}function cl(f){return f=Yd(f),f!==null?ua(f):null}function ua(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=ua(f);if(m!==null)return m;f=f.sibling}return null}var Zd=e.unstable_scheduleCallback,Jd=e.unstable_cancelCallback,sc=e.unstable_shouldYield,Qd=e.unstable_requestPaint,Qn=e.unstable_now,Cu=e.unstable_getCurrentPriorityLevel,ul=e.unstable_ImmediatePriority,ko=e.unstable_UserBlockingPriority,Xi=e.unstable_NormalPriority,ri=e.unstable_LowPriority,eh=e.unstable_IdlePriority,rc=null,ii=null;function Tu(f){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(rc,f,void 0,(f.current.flags&128)===128)}catch{}}var rs=Math.clz32?Math.clz32:nh,th=Math.log,Va=Math.LN2;function nh(f){return f>>>=0,f===0?32:31-(th(f)/Va|0)|0}var Co=64,ic=4194304;function dl(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Yi(f,m){var b=f.pendingLanes;if(b===0)return 0;var S=0,E=f.suspendedLanes,P=f.pingedLanes,W=b&268435455;if(W!==0){var ce=W&~E;ce!==0?S=dl(ce):(P&=W,P!==0&&(S=dl(P)))}else W=b&~E,W!==0?S=dl(W):P!==0&&(S=dl(P));if(S===0)return 0;if(m!==0&&m!==S&&(m&E)===0&&(E=S&-S,P=m&-m,E>=P||E===16&&(P&4194240)!==0))return m;if((S&4)!==0&&(S|=b&16),m=f.entangledLanes,m!==0)for(f=f.entanglements,m&=S;0<m;)b=31-rs(m),E=1<<b,S|=f[b],m&=~E;return S}function sh(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rh(f,m){for(var b=f.suspendedLanes,S=f.pingedLanes,E=f.expirationTimes,P=f.pendingLanes;0<P;){var W=31-rs(P),ce=1<<W,ye=E[W];ye===-1?((ce&b)===0||(ce&S)!==0)&&(E[W]=sh(ce,m)):ye<=m&&(f.expiredLanes|=ce),P&=~ce}}function Iu(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function ih(){var f=Co;return Co<<=1,(Co&4194240)===0&&(Co=64),f}function hl(f){for(var m=[],b=0;31>b;b++)m.push(f);return m}function Ua(f,m,b){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,m=31-rs(m),f[m]=b}function ju(f,m){var b=f.pendingLanes&~m;f.pendingLanes=m,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=m,f.mutableReadLanes&=m,f.entangledLanes&=m,m=f.entanglements;var S=f.eventTimes;for(f=f.expirationTimes;0<b;){var E=31-rs(b),P=1<<E;m[E]=0,S[E]=-1,f[E]=-1,b&=~P}}function fl(f,m){var b=f.entangledLanes|=m;for(f=f.entanglements;b;){var S=31-rs(b),E=1<<S;E&m|f[S]&m&&(f[S]|=m),b&=~E}}var kn=0;function ac(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var oc,lc,Eu,$,M,z=!1,oe=[],je=null,Ve=null,De=null,We=new Map,st=new Map,mt=[],Ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xn(f,m){switch(f){case"focusin":case"focusout":je=null;break;case"dragenter":case"dragleave":Ve=null;break;case"mouseover":case"mouseout":De=null;break;case"pointerover":case"pointerout":We.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":st.delete(m.pointerId)}}function en(f,m,b,S,E,P){return f===null||f.nativeEvent!==P?(f={blockedOn:m,domEventName:b,eventSystemFlags:S,nativeEvent:P,targetContainers:[E]},m!==null&&(m=dp(m),m!==null&&lc(m)),f):(f.eventSystemFlags|=S,m=f.targetContainers,E!==null&&m.indexOf(E)===-1&&m.push(E),f)}function Yt(f,m,b,S,E){switch(m){case"focusin":return je=en(je,f,m,b,S,E),!0;case"dragenter":return Ve=en(Ve,f,m,b,S,E),!0;case"mouseover":return De=en(De,f,m,b,S,E),!0;case"pointerover":var P=E.pointerId;return We.set(P,en(We.get(P)||null,f,m,b,S,E)),!0;case"gotpointercapture":return P=E.pointerId,st.set(P,en(st.get(P)||null,f,m,b,S,E)),!0}return!1}function St(f){var m=$u(f.target);if(m!==null){var b=za(m);if(b!==null){if(m=b.tag,m===13){if(m=Su(b),m!==null){f.blockedOn=m,M(f.priority,function(){Eu(b)});return}}else if(m===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function I(f){if(f.blockedOn!==null)return!1;for(var m=f.targetContainers;0<m.length;){var b=ot(f.domEventName,f.eventSystemFlags,m[0],f.nativeEvent);if(b===null){b=f.nativeEvent;var S=new b.constructor(b.type,b);Rn=S,b.target.dispatchEvent(S),Rn=null}else return m=dp(b),m!==null&&lc(m),f.blockedOn=b,!1;m.shift()}return!0}function B(f,m,b){I(f)&&b.delete(m)}function U(){z=!1,je!==null&&I(je)&&(je=null),Ve!==null&&I(Ve)&&(Ve=null),De!==null&&I(De)&&(De=null),We.forEach(B),st.forEach(B)}function Y(f,m){f.blockedOn===m&&(f.blockedOn=null,z||(z=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,U)))}function ae(f){function m(E){return Y(E,f)}if(0<oe.length){Y(oe[0],f);for(var b=1;b<oe.length;b++){var S=oe[b];S.blockedOn===f&&(S.blockedOn=null)}}for(je!==null&&Y(je,f),Ve!==null&&Y(Ve,f),De!==null&&Y(De,f),We.forEach(m),st.forEach(m),b=0;b<mt.length;b++)S=mt[b],S.blockedOn===f&&(S.blockedOn=null);for(;0<mt.length&&(b=mt[0],b.blockedOn===null);)St(b),b.blockedOn===null&&mt.shift()}var re=C.ReactCurrentBatchConfig,le=!0;function pe(f,m,b,S){var E=kn,P=re.transition;re.transition=null;try{kn=1,Ge(f,m,b,S)}finally{kn=E,re.transition=P}}function Oe(f,m,b,S){var E=kn,P=re.transition;re.transition=null;try{kn=4,Ge(f,m,b,S)}finally{kn=E,re.transition=P}}function Ge(f,m,b,S){if(le){var E=ot(f,m,b,S);if(E===null)Jv(f,m,S,qe,b),xn(f,S);else if(Yt(E,f,m,b,S))S.stopPropagation();else if(xn(f,S),m&4&&-1<Ht.indexOf(f)){for(;E!==null;){var P=dp(E);if(P!==null&&oc(P),P=ot(f,m,b,S),P===null&&Jv(f,m,S,qe,b),P===E)break;E=P}E!==null&&S.stopPropagation()}else Jv(f,m,S,null,b)}}var qe=null;function ot(f,m,b,S){if(qe=null,f=hn(S),f=$u(f),f!==null)if(m=za(f),m===null)f=null;else if(b=m.tag,b===13){if(f=Su(m),f!==null)return f;f=null}else if(b===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;f=null}else m!==f&&(f=null);return qe=f,null}function ct(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cu()){case ul:return 1;case ko:return 4;case Xi:case ri:return 16;case eh:return 536870912;default:return 16}default:return 16}}var ut=null,Ut=null,tn=null;function Fn(){if(tn)return tn;var f,m=Ut,b=m.length,S,E="value"in ut?ut.value:ut.textContent,P=E.length;for(f=0;f<b&&m[f]===E[f];f++);var W=b-f;for(S=1;S<=W&&m[b-S]===E[P-S];S++);return tn=E.slice(f,1<S?1-S:void 0)}function Mn(f){var m=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&m===13&&(f=13)):f=m,f===10&&(f=13),32<=f||f===13?f:0}function Ks(){return!0}function ai(){return!1}function Kn(f){function m(b,S,E,P,W){this._reactName=b,this._targetInst=E,this.type=S,this.nativeEvent=P,this.target=W,this.currentTarget=null;for(var ce in f)f.hasOwnProperty(ce)&&(b=f[ce],this[ce]=b?b(P):P[ce]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Ks:ai,this.isPropagationStopped=ai,this}return G(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),m}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bs=Kn(yn),Ti=G({},yn,{view:0,detail:0}),pl=Kn(Ti),ah,To,Io,cc=G({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zv,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Io&&(Io&&f.type==="mousemove"?(ah=f.screenX-Io.screenX,To=f.screenY-Io.screenY):To=ah=0,Io=f),ah)},movementY:function(f){return"movementY"in f?f.movementY:To}}),cI=Kn(cc),hU=G({},cc,{dataTransfer:0}),fU=Kn(hU),pU=G({},Ti,{relatedTarget:0}),Bv=Kn(pU),mU=G({},yn,{animationName:0,elapsedTime:0,pseudoElement:0}),gU=Kn(mU),xU=G({},yn,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),yU=Kn(xU),vU=G({},yn,{data:0}),uI=Kn(vU),bU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SU(f){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(f):(f=NU[f])?!!m[f]:!1}function zv(){return SU}var kU=G({},Ti,{key:function(f){if(f.key){var m=bU[f.key]||f.key;if(m!=="Unidentified")return m}return f.type==="keypress"?(f=Mn(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?wU[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zv,charCode:function(f){return f.type==="keypress"?Mn(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Mn(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),CU=Kn(kU),TU=G({},cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dI=Kn(TU),IU=G({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zv}),jU=Kn(IU),EU=G({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$U=Kn(EU),AU=G({},cc,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),RU=Kn(AU),DU=[9,13,27,32],Vv=l&&"CompositionEvent"in window,np=null;l&&"documentMode"in document&&(np=document.documentMode);var PU=l&&"TextEvent"in window&&!np,hI=l&&(!Vv||np&&8<np&&11>=np),fI=" ",pI=!1;function mI(f,m){switch(f){case"keyup":return DU.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gI(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var oh=!1;function _U(f,m){switch(f){case"compositionend":return gI(m);case"keypress":return m.which!==32?null:(pI=!0,fI);case"textInput":return f=m.data,f===fI&&pI?null:f;default:return null}}function OU(f,m){if(oh)return f==="compositionend"||!Vv&&mI(f,m)?(f=Fn(),tn=Ut=ut=null,oh=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return hI&&m.locale!=="ko"?null:m.data;default:return null}}var FU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xI(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m==="input"?!!FU[f.type]:m==="textarea"}function yI(f,m,b,S){dt(S),m=yx(m,"onChange"),0<m.length&&(b=new Bs("onChange","change",null,b,S),f.push({event:b,listeners:m}))}var sp=null,rp=null;function MU(f){OI(f,0)}function px(f){var m=hh(f);if(Ye(m))return f}function LU(f,m){if(f==="change")return m}var vI=!1;if(l){var Uv;if(l){var Wv="oninput"in document;if(!Wv){var bI=document.createElement("div");bI.setAttribute("oninput","return;"),Wv=typeof bI.oninput=="function"}Uv=Wv}else Uv=!1;vI=Uv&&(!document.documentMode||9<document.documentMode)}function wI(){sp&&(sp.detachEvent("onpropertychange",NI),rp=sp=null)}function NI(f){if(f.propertyName==="value"&&px(rp)){var m=[];yI(m,rp,f,hn(f)),_n(MU,m)}}function BU(f,m,b){f==="focusin"?(wI(),sp=m,rp=b,sp.attachEvent("onpropertychange",NI)):f==="focusout"&&wI()}function zU(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return px(rp)}function VU(f,m){if(f==="click")return px(m)}function UU(f,m){if(f==="input"||f==="change")return px(m)}function WU(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var Wa=typeof Object.is=="function"?Object.is:WU;function ip(f,m){if(Wa(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var b=Object.keys(f),S=Object.keys(m);if(b.length!==S.length)return!1;for(S=0;S<b.length;S++){var E=b[S];if(!c.call(m,E)||!Wa(f[E],m[E]))return!1}return!0}function SI(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function kI(f,m){var b=SI(f);f=0;for(var S;b;){if(b.nodeType===3){if(S=f+b.textContent.length,f<=m&&S>=m)return{node:b,offset:m-f};f=S}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=SI(b)}}function CI(f,m){return f&&m?f===m?!0:f&&f.nodeType===3?!1:m&&m.nodeType===3?CI(f,m.parentNode):"contains"in f?f.contains(m):f.compareDocumentPosition?!!(f.compareDocumentPosition(m)&16):!1:!1}function TI(){for(var f=window,m=me();m instanceof f.HTMLIFrameElement;){try{var b=typeof m.contentWindow.location.href=="string"}catch{b=!1}if(b)f=m.contentWindow;else break;m=me(f.document)}return m}function Gv(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||m==="textarea"||f.contentEditable==="true")}function GU(f){var m=TI(),b=f.focusedElem,S=f.selectionRange;if(m!==b&&b&&b.ownerDocument&&CI(b.ownerDocument.documentElement,b)){if(S!==null&&Gv(b)){if(m=S.start,f=S.end,f===void 0&&(f=m),"selectionStart"in b)b.selectionStart=m,b.selectionEnd=Math.min(f,b.value.length);else if(f=(m=b.ownerDocument||document)&&m.defaultView||window,f.getSelection){f=f.getSelection();var E=b.textContent.length,P=Math.min(S.start,E);S=S.end===void 0?P:Math.min(S.end,E),!f.extend&&P>S&&(E=S,S=P,P=E),E=kI(b,P);var W=kI(b,S);E&&W&&(f.rangeCount!==1||f.anchorNode!==E.node||f.anchorOffset!==E.offset||f.focusNode!==W.node||f.focusOffset!==W.offset)&&(m=m.createRange(),m.setStart(E.node,E.offset),f.removeAllRanges(),P>S?(f.addRange(m),f.extend(W.node,W.offset)):(m.setEnd(W.node,W.offset),f.addRange(m)))}}for(m=[],f=b;f=f.parentNode;)f.nodeType===1&&m.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<m.length;b++)f=m[b],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var HU=l&&"documentMode"in document&&11>=document.documentMode,lh=null,Hv=null,ap=null,Kv=!1;function II(f,m,b){var S=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Kv||lh==null||lh!==me(S)||(S=lh,"selectionStart"in S&&Gv(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),ap&&ip(ap,S)||(ap=S,S=yx(Hv,"onSelect"),0<S.length&&(m=new Bs("onSelect","select",null,m,b),f.push({event:m,listeners:S}),m.target=lh)))}function mx(f,m){var b={};return b[f.toLowerCase()]=m.toLowerCase(),b["Webkit"+f]="webkit"+m,b["Moz"+f]="moz"+m,b}var ch={animationend:mx("Animation","AnimationEnd"),animationiteration:mx("Animation","AnimationIteration"),animationstart:mx("Animation","AnimationStart"),transitionend:mx("Transition","TransitionEnd")},qv={},jI={};l&&(jI=document.createElement("div").style,"AnimationEvent"in window||(delete ch.animationend.animation,delete ch.animationiteration.animation,delete ch.animationstart.animation),"TransitionEvent"in window||delete ch.transitionend.transition);function gx(f){if(qv[f])return qv[f];if(!ch[f])return f;var m=ch[f],b;for(b in m)if(m.hasOwnProperty(b)&&b in jI)return qv[f]=m[b];return f}var EI=gx("animationend"),$I=gx("animationiteration"),AI=gx("animationstart"),RI=gx("transitionend"),DI=new Map,PI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uc(f,m){DI.set(f,m),i(m,[f])}for(var Xv=0;Xv<PI.length;Xv++){var Yv=PI[Xv],KU=Yv.toLowerCase(),qU=Yv[0].toUpperCase()+Yv.slice(1);uc(KU,"on"+qU)}uc(EI,"onAnimationEnd"),uc($I,"onAnimationIteration"),uc(AI,"onAnimationStart"),uc("dblclick","onDoubleClick"),uc("focusin","onFocus"),uc("focusout","onBlur"),uc(RI,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var op="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XU=new Set("cancel close invalid load scroll toggle".split(" ").concat(op));function _I(f,m,b){var S=f.type||"unknown-event";f.currentTarget=b,So(S,m,void 0,f),f.currentTarget=null}function OI(f,m){m=(m&4)!==0;for(var b=0;b<f.length;b++){var S=f[b],E=S.event;S=S.listeners;e:{var P=void 0;if(m)for(var W=S.length-1;0<=W;W--){var ce=S[W],ye=ce.instance,Fe=ce.currentTarget;if(ce=ce.listener,ye!==P&&E.isPropagationStopped())break e;_I(E,ce,Fe),P=ye}else for(W=0;W<S.length;W++){if(ce=S[W],ye=ce.instance,Fe=ce.currentTarget,ce=ce.listener,ye!==P&&E.isPropagationStopped())break e;_I(E,ce,Fe),P=ye}}}if(Br)throw f=tc,Br=!1,tc=null,f}function us(f,m){var b=m[rb];b===void 0&&(b=m[rb]=new Set);var S=f+"__bubble";b.has(S)||(FI(m,f,2,!1),b.add(S))}function Zv(f,m,b){var S=0;m&&(S|=4),FI(b,f,S,m)}var xx="_reactListening"+Math.random().toString(36).slice(2);function lp(f){if(!f[xx]){f[xx]=!0,s.forEach(function(b){b!=="selectionchange"&&(XU.has(b)||Zv(b,!1,f),Zv(b,!0,f))});var m=f.nodeType===9?f:f.ownerDocument;m===null||m[xx]||(m[xx]=!0,Zv("selectionchange",!1,m))}}function FI(f,m,b,S){switch(ct(m)){case 1:var E=pe;break;case 4:E=Oe;break;default:E=Ge}b=E.bind(null,m,b,f),E=void 0,!Rs||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(E=!0),S?E!==void 0?f.addEventListener(m,b,{capture:!0,passive:E}):f.addEventListener(m,b,!0):E!==void 0?f.addEventListener(m,b,{passive:E}):f.addEventListener(m,b,!1)}function Jv(f,m,b,S,E){var P=S;if((m&1)===0&&(m&2)===0&&S!==null)e:for(;;){if(S===null)return;var W=S.tag;if(W===3||W===4){var ce=S.stateNode.containerInfo;if(ce===E||ce.nodeType===8&&ce.parentNode===E)break;if(W===4)for(W=S.return;W!==null;){var ye=W.tag;if((ye===3||ye===4)&&(ye=W.stateNode.containerInfo,ye===E||ye.nodeType===8&&ye.parentNode===E))return;W=W.return}for(;ce!==null;){if(W=$u(ce),W===null)return;if(ye=W.tag,ye===5||ye===6){S=P=W;continue e}ce=ce.parentNode}}S=S.return}_n(function(){var Fe=P,tt=hn(b),rt=[];e:{var Qe=DI.get(f);if(Qe!==void 0){var wt=Bs,Tt=f;switch(f){case"keypress":if(Mn(b)===0)break e;case"keydown":case"keyup":wt=CU;break;case"focusin":Tt="focus",wt=Bv;break;case"focusout":Tt="blur",wt=Bv;break;case"beforeblur":case"afterblur":wt=Bv;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":wt=cI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":wt=fU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":wt=jU;break;case EI:case $I:case AI:wt=gU;break;case RI:wt=$U;break;case"scroll":wt=pl;break;case"wheel":wt=RU;break;case"copy":case"cut":case"paste":wt=yU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":wt=dI}var Rt=(m&4)!==0,zs=!Rt&&f==="scroll",Ae=Rt?Qe!==null?Qe+"Capture":null:Qe;Rt=[];for(var Se=Fe,_e;Se!==null;){_e=Se;var lt=_e.stateNode;if(_e.tag===5&&lt!==null&&(_e=lt,Ae!==null&&(lt=cs(Se,Ae),lt!=null&&Rt.push(cp(Se,lt,_e)))),zs)break;Se=Se.return}0<Rt.length&&(Qe=new wt(Qe,Tt,null,b,tt),rt.push({event:Qe,listeners:Rt}))}}if((m&7)===0){e:{if(Qe=f==="mouseover"||f==="pointerover",wt=f==="mouseout"||f==="pointerout",Qe&&b!==Rn&&(Tt=b.relatedTarget||b.fromElement)&&($u(Tt)||Tt[ml]))break e;if((wt||Qe)&&(Qe=tt.window===tt?tt:(Qe=tt.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,wt?(Tt=b.relatedTarget||b.toElement,wt=Fe,Tt=Tt?$u(Tt):null,Tt!==null&&(zs=za(Tt),Tt!==zs||Tt.tag!==5&&Tt.tag!==6)&&(Tt=null)):(wt=null,Tt=Fe),wt!==Tt)){if(Rt=cI,lt="onMouseLeave",Ae="onMouseEnter",Se="mouse",(f==="pointerout"||f==="pointerover")&&(Rt=dI,lt="onPointerLeave",Ae="onPointerEnter",Se="pointer"),zs=wt==null?Qe:hh(wt),_e=Tt==null?Qe:hh(Tt),Qe=new Rt(lt,Se+"leave",wt,b,tt),Qe.target=zs,Qe.relatedTarget=_e,lt=null,$u(tt)===Fe&&(Rt=new Rt(Ae,Se+"enter",Tt,b,tt),Rt.target=_e,Rt.relatedTarget=zs,lt=Rt),zs=lt,wt&&Tt)t:{for(Rt=wt,Ae=Tt,Se=0,_e=Rt;_e;_e=uh(_e))Se++;for(_e=0,lt=Ae;lt;lt=uh(lt))_e++;for(;0<Se-_e;)Rt=uh(Rt),Se--;for(;0<_e-Se;)Ae=uh(Ae),_e--;for(;Se--;){if(Rt===Ae||Ae!==null&&Rt===Ae.alternate)break t;Rt=uh(Rt),Ae=uh(Ae)}Rt=null}else Rt=null;wt!==null&&MI(rt,Qe,wt,Rt,!1),Tt!==null&&zs!==null&&MI(rt,zs,Tt,Rt,!0)}}e:{if(Qe=Fe?hh(Fe):window,wt=Qe.nodeName&&Qe.nodeName.toLowerCase(),wt==="select"||wt==="input"&&Qe.type==="file")var Pt=LU;else if(xI(Qe))if(vI)Pt=UU;else{Pt=zU;var zt=BU}else(wt=Qe.nodeName)&&wt.toLowerCase()==="input"&&(Qe.type==="checkbox"||Qe.type==="radio")&&(Pt=VU);if(Pt&&(Pt=Pt(f,Fe))){yI(rt,Pt,b,tt);break e}zt&&zt(f,Qe,Fe),f==="focusout"&&(zt=Qe._wrapperState)&&zt.controlled&&Qe.type==="number"&&at(Qe,"number",Qe.value)}switch(zt=Fe?hh(Fe):window,f){case"focusin":(xI(zt)||zt.contentEditable==="true")&&(lh=zt,Hv=Fe,ap=null);break;case"focusout":ap=Hv=lh=null;break;case"mousedown":Kv=!0;break;case"contextmenu":case"mouseup":case"dragend":Kv=!1,II(rt,b,tt);break;case"selectionchange":if(HU)break;case"keydown":case"keyup":II(rt,b,tt)}var Vt;if(Vv)e:{switch(f){case"compositionstart":var Zt="onCompositionStart";break e;case"compositionend":Zt="onCompositionEnd";break e;case"compositionupdate":Zt="onCompositionUpdate";break e}Zt=void 0}else oh?mI(f,b)&&(Zt="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(Zt="onCompositionStart");Zt&&(hI&&b.locale!=="ko"&&(oh||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&oh&&(Vt=Fn()):(ut=tt,Ut="value"in ut?ut.value:ut.textContent,oh=!0)),zt=yx(Fe,Zt),0<zt.length&&(Zt=new uI(Zt,f,null,b,tt),rt.push({event:Zt,listeners:zt}),Vt?Zt.data=Vt:(Vt=gI(b),Vt!==null&&(Zt.data=Vt)))),(Vt=PU?_U(f,b):OU(f,b))&&(Fe=yx(Fe,"onBeforeInput"),0<Fe.length&&(tt=new uI("onBeforeInput","beforeinput",null,b,tt),rt.push({event:tt,listeners:Fe}),tt.data=Vt))}OI(rt,m)})}function cp(f,m,b){return{instance:f,listener:m,currentTarget:b}}function yx(f,m){for(var b=m+"Capture",S=[];f!==null;){var E=f,P=E.stateNode;E.tag===5&&P!==null&&(E=P,P=cs(f,b),P!=null&&S.unshift(cp(f,P,E)),P=cs(f,m),P!=null&&S.push(cp(f,P,E))),f=f.return}return S}function uh(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function MI(f,m,b,S,E){for(var P=m._reactName,W=[];b!==null&&b!==S;){var ce=b,ye=ce.alternate,Fe=ce.stateNode;if(ye!==null&&ye===S)break;ce.tag===5&&Fe!==null&&(ce=Fe,E?(ye=cs(b,P),ye!=null&&W.unshift(cp(b,ye,ce))):E||(ye=cs(b,P),ye!=null&&W.push(cp(b,ye,ce)))),b=b.return}W.length!==0&&f.push({event:m,listeners:W})}var YU=/\r\n?/g,ZU=/\u0000|\uFFFD/g;function LI(f){return(typeof f=="string"?f:""+f).replace(YU,`
`).replace(ZU,"")}function vx(f,m,b){if(m=LI(m),LI(f)!==m&&b)throw Error(n(425))}function bx(){}var Qv=null,eb=null;function tb(f,m){return f==="textarea"||f==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var nb=typeof setTimeout=="function"?setTimeout:void 0,JU=typeof clearTimeout=="function"?clearTimeout:void 0,BI=typeof Promise=="function"?Promise:void 0,QU=typeof queueMicrotask=="function"?queueMicrotask:typeof BI<"u"?function(f){return BI.resolve(null).then(f).catch(eW)}:nb;function eW(f){setTimeout(function(){throw f})}function sb(f,m){var b=m,S=0;do{var E=b.nextSibling;if(f.removeChild(b),E&&E.nodeType===8)if(b=E.data,b==="/$"){if(S===0){f.removeChild(E),ae(m);return}S--}else b!=="$"&&b!=="$?"&&b!=="$!"||S++;b=E}while(b);ae(m)}function dc(f){for(;f!=null;f=f.nextSibling){var m=f.nodeType;if(m===1||m===3)break;if(m===8){if(m=f.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return f}function zI(f){f=f.previousSibling;for(var m=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(m===0)return f;m--}else b==="/$"&&m++}f=f.previousSibling}return null}var dh=Math.random().toString(36).slice(2),jo="__reactFiber$"+dh,up="__reactProps$"+dh,ml="__reactContainer$"+dh,rb="__reactEvents$"+dh,tW="__reactListeners$"+dh,nW="__reactHandles$"+dh;function $u(f){var m=f[jo];if(m)return m;for(var b=f.parentNode;b;){if(m=b[ml]||b[jo]){if(b=m.alternate,m.child!==null||b!==null&&b.child!==null)for(f=zI(f);f!==null;){if(b=f[jo])return b;f=zI(f)}return m}f=b,b=f.parentNode}return null}function dp(f){return f=f[jo]||f[ml],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function hh(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(n(33))}function wx(f){return f[up]||null}var ib=[],fh=-1;function hc(f){return{current:f}}function ds(f){0>fh||(f.current=ib[fh],ib[fh]=null,fh--)}function is(f,m){fh++,ib[fh]=f.current,f.current=m}var fc={},zr=hc(fc),Ii=hc(!1),Au=fc;function ph(f,m){var b=f.type.contextTypes;if(!b)return fc;var S=f.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===m)return S.__reactInternalMemoizedMaskedChildContext;var E={},P;for(P in b)E[P]=m[P];return S&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=E),E}function ji(f){return f=f.childContextTypes,f!=null}function Nx(){ds(Ii),ds(zr)}function VI(f,m,b){if(zr.current!==fc)throw Error(n(168));is(zr,m),is(Ii,b)}function UI(f,m,b){var S=f.stateNode;if(m=m.childContextTypes,typeof S.getChildContext!="function")return b;S=S.getChildContext();for(var E in S)if(!(E in m))throw Error(n(108,Ce(f)||"Unknown",E));return G({},b,S)}function Sx(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||fc,Au=zr.current,is(zr,f),is(Ii,Ii.current),!0}function WI(f,m,b){var S=f.stateNode;if(!S)throw Error(n(169));b?(f=UI(f,m,Au),S.__reactInternalMemoizedMergedChildContext=f,ds(Ii),ds(zr),is(zr,f)):ds(Ii),is(Ii,b)}var gl=null,kx=!1,ab=!1;function GI(f){gl===null?gl=[f]:gl.push(f)}function sW(f){kx=!0,GI(f)}function pc(){if(!ab&&gl!==null){ab=!0;var f=0,m=kn;try{var b=gl;for(kn=1;f<b.length;f++){var S=b[f];do S=S(!0);while(S!==null)}gl=null,kx=!1}catch(E){throw gl!==null&&(gl=gl.slice(f+1)),Zd(ul,pc),E}finally{kn=m,ab=!1}}return null}var mh=[],gh=0,Cx=null,Tx=0,da=[],ha=0,Ru=null,xl=1,yl="";function Du(f,m){mh[gh++]=Tx,mh[gh++]=Cx,Cx=f,Tx=m}function HI(f,m,b){da[ha++]=xl,da[ha++]=yl,da[ha++]=Ru,Ru=f;var S=xl;f=yl;var E=32-rs(S)-1;S&=~(1<<E),b+=1;var P=32-rs(m)+E;if(30<P){var W=E-E%5;P=(S&(1<<W)-1).toString(32),S>>=W,E-=W,xl=1<<32-rs(m)+E|b<<E|S,yl=P+f}else xl=1<<P|b<<E|S,yl=f}function ob(f){f.return!==null&&(Du(f,1),HI(f,1,0))}function lb(f){for(;f===Cx;)Cx=mh[--gh],mh[gh]=null,Tx=mh[--gh],mh[gh]=null;for(;f===Ru;)Ru=da[--ha],da[ha]=null,yl=da[--ha],da[ha]=null,xl=da[--ha],da[ha]=null}var Zi=null,Ji=null,ys=!1,Ga=null;function KI(f,m){var b=ga(5,null,null,0);b.elementType="DELETED",b.stateNode=m,b.return=f,m=f.deletions,m===null?(f.deletions=[b],f.flags|=16):m.push(b)}function qI(f,m){switch(f.tag){case 5:var b=f.type;return m=m.nodeType!==1||b.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(f.stateNode=m,Zi=f,Ji=dc(m.firstChild),!0):!1;case 6:return m=f.pendingProps===""||m.nodeType!==3?null:m,m!==null?(f.stateNode=m,Zi=f,Ji=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(b=Ru!==null?{id:xl,overflow:yl}:null,f.memoizedState={dehydrated:m,treeContext:b,retryLane:1073741824},b=ga(18,null,null,0),b.stateNode=m,b.return=f,f.child=b,Zi=f,Ji=null,!0):!1;default:return!1}}function cb(f){return(f.mode&1)!==0&&(f.flags&128)===0}function ub(f){if(ys){var m=Ji;if(m){var b=m;if(!qI(f,m)){if(cb(f))throw Error(n(418));m=dc(b.nextSibling);var S=Zi;m&&qI(f,m)?KI(S,b):(f.flags=f.flags&-4097|2,ys=!1,Zi=f)}}else{if(cb(f))throw Error(n(418));f.flags=f.flags&-4097|2,ys=!1,Zi=f}}}function XI(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Zi=f}function Ix(f){if(f!==Zi)return!1;if(!ys)return XI(f),ys=!0,!1;var m;if((m=f.tag!==3)&&!(m=f.tag!==5)&&(m=f.type,m=m!=="head"&&m!=="body"&&!tb(f.type,f.memoizedProps)),m&&(m=Ji)){if(cb(f))throw YI(),Error(n(418));for(;m;)KI(f,m),m=dc(m.nextSibling)}if(XI(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,m=0;f;){if(f.nodeType===8){var b=f.data;if(b==="/$"){if(m===0){Ji=dc(f.nextSibling);break e}m--}else b!=="$"&&b!=="$!"&&b!=="$?"||m++}f=f.nextSibling}Ji=null}}else Ji=Zi?dc(f.stateNode.nextSibling):null;return!0}function YI(){for(var f=Ji;f;)f=dc(f.nextSibling)}function xh(){Ji=Zi=null,ys=!1}function db(f){Ga===null?Ga=[f]:Ga.push(f)}var rW=C.ReactCurrentBatchConfig;function hp(f,m,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(n(309));var S=b.stateNode}if(!S)throw Error(n(147,f));var E=S,P=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===P?m.ref:(m=function(W){var ce=E.refs;W===null?delete ce[P]:ce[P]=W},m._stringRef=P,m)}if(typeof f!="string")throw Error(n(284));if(!b._owner)throw Error(n(290,f))}return f}function jx(f,m){throw f=Object.prototype.toString.call(m),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function ZI(f){var m=f._init;return m(f._payload)}function JI(f){function m(Ae,Se){if(f){var _e=Ae.deletions;_e===null?(Ae.deletions=[Se],Ae.flags|=16):_e.push(Se)}}function b(Ae,Se){if(!f)return null;for(;Se!==null;)m(Ae,Se),Se=Se.sibling;return null}function S(Ae,Se){for(Ae=new Map;Se!==null;)Se.key!==null?Ae.set(Se.key,Se):Ae.set(Se.index,Se),Se=Se.sibling;return Ae}function E(Ae,Se){return Ae=Nc(Ae,Se),Ae.index=0,Ae.sibling=null,Ae}function P(Ae,Se,_e){return Ae.index=_e,f?(_e=Ae.alternate,_e!==null?(_e=_e.index,_e<Se?(Ae.flags|=2,Se):_e):(Ae.flags|=2,Se)):(Ae.flags|=1048576,Se)}function W(Ae){return f&&Ae.alternate===null&&(Ae.flags|=2),Ae}function ce(Ae,Se,_e,lt){return Se===null||Se.tag!==6?(Se=nw(_e,Ae.mode,lt),Se.return=Ae,Se):(Se=E(Se,_e),Se.return=Ae,Se)}function ye(Ae,Se,_e,lt){var Pt=_e.type;return Pt===_?tt(Ae,Se,_e.props.children,lt,_e.key):Se!==null&&(Se.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===ee&&ZI(Pt)===Se.type)?(lt=E(Se,_e.props),lt.ref=hp(Ae,Se,_e),lt.return=Ae,lt):(lt=Jx(_e.type,_e.key,_e.props,null,Ae.mode,lt),lt.ref=hp(Ae,Se,_e),lt.return=Ae,lt)}function Fe(Ae,Se,_e,lt){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==_e.containerInfo||Se.stateNode.implementation!==_e.implementation?(Se=sw(_e,Ae.mode,lt),Se.return=Ae,Se):(Se=E(Se,_e.children||[]),Se.return=Ae,Se)}function tt(Ae,Se,_e,lt,Pt){return Se===null||Se.tag!==7?(Se=zu(_e,Ae.mode,lt,Pt),Se.return=Ae,Se):(Se=E(Se,_e),Se.return=Ae,Se)}function rt(Ae,Se,_e){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=nw(""+Se,Ae.mode,_e),Se.return=Ae,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case j:return _e=Jx(Se.type,Se.key,Se.props,null,Ae.mode,_e),_e.ref=hp(Ae,null,Se),_e.return=Ae,_e;case R:return Se=sw(Se,Ae.mode,_e),Se.return=Ae,Se;case ee:var lt=Se._init;return rt(Ae,lt(Se._payload),_e)}if(nt(Se)||Q(Se))return Se=zu(Se,Ae.mode,_e,null),Se.return=Ae,Se;jx(Ae,Se)}return null}function Qe(Ae,Se,_e,lt){var Pt=Se!==null?Se.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number")return Pt!==null?null:ce(Ae,Se,""+_e,lt);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case j:return _e.key===Pt?ye(Ae,Se,_e,lt):null;case R:return _e.key===Pt?Fe(Ae,Se,_e,lt):null;case ee:return Pt=_e._init,Qe(Ae,Se,Pt(_e._payload),lt)}if(nt(_e)||Q(_e))return Pt!==null?null:tt(Ae,Se,_e,lt,null);jx(Ae,_e)}return null}function wt(Ae,Se,_e,lt,Pt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return Ae=Ae.get(_e)||null,ce(Se,Ae,""+lt,Pt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case j:return Ae=Ae.get(lt.key===null?_e:lt.key)||null,ye(Se,Ae,lt,Pt);case R:return Ae=Ae.get(lt.key===null?_e:lt.key)||null,Fe(Se,Ae,lt,Pt);case ee:var zt=lt._init;return wt(Ae,Se,_e,zt(lt._payload),Pt)}if(nt(lt)||Q(lt))return Ae=Ae.get(_e)||null,tt(Se,Ae,lt,Pt,null);jx(Se,lt)}return null}function Tt(Ae,Se,_e,lt){for(var Pt=null,zt=null,Vt=Se,Zt=Se=0,vr=null;Vt!==null&&Zt<_e.length;Zt++){Vt.index>Zt?(vr=Vt,Vt=null):vr=Vt.sibling;var Dn=Qe(Ae,Vt,_e[Zt],lt);if(Dn===null){Vt===null&&(Vt=vr);break}f&&Vt&&Dn.alternate===null&&m(Ae,Vt),Se=P(Dn,Se,Zt),zt===null?Pt=Dn:zt.sibling=Dn,zt=Dn,Vt=vr}if(Zt===_e.length)return b(Ae,Vt),ys&&Du(Ae,Zt),Pt;if(Vt===null){for(;Zt<_e.length;Zt++)Vt=rt(Ae,_e[Zt],lt),Vt!==null&&(Se=P(Vt,Se,Zt),zt===null?Pt=Vt:zt.sibling=Vt,zt=Vt);return ys&&Du(Ae,Zt),Pt}for(Vt=S(Ae,Vt);Zt<_e.length;Zt++)vr=wt(Vt,Ae,Zt,_e[Zt],lt),vr!==null&&(f&&vr.alternate!==null&&Vt.delete(vr.key===null?Zt:vr.key),Se=P(vr,Se,Zt),zt===null?Pt=vr:zt.sibling=vr,zt=vr);return f&&Vt.forEach(function(Sc){return m(Ae,Sc)}),ys&&Du(Ae,Zt),Pt}function Rt(Ae,Se,_e,lt){var Pt=Q(_e);if(typeof Pt!="function")throw Error(n(150));if(_e=Pt.call(_e),_e==null)throw Error(n(151));for(var zt=Pt=null,Vt=Se,Zt=Se=0,vr=null,Dn=_e.next();Vt!==null&&!Dn.done;Zt++,Dn=_e.next()){Vt.index>Zt?(vr=Vt,Vt=null):vr=Vt.sibling;var Sc=Qe(Ae,Vt,Dn.value,lt);if(Sc===null){Vt===null&&(Vt=vr);break}f&&Vt&&Sc.alternate===null&&m(Ae,Vt),Se=P(Sc,Se,Zt),zt===null?Pt=Sc:zt.sibling=Sc,zt=Sc,Vt=vr}if(Dn.done)return b(Ae,Vt),ys&&Du(Ae,Zt),Pt;if(Vt===null){for(;!Dn.done;Zt++,Dn=_e.next())Dn=rt(Ae,Dn.value,lt),Dn!==null&&(Se=P(Dn,Se,Zt),zt===null?Pt=Dn:zt.sibling=Dn,zt=Dn);return ys&&Du(Ae,Zt),Pt}for(Vt=S(Ae,Vt);!Dn.done;Zt++,Dn=_e.next())Dn=wt(Vt,Ae,Zt,Dn.value,lt),Dn!==null&&(f&&Dn.alternate!==null&&Vt.delete(Dn.key===null?Zt:Dn.key),Se=P(Dn,Se,Zt),zt===null?Pt=Dn:zt.sibling=Dn,zt=Dn);return f&&Vt.forEach(function(FW){return m(Ae,FW)}),ys&&Du(Ae,Zt),Pt}function zs(Ae,Se,_e,lt){if(typeof _e=="object"&&_e!==null&&_e.type===_&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case j:e:{for(var Pt=_e.key,zt=Se;zt!==null;){if(zt.key===Pt){if(Pt=_e.type,Pt===_){if(zt.tag===7){b(Ae,zt.sibling),Se=E(zt,_e.props.children),Se.return=Ae,Ae=Se;break e}}else if(zt.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===ee&&ZI(Pt)===zt.type){b(Ae,zt.sibling),Se=E(zt,_e.props),Se.ref=hp(Ae,zt,_e),Se.return=Ae,Ae=Se;break e}b(Ae,zt);break}else m(Ae,zt);zt=zt.sibling}_e.type===_?(Se=zu(_e.props.children,Ae.mode,lt,_e.key),Se.return=Ae,Ae=Se):(lt=Jx(_e.type,_e.key,_e.props,null,Ae.mode,lt),lt.ref=hp(Ae,Se,_e),lt.return=Ae,Ae=lt)}return W(Ae);case R:e:{for(zt=_e.key;Se!==null;){if(Se.key===zt)if(Se.tag===4&&Se.stateNode.containerInfo===_e.containerInfo&&Se.stateNode.implementation===_e.implementation){b(Ae,Se.sibling),Se=E(Se,_e.children||[]),Se.return=Ae,Ae=Se;break e}else{b(Ae,Se);break}else m(Ae,Se);Se=Se.sibling}Se=sw(_e,Ae.mode,lt),Se.return=Ae,Ae=Se}return W(Ae);case ee:return zt=_e._init,zs(Ae,Se,zt(_e._payload),lt)}if(nt(_e))return Tt(Ae,Se,_e,lt);if(Q(_e))return Rt(Ae,Se,_e,lt);jx(Ae,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"?(_e=""+_e,Se!==null&&Se.tag===6?(b(Ae,Se.sibling),Se=E(Se,_e),Se.return=Ae,Ae=Se):(b(Ae,Se),Se=nw(_e,Ae.mode,lt),Se.return=Ae,Ae=Se),W(Ae)):b(Ae,Se)}return zs}var yh=JI(!0),QI=JI(!1),Ex=hc(null),$x=null,vh=null,hb=null;function fb(){hb=vh=$x=null}function pb(f){var m=Ex.current;ds(Ex),f._currentValue=m}function mb(f,m,b){for(;f!==null;){var S=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,S!==null&&(S.childLanes|=m)):S!==null&&(S.childLanes&m)!==m&&(S.childLanes|=m),f===b)break;f=f.return}}function bh(f,m){$x=f,hb=vh=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&m)!==0&&(Ei=!0),f.firstContext=null)}function fa(f){var m=f._currentValue;if(hb!==f)if(f={context:f,memoizedValue:m,next:null},vh===null){if($x===null)throw Error(n(308));vh=f,$x.dependencies={lanes:0,firstContext:f}}else vh=vh.next=f;return m}var Pu=null;function gb(f){Pu===null?Pu=[f]:Pu.push(f)}function ej(f,m,b,S){var E=m.interleaved;return E===null?(b.next=b,gb(m)):(b.next=E.next,E.next=b),m.interleaved=b,vl(f,S)}function vl(f,m){f.lanes|=m;var b=f.alternate;for(b!==null&&(b.lanes|=m),b=f,f=f.return;f!==null;)f.childLanes|=m,b=f.alternate,b!==null&&(b.childLanes|=m),b=f,f=f.return;return b.tag===3?b.stateNode:null}var mc=!1;function xb(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tj(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function bl(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function gc(f,m,b){var S=f.updateQueue;if(S===null)return null;if(S=S.shared,(jn&2)!==0){var E=S.pending;return E===null?m.next=m:(m.next=E.next,E.next=m),S.pending=m,vl(f,b)}return E=S.interleaved,E===null?(m.next=m,gb(S)):(m.next=E.next,E.next=m),S.interleaved=m,vl(f,b)}function Ax(f,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194240)!==0)){var S=m.lanes;S&=f.pendingLanes,b|=S,m.lanes=b,fl(f,b)}}function nj(f,m){var b=f.updateQueue,S=f.alternate;if(S!==null&&(S=S.updateQueue,b===S)){var E=null,P=null;if(b=b.firstBaseUpdate,b!==null){do{var W={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};P===null?E=P=W:P=P.next=W,b=b.next}while(b!==null);P===null?E=P=m:P=P.next=m}else E=P=m;b={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:P,shared:S.shared,effects:S.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=m:f.next=m,b.lastBaseUpdate=m}function Rx(f,m,b,S){var E=f.updateQueue;mc=!1;var P=E.firstBaseUpdate,W=E.lastBaseUpdate,ce=E.shared.pending;if(ce!==null){E.shared.pending=null;var ye=ce,Fe=ye.next;ye.next=null,W===null?P=Fe:W.next=Fe,W=ye;var tt=f.alternate;tt!==null&&(tt=tt.updateQueue,ce=tt.lastBaseUpdate,ce!==W&&(ce===null?tt.firstBaseUpdate=Fe:ce.next=Fe,tt.lastBaseUpdate=ye))}if(P!==null){var rt=E.baseState;W=0,tt=Fe=ye=null,ce=P;do{var Qe=ce.lane,wt=ce.eventTime;if((S&Qe)===Qe){tt!==null&&(tt=tt.next={eventTime:wt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Tt=f,Rt=ce;switch(Qe=m,wt=b,Rt.tag){case 1:if(Tt=Rt.payload,typeof Tt=="function"){rt=Tt.call(wt,rt,Qe);break e}rt=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Rt.payload,Qe=typeof Tt=="function"?Tt.call(wt,rt,Qe):Tt,Qe==null)break e;rt=G({},rt,Qe);break e;case 2:mc=!0}}ce.callback!==null&&ce.lane!==0&&(f.flags|=64,Qe=E.effects,Qe===null?E.effects=[ce]:Qe.push(ce))}else wt={eventTime:wt,lane:Qe,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},tt===null?(Fe=tt=wt,ye=rt):tt=tt.next=wt,W|=Qe;if(ce=ce.next,ce===null){if(ce=E.shared.pending,ce===null)break;Qe=ce,ce=Qe.next,Qe.next=null,E.lastBaseUpdate=Qe,E.shared.pending=null}}while(!0);if(tt===null&&(ye=rt),E.baseState=ye,E.firstBaseUpdate=Fe,E.lastBaseUpdate=tt,m=E.shared.interleaved,m!==null){E=m;do W|=E.lane,E=E.next;while(E!==m)}else P===null&&(E.shared.lanes=0);Fu|=W,f.lanes=W,f.memoizedState=rt}}function sj(f,m,b){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var S=f[m],E=S.callback;if(E!==null){if(S.callback=null,S=b,typeof E!="function")throw Error(n(191,E));E.call(S)}}}var fp={},Eo=hc(fp),pp=hc(fp),mp=hc(fp);function _u(f){if(f===fp)throw Error(n(174));return f}function yb(f,m){switch(is(mp,m),is(pp,f),is(Eo,fp),f=m.nodeType,f){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:ms(null,"");break;default:f=f===8?m.parentNode:m,m=f.namespaceURI||null,f=f.tagName,m=ms(m,f)}ds(Eo),is(Eo,m)}function wh(){ds(Eo),ds(pp),ds(mp)}function rj(f){_u(mp.current);var m=_u(Eo.current),b=ms(m,f.type);m!==b&&(is(pp,f),is(Eo,b))}function vb(f){pp.current===f&&(ds(Eo),ds(pp))}var ks=hc(0);function Dx(f){for(var m=f;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var bb=[];function wb(){for(var f=0;f<bb.length;f++)bb[f]._workInProgressVersionPrimary=null;bb.length=0}var Px=C.ReactCurrentDispatcher,Nb=C.ReactCurrentBatchConfig,Ou=0,Cs=null,or=null,xr=null,_x=!1,gp=!1,xp=0,iW=0;function Vr(){throw Error(n(321))}function Sb(f,m){if(m===null)return!1;for(var b=0;b<m.length&&b<f.length;b++)if(!Wa(f[b],m[b]))return!1;return!0}function kb(f,m,b,S,E,P){if(Ou=P,Cs=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Px.current=f===null||f.memoizedState===null?cW:uW,f=b(S,E),gp){P=0;do{if(gp=!1,xp=0,25<=P)throw Error(n(301));P+=1,xr=or=null,m.updateQueue=null,Px.current=dW,f=b(S,E)}while(gp)}if(Px.current=Mx,m=or!==null&&or.next!==null,Ou=0,xr=or=Cs=null,_x=!1,m)throw Error(n(300));return f}function Cb(){var f=xp!==0;return xp=0,f}function $o(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xr===null?Cs.memoizedState=xr=f:xr=xr.next=f,xr}function pa(){if(or===null){var f=Cs.alternate;f=f!==null?f.memoizedState:null}else f=or.next;var m=xr===null?Cs.memoizedState:xr.next;if(m!==null)xr=m,or=f;else{if(f===null)throw Error(n(310));or=f,f={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},xr===null?Cs.memoizedState=xr=f:xr=xr.next=f}return xr}function yp(f,m){return typeof m=="function"?m(f):m}function Tb(f){var m=pa(),b=m.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=f;var S=or,E=S.baseQueue,P=b.pending;if(P!==null){if(E!==null){var W=E.next;E.next=P.next,P.next=W}S.baseQueue=E=P,b.pending=null}if(E!==null){P=E.next,S=S.baseState;var ce=W=null,ye=null,Fe=P;do{var tt=Fe.lane;if((Ou&tt)===tt)ye!==null&&(ye=ye.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),S=Fe.hasEagerState?Fe.eagerState:f(S,Fe.action);else{var rt={lane:tt,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};ye===null?(ce=ye=rt,W=S):ye=ye.next=rt,Cs.lanes|=tt,Fu|=tt}Fe=Fe.next}while(Fe!==null&&Fe!==P);ye===null?W=S:ye.next=ce,Wa(S,m.memoizedState)||(Ei=!0),m.memoizedState=S,m.baseState=W,m.baseQueue=ye,b.lastRenderedState=S}if(f=b.interleaved,f!==null){E=f;do P=E.lane,Cs.lanes|=P,Fu|=P,E=E.next;while(E!==f)}else E===null&&(b.lanes=0);return[m.memoizedState,b.dispatch]}function Ib(f){var m=pa(),b=m.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=f;var S=b.dispatch,E=b.pending,P=m.memoizedState;if(E!==null){b.pending=null;var W=E=E.next;do P=f(P,W.action),W=W.next;while(W!==E);Wa(P,m.memoizedState)||(Ei=!0),m.memoizedState=P,m.baseQueue===null&&(m.baseState=P),b.lastRenderedState=P}return[P,S]}function ij(){}function aj(f,m){var b=Cs,S=pa(),E=m(),P=!Wa(S.memoizedState,E);if(P&&(S.memoizedState=E,Ei=!0),S=S.queue,jb(cj.bind(null,b,S,f),[f]),S.getSnapshot!==m||P||xr!==null&&xr.memoizedState.tag&1){if(b.flags|=2048,vp(9,lj.bind(null,b,S,E,m),void 0,null),yr===null)throw Error(n(349));(Ou&30)!==0||oj(b,m,E)}return E}function oj(f,m,b){f.flags|=16384,f={getSnapshot:m,value:b},m=Cs.updateQueue,m===null?(m={lastEffect:null,stores:null},Cs.updateQueue=m,m.stores=[f]):(b=m.stores,b===null?m.stores=[f]:b.push(f))}function lj(f,m,b,S){m.value=b,m.getSnapshot=S,uj(m)&&dj(f)}function cj(f,m,b){return b(function(){uj(m)&&dj(f)})}function uj(f){var m=f.getSnapshot;f=f.value;try{var b=m();return!Wa(f,b)}catch{return!0}}function dj(f){var m=vl(f,1);m!==null&&Xa(m,f,1,-1)}function hj(f){var m=$o();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yp,lastRenderedState:f},m.queue=f,f=f.dispatch=lW.bind(null,Cs,f),[m.memoizedState,f]}function vp(f,m,b,S){return f={tag:f,create:m,destroy:b,deps:S,next:null},m=Cs.updateQueue,m===null?(m={lastEffect:null,stores:null},Cs.updateQueue=m,m.lastEffect=f.next=f):(b=m.lastEffect,b===null?m.lastEffect=f.next=f:(S=b.next,b.next=f,f.next=S,m.lastEffect=f)),f}function fj(){return pa().memoizedState}function Ox(f,m,b,S){var E=$o();Cs.flags|=f,E.memoizedState=vp(1|m,b,void 0,S===void 0?null:S)}function Fx(f,m,b,S){var E=pa();S=S===void 0?null:S;var P=void 0;if(or!==null){var W=or.memoizedState;if(P=W.destroy,S!==null&&Sb(S,W.deps)){E.memoizedState=vp(m,b,P,S);return}}Cs.flags|=f,E.memoizedState=vp(1|m,b,P,S)}function pj(f,m){return Ox(8390656,8,f,m)}function jb(f,m){return Fx(2048,8,f,m)}function mj(f,m){return Fx(4,2,f,m)}function gj(f,m){return Fx(4,4,f,m)}function xj(f,m){if(typeof m=="function")return f=f(),m(f),function(){m(null)};if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function yj(f,m,b){return b=b!=null?b.concat([f]):null,Fx(4,4,xj.bind(null,m,f),b)}function Eb(){}function vj(f,m){var b=pa();m=m===void 0?null:m;var S=b.memoizedState;return S!==null&&m!==null&&Sb(m,S[1])?S[0]:(b.memoizedState=[f,m],f)}function bj(f,m){var b=pa();m=m===void 0?null:m;var S=b.memoizedState;return S!==null&&m!==null&&Sb(m,S[1])?S[0]:(f=f(),b.memoizedState=[f,m],f)}function wj(f,m,b){return(Ou&21)===0?(f.baseState&&(f.baseState=!1,Ei=!0),f.memoizedState=b):(Wa(b,m)||(b=ih(),Cs.lanes|=b,Fu|=b,f.baseState=!0),m)}function aW(f,m){var b=kn;kn=b!==0&&4>b?b:4,f(!0);var S=Nb.transition;Nb.transition={};try{f(!1),m()}finally{kn=b,Nb.transition=S}}function Nj(){return pa().memoizedState}function oW(f,m,b){var S=bc(f);if(b={lane:S,action:b,hasEagerState:!1,eagerState:null,next:null},Sj(f))kj(m,b);else if(b=ej(f,m,b,S),b!==null){var E=li();Xa(b,f,S,E),Cj(b,m,S)}}function lW(f,m,b){var S=bc(f),E={lane:S,action:b,hasEagerState:!1,eagerState:null,next:null};if(Sj(f))kj(m,E);else{var P=f.alternate;if(f.lanes===0&&(P===null||P.lanes===0)&&(P=m.lastRenderedReducer,P!==null))try{var W=m.lastRenderedState,ce=P(W,b);if(E.hasEagerState=!0,E.eagerState=ce,Wa(ce,W)){var ye=m.interleaved;ye===null?(E.next=E,gb(m)):(E.next=ye.next,ye.next=E),m.interleaved=E;return}}catch{}finally{}b=ej(f,m,E,S),b!==null&&(E=li(),Xa(b,f,S,E),Cj(b,m,S))}}function Sj(f){var m=f.alternate;return f===Cs||m!==null&&m===Cs}function kj(f,m){gp=_x=!0;var b=f.pending;b===null?m.next=m:(m.next=b.next,b.next=m),f.pending=m}function Cj(f,m,b){if((b&4194240)!==0){var S=m.lanes;S&=f.pendingLanes,b|=S,m.lanes=b,fl(f,b)}}var Mx={readContext:fa,useCallback:Vr,useContext:Vr,useEffect:Vr,useImperativeHandle:Vr,useInsertionEffect:Vr,useLayoutEffect:Vr,useMemo:Vr,useReducer:Vr,useRef:Vr,useState:Vr,useDebugValue:Vr,useDeferredValue:Vr,useTransition:Vr,useMutableSource:Vr,useSyncExternalStore:Vr,useId:Vr,unstable_isNewReconciler:!1},cW={readContext:fa,useCallback:function(f,m){return $o().memoizedState=[f,m===void 0?null:m],f},useContext:fa,useEffect:pj,useImperativeHandle:function(f,m,b){return b=b!=null?b.concat([f]):null,Ox(4194308,4,xj.bind(null,m,f),b)},useLayoutEffect:function(f,m){return Ox(4194308,4,f,m)},useInsertionEffect:function(f,m){return Ox(4,2,f,m)},useMemo:function(f,m){var b=$o();return m=m===void 0?null:m,f=f(),b.memoizedState=[f,m],f},useReducer:function(f,m,b){var S=$o();return m=b!==void 0?b(m):m,S.memoizedState=S.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},S.queue=f,f=f.dispatch=oW.bind(null,Cs,f),[S.memoizedState,f]},useRef:function(f){var m=$o();return f={current:f},m.memoizedState=f},useState:hj,useDebugValue:Eb,useDeferredValue:function(f){return $o().memoizedState=f},useTransition:function(){var f=hj(!1),m=f[0];return f=aW.bind(null,f[1]),$o().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,b){var S=Cs,E=$o();if(ys){if(b===void 0)throw Error(n(407));b=b()}else{if(b=m(),yr===null)throw Error(n(349));(Ou&30)!==0||oj(S,m,b)}E.memoizedState=b;var P={value:b,getSnapshot:m};return E.queue=P,pj(cj.bind(null,S,P,f),[f]),S.flags|=2048,vp(9,lj.bind(null,S,P,b,m),void 0,null),b},useId:function(){var f=$o(),m=yr.identifierPrefix;if(ys){var b=yl,S=xl;b=(S&~(1<<32-rs(S)-1)).toString(32)+b,m=":"+m+"R"+b,b=xp++,0<b&&(m+="H"+b.toString(32)),m+=":"}else b=iW++,m=":"+m+"r"+b.toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},uW={readContext:fa,useCallback:vj,useContext:fa,useEffect:jb,useImperativeHandle:yj,useInsertionEffect:mj,useLayoutEffect:gj,useMemo:bj,useReducer:Tb,useRef:fj,useState:function(){return Tb(yp)},useDebugValue:Eb,useDeferredValue:function(f){var m=pa();return wj(m,or.memoizedState,f)},useTransition:function(){var f=Tb(yp)[0],m=pa().memoizedState;return[f,m]},useMutableSource:ij,useSyncExternalStore:aj,useId:Nj,unstable_isNewReconciler:!1},dW={readContext:fa,useCallback:vj,useContext:fa,useEffect:jb,useImperativeHandle:yj,useInsertionEffect:mj,useLayoutEffect:gj,useMemo:bj,useReducer:Ib,useRef:fj,useState:function(){return Ib(yp)},useDebugValue:Eb,useDeferredValue:function(f){var m=pa();return or===null?m.memoizedState=f:wj(m,or.memoizedState,f)},useTransition:function(){var f=Ib(yp)[0],m=pa().memoizedState;return[f,m]},useMutableSource:ij,useSyncExternalStore:aj,useId:Nj,unstable_isNewReconciler:!1};function Ha(f,m){if(f&&f.defaultProps){m=G({},m),f=f.defaultProps;for(var b in f)m[b]===void 0&&(m[b]=f[b]);return m}return m}function $b(f,m,b,S){m=f.memoizedState,b=b(S,m),b=b==null?m:G({},m,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var Lx={isMounted:function(f){return(f=f._reactInternals)?za(f)===f:!1},enqueueSetState:function(f,m,b){f=f._reactInternals;var S=li(),E=bc(f),P=bl(S,E);P.payload=m,b!=null&&(P.callback=b),m=gc(f,P,E),m!==null&&(Xa(m,f,E,S),Ax(m,f,E))},enqueueReplaceState:function(f,m,b){f=f._reactInternals;var S=li(),E=bc(f),P=bl(S,E);P.tag=1,P.payload=m,b!=null&&(P.callback=b),m=gc(f,P,E),m!==null&&(Xa(m,f,E,S),Ax(m,f,E))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var b=li(),S=bc(f),E=bl(b,S);E.tag=2,m!=null&&(E.callback=m),m=gc(f,E,S),m!==null&&(Xa(m,f,S,b),Ax(m,f,S))}};function Tj(f,m,b,S,E,P,W){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(S,P,W):m.prototype&&m.prototype.isPureReactComponent?!ip(b,S)||!ip(E,P):!0}function Ij(f,m,b){var S=!1,E=fc,P=m.contextType;return typeof P=="object"&&P!==null?P=fa(P):(E=ji(m)?Au:zr.current,S=m.contextTypes,P=(S=S!=null)?ph(f,E):fc),m=new m(b,P),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Lx,f.stateNode=m,m._reactInternals=f,S&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=E,f.__reactInternalMemoizedMaskedChildContext=P),m}function jj(f,m,b,S){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,S),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,S),m.state!==f&&Lx.enqueueReplaceState(m,m.state,null)}function Ab(f,m,b,S){var E=f.stateNode;E.props=b,E.state=f.memoizedState,E.refs={},xb(f);var P=m.contextType;typeof P=="object"&&P!==null?E.context=fa(P):(P=ji(m)?Au:zr.current,E.context=ph(f,P)),E.state=f.memoizedState,P=m.getDerivedStateFromProps,typeof P=="function"&&($b(f,m,P,b),E.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(m=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),m!==E.state&&Lx.enqueueReplaceState(E,E.state,null),Rx(f,b,E,S),E.state=f.memoizedState),typeof E.componentDidMount=="function"&&(f.flags|=4194308)}function Nh(f,m){try{var b="",S=m;do b+=we(S),S=S.return;while(S);var E=b}catch(P){E=`
Error generating stack: `+P.message+`
`+P.stack}return{value:f,source:m,stack:E,digest:null}}function Rb(f,m,b){return{value:f,source:null,stack:b??null,digest:m??null}}function Db(f,m){try{console.error(m.value)}catch(b){setTimeout(function(){throw b})}}var hW=typeof WeakMap=="function"?WeakMap:Map;function Ej(f,m,b){b=bl(-1,b),b.tag=3,b.payload={element:null};var S=m.value;return b.callback=function(){Hx||(Hx=!0,qb=S),Db(f,m)},b}function $j(f,m,b){b=bl(-1,b),b.tag=3;var S=f.type.getDerivedStateFromError;if(typeof S=="function"){var E=m.value;b.payload=function(){return S(E)},b.callback=function(){Db(f,m)}}var P=f.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(b.callback=function(){Db(f,m),typeof S!="function"&&(yc===null?yc=new Set([this]):yc.add(this));var W=m.stack;this.componentDidCatch(m.value,{componentStack:W!==null?W:""})}),b}function Aj(f,m,b){var S=f.pingCache;if(S===null){S=f.pingCache=new hW;var E=new Set;S.set(m,E)}else E=S.get(m),E===void 0&&(E=new Set,S.set(m,E));E.has(b)||(E.add(b),f=TW.bind(null,f,m,b),m.then(f,f))}function Rj(f){do{var m;if((m=f.tag===13)&&(m=f.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return f;f=f.return}while(f!==null);return null}function Dj(f,m,b,S,E){return(f.mode&1)===0?(f===m?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(m=bl(-1,1),m.tag=2,gc(b,m,1))),b.lanes|=1),f):(f.flags|=65536,f.lanes=E,f)}var fW=C.ReactCurrentOwner,Ei=!1;function oi(f,m,b,S){m.child=f===null?QI(m,null,b,S):yh(m,f.child,b,S)}function Pj(f,m,b,S,E){b=b.render;var P=m.ref;return bh(m,E),S=kb(f,m,b,S,P,E),b=Cb(),f!==null&&!Ei?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~E,wl(f,m,E)):(ys&&b&&ob(m),m.flags|=1,oi(f,m,S,E),m.child)}function _j(f,m,b,S,E){if(f===null){var P=b.type;return typeof P=="function"&&!tw(P)&&P.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(m.tag=15,m.type=P,Oj(f,m,P,S,E)):(f=Jx(b.type,null,S,m,m.mode,E),f.ref=m.ref,f.return=m,m.child=f)}if(P=f.child,(f.lanes&E)===0){var W=P.memoizedProps;if(b=b.compare,b=b!==null?b:ip,b(W,S)&&f.ref===m.ref)return wl(f,m,E)}return m.flags|=1,f=Nc(P,S),f.ref=m.ref,f.return=m,m.child=f}function Oj(f,m,b,S,E){if(f!==null){var P=f.memoizedProps;if(ip(P,S)&&f.ref===m.ref)if(Ei=!1,m.pendingProps=S=P,(f.lanes&E)!==0)(f.flags&131072)!==0&&(Ei=!0);else return m.lanes=f.lanes,wl(f,m,E)}return Pb(f,m,b,S,E)}function Fj(f,m,b){var S=m.pendingProps,E=S.children,P=f!==null?f.memoizedState:null;if(S.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},is(kh,Qi),Qi|=b;else{if((b&1073741824)===0)return f=P!==null?P.baseLanes|b:b,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null,transitions:null},m.updateQueue=null,is(kh,Qi),Qi|=f,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=P!==null?P.baseLanes:b,is(kh,Qi),Qi|=S}else P!==null?(S=P.baseLanes|b,m.memoizedState=null):S=b,is(kh,Qi),Qi|=S;return oi(f,m,E,b),m.child}function Mj(f,m){var b=m.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(m.flags|=512,m.flags|=2097152)}function Pb(f,m,b,S,E){var P=ji(b)?Au:zr.current;return P=ph(m,P),bh(m,E),b=kb(f,m,b,S,P,E),S=Cb(),f!==null&&!Ei?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~E,wl(f,m,E)):(ys&&S&&ob(m),m.flags|=1,oi(f,m,b,E),m.child)}function Lj(f,m,b,S,E){if(ji(b)){var P=!0;Sx(m)}else P=!1;if(bh(m,E),m.stateNode===null)zx(f,m),Ij(m,b,S),Ab(m,b,S,E),S=!0;else if(f===null){var W=m.stateNode,ce=m.memoizedProps;W.props=ce;var ye=W.context,Fe=b.contextType;typeof Fe=="object"&&Fe!==null?Fe=fa(Fe):(Fe=ji(b)?Au:zr.current,Fe=ph(m,Fe));var tt=b.getDerivedStateFromProps,rt=typeof tt=="function"||typeof W.getSnapshotBeforeUpdate=="function";rt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ce!==S||ye!==Fe)&&jj(m,W,S,Fe),mc=!1;var Qe=m.memoizedState;W.state=Qe,Rx(m,S,W,E),ye=m.memoizedState,ce!==S||Qe!==ye||Ii.current||mc?(typeof tt=="function"&&($b(m,b,tt,S),ye=m.memoizedState),(ce=mc||Tj(m,b,ce,S,Qe,ye,Fe))?(rt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(m.flags|=4194308)):(typeof W.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=S,m.memoizedState=ye),W.props=S,W.state=ye,W.context=Fe,S=ce):(typeof W.componentDidMount=="function"&&(m.flags|=4194308),S=!1)}else{W=m.stateNode,tj(f,m),ce=m.memoizedProps,Fe=m.type===m.elementType?ce:Ha(m.type,ce),W.props=Fe,rt=m.pendingProps,Qe=W.context,ye=b.contextType,typeof ye=="object"&&ye!==null?ye=fa(ye):(ye=ji(b)?Au:zr.current,ye=ph(m,ye));var wt=b.getDerivedStateFromProps;(tt=typeof wt=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ce!==rt||Qe!==ye)&&jj(m,W,S,ye),mc=!1,Qe=m.memoizedState,W.state=Qe,Rx(m,S,W,E);var Tt=m.memoizedState;ce!==rt||Qe!==Tt||Ii.current||mc?(typeof wt=="function"&&($b(m,b,wt,S),Tt=m.memoizedState),(Fe=mc||Tj(m,b,Fe,S,Qe,Tt,ye)||!1)?(tt||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(S,Tt,ye),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(S,Tt,ye)),typeof W.componentDidUpdate=="function"&&(m.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof W.componentDidUpdate!="function"||ce===f.memoizedProps&&Qe===f.memoizedState||(m.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ce===f.memoizedProps&&Qe===f.memoizedState||(m.flags|=1024),m.memoizedProps=S,m.memoizedState=Tt),W.props=S,W.state=Tt,W.context=ye,S=Fe):(typeof W.componentDidUpdate!="function"||ce===f.memoizedProps&&Qe===f.memoizedState||(m.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ce===f.memoizedProps&&Qe===f.memoizedState||(m.flags|=1024),S=!1)}return _b(f,m,b,S,P,E)}function _b(f,m,b,S,E,P){Mj(f,m);var W=(m.flags&128)!==0;if(!S&&!W)return E&&WI(m,b,!1),wl(f,m,P);S=m.stateNode,fW.current=m;var ce=W&&typeof b.getDerivedStateFromError!="function"?null:S.render();return m.flags|=1,f!==null&&W?(m.child=yh(m,f.child,null,P),m.child=yh(m,null,ce,P)):oi(f,m,ce,P),m.memoizedState=S.state,E&&WI(m,b,!0),m.child}function Bj(f){var m=f.stateNode;m.pendingContext?VI(f,m.pendingContext,m.pendingContext!==m.context):m.context&&VI(f,m.context,!1),yb(f,m.containerInfo)}function zj(f,m,b,S,E){return xh(),db(E),m.flags|=256,oi(f,m,b,S),m.child}var Ob={dehydrated:null,treeContext:null,retryLane:0};function Fb(f){return{baseLanes:f,cachePool:null,transitions:null}}function Vj(f,m,b){var S=m.pendingProps,E=ks.current,P=!1,W=(m.flags&128)!==0,ce;if((ce=W)||(ce=f!==null&&f.memoizedState===null?!1:(E&2)!==0),ce?(P=!0,m.flags&=-129):(f===null||f.memoizedState!==null)&&(E|=1),is(ks,E&1),f===null)return ub(m),f=m.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((m.mode&1)===0?m.lanes=1:f.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(W=S.children,f=S.fallback,P?(S=m.mode,P=m.child,W={mode:"hidden",children:W},(S&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=W):P=Qx(W,S,0,null),f=zu(f,S,b,null),P.return=m,f.return=m,P.sibling=f,m.child=P,m.child.memoizedState=Fb(b),m.memoizedState=Ob,f):Mb(m,W));if(E=f.memoizedState,E!==null&&(ce=E.dehydrated,ce!==null))return pW(f,m,W,S,ce,E,b);if(P){P=S.fallback,W=m.mode,E=f.child,ce=E.sibling;var ye={mode:"hidden",children:S.children};return(W&1)===0&&m.child!==E?(S=m.child,S.childLanes=0,S.pendingProps=ye,m.deletions=null):(S=Nc(E,ye),S.subtreeFlags=E.subtreeFlags&14680064),ce!==null?P=Nc(ce,P):(P=zu(P,W,b,null),P.flags|=2),P.return=m,S.return=m,S.sibling=P,m.child=S,S=P,P=m.child,W=f.child.memoizedState,W=W===null?Fb(b):{baseLanes:W.baseLanes|b,cachePool:null,transitions:W.transitions},P.memoizedState=W,P.childLanes=f.childLanes&~b,m.memoizedState=Ob,S}return P=f.child,f=P.sibling,S=Nc(P,{mode:"visible",children:S.children}),(m.mode&1)===0&&(S.lanes=b),S.return=m,S.sibling=null,f!==null&&(b=m.deletions,b===null?(m.deletions=[f],m.flags|=16):b.push(f)),m.child=S,m.memoizedState=null,S}function Mb(f,m){return m=Qx({mode:"visible",children:m},f.mode,0,null),m.return=f,f.child=m}function Bx(f,m,b,S){return S!==null&&db(S),yh(m,f.child,null,b),f=Mb(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function pW(f,m,b,S,E,P,W){if(b)return m.flags&256?(m.flags&=-257,S=Rb(Error(n(422))),Bx(f,m,W,S)):m.memoizedState!==null?(m.child=f.child,m.flags|=128,null):(P=S.fallback,E=m.mode,S=Qx({mode:"visible",children:S.children},E,0,null),P=zu(P,E,W,null),P.flags|=2,S.return=m,P.return=m,S.sibling=P,m.child=S,(m.mode&1)!==0&&yh(m,f.child,null,W),m.child.memoizedState=Fb(W),m.memoizedState=Ob,P);if((m.mode&1)===0)return Bx(f,m,W,null);if(E.data==="$!"){if(S=E.nextSibling&&E.nextSibling.dataset,S)var ce=S.dgst;return S=ce,P=Error(n(419)),S=Rb(P,S,void 0),Bx(f,m,W,S)}if(ce=(W&f.childLanes)!==0,Ei||ce){if(S=yr,S!==null){switch(W&-W){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(S.suspendedLanes|W))!==0?0:E,E!==0&&E!==P.retryLane&&(P.retryLane=E,vl(f,E),Xa(S,f,E,-1))}return ew(),S=Rb(Error(n(421))),Bx(f,m,W,S)}return E.data==="$?"?(m.flags|=128,m.child=f.child,m=IW.bind(null,f),E._reactRetry=m,null):(f=P.treeContext,Ji=dc(E.nextSibling),Zi=m,ys=!0,Ga=null,f!==null&&(da[ha++]=xl,da[ha++]=yl,da[ha++]=Ru,xl=f.id,yl=f.overflow,Ru=m),m=Mb(m,S.children),m.flags|=4096,m)}function Uj(f,m,b){f.lanes|=m;var S=f.alternate;S!==null&&(S.lanes|=m),mb(f.return,m,b)}function Lb(f,m,b,S,E){var P=f.memoizedState;P===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:S,tail:b,tailMode:E}:(P.isBackwards=m,P.rendering=null,P.renderingStartTime=0,P.last=S,P.tail=b,P.tailMode=E)}function Wj(f,m,b){var S=m.pendingProps,E=S.revealOrder,P=S.tail;if(oi(f,m,S.children,b),S=ks.current,(S&2)!==0)S=S&1|2,m.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Uj(f,b,m);else if(f.tag===19)Uj(f,b,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}S&=1}if(is(ks,S),(m.mode&1)===0)m.memoizedState=null;else switch(E){case"forwards":for(b=m.child,E=null;b!==null;)f=b.alternate,f!==null&&Dx(f)===null&&(E=b),b=b.sibling;b=E,b===null?(E=m.child,m.child=null):(E=b.sibling,b.sibling=null),Lb(m,!1,E,b,P);break;case"backwards":for(b=null,E=m.child,m.child=null;E!==null;){if(f=E.alternate,f!==null&&Dx(f)===null){m.child=E;break}f=E.sibling,E.sibling=b,b=E,E=f}Lb(m,!0,b,null,P);break;case"together":Lb(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function zx(f,m){(m.mode&1)===0&&f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2)}function wl(f,m,b){if(f!==null&&(m.dependencies=f.dependencies),Fu|=m.lanes,(b&m.childLanes)===0)return null;if(f!==null&&m.child!==f.child)throw Error(n(153));if(m.child!==null){for(f=m.child,b=Nc(f,f.pendingProps),m.child=b,b.return=m;f.sibling!==null;)f=f.sibling,b=b.sibling=Nc(f,f.pendingProps),b.return=m;b.sibling=null}return m.child}function mW(f,m,b){switch(m.tag){case 3:Bj(m),xh();break;case 5:rj(m);break;case 1:ji(m.type)&&Sx(m);break;case 4:yb(m,m.stateNode.containerInfo);break;case 10:var S=m.type._context,E=m.memoizedProps.value;is(Ex,S._currentValue),S._currentValue=E;break;case 13:if(S=m.memoizedState,S!==null)return S.dehydrated!==null?(is(ks,ks.current&1),m.flags|=128,null):(b&m.child.childLanes)!==0?Vj(f,m,b):(is(ks,ks.current&1),f=wl(f,m,b),f!==null?f.sibling:null);is(ks,ks.current&1);break;case 19:if(S=(b&m.childLanes)!==0,(f.flags&128)!==0){if(S)return Wj(f,m,b);m.flags|=128}if(E=m.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),is(ks,ks.current),S)break;return null;case 22:case 23:return m.lanes=0,Fj(f,m,b)}return wl(f,m,b)}var Gj,Bb,Hj,Kj;Gj=function(f,m){for(var b=m.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Bb=function(){},Hj=function(f,m,b,S){var E=f.memoizedProps;if(E!==S){f=m.stateNode,_u(Eo.current);var P=null;switch(b){case"input":E=xe(f,E),S=xe(f,S),P=[];break;case"select":E=G({},E,{value:void 0}),S=G({},S,{value:void 0}),P=[];break;case"textarea":E=dn(f,E),S=dn(f,S),P=[];break;default:typeof E.onClick!="function"&&typeof S.onClick=="function"&&(f.onclick=bx)}Pn(b,S);var W;b=null;for(Fe in E)if(!S.hasOwnProperty(Fe)&&E.hasOwnProperty(Fe)&&E[Fe]!=null)if(Fe==="style"){var ce=E[Fe];for(W in ce)ce.hasOwnProperty(W)&&(b||(b={}),b[W]="")}else Fe!=="dangerouslySetInnerHTML"&&Fe!=="children"&&Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&Fe!=="autoFocus"&&(r.hasOwnProperty(Fe)?P||(P=[]):(P=P||[]).push(Fe,null));for(Fe in S){var ye=S[Fe];if(ce=E?.[Fe],S.hasOwnProperty(Fe)&&ye!==ce&&(ye!=null||ce!=null))if(Fe==="style")if(ce){for(W in ce)!ce.hasOwnProperty(W)||ye&&ye.hasOwnProperty(W)||(b||(b={}),b[W]="");for(W in ye)ye.hasOwnProperty(W)&&ce[W]!==ye[W]&&(b||(b={}),b[W]=ye[W])}else b||(P||(P=[]),P.push(Fe,b)),b=ye;else Fe==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ce=ce?ce.__html:void 0,ye!=null&&ce!==ye&&(P=P||[]).push(Fe,ye)):Fe==="children"?typeof ye!="string"&&typeof ye!="number"||(P=P||[]).push(Fe,""+ye):Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&(r.hasOwnProperty(Fe)?(ye!=null&&Fe==="onScroll"&&us("scroll",f),P||ce===ye||(P=[])):(P=P||[]).push(Fe,ye))}b&&(P=P||[]).push("style",b);var Fe=P;(m.updateQueue=Fe)&&(m.flags|=4)}},Kj=function(f,m,b,S){b!==S&&(m.flags|=4)};function bp(f,m){if(!ys)switch(f.tailMode){case"hidden":m=f.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var S=null;b!==null;)b.alternate!==null&&(S=b),b=b.sibling;S===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:S.sibling=null}}function Ur(f){var m=f.alternate!==null&&f.alternate.child===f.child,b=0,S=0;if(m)for(var E=f.child;E!==null;)b|=E.lanes|E.childLanes,S|=E.subtreeFlags&14680064,S|=E.flags&14680064,E.return=f,E=E.sibling;else for(E=f.child;E!==null;)b|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=f,E=E.sibling;return f.subtreeFlags|=S,f.childLanes=b,m}function gW(f,m,b){var S=m.pendingProps;switch(lb(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(m),null;case 1:return ji(m.type)&&Nx(),Ur(m),null;case 3:return S=m.stateNode,wh(),ds(Ii),ds(zr),wb(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(f===null||f.child===null)&&(Ix(m)?m.flags|=4:f===null||f.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Ga!==null&&(Zb(Ga),Ga=null))),Bb(f,m),Ur(m),null;case 5:vb(m);var E=_u(mp.current);if(b=m.type,f!==null&&m.stateNode!=null)Hj(f,m,b,S,E),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!S){if(m.stateNode===null)throw Error(n(166));return Ur(m),null}if(f=_u(Eo.current),Ix(m)){S=m.stateNode,b=m.type;var P=m.memoizedProps;switch(S[jo]=m,S[up]=P,f=(m.mode&1)!==0,b){case"dialog":us("cancel",S),us("close",S);break;case"iframe":case"object":case"embed":us("load",S);break;case"video":case"audio":for(E=0;E<op.length;E++)us(op[E],S);break;case"source":us("error",S);break;case"img":case"image":case"link":us("error",S),us("load",S);break;case"details":us("toggle",S);break;case"input":$e(S,P),us("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!P.multiple},us("invalid",S);break;case"textarea":Zn(S,P),us("invalid",S)}Pn(b,P),E=null;for(var W in P)if(P.hasOwnProperty(W)){var ce=P[W];W==="children"?typeof ce=="string"?S.textContent!==ce&&(P.suppressHydrationWarning!==!0&&vx(S.textContent,ce,f),E=["children",ce]):typeof ce=="number"&&S.textContent!==""+ce&&(P.suppressHydrationWarning!==!0&&vx(S.textContent,ce,f),E=["children",""+ce]):r.hasOwnProperty(W)&&ce!=null&&W==="onScroll"&&us("scroll",S)}switch(b){case"input":Me(S),$t(S,P,!0);break;case"textarea":Me(S),Jn(S);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(S.onclick=bx)}S=E,m.updateQueue=S,S!==null&&(m.flags|=4)}else{W=E.nodeType===9?E:E.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=$n(b)),f==="http://www.w3.org/1999/xhtml"?b==="script"?(f=W.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof S.is=="string"?f=W.createElement(b,{is:S.is}):(f=W.createElement(b),b==="select"&&(W=f,S.multiple?W.multiple=!0:S.size&&(W.size=S.size))):f=W.createElementNS(f,b),f[jo]=m,f[up]=S,Gj(f,m,!1,!1),m.stateNode=f;e:{switch(W=Ss(b,S),b){case"dialog":us("cancel",f),us("close",f),E=S;break;case"iframe":case"object":case"embed":us("load",f),E=S;break;case"video":case"audio":for(E=0;E<op.length;E++)us(op[E],f);E=S;break;case"source":us("error",f),E=S;break;case"img":case"image":case"link":us("error",f),us("load",f),E=S;break;case"details":us("toggle",f),E=S;break;case"input":$e(f,S),E=xe(f,S),us("invalid",f);break;case"option":E=S;break;case"select":f._wrapperState={wasMultiple:!!S.multiple},E=G({},S,{value:void 0}),us("invalid",f);break;case"textarea":Zn(f,S),E=dn(f,S),us("invalid",f);break;default:E=S}Pn(b,E),ce=E;for(P in ce)if(ce.hasOwnProperty(P)){var ye=ce[P];P==="style"?Sn(f,ye):P==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ye!=null&&As(f,ye)):P==="children"?typeof ye=="string"?(b!=="textarea"||ye!=="")&&gs(f,ye):typeof ye=="number"&&gs(f,""+ye):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(r.hasOwnProperty(P)?ye!=null&&P==="onScroll"&&us("scroll",f):ye!=null&&k(f,P,ye,W))}switch(b){case"input":Me(f),$t(f,S,!1);break;case"textarea":Me(f),Jn(f);break;case"option":S.value!=null&&f.setAttribute("value",""+Re(S.value));break;case"select":f.multiple=!!S.multiple,P=S.value,P!=null?Xt(f,!!S.multiple,P,!1):S.defaultValue!=null&&Xt(f,!!S.multiple,S.defaultValue,!0);break;default:typeof E.onClick=="function"&&(f.onclick=bx)}switch(b){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Ur(m),null;case 6:if(f&&m.stateNode!=null)Kj(f,m,f.memoizedProps,S);else{if(typeof S!="string"&&m.stateNode===null)throw Error(n(166));if(b=_u(mp.current),_u(Eo.current),Ix(m)){if(S=m.stateNode,b=m.memoizedProps,S[jo]=m,(P=S.nodeValue!==b)&&(f=Zi,f!==null))switch(f.tag){case 3:vx(S.nodeValue,b,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&vx(S.nodeValue,b,(f.mode&1)!==0)}P&&(m.flags|=4)}else S=(b.nodeType===9?b:b.ownerDocument).createTextNode(S),S[jo]=m,m.stateNode=S}return Ur(m),null;case 13:if(ds(ks),S=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(ys&&Ji!==null&&(m.mode&1)!==0&&(m.flags&128)===0)YI(),xh(),m.flags|=98560,P=!1;else if(P=Ix(m),S!==null&&S.dehydrated!==null){if(f===null){if(!P)throw Error(n(318));if(P=m.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(n(317));P[jo]=m}else xh(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Ur(m),P=!1}else Ga!==null&&(Zb(Ga),Ga=null),P=!0;if(!P)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=b,m):(S=S!==null,S!==(f!==null&&f.memoizedState!==null)&&S&&(m.child.flags|=8192,(m.mode&1)!==0&&(f===null||(ks.current&1)!==0?lr===0&&(lr=3):ew())),m.updateQueue!==null&&(m.flags|=4),Ur(m),null);case 4:return wh(),Bb(f,m),f===null&&lp(m.stateNode.containerInfo),Ur(m),null;case 10:return pb(m.type._context),Ur(m),null;case 17:return ji(m.type)&&Nx(),Ur(m),null;case 19:if(ds(ks),P=m.memoizedState,P===null)return Ur(m),null;if(S=(m.flags&128)!==0,W=P.rendering,W===null)if(S)bp(P,!1);else{if(lr!==0||f!==null&&(f.flags&128)!==0)for(f=m.child;f!==null;){if(W=Dx(f),W!==null){for(m.flags|=128,bp(P,!1),S=W.updateQueue,S!==null&&(m.updateQueue=S,m.flags|=4),m.subtreeFlags=0,S=b,b=m.child;b!==null;)P=b,f=S,P.flags&=14680066,W=P.alternate,W===null?(P.childLanes=0,P.lanes=f,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=W.childLanes,P.lanes=W.lanes,P.child=W.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=W.memoizedProps,P.memoizedState=W.memoizedState,P.updateQueue=W.updateQueue,P.type=W.type,f=W.dependencies,P.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),b=b.sibling;return is(ks,ks.current&1|2),m.child}f=f.sibling}P.tail!==null&&Qn()>Ch&&(m.flags|=128,S=!0,bp(P,!1),m.lanes=4194304)}else{if(!S)if(f=Dx(W),f!==null){if(m.flags|=128,S=!0,b=f.updateQueue,b!==null&&(m.updateQueue=b,m.flags|=4),bp(P,!0),P.tail===null&&P.tailMode==="hidden"&&!W.alternate&&!ys)return Ur(m),null}else 2*Qn()-P.renderingStartTime>Ch&&b!==1073741824&&(m.flags|=128,S=!0,bp(P,!1),m.lanes=4194304);P.isBackwards?(W.sibling=m.child,m.child=W):(b=P.last,b!==null?b.sibling=W:m.child=W,P.last=W)}return P.tail!==null?(m=P.tail,P.rendering=m,P.tail=m.sibling,P.renderingStartTime=Qn(),m.sibling=null,b=ks.current,is(ks,S?b&1|2:b&1),m):(Ur(m),null);case 22:case 23:return Qb(),S=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==S&&(m.flags|=8192),S&&(m.mode&1)!==0?(Qi&1073741824)!==0&&(Ur(m),m.subtreeFlags&6&&(m.flags|=8192)):Ur(m),null;case 24:return null;case 25:return null}throw Error(n(156,m.tag))}function xW(f,m){switch(lb(m),m.tag){case 1:return ji(m.type)&&Nx(),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return wh(),ds(Ii),ds(zr),wb(),f=m.flags,(f&65536)!==0&&(f&128)===0?(m.flags=f&-65537|128,m):null;case 5:return vb(m),null;case 13:if(ds(ks),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(n(340));xh()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return ds(ks),null;case 4:return wh(),null;case 10:return pb(m.type._context),null;case 22:case 23:return Qb(),null;case 24:return null;default:return null}}var Vx=!1,Wr=!1,yW=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function Sh(f,m){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(S){Ds(f,m,S)}else b.current=null}function zb(f,m,b){try{b()}catch(S){Ds(f,m,S)}}var qj=!1;function vW(f,m){if(Qv=le,f=TI(),Gv(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var S=b.getSelection&&b.getSelection();if(S&&S.rangeCount!==0){b=S.anchorNode;var E=S.anchorOffset,P=S.focusNode;S=S.focusOffset;try{b.nodeType,P.nodeType}catch{b=null;break e}var W=0,ce=-1,ye=-1,Fe=0,tt=0,rt=f,Qe=null;t:for(;;){for(var wt;rt!==b||E!==0&&rt.nodeType!==3||(ce=W+E),rt!==P||S!==0&&rt.nodeType!==3||(ye=W+S),rt.nodeType===3&&(W+=rt.nodeValue.length),(wt=rt.firstChild)!==null;)Qe=rt,rt=wt;for(;;){if(rt===f)break t;if(Qe===b&&++Fe===E&&(ce=W),Qe===P&&++tt===S&&(ye=W),(wt=rt.nextSibling)!==null)break;rt=Qe,Qe=rt.parentNode}rt=wt}b=ce===-1||ye===-1?null:{start:ce,end:ye}}else b=null}b=b||{start:0,end:0}}else b=null;for(eb={focusedElem:f,selectionRange:b},le=!1,Nt=m;Nt!==null;)if(m=Nt,f=m.child,(m.subtreeFlags&1028)!==0&&f!==null)f.return=m,Nt=f;else for(;Nt!==null;){m=Nt;try{var Tt=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Tt!==null){var Rt=Tt.memoizedProps,zs=Tt.memoizedState,Ae=m.stateNode,Se=Ae.getSnapshotBeforeUpdate(m.elementType===m.type?Rt:Ha(m.type,Rt),zs);Ae.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:var _e=m.stateNode.containerInfo;_e.nodeType===1?_e.textContent="":_e.nodeType===9&&_e.documentElement&&_e.removeChild(_e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(lt){Ds(m,m.return,lt)}if(f=m.sibling,f!==null){f.return=m.return,Nt=f;break}Nt=m.return}return Tt=qj,qj=!1,Tt}function wp(f,m,b){var S=m.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var E=S=S.next;do{if((E.tag&f)===f){var P=E.destroy;E.destroy=void 0,P!==void 0&&zb(m,b,P)}E=E.next}while(E!==S)}}function Ux(f,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&f)===f){var S=b.create;b.destroy=S()}b=b.next}while(b!==m)}}function Vb(f){var m=f.ref;if(m!==null){var b=f.stateNode;switch(f.tag){case 5:f=b;break;default:f=b}typeof m=="function"?m(f):m.current=f}}function Xj(f){var m=f.alternate;m!==null&&(f.alternate=null,Xj(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&(delete m[jo],delete m[up],delete m[rb],delete m[tW],delete m[nW])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function Yj(f){return f.tag===5||f.tag===3||f.tag===4}function Zj(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||Yj(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Ub(f,m,b){var S=f.tag;if(S===5||S===6)f=f.stateNode,m?b.nodeType===8?b.parentNode.insertBefore(f,m):b.insertBefore(f,m):(b.nodeType===8?(m=b.parentNode,m.insertBefore(f,b)):(m=b,m.appendChild(f)),b=b._reactRootContainer,b!=null||m.onclick!==null||(m.onclick=bx));else if(S!==4&&(f=f.child,f!==null))for(Ub(f,m,b),f=f.sibling;f!==null;)Ub(f,m,b),f=f.sibling}function Wb(f,m,b){var S=f.tag;if(S===5||S===6)f=f.stateNode,m?b.insertBefore(f,m):b.appendChild(f);else if(S!==4&&(f=f.child,f!==null))for(Wb(f,m,b),f=f.sibling;f!==null;)Wb(f,m,b),f=f.sibling}var Ar=null,Ka=!1;function xc(f,m,b){for(b=b.child;b!==null;)Jj(f,m,b),b=b.sibling}function Jj(f,m,b){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(rc,b)}catch{}switch(b.tag){case 5:Wr||Sh(b,m);case 6:var S=Ar,E=Ka;Ar=null,xc(f,m,b),Ar=S,Ka=E,Ar!==null&&(Ka?(f=Ar,b=b.stateNode,f.nodeType===8?f.parentNode.removeChild(b):f.removeChild(b)):Ar.removeChild(b.stateNode));break;case 18:Ar!==null&&(Ka?(f=Ar,b=b.stateNode,f.nodeType===8?sb(f.parentNode,b):f.nodeType===1&&sb(f,b),ae(f)):sb(Ar,b.stateNode));break;case 4:S=Ar,E=Ka,Ar=b.stateNode.containerInfo,Ka=!0,xc(f,m,b),Ar=S,Ka=E;break;case 0:case 11:case 14:case 15:if(!Wr&&(S=b.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){E=S=S.next;do{var P=E,W=P.destroy;P=P.tag,W!==void 0&&((P&2)!==0||(P&4)!==0)&&zb(b,m,W),E=E.next}while(E!==S)}xc(f,m,b);break;case 1:if(!Wr&&(Sh(b,m),S=b.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=b.memoizedProps,S.state=b.memoizedState,S.componentWillUnmount()}catch(ce){Ds(b,m,ce)}xc(f,m,b);break;case 21:xc(f,m,b);break;case 22:b.mode&1?(Wr=(S=Wr)||b.memoizedState!==null,xc(f,m,b),Wr=S):xc(f,m,b);break;default:xc(f,m,b)}}function Qj(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new yW),m.forEach(function(S){var E=jW.bind(null,f,S);b.has(S)||(b.add(S),S.then(E,E))})}}function qa(f,m){var b=m.deletions;if(b!==null)for(var S=0;S<b.length;S++){var E=b[S];try{var P=f,W=m,ce=W;e:for(;ce!==null;){switch(ce.tag){case 5:Ar=ce.stateNode,Ka=!1;break e;case 3:Ar=ce.stateNode.containerInfo,Ka=!0;break e;case 4:Ar=ce.stateNode.containerInfo,Ka=!0;break e}ce=ce.return}if(Ar===null)throw Error(n(160));Jj(P,W,E),Ar=null,Ka=!1;var ye=E.alternate;ye!==null&&(ye.return=null),E.return=null}catch(Fe){Ds(E,m,Fe)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)eE(m,f),m=m.sibling}function eE(f,m){var b=f.alternate,S=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(qa(m,f),Ao(f),S&4){try{wp(3,f,f.return),Ux(3,f)}catch(Rt){Ds(f,f.return,Rt)}try{wp(5,f,f.return)}catch(Rt){Ds(f,f.return,Rt)}}break;case 1:qa(m,f),Ao(f),S&512&&b!==null&&Sh(b,b.return);break;case 5:if(qa(m,f),Ao(f),S&512&&b!==null&&Sh(b,b.return),f.flags&32){var E=f.stateNode;try{gs(E,"")}catch(Rt){Ds(f,f.return,Rt)}}if(S&4&&(E=f.stateNode,E!=null)){var P=f.memoizedProps,W=b!==null?b.memoizedProps:P,ce=f.type,ye=f.updateQueue;if(f.updateQueue=null,ye!==null)try{ce==="input"&&P.type==="radio"&&P.name!=null&&Ze(E,P),Ss(ce,W);var Fe=Ss(ce,P);for(W=0;W<ye.length;W+=2){var tt=ye[W],rt=ye[W+1];tt==="style"?Sn(E,rt):tt==="dangerouslySetInnerHTML"?As(E,rt):tt==="children"?gs(E,rt):k(E,tt,rt,Fe)}switch(ce){case"input":bt(E,P);break;case"textarea":Gn(E,P);break;case"select":var Qe=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!P.multiple;var wt=P.value;wt!=null?Xt(E,!!P.multiple,wt,!1):Qe!==!!P.multiple&&(P.defaultValue!=null?Xt(E,!!P.multiple,P.defaultValue,!0):Xt(E,!!P.multiple,P.multiple?[]:"",!1))}E[up]=P}catch(Rt){Ds(f,f.return,Rt)}}break;case 6:if(qa(m,f),Ao(f),S&4){if(f.stateNode===null)throw Error(n(162));E=f.stateNode,P=f.memoizedProps;try{E.nodeValue=P}catch(Rt){Ds(f,f.return,Rt)}}break;case 3:if(qa(m,f),Ao(f),S&4&&b!==null&&b.memoizedState.isDehydrated)try{ae(m.containerInfo)}catch(Rt){Ds(f,f.return,Rt)}break;case 4:qa(m,f),Ao(f);break;case 13:qa(m,f),Ao(f),E=f.child,E.flags&8192&&(P=E.memoizedState!==null,E.stateNode.isHidden=P,!P||E.alternate!==null&&E.alternate.memoizedState!==null||(Kb=Qn())),S&4&&Qj(f);break;case 22:if(tt=b!==null&&b.memoizedState!==null,f.mode&1?(Wr=(Fe=Wr)||tt,qa(m,f),Wr=Fe):qa(m,f),Ao(f),S&8192){if(Fe=f.memoizedState!==null,(f.stateNode.isHidden=Fe)&&!tt&&(f.mode&1)!==0)for(Nt=f,tt=f.child;tt!==null;){for(rt=Nt=tt;Nt!==null;){switch(Qe=Nt,wt=Qe.child,Qe.tag){case 0:case 11:case 14:case 15:wp(4,Qe,Qe.return);break;case 1:Sh(Qe,Qe.return);var Tt=Qe.stateNode;if(typeof Tt.componentWillUnmount=="function"){S=Qe,b=Qe.return;try{m=S,Tt.props=m.memoizedProps,Tt.state=m.memoizedState,Tt.componentWillUnmount()}catch(Rt){Ds(S,b,Rt)}}break;case 5:Sh(Qe,Qe.return);break;case 22:if(Qe.memoizedState!==null){sE(rt);continue}}wt!==null?(wt.return=Qe,Nt=wt):sE(rt)}tt=tt.sibling}e:for(tt=null,rt=f;;){if(rt.tag===5){if(tt===null){tt=rt;try{E=rt.stateNode,Fe?(P=E.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(ce=rt.stateNode,ye=rt.memoizedProps.style,W=ye!=null&&ye.hasOwnProperty("display")?ye.display:null,ce.style.display=on("display",W))}catch(Rt){Ds(f,f.return,Rt)}}}else if(rt.tag===6){if(tt===null)try{rt.stateNode.nodeValue=Fe?"":rt.memoizedProps}catch(Rt){Ds(f,f.return,Rt)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===f)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===f)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===f)break e;tt===rt&&(tt=null),rt=rt.return}tt===rt&&(tt=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:qa(m,f),Ao(f),S&4&&Qj(f);break;case 21:break;default:qa(m,f),Ao(f)}}function Ao(f){var m=f.flags;if(m&2){try{e:{for(var b=f.return;b!==null;){if(Yj(b)){var S=b;break e}b=b.return}throw Error(n(160))}switch(S.tag){case 5:var E=S.stateNode;S.flags&32&&(gs(E,""),S.flags&=-33);var P=Zj(f);Wb(f,P,E);break;case 3:case 4:var W=S.stateNode.containerInfo,ce=Zj(f);Ub(f,ce,W);break;default:throw Error(n(161))}}catch(ye){Ds(f,f.return,ye)}f.flags&=-3}m&4096&&(f.flags&=-4097)}function bW(f,m,b){Nt=f,tE(f)}function tE(f,m,b){for(var S=(f.mode&1)!==0;Nt!==null;){var E=Nt,P=E.child;if(E.tag===22&&S){var W=E.memoizedState!==null||Vx;if(!W){var ce=E.alternate,ye=ce!==null&&ce.memoizedState!==null||Wr;ce=Vx;var Fe=Wr;if(Vx=W,(Wr=ye)&&!Fe)for(Nt=E;Nt!==null;)W=Nt,ye=W.child,W.tag===22&&W.memoizedState!==null?rE(E):ye!==null?(ye.return=W,Nt=ye):rE(E);for(;P!==null;)Nt=P,tE(P),P=P.sibling;Nt=E,Vx=ce,Wr=Fe}nE(f)}else(E.subtreeFlags&8772)!==0&&P!==null?(P.return=E,Nt=P):nE(f)}}function nE(f){for(;Nt!==null;){var m=Nt;if((m.flags&8772)!==0){var b=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Wr||Ux(5,m);break;case 1:var S=m.stateNode;if(m.flags&4&&!Wr)if(b===null)S.componentDidMount();else{var E=m.elementType===m.type?b.memoizedProps:Ha(m.type,b.memoizedProps);S.componentDidUpdate(E,b.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var P=m.updateQueue;P!==null&&sj(m,P,S);break;case 3:var W=m.updateQueue;if(W!==null){if(b=null,m.child!==null)switch(m.child.tag){case 5:b=m.child.stateNode;break;case 1:b=m.child.stateNode}sj(m,W,b)}break;case 5:var ce=m.stateNode;if(b===null&&m.flags&4){b=ce;var ye=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":ye.autoFocus&&b.focus();break;case"img":ye.src&&(b.src=ye.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var Fe=m.alternate;if(Fe!==null){var tt=Fe.memoizedState;if(tt!==null){var rt=tt.dehydrated;rt!==null&&ae(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Wr||m.flags&512&&Vb(m)}catch(Qe){Ds(m,m.return,Qe)}}if(m===f){Nt=null;break}if(b=m.sibling,b!==null){b.return=m.return,Nt=b;break}Nt=m.return}}function sE(f){for(;Nt!==null;){var m=Nt;if(m===f){Nt=null;break}var b=m.sibling;if(b!==null){b.return=m.return,Nt=b;break}Nt=m.return}}function rE(f){for(;Nt!==null;){var m=Nt;try{switch(m.tag){case 0:case 11:case 15:var b=m.return;try{Ux(4,m)}catch(ye){Ds(m,b,ye)}break;case 1:var S=m.stateNode;if(typeof S.componentDidMount=="function"){var E=m.return;try{S.componentDidMount()}catch(ye){Ds(m,E,ye)}}var P=m.return;try{Vb(m)}catch(ye){Ds(m,P,ye)}break;case 5:var W=m.return;try{Vb(m)}catch(ye){Ds(m,W,ye)}}}catch(ye){Ds(m,m.return,ye)}if(m===f){Nt=null;break}var ce=m.sibling;if(ce!==null){ce.return=m.return,Nt=ce;break}Nt=m.return}}var wW=Math.ceil,Wx=C.ReactCurrentDispatcher,Gb=C.ReactCurrentOwner,ma=C.ReactCurrentBatchConfig,jn=0,yr=null,qs=null,Rr=0,Qi=0,kh=hc(0),lr=0,Np=null,Fu=0,Gx=0,Hb=0,Sp=null,$i=null,Kb=0,Ch=1/0,Nl=null,Hx=!1,qb=null,yc=null,Kx=!1,vc=null,qx=0,kp=0,Xb=null,Xx=-1,Yx=0;function li(){return(jn&6)!==0?Qn():Xx!==-1?Xx:Xx=Qn()}function bc(f){return(f.mode&1)===0?1:(jn&2)!==0&&Rr!==0?Rr&-Rr:rW.transition!==null?(Yx===0&&(Yx=ih()),Yx):(f=kn,f!==0||(f=window.event,f=f===void 0?16:ct(f.type)),f)}function Xa(f,m,b,S){if(50<kp)throw kp=0,Xb=null,Error(n(185));Ua(f,b,S),((jn&2)===0||f!==yr)&&(f===yr&&((jn&2)===0&&(Gx|=b),lr===4&&wc(f,Rr)),Ai(f,S),b===1&&jn===0&&(m.mode&1)===0&&(Ch=Qn()+500,kx&&pc()))}function Ai(f,m){var b=f.callbackNode;rh(f,m);var S=Yi(f,f===yr?Rr:0);if(S===0)b!==null&&Jd(b),f.callbackNode=null,f.callbackPriority=0;else if(m=S&-S,f.callbackPriority!==m){if(b!=null&&Jd(b),m===1)f.tag===0?sW(aE.bind(null,f)):GI(aE.bind(null,f)),QU(function(){(jn&6)===0&&pc()}),b=null;else{switch(ac(S)){case 1:b=ul;break;case 4:b=ko;break;case 16:b=Xi;break;case 536870912:b=eh;break;default:b=Xi}b=pE(b,iE.bind(null,f))}f.callbackPriority=m,f.callbackNode=b}}function iE(f,m){if(Xx=-1,Yx=0,(jn&6)!==0)throw Error(n(327));var b=f.callbackNode;if(Th()&&f.callbackNode!==b)return null;var S=Yi(f,f===yr?Rr:0);if(S===0)return null;if((S&30)!==0||(S&f.expiredLanes)!==0||m)m=Zx(f,S);else{m=S;var E=jn;jn|=2;var P=lE();(yr!==f||Rr!==m)&&(Nl=null,Ch=Qn()+500,Lu(f,m));do try{kW();break}catch(ce){oE(f,ce)}while(!0);fb(),Wx.current=P,jn=E,qs!==null?m=0:(yr=null,Rr=0,m=lr)}if(m!==0){if(m===2&&(E=Iu(f),E!==0&&(S=E,m=Yb(f,E))),m===1)throw b=Np,Lu(f,0),wc(f,S),Ai(f,Qn()),b;if(m===6)wc(f,S);else{if(E=f.current.alternate,(S&30)===0&&!NW(E)&&(m=Zx(f,S),m===2&&(P=Iu(f),P!==0&&(S=P,m=Yb(f,P))),m===1))throw b=Np,Lu(f,0),wc(f,S),Ai(f,Qn()),b;switch(f.finishedWork=E,f.finishedLanes=S,m){case 0:case 1:throw Error(n(345));case 2:Bu(f,$i,Nl);break;case 3:if(wc(f,S),(S&130023424)===S&&(m=Kb+500-Qn(),10<m)){if(Yi(f,0)!==0)break;if(E=f.suspendedLanes,(E&S)!==S){li(),f.pingedLanes|=f.suspendedLanes&E;break}f.timeoutHandle=nb(Bu.bind(null,f,$i,Nl),m);break}Bu(f,$i,Nl);break;case 4:if(wc(f,S),(S&4194240)===S)break;for(m=f.eventTimes,E=-1;0<S;){var W=31-rs(S);P=1<<W,W=m[W],W>E&&(E=W),S&=~P}if(S=E,S=Qn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*wW(S/1960))-S,10<S){f.timeoutHandle=nb(Bu.bind(null,f,$i,Nl),S);break}Bu(f,$i,Nl);break;case 5:Bu(f,$i,Nl);break;default:throw Error(n(329))}}}return Ai(f,Qn()),f.callbackNode===b?iE.bind(null,f):null}function Yb(f,m){var b=Sp;return f.current.memoizedState.isDehydrated&&(Lu(f,m).flags|=256),f=Zx(f,m),f!==2&&(m=$i,$i=b,m!==null&&Zb(m)),f}function Zb(f){$i===null?$i=f:$i.push.apply($i,f)}function NW(f){for(var m=f;;){if(m.flags&16384){var b=m.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var S=0;S<b.length;S++){var E=b[S],P=E.getSnapshot;E=E.value;try{if(!Wa(P(),E))return!1}catch{return!1}}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function wc(f,m){for(m&=~Hb,m&=~Gx,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var b=31-rs(m),S=1<<b;f[b]=-1,m&=~S}}function aE(f){if((jn&6)!==0)throw Error(n(327));Th();var m=Yi(f,0);if((m&1)===0)return Ai(f,Qn()),null;var b=Zx(f,m);if(f.tag!==0&&b===2){var S=Iu(f);S!==0&&(m=S,b=Yb(f,S))}if(b===1)throw b=Np,Lu(f,0),wc(f,m),Ai(f,Qn()),b;if(b===6)throw Error(n(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,Bu(f,$i,Nl),Ai(f,Qn()),null}function Jb(f,m){var b=jn;jn|=1;try{return f(m)}finally{jn=b,jn===0&&(Ch=Qn()+500,kx&&pc())}}function Mu(f){vc!==null&&vc.tag===0&&(jn&6)===0&&Th();var m=jn;jn|=1;var b=ma.transition,S=kn;try{if(ma.transition=null,kn=1,f)return f()}finally{kn=S,ma.transition=b,jn=m,(jn&6)===0&&pc()}}function Qb(){Qi=kh.current,ds(kh)}function Lu(f,m){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==-1&&(f.timeoutHandle=-1,JU(b)),qs!==null)for(b=qs.return;b!==null;){var S=b;switch(lb(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Nx();break;case 3:wh(),ds(Ii),ds(zr),wb();break;case 5:vb(S);break;case 4:wh();break;case 13:ds(ks);break;case 19:ds(ks);break;case 10:pb(S.type._context);break;case 22:case 23:Qb()}b=b.return}if(yr=f,qs=f=Nc(f.current,null),Rr=Qi=m,lr=0,Np=null,Hb=Gx=Fu=0,$i=Sp=null,Pu!==null){for(m=0;m<Pu.length;m++)if(b=Pu[m],S=b.interleaved,S!==null){b.interleaved=null;var E=S.next,P=b.pending;if(P!==null){var W=P.next;P.next=E,S.next=W}b.pending=S}Pu=null}return f}function oE(f,m){do{var b=qs;try{if(fb(),Px.current=Mx,_x){for(var S=Cs.memoizedState;S!==null;){var E=S.queue;E!==null&&(E.pending=null),S=S.next}_x=!1}if(Ou=0,xr=or=Cs=null,gp=!1,xp=0,Gb.current=null,b===null||b.return===null){lr=1,Np=m,qs=null;break}e:{var P=f,W=b.return,ce=b,ye=m;if(m=Rr,ce.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Fe=ye,tt=ce,rt=tt.tag;if((tt.mode&1)===0&&(rt===0||rt===11||rt===15)){var Qe=tt.alternate;Qe?(tt.updateQueue=Qe.updateQueue,tt.memoizedState=Qe.memoizedState,tt.lanes=Qe.lanes):(tt.updateQueue=null,tt.memoizedState=null)}var wt=Rj(W);if(wt!==null){wt.flags&=-257,Dj(wt,W,ce,P,m),wt.mode&1&&Aj(P,Fe,m),m=wt,ye=Fe;var Tt=m.updateQueue;if(Tt===null){var Rt=new Set;Rt.add(ye),m.updateQueue=Rt}else Tt.add(ye);break e}else{if((m&1)===0){Aj(P,Fe,m),ew();break e}ye=Error(n(426))}}else if(ys&&ce.mode&1){var zs=Rj(W);if(zs!==null){(zs.flags&65536)===0&&(zs.flags|=256),Dj(zs,W,ce,P,m),db(Nh(ye,ce));break e}}P=ye=Nh(ye,ce),lr!==4&&(lr=2),Sp===null?Sp=[P]:Sp.push(P),P=W;do{switch(P.tag){case 3:P.flags|=65536,m&=-m,P.lanes|=m;var Ae=Ej(P,ye,m);nj(P,Ae);break e;case 1:ce=ye;var Se=P.type,_e=P.stateNode;if((P.flags&128)===0&&(typeof Se.getDerivedStateFromError=="function"||_e!==null&&typeof _e.componentDidCatch=="function"&&(yc===null||!yc.has(_e)))){P.flags|=65536,m&=-m,P.lanes|=m;var lt=$j(P,ce,m);nj(P,lt);break e}}P=P.return}while(P!==null)}uE(b)}catch(Pt){m=Pt,qs===b&&b!==null&&(qs=b=b.return);continue}break}while(!0)}function lE(){var f=Wx.current;return Wx.current=Mx,f===null?Mx:f}function ew(){(lr===0||lr===3||lr===2)&&(lr=4),yr===null||(Fu&268435455)===0&&(Gx&268435455)===0||wc(yr,Rr)}function Zx(f,m){var b=jn;jn|=2;var S=lE();(yr!==f||Rr!==m)&&(Nl=null,Lu(f,m));do try{SW();break}catch(E){oE(f,E)}while(!0);if(fb(),jn=b,Wx.current=S,qs!==null)throw Error(n(261));return yr=null,Rr=0,lr}function SW(){for(;qs!==null;)cE(qs)}function kW(){for(;qs!==null&&!sc();)cE(qs)}function cE(f){var m=fE(f.alternate,f,Qi);f.memoizedProps=f.pendingProps,m===null?uE(f):qs=m,Gb.current=null}function uE(f){var m=f;do{var b=m.alternate;if(f=m.return,(m.flags&32768)===0){if(b=gW(b,m,Qi),b!==null){qs=b;return}}else{if(b=xW(b,m),b!==null){b.flags&=32767,qs=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{lr=6,qs=null;return}}if(m=m.sibling,m!==null){qs=m;return}qs=m=f}while(m!==null);lr===0&&(lr=5)}function Bu(f,m,b){var S=kn,E=ma.transition;try{ma.transition=null,kn=1,CW(f,m,b,S)}finally{ma.transition=E,kn=S}return null}function CW(f,m,b,S){do Th();while(vc!==null);if((jn&6)!==0)throw Error(n(327));b=f.finishedWork;var E=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(n(177));f.callbackNode=null,f.callbackPriority=0;var P=b.lanes|b.childLanes;if(ju(f,P),f===yr&&(qs=yr=null,Rr=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Kx||(Kx=!0,pE(Xi,function(){return Th(),null})),P=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||P){P=ma.transition,ma.transition=null;var W=kn;kn=1;var ce=jn;jn|=4,Gb.current=null,vW(f,b),eE(b,f),GU(eb),le=!!Qv,eb=Qv=null,f.current=b,bW(b),Qd(),jn=ce,kn=W,ma.transition=P}else f.current=b;if(Kx&&(Kx=!1,vc=f,qx=E),P=f.pendingLanes,P===0&&(yc=null),Tu(b.stateNode),Ai(f,Qn()),m!==null)for(S=f.onRecoverableError,b=0;b<m.length;b++)E=m[b],S(E.value,{componentStack:E.stack,digest:E.digest});if(Hx)throw Hx=!1,f=qb,qb=null,f;return(qx&1)!==0&&f.tag!==0&&Th(),P=f.pendingLanes,(P&1)!==0?f===Xb?kp++:(kp=0,Xb=f):kp=0,pc(),null}function Th(){if(vc!==null){var f=ac(qx),m=ma.transition,b=kn;try{if(ma.transition=null,kn=16>f?16:f,vc===null)var S=!1;else{if(f=vc,vc=null,qx=0,(jn&6)!==0)throw Error(n(331));var E=jn;for(jn|=4,Nt=f.current;Nt!==null;){var P=Nt,W=P.child;if((Nt.flags&16)!==0){var ce=P.deletions;if(ce!==null){for(var ye=0;ye<ce.length;ye++){var Fe=ce[ye];for(Nt=Fe;Nt!==null;){var tt=Nt;switch(tt.tag){case 0:case 11:case 15:wp(8,tt,P)}var rt=tt.child;if(rt!==null)rt.return=tt,Nt=rt;else for(;Nt!==null;){tt=Nt;var Qe=tt.sibling,wt=tt.return;if(Xj(tt),tt===Fe){Nt=null;break}if(Qe!==null){Qe.return=wt,Nt=Qe;break}Nt=wt}}}var Tt=P.alternate;if(Tt!==null){var Rt=Tt.child;if(Rt!==null){Tt.child=null;do{var zs=Rt.sibling;Rt.sibling=null,Rt=zs}while(Rt!==null)}}Nt=P}}if((P.subtreeFlags&2064)!==0&&W!==null)W.return=P,Nt=W;else e:for(;Nt!==null;){if(P=Nt,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:wp(9,P,P.return)}var Ae=P.sibling;if(Ae!==null){Ae.return=P.return,Nt=Ae;break e}Nt=P.return}}var Se=f.current;for(Nt=Se;Nt!==null;){W=Nt;var _e=W.child;if((W.subtreeFlags&2064)!==0&&_e!==null)_e.return=W,Nt=_e;else e:for(W=Se;Nt!==null;){if(ce=Nt,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:Ux(9,ce)}}catch(Pt){Ds(ce,ce.return,Pt)}if(ce===W){Nt=null;break e}var lt=ce.sibling;if(lt!==null){lt.return=ce.return,Nt=lt;break e}Nt=ce.return}}if(jn=E,pc(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(rc,f)}catch{}S=!0}return S}finally{kn=b,ma.transition=m}}return!1}function dE(f,m,b){m=Nh(b,m),m=Ej(f,m,1),f=gc(f,m,1),m=li(),f!==null&&(Ua(f,1,m),Ai(f,m))}function Ds(f,m,b){if(f.tag===3)dE(f,f,b);else for(;m!==null;){if(m.tag===3){dE(m,f,b);break}else if(m.tag===1){var S=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(yc===null||!yc.has(S))){f=Nh(b,f),f=$j(m,f,1),m=gc(m,f,1),f=li(),m!==null&&(Ua(m,1,f),Ai(m,f));break}}m=m.return}}function TW(f,m,b){var S=f.pingCache;S!==null&&S.delete(m),m=li(),f.pingedLanes|=f.suspendedLanes&b,yr===f&&(Rr&b)===b&&(lr===4||lr===3&&(Rr&130023424)===Rr&&500>Qn()-Kb?Lu(f,0):Hb|=b),Ai(f,m)}function hE(f,m){m===0&&((f.mode&1)===0?m=1:(m=ic,ic<<=1,(ic&130023424)===0&&(ic=4194304)));var b=li();f=vl(f,m),f!==null&&(Ua(f,m,b),Ai(f,b))}function IW(f){var m=f.memoizedState,b=0;m!==null&&(b=m.retryLane),hE(f,b)}function jW(f,m){var b=0;switch(f.tag){case 13:var S=f.stateNode,E=f.memoizedState;E!==null&&(b=E.retryLane);break;case 19:S=f.stateNode;break;default:throw Error(n(314))}S!==null&&S.delete(m),hE(f,b)}var fE;fE=function(f,m,b){if(f!==null)if(f.memoizedProps!==m.pendingProps||Ii.current)Ei=!0;else{if((f.lanes&b)===0&&(m.flags&128)===0)return Ei=!1,mW(f,m,b);Ei=(f.flags&131072)!==0}else Ei=!1,ys&&(m.flags&1048576)!==0&&HI(m,Tx,m.index);switch(m.lanes=0,m.tag){case 2:var S=m.type;zx(f,m),f=m.pendingProps;var E=ph(m,zr.current);bh(m,b),E=kb(null,m,S,f,E,b);var P=Cb();return m.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ji(S)?(P=!0,Sx(m)):P=!1,m.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,xb(m),E.updater=Lx,m.stateNode=E,E._reactInternals=m,Ab(m,S,f,b),m=_b(null,m,S,!0,P,b)):(m.tag=0,ys&&P&&ob(m),oi(null,m,E,b),m=m.child),m;case 16:S=m.elementType;e:{switch(zx(f,m),f=m.pendingProps,E=S._init,S=E(S._payload),m.type=S,E=m.tag=$W(S),f=Ha(S,f),E){case 0:m=Pb(null,m,S,f,b);break e;case 1:m=Lj(null,m,S,f,b);break e;case 11:m=Pj(null,m,S,f,b);break e;case 14:m=_j(null,m,S,Ha(S.type,f),b);break e}throw Error(n(306,S,""))}return m;case 0:return S=m.type,E=m.pendingProps,E=m.elementType===S?E:Ha(S,E),Pb(f,m,S,E,b);case 1:return S=m.type,E=m.pendingProps,E=m.elementType===S?E:Ha(S,E),Lj(f,m,S,E,b);case 3:e:{if(Bj(m),f===null)throw Error(n(387));S=m.pendingProps,P=m.memoizedState,E=P.element,tj(f,m),Rx(m,S,null,b);var W=m.memoizedState;if(S=W.element,P.isDehydrated)if(P={element:S,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},m.updateQueue.baseState=P,m.memoizedState=P,m.flags&256){E=Nh(Error(n(423)),m),m=zj(f,m,S,b,E);break e}else if(S!==E){E=Nh(Error(n(424)),m),m=zj(f,m,S,b,E);break e}else for(Ji=dc(m.stateNode.containerInfo.firstChild),Zi=m,ys=!0,Ga=null,b=QI(m,null,S,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(xh(),S===E){m=wl(f,m,b);break e}oi(f,m,S,b)}m=m.child}return m;case 5:return rj(m),f===null&&ub(m),S=m.type,E=m.pendingProps,P=f!==null?f.memoizedProps:null,W=E.children,tb(S,E)?W=null:P!==null&&tb(S,P)&&(m.flags|=32),Mj(f,m),oi(f,m,W,b),m.child;case 6:return f===null&&ub(m),null;case 13:return Vj(f,m,b);case 4:return yb(m,m.stateNode.containerInfo),S=m.pendingProps,f===null?m.child=yh(m,null,S,b):oi(f,m,S,b),m.child;case 11:return S=m.type,E=m.pendingProps,E=m.elementType===S?E:Ha(S,E),Pj(f,m,S,E,b);case 7:return oi(f,m,m.pendingProps,b),m.child;case 8:return oi(f,m,m.pendingProps.children,b),m.child;case 12:return oi(f,m,m.pendingProps.children,b),m.child;case 10:e:{if(S=m.type._context,E=m.pendingProps,P=m.memoizedProps,W=E.value,is(Ex,S._currentValue),S._currentValue=W,P!==null)if(Wa(P.value,W)){if(P.children===E.children&&!Ii.current){m=wl(f,m,b);break e}}else for(P=m.child,P!==null&&(P.return=m);P!==null;){var ce=P.dependencies;if(ce!==null){W=P.child;for(var ye=ce.firstContext;ye!==null;){if(ye.context===S){if(P.tag===1){ye=bl(-1,b&-b),ye.tag=2;var Fe=P.updateQueue;if(Fe!==null){Fe=Fe.shared;var tt=Fe.pending;tt===null?ye.next=ye:(ye.next=tt.next,tt.next=ye),Fe.pending=ye}}P.lanes|=b,ye=P.alternate,ye!==null&&(ye.lanes|=b),mb(P.return,b,m),ce.lanes|=b;break}ye=ye.next}}else if(P.tag===10)W=P.type===m.type?null:P.child;else if(P.tag===18){if(W=P.return,W===null)throw Error(n(341));W.lanes|=b,ce=W.alternate,ce!==null&&(ce.lanes|=b),mb(W,b,m),W=P.sibling}else W=P.child;if(W!==null)W.return=P;else for(W=P;W!==null;){if(W===m){W=null;break}if(P=W.sibling,P!==null){P.return=W.return,W=P;break}W=W.return}P=W}oi(f,m,E.children,b),m=m.child}return m;case 9:return E=m.type,S=m.pendingProps.children,bh(m,b),E=fa(E),S=S(E),m.flags|=1,oi(f,m,S,b),m.child;case 14:return S=m.type,E=Ha(S,m.pendingProps),E=Ha(S.type,E),_j(f,m,S,E,b);case 15:return Oj(f,m,m.type,m.pendingProps,b);case 17:return S=m.type,E=m.pendingProps,E=m.elementType===S?E:Ha(S,E),zx(f,m),m.tag=1,ji(S)?(f=!0,Sx(m)):f=!1,bh(m,b),Ij(m,S,E),Ab(m,S,E,b),_b(null,m,S,!0,f,b);case 19:return Wj(f,m,b);case 22:return Fj(f,m,b)}throw Error(n(156,m.tag))};function pE(f,m){return Zd(f,m)}function EW(f,m,b,S){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ga(f,m,b,S){return new EW(f,m,b,S)}function tw(f){return f=f.prototype,!(!f||!f.isReactComponent)}function $W(f){if(typeof f=="function")return tw(f)?1:0;if(f!=null){if(f=f.$$typeof,f===q)return 11;if(f===J)return 14}return 2}function Nc(f,m){var b=f.alternate;return b===null?(b=ga(f.tag,m,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=m,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,m=f.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function Jx(f,m,b,S,E,P){var W=2;if(S=f,typeof f=="function")tw(f)&&(W=1);else if(typeof f=="string")W=5;else e:switch(f){case _:return zu(b.children,E,P,m);case A:W=8,E|=8;break;case O:return f=ga(12,b,m,E|2),f.elementType=O,f.lanes=P,f;case V:return f=ga(13,b,m,E),f.elementType=V,f.lanes=P,f;case ne:return f=ga(19,b,m,E),f.elementType=ne,f.lanes=P,f;case te:return Qx(b,E,P,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case L:W=10;break e;case D:W=9;break e;case q:W=11;break e;case J:W=14;break e;case ee:W=16,S=null;break e}throw Error(n(130,f==null?f:typeof f,""))}return m=ga(W,b,m,E),m.elementType=f,m.type=S,m.lanes=P,m}function zu(f,m,b,S){return f=ga(7,f,S,m),f.lanes=b,f}function Qx(f,m,b,S){return f=ga(22,f,S,m),f.elementType=te,f.lanes=b,f.stateNode={isHidden:!1},f}function nw(f,m,b){return f=ga(6,f,null,m),f.lanes=b,f}function sw(f,m,b){return m=ga(4,f.children!==null?f.children:[],f.key,m),m.lanes=b,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function AW(f,m,b,S,E){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=S,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function rw(f,m,b,S,E,P,W,ce,ye){return f=new AW(f,m,b,ce,ye),m===1?(m=1,P===!0&&(m|=8)):m=0,P=ga(3,null,null,m),f.current=P,P.stateNode=f,P.memoizedState={element:S,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},xb(P),f}function RW(f,m,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:S==null?null:""+S,children:f,containerInfo:m,implementation:b}}function mE(f){if(!f)return fc;f=f._reactInternals;e:{if(za(f)!==f||f.tag!==1)throw Error(n(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ji(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(n(171))}if(f.tag===1){var b=f.type;if(ji(b))return UI(f,b,m)}return m}function gE(f,m,b,S,E,P,W,ce,ye){return f=rw(b,S,!0,f,E,P,W,ce,ye),f.context=mE(null),b=f.current,S=li(),E=bc(b),P=bl(S,E),P.callback=m??null,gc(b,P,E),f.current.lanes=E,Ua(f,E,S),Ai(f,S),f}function e1(f,m,b,S){var E=m.current,P=li(),W=bc(E);return b=mE(b),m.context===null?m.context=b:m.pendingContext=b,m=bl(P,W),m.payload={element:f},S=S===void 0?null:S,S!==null&&(m.callback=S),f=gc(E,m,W),f!==null&&(Xa(f,E,W,P),Ax(f,E,W)),W}function t1(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function xE(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<m?b:m}}function iw(f,m){xE(f,m),(f=f.alternate)&&xE(f,m)}function DW(){return null}var yE=typeof reportError=="function"?reportError:function(f){console.error(f)};function aw(f){this._internalRoot=f}n1.prototype.render=aw.prototype.render=function(f){var m=this._internalRoot;if(m===null)throw Error(n(409));e1(f,m,null,null)},n1.prototype.unmount=aw.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var m=f.containerInfo;Mu(function(){e1(null,f,null,null)}),m[ml]=null}};function n1(f){this._internalRoot=f}n1.prototype.unstable_scheduleHydration=function(f){if(f){var m=$();f={blockedOn:null,target:f,priority:m};for(var b=0;b<mt.length&&m!==0&&m<mt[b].priority;b++);mt.splice(b,0,f),b===0&&St(f)}};function ow(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s1(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function vE(){}function PW(f,m,b,S,E){if(E){if(typeof S=="function"){var P=S;S=function(){var Fe=t1(W);P.call(Fe)}}var W=gE(m,S,f,0,null,!1,!1,"",vE);return f._reactRootContainer=W,f[ml]=W.current,lp(f.nodeType===8?f.parentNode:f),Mu(),W}for(;E=f.lastChild;)f.removeChild(E);if(typeof S=="function"){var ce=S;S=function(){var Fe=t1(ye);ce.call(Fe)}}var ye=rw(f,0,!1,null,null,!1,!1,"",vE);return f._reactRootContainer=ye,f[ml]=ye.current,lp(f.nodeType===8?f.parentNode:f),Mu(function(){e1(m,ye,b,S)}),ye}function r1(f,m,b,S,E){var P=b._reactRootContainer;if(P){var W=P;if(typeof E=="function"){var ce=E;E=function(){var ye=t1(W);ce.call(ye)}}e1(m,W,f,E)}else W=PW(b,m,f,E,S);return t1(W)}oc=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var b=dl(m.pendingLanes);b!==0&&(fl(m,b|1),Ai(m,Qn()),(jn&6)===0&&(Ch=Qn()+500,pc()))}break;case 13:Mu(function(){var S=vl(f,1);if(S!==null){var E=li();Xa(S,f,1,E)}}),iw(f,1)}},lc=function(f){if(f.tag===13){var m=vl(f,134217728);if(m!==null){var b=li();Xa(m,f,134217728,b)}iw(f,134217728)}},Eu=function(f){if(f.tag===13){var m=bc(f),b=vl(f,m);if(b!==null){var S=li();Xa(b,f,m,S)}iw(f,m)}},$=function(){return kn},M=function(f,m){var b=kn;try{return kn=f,m()}finally{kn=b}},qi=function(f,m,b){switch(m){case"input":if(bt(f,b),m=b.name,b.type==="radio"&&m!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<b.length;m++){var S=b[m];if(S!==f&&S.form===f.form){var E=wx(S);if(!E)throw Error(n(90));Ye(S),bt(S,E)}}}break;case"textarea":Gn(f,b);break;case"select":m=b.value,m!=null&&Xt(f,!!b.multiple,m,!1)}},ss=Jb,xs=Mu;var _W={usingClientEntryPoint:!1,Events:[dp,hh,wx,dt,ns,Jb]},Cp={findFiberByHostInstance:$u,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OW={bundleType:Cp.bundleType,version:Cp.version,rendererPackageName:Cp.rendererPackageName,rendererConfig:Cp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=cl(f),f===null?null:f.stateNode},findFiberByHostInstance:Cp.findFiberByHostInstance||DW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var i1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!i1.isDisabled&&i1.supportsFiber)try{rc=i1.inject(OW),ii=i1}catch{}}return Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_W,Ri.createPortal=function(f,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ow(m))throw Error(n(200));return RW(f,m,null,b)},Ri.createRoot=function(f,m){if(!ow(f))throw Error(n(299));var b=!1,S="",E=yE;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(S=m.identifierPrefix),m.onRecoverableError!==void 0&&(E=m.onRecoverableError)),m=rw(f,1,!1,null,null,b,!1,S,E),f[ml]=m.current,lp(f.nodeType===8?f.parentNode:f),new aw(m)},Ri.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=cl(m),f=f===null?null:f.stateNode,f},Ri.flushSync=function(f){return Mu(f)},Ri.hydrate=function(f,m,b){if(!s1(m))throw Error(n(200));return r1(null,f,m,!0,b)},Ri.hydrateRoot=function(f,m,b){if(!ow(f))throw Error(n(405));var S=b!=null&&b.hydratedSources||null,E=!1,P="",W=yE;if(b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(P=b.identifierPrefix),b.onRecoverableError!==void 0&&(W=b.onRecoverableError)),m=gE(m,null,f,1,b??null,E,!1,P,W),f[ml]=m.current,lp(f),S)for(f=0;f<S.length;f++)b=S[f],E=b._getVersion,E=E(b._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[b,E]:m.mutableSourceEagerHydrationData.push(b,E);return new n1(m)},Ri.render=function(f,m,b){if(!s1(m))throw Error(n(200));return r1(null,f,m,!1,b)},Ri.unmountComponentAtNode=function(f){if(!s1(f))throw Error(n(40));return f._reactRootContainer?(Mu(function(){r1(null,null,f,!1,function(){f._reactRootContainer=null,f[ml]=null})}),!0):!1},Ri.unstable_batchedUpdates=Jb,Ri.unstable_renderSubtreeIntoContainer=function(f,m,b,S){if(!s1(b))throw Error(n(200));if(f==null||f._reactInternals===void 0)throw Error(n(38));return r1(f,m,b,!1,S)},Ri.version="18.3.1-next-f1338f8080-20240426",Ri}var jE;function pD(){if(jE)return uw.exports;jE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),uw.exports=WW(),uw.exports}var EE;function GW(){if(EE)return a1;EE=1;var t=pD();return a1.createRoot=t.createRoot,a1.hydrateRoot=t.hydrateRoot,a1}var HW=GW(),T=hy();const et=I4(T),j4=fD({__proto__:null,default:et},[T]),$E="http://localhost:5001/api";class KW{accessToken=null;refreshToken=null;constructor(){this.loadTokens()}loadTokens(){this.accessToken=localStorage.getItem("skinpai_access_token"),this.refreshToken=localStorage.getItem("skinpai_refresh_token")}setTokens(e,n){this.accessToken=e,this.refreshToken=n??null,localStorage.setItem("skinpai_access_token",e),n?localStorage.setItem("skinpai_refresh_token",n):localStorage.removeItem("skinpai_refresh_token")}clearTokens(){this.accessToken=null,this.refreshToken=null,localStorage.removeItem("skinpai_access_token"),localStorage.removeItem("skinpai_refresh_token")}isAuthenticated(){return!!this.accessToken}async request(e,n={}){const s=`${$E}${e}`,r={"Content-Type":"application/json",...n.headers};this.accessToken&&(r.Authorization=`Bearer ${this.accessToken}`);try{const i=await fetch(s,{...n,headers:r});if(i.status===401&&this.refreshToken)if(await this.refreshAccessToken()){r.Authorization=`Bearer ${this.accessToken}`;const c=await fetch(s,{...n,headers:r});if(!c.ok){const d=await c.json().catch(()=>({}));return{data:null,error:d.title||d.detail||"Request failed"}}return{data:await c.json().catch(()=>null)}}else return this.clearTokens(),window.dispatchEvent(new CustomEvent("auth:logout")),{data:null,error:"Session expired. Please log in again."};if(!i.ok){const l=await i.json().catch(()=>({}));return{data:null,error:l.title||l.detail||`Request failed: ${i.status}`}}return i.status===204?{data:null}:{data:await i.json().catch(()=>null)}}catch(i){return console.error("API request failed:",i),{data:null,error:"Network error. Please check your connection."}}}async refreshAccessToken(){if(!this.refreshToken)return!1;try{const e=await fetch(`${$E}/Auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:this.refreshToken})});if(e.ok){const n=await e.json();return this.setTokens(n.accessToken,n.refreshToken),!0}return!1}catch{return!1}}async register(e){const n=await this.request("/Auth/register",{method:"POST",body:JSON.stringify(e)});return n.data?.accessToken&&this.setTokens(n.data.accessToken,n.data.refreshToken),n}async login(e,n){const s=await this.request("/Auth/login",{method:"POST",body:JSON.stringify({email:e,password:n})});return s.data?.accessToken&&this.setTokens(s.data.accessToken,s.data.refreshToken),s}async guestLogin(){const e=await this.request("/Auth/guest",{method:"POST"});return e.data?.accessToken&&this.setTokens(e.data.accessToken,void 0),e}async socialLogin(e){const n=await this.request("/Auth/social",{method:"POST",body:JSON.stringify(e)});return n.data?.accessToken&&this.setTokens(n.data.accessToken,n.data.refreshToken),n}async logout(){await this.request("/Auth/logout",{method:"POST"}),this.clearTokens()}async getCurrentUser(){return this.request("/Users/me")}async updateProfile(e){return this.request("/Users/me",{method:"PUT",body:JSON.stringify(e)})}async getMemberDashboard(){return this.request("/Users/me/dashboard")}async getProDashboard(){return this.request("/Users/me/pro-dashboard")}async getSkinProfile(){return this.request("/Users/me/skin-profile")}async updateSkinProfile(e){return this.request("/Users/me/skin-profile",{method:"PUT",body:JSON.stringify(e)})}async uploadProfileImage(e){return this.request("/Users/me/profile-image",{method:"POST",body:JSON.stringify({imageBase64:e})})}async createScan(e,n="Full",s){return this.request("/Scans",{method:"POST",body:JSON.stringify({imageBase64:e,scanType:n,notes:s})})}async getScans(){return this.request("/Scans")}async getScan(e){return this.request(`/Scans/${e}`)}async getScanAnalysis(e){return this.request(`/Scans/${e}/analysis`)}async getDailyUsage(){return this.request("/Scans/usage")}async canScan(){return this.request("/Scans/can-scan")}async getSkinProgress(e=30){return this.request(`/Scans/progress?days=${e}`)}async getProducts(e){const n=new URLSearchParams;e&&Object.entries(e).forEach(([r,i])=>{i!==void 0&&n.append(r,String(i))});const s=n.toString();return this.request(`/Products${s?"?"+s:""}`)}async getProduct(e){return this.request(`/Products/${e}`)}async getCategories(){return this.request("/Products/categories")}async getBrands(){return this.request("/Products/brands")}async getDistributors(){return this.request("/Products/distributors")}async getFavorites(){return this.request("/Products/favorites")}async addFavorite(e){return this.request(`/Products/favorites/${e}`,{method:"POST"})}async removeFavorite(e){return this.request(`/Products/favorites/${e}`,{method:"DELETE"})}async getBundles(){return this.request("/Products/bundles")}async getBundle(e){return this.request(`/Products/bundles/${e}`)}async getScanRecommendations(e){return this.request(`/Products/recommendations/scan/${e}`)}async getPersonalizedRecommendations(){return this.request("/Products/recommendations")}async getRoutines(){return this.request("/Routines")}async createRoutine(e){return this.request("/Routines",{method:"POST",body:JSON.stringify(e)})}async updateRoutine(e,n){return this.request(`/Routines/${e}`,{method:"PUT",body:JSON.stringify(n)})}async deleteRoutine(e){return this.request(`/Routines/${e}`,{method:"DELETE"})}async completeRoutine(e,n){return this.request(`/Routines/${e}/complete`,{method:"POST",body:JSON.stringify({notes:n})})}async getReminders(){return this.request("/Routines/reminders")}async createReminder(e){return this.request("/Routines/reminders",{method:"POST",body:JSON.stringify(e)})}async updateReminder(e,n){return this.request(`/Routines/reminders/${e}`,{method:"PUT",body:JSON.stringify(n)})}async deleteReminder(e){return this.request(`/Routines/reminders/${e}`,{method:"DELETE"})}async getCommunityFeed(e=1,n=20,s){let r=`/Community/feed?page=${e}&pageSize=${n}`;return s&&(r+=`&stationId=${s}`),this.request(r)}async getPost(e){return this.request(`/Community/posts/${e}`)}async createPost(e){return this.request("/Community/posts",{method:"POST",body:JSON.stringify(e)})}async likePost(e){return this.request(`/Community/posts/${e}/like`,{method:"POST"})}async unlikePost(e){return this.request(`/Community/posts/${e}/unlike`,{method:"POST"})}async getComments(e){return this.request(`/Community/posts/${e}/comments`)}async addComment(e,n,s){return this.request(`/Community/posts/${e}/comments`,{method:"POST",body:JSON.stringify({content:n,parentCommentId:s})})}async getStations(){return this.request("/Community/stations")}async getStation(e){return this.request(`/Community/stations/${e}`)}async followStation(e){return this.request(`/Community/stations/${e}/follow`,{method:"POST"})}async unfollowStation(e){return this.request(`/Community/stations/${e}/unfollow`,{method:"POST"})}async getTopInfluencers(){return this.request("/Community/influencers/top")}async getCampaigns(){return this.request("/Community/campaigns")}async getCommunityStats(){return this.request("/Community/stats")}async joinCampaign(e){return this.request(`/Community/campaigns/${e}/join`,{method:"POST"})}async getPlans(){return this.request("/Subscriptions/plans")}async subscribe(e,n){return this.request("/Subscriptions/subscribe",{method:"POST",body:JSON.stringify({planId:e,paymentMethodId:n})})}async getCurrentSubscription(){return this.request("/Subscriptions/current")}async cancelSubscription(){return this.request("/Subscriptions/cancel",{method:"POST"})}async getWalletInfo(){return this.request("/Subscriptions/wallet")}async addFunds(e,n){return this.request("/Subscriptions/wallet/add-funds",{method:"POST",body:JSON.stringify({amount:e,paymentMethodId:n})})}async getNotifications(e=!1){return this.request(`/Notifications?unreadOnly=${e}`)}async markNotificationRead(e){return this.request(`/Notifications/${e}/read`,{method:"PUT"})}async markAllNotificationsRead(){return this.request("/Notifications/read-all",{method:"PUT"})}async getAchievements(){return this.request("/Notifications/achievements")}async getConversations(){return this.request("/Chat/conversations")}async getMessages(e){return this.request(`/Chat/conversations/${e}/messages`)}async sendMessage(e,n,s){return this.request("/Chat/messages",{method:"POST",body:JSON.stringify({receiverId:e,content:n,mediaBase64:s})})}async markMessagesRead(e){return this.request(`/Chat/conversations/${e}/read`,{method:"PUT"})}}const Ln=new KW;function AE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Xl(...t){return e=>{let n=!1;const s=t.map(r=>{const i=AE(r,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():AE(t[r],null)}}}}function qt(...t){return T.useCallback(Xl(...t),t)}var qW=Symbol.for("react.lazy"),a0=j4[" use ".trim().toString()];function XW(t){return typeof t=="object"&&t!==null&&"then"in t}function mD(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===qW&&"_payload"in t&&XW(t._payload)}function Dm(t){const e=YW(t),n=T.forwardRef((s,r)=>{let{children:i,...a}=s;mD(i)&&typeof a0=="function"&&(i=a0(i._payload));const l=T.Children.toArray(i),c=l.find(JW);if(c){const u=c.props.children,d=l.map(h=>h===c?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return o.jsx(e,{...a,ref:r,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return o.jsx(e,{...a,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}var gD=Dm("Slot");function YW(t){const e=T.forwardRef((n,s)=>{let{children:r,...i}=n;if(mD(r)&&typeof a0=="function"&&(r=a0(r._payload)),T.isValidElement(r)){const a=eG(r),l=QW(i,r.props);return r.type!==T.Fragment&&(l.ref=s?Xl(s,a):a),T.cloneElement(r,l)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ZW=Symbol("radix.slottable");function JW(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ZW}function QW(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function eG(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function xD(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=xD(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function yD(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=xD(t))&&(s&&(s+=" "),s+=e);return s}const RE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,DE=yD,E4=(t,e)=>n=>{var s;if(e?.variants==null)return DE(t,n?.class,n?.className);const{variants:r,defaultVariants:i}=e,a=Object.keys(r).map(u=>{const d=n?.[u],h=i?.[u];if(d===null)return null;const p=RE(d)||RE(h);return r[u][p]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:p,...g}=d;return Object.entries(g).every(x=>{let[y,v]=x;return Array.isArray(v)?v.includes({...i,...l}[y]):{...i,...l}[y]===v})?[...u,h,p]:u},[]);return DE(t,a,c,n?.class,n?.className)},tG=(t,e)=>{const n=new Array(t.length+e.length);for(let s=0;s<t.length;s++)n[s]=t[s];for(let s=0;s<e.length;s++)n[t.length+s]=e[s];return n},nG=(t,e)=>({classGroupId:t,validator:e}),vD=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),o0="-",PE=[],sG="arbitrary..",rG=t=>{const e=aG(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return iG(a);const l=a.split(o0),c=l[0]===""&&l.length>1?1:0;return bD(l,c,e)},getConflictingClassGroupIds:(a,l)=>{if(l){const c=s[a],u=n[a];return c?u?tG(u,c):c:u||PE}return n[a]||PE}}},bD=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const r=t[e],i=n.nextPart.get(r);if(i){const u=bD(t,e+1,i);if(u)return u}const a=n.validators;if(a===null)return;const l=e===0?t.join(o0):t.slice(e).join(o0),c=a.length;for(let u=0;u<c;u++){const d=a[u];if(d.validator(l))return d.classGroupId}},iG=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),s=e.slice(0,n);return s?sG+s:void 0})(),aG=t=>{const{theme:e,classGroups:n}=t;return oG(n,e)},oG=(t,e)=>{const n=vD();for(const s in t){const r=t[s];$4(r,n,s,e)}return n},$4=(t,e,n,s)=>{const r=t.length;for(let i=0;i<r;i++){const a=t[i];lG(a,e,n,s)}},lG=(t,e,n,s)=>{if(typeof t=="string"){cG(t,e,n);return}if(typeof t=="function"){uG(t,e,n,s);return}dG(t,e,n,s)},cG=(t,e,n)=>{const s=t===""?e:wD(e,t);s.classGroupId=n},uG=(t,e,n,s)=>{if(hG(t)){$4(t(s),e,n,s);return}e.validators===null&&(e.validators=[]),e.validators.push(nG(n,t))},dG=(t,e,n,s)=>{const r=Object.entries(t),i=r.length;for(let a=0;a<i;a++){const[l,c]=r[a];$4(c,wD(e,l),n,s)}},wD=(t,e)=>{let n=t;const s=e.split(o0),r=s.length;for(let i=0;i<r;i++){const a=s[i];let l=n.nextPart.get(a);l||(l=vD(),n.nextPart.set(a,l)),n=l}return n},hG=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,fG=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),s=Object.create(null);const r=(i,a)=>{n[i]=a,e++,e>t&&(e=0,s=n,n=Object.create(null))};return{get(i){let a=n[i];if(a!==void 0)return a;if((a=s[i])!==void 0)return r(i,a),a},set(i,a){i in n?n[i]=a:r(i,a)}}},kN="!",_E=":",pG=[],OE=(t,e,n,s,r)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:s,isExternal:r}),mG=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=r=>{const i=[];let a=0,l=0,c=0,u;const d=r.length;for(let y=0;y<d;y++){const v=r[y];if(a===0&&l===0){if(v===_E){i.push(r.slice(c,y)),c=y+1;continue}if(v==="/"){u=y;continue}}v==="["?a++:v==="]"?a--:v==="("?l++:v===")"&&l--}const h=i.length===0?r:r.slice(c);let p=h,g=!1;h.endsWith(kN)?(p=h.slice(0,-1),g=!0):h.startsWith(kN)&&(p=h.slice(1),g=!0);const x=u&&u>c?u-c:void 0;return OE(i,g,p,x)};if(e){const r=e+_E,i=s;s=a=>a.startsWith(r)?i(a.slice(r.length)):OE(pG,!1,a,void 0,!0)}if(n){const r=s;s=i=>n({className:i,parseClassName:r})}return s},gG=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,s)=>{e.set(n,1e6+s)}),n=>{const s=[];let r=[];for(let i=0;i<n.length;i++){const a=n[i],l=a[0]==="[",c=e.has(a);l||c?(r.length>0&&(r.sort(),s.push(...r),r=[]),s.push(a)):r.push(a)}return r.length>0&&(r.sort(),s.push(...r)),s}},xG=t=>({cache:fG(t.cacheSize),parseClassName:mG(t),sortModifiers:gG(t),...rG(t)}),yG=/\s+/,vG=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:i}=e,a=[],l=t.trim().split(yG);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:h,modifiers:p,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:y}=n(d);if(h){c=d+(c.length>0?" "+c:c);continue}let v=!!y,w=s(v?x.substring(0,y):x);if(!w){if(!v){c=d+(c.length>0?" "+c:c);continue}if(w=s(x),!w){c=d+(c.length>0?" "+c:c);continue}v=!1}const N=p.length===0?"":p.length===1?p[0]:i(p).join(":"),k=g?N+kN:N,C=k+w;if(a.indexOf(C)>-1)continue;a.push(C);const j=r(w,v);for(let R=0;R<j.length;++R){const _=j[R];a.push(k+_)}c=d+(c.length>0?" "+c:c)}return c},bG=(...t)=>{let e=0,n,s,r="";for(;e<t.length;)(n=t[e++])&&(s=ND(n))&&(r&&(r+=" "),r+=s);return r},ND=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=ND(t[s]))&&(n&&(n+=" "),n+=e);return n},wG=(t,...e)=>{let n,s,r,i;const a=c=>{const u=e.reduce((d,h)=>h(d),t());return n=xG(u),s=n.cache.get,r=n.cache.set,i=l,l(c)},l=c=>{const u=s(c);if(u)return u;const d=vG(c,n);return r(c,d),d};return i=a,(...c)=>i(bG(...c))},NG=[],cr=t=>{const e=n=>n[t]||NG;return e.isThemeGetter=!0,e},SD=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,kD=/^\((?:(\w[\w-]*):)?(.+)\)$/i,SG=/^\d+(?:\.\d+)?\/\d+(?:\.\d+)?$/,kG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,TG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,IG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,kc=t=>SG.test(t),mn=t=>!!t&&!Number.isNaN(Number(t)),Cc=t=>!!t&&Number.isInteger(Number(t)),fw=t=>t.endsWith("%")&&mn(t.slice(0,-1)),Sl=t=>kG.test(t),CD=()=>!0,EG=t=>CG.test(t)&&!TG.test(t),A4=()=>!1,$G=t=>IG.test(t),AG=t=>jG.test(t),RG=t=>!It(t)&&!At(t),DG=t=>au(t,jD,A4),It=t=>SD.test(t),Vu=t=>au(t,ED,EG),FE=t=>au(t,zG,mn),PG=t=>au(t,AD,CD),_G=t=>au(t,$D,A4),ME=t=>au(t,TD,A4),OG=t=>au(t,ID,AG),o1=t=>au(t,RD,$G),At=t=>kD.test(t),Ip=t=>Od(t,ED),FG=t=>Od(t,$D),LE=t=>Od(t,TD),MG=t=>Od(t,jD),LG=t=>Od(t,ID),l1=t=>Od(t,RD,!0),BG=t=>Od(t,AD,!0),au=(t,e,n)=>{const s=SD.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},Od=(t,e,n=!1)=>{const s=kD.exec(t);return s?s[1]?e(s[1]):n:!1},TD=t=>t==="position"||t==="percentage",ID=t=>t==="image"||t==="url",jD=t=>t==="length"||t==="size"||t==="bg-size",ED=t=>t==="length",zG=t=>t==="number",$D=t=>t==="family-name",AD=t=>t==="number"||t==="weight",RD=t=>t==="shadow",VG=()=>{const t=cr("color"),e=cr("font"),n=cr("text"),s=cr("font-weight"),r=cr("tracking"),i=cr("leading"),a=cr("breakpoint"),l=cr("container"),c=cr("spacing"),u=cr("radius"),d=cr("shadow"),h=cr("inset-shadow"),p=cr("text-shadow"),g=cr("drop-shadow"),x=cr("blur"),y=cr("perspective"),v=cr("aspect"),w=cr("ease"),N=cr("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...C(),At,It],R=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto","contain","none"],A=()=>[At,It,c],O=()=>[kc,"full","auto",...A()],L=()=>[Cc,"none","subgrid",At,It],D=()=>["auto",{span:["full",Cc,At,It]},Cc,At,It],q=()=>[Cc,"auto",At,It],V=()=>["auto","min","max","fr",At,It],ne=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],ee=()=>["auto",...A()],te=()=>[kc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],X=()=>[kc,"screen","full","dvw","lvw","svw","min","max","fit",...A()],Q=()=>[kc,"screen","full","lh","dvh","lvh","svh","min","max","fit",...A()],G=()=>[t,At,It],H=()=>[...C(),LE,ME,{position:[At,It]}],ie=()=>["no-repeat",{repeat:["","x","y","space","round"]}],de=()=>["auto","cover","contain",MG,DG,{size:[At,It]}],ke=()=>[fw,Ip,Vu],we=()=>["","none","full",u,At,It],Ee=()=>["",mn,Ip,Vu],Ce=()=>["solid","dashed","dotted","double"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>[mn,fw,LE,ME],Te=()=>["","none",x,At,It],Me=()=>["none",mn,At,It],Ye=()=>["none",mn,At,It],me=()=>[mn,At,It],xe=()=>[kc,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Sl],breakpoint:[Sl],color:[CD],container:[Sl],"drop-shadow":[Sl],ease:["in","out","in-out"],font:[RG],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Sl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Sl],shadow:[Sl],spacing:["px",mn],text:[Sl],"text-shadow":[Sl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",kc,It,At,v]}],container:["container"],columns:[{columns:[mn,It,At,l]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{"inset-s":O(),start:O()}],end:[{"inset-e":O(),end:O()}],"inset-bs":[{"inset-bs":O()}],"inset-be":[{"inset-be":O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Cc,"auto",At,It]}],basis:[{basis:[kc,"full","auto",l,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[mn,kc,"auto","initial","none",It]}],grow:[{grow:["",mn,At,It]}],shrink:[{shrink:["",mn,At,It]}],order:[{order:[Cc,"first","last","none",At,It]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...ne(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...ne()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":ne()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pbs:[{pbs:A()}],pbe:[{pbe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:ee()}],mx:[{mx:ee()}],my:[{my:ee()}],ms:[{ms:ee()}],me:[{me:ee()}],mbs:[{mbs:ee()}],mbe:[{mbe:ee()}],mt:[{mt:ee()}],mr:[{mr:ee()}],mb:[{mb:ee()}],ml:[{ml:ee()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],"inline-size":[{inline:["auto",...X()]}],"min-inline-size":[{"min-inline":["auto",...X()]}],"max-inline-size":[{"max-inline":["none",...X()]}],"block-size":[{block:["auto",...Q()]}],"min-block-size":[{"min-block":["auto",...Q()]}],"max-block-size":[{"max-block":["none",...Q()]}],w:[{w:[l,"screen",...te()]}],"min-w":[{"min-w":[l,"screen","none",...te()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...te()]}],h:[{h:["screen","lh",...te()]}],"min-h":[{"min-h":["screen","lh","none",...te()]}],"max-h":[{"max-h":["screen","lh",...te()]}],"font-size":[{text:["base",n,Ip,Vu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,BG,PG]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",fw,It]}],"font-family":[{font:[FG,_G,e]}],"font-features":[{"font-features":[It]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,At,It]}],"line-clamp":[{"line-clamp":[mn,"none",At,FE]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",At,It]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",At,It]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[mn,"from-font","auto",At,Vu]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[mn,"auto",At,It]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",At,It]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",At,It]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:H()}],"bg-repeat":[{bg:ie()}],"bg-size":[{bg:de()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Cc,At,It],radial:["",At,It],conic:[Cc,At,It]},LG,OG]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:ke()}],"gradient-via-pos":[{via:ke()}],"gradient-to-pos":[{to:ke()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:we()}],"rounded-s":[{"rounded-s":we()}],"rounded-e":[{"rounded-e":we()}],"rounded-t":[{"rounded-t":we()}],"rounded-r":[{"rounded-r":we()}],"rounded-b":[{"rounded-b":we()}],"rounded-l":[{"rounded-l":we()}],"rounded-ss":[{"rounded-ss":we()}],"rounded-se":[{"rounded-se":we()}],"rounded-ee":[{"rounded-ee":we()}],"rounded-es":[{"rounded-es":we()}],"rounded-tl":[{"rounded-tl":we()}],"rounded-tr":[{"rounded-tr":we()}],"rounded-br":[{"rounded-br":we()}],"rounded-bl":[{"rounded-bl":we()}],"border-w":[{border:Ee()}],"border-w-x":[{"border-x":Ee()}],"border-w-y":[{"border-y":Ee()}],"border-w-s":[{"border-s":Ee()}],"border-w-e":[{"border-e":Ee()}],"border-w-bs":[{"border-bs":Ee()}],"border-w-be":[{"border-be":Ee()}],"border-w-t":[{"border-t":Ee()}],"border-w-r":[{"border-r":Ee()}],"border-w-b":[{"border-b":Ee()}],"border-w-l":[{"border-l":Ee()}],"divide-x":[{"divide-x":Ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ce(),"hidden","none"]}],"divide-style":[{divide:[...Ce(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-bs":[{"border-bs":G()}],"border-color-be":[{"border-be":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...Ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[mn,At,It]}],"outline-w":[{outline:["",mn,Ip,Vu]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",d,l1,o1]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",h,l1,o1]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[mn,Vu]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":Ee()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",p,l1,o1]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[mn,At,It]}],"mix-blend":[{"mix-blend":[...Re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[mn]}],"mask-image-linear-from-pos":[{"mask-linear-from":se()}],"mask-image-linear-to-pos":[{"mask-linear-to":se()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":se()}],"mask-image-t-to-pos":[{"mask-t-to":se()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":se()}],"mask-image-r-to-pos":[{"mask-r-to":se()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":se()}],"mask-image-b-to-pos":[{"mask-b-to":se()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":se()}],"mask-image-l-to-pos":[{"mask-l-to":se()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":se()}],"mask-image-x-to-pos":[{"mask-x-to":se()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":se()}],"mask-image-y-to-pos":[{"mask-y-to":se()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[At,It]}],"mask-image-radial-from-pos":[{"mask-radial-from":se()}],"mask-image-radial-to-pos":[{"mask-radial-to":se()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[mn]}],"mask-image-conic-from-pos":[{"mask-conic-from":se()}],"mask-image-conic-to-pos":[{"mask-conic-to":se()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:H()}],"mask-repeat":[{mask:ie()}],"mask-size":[{mask:de()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",At,It]}],filter:[{filter:["","none",At,It]}],blur:[{blur:Te()}],brightness:[{brightness:[mn,At,It]}],contrast:[{contrast:[mn,At,It]}],"drop-shadow":[{"drop-shadow":["","none",g,l1,o1]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",mn,At,It]}],"hue-rotate":[{"hue-rotate":[mn,At,It]}],invert:[{invert:["",mn,At,It]}],saturate:[{saturate:[mn,At,It]}],sepia:[{sepia:["",mn,At,It]}],"backdrop-filter":[{"backdrop-filter":["","none",At,It]}],"backdrop-blur":[{"backdrop-blur":Te()}],"backdrop-brightness":[{"backdrop-brightness":[mn,At,It]}],"backdrop-contrast":[{"backdrop-contrast":[mn,At,It]}],"backdrop-grayscale":[{"backdrop-grayscale":["",mn,At,It]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[mn,At,It]}],"backdrop-invert":[{"backdrop-invert":["",mn,At,It]}],"backdrop-opacity":[{"backdrop-opacity":[mn,At,It]}],"backdrop-saturate":[{"backdrop-saturate":[mn,At,It]}],"backdrop-sepia":[{"backdrop-sepia":["",mn,At,It]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",At,It]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[mn,"initial",At,It]}],ease:[{ease:["linear","initial",w,At,It]}],delay:[{delay:[mn,At,It]}],animate:[{animate:["none",N,At,It]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,At,It]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:Me()}],"rotate-x":[{"rotate-x":Me()}],"rotate-y":[{"rotate-y":Me()}],"rotate-z":[{"rotate-z":Me()}],scale:[{scale:Ye()}],"scale-x":[{"scale-x":Ye()}],"scale-y":[{"scale-y":Ye()}],"scale-z":[{"scale-z":Ye()}],"scale-3d":["scale-3d"],skew:[{skew:me()}],"skew-x":[{"skew-x":me()}],"skew-y":[{"skew-y":me()}],transform:[{transform:[At,It,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:xe()}],"translate-x":[{"translate-x":xe()}],"translate-y":[{"translate-y":xe()}],"translate-z":[{"translate-z":xe()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",At,It]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mbs":[{"scroll-mbs":A()}],"scroll-mbe":[{"scroll-mbe":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pbs":[{"scroll-pbs":A()}],"scroll-pbe":[{"scroll-pbe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",At,It]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[mn,Ip,Vu,FE]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","inset-bs","inset-be","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pbs","pbe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mbs","mbe","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-bs","border-w-be","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-bs","border-color-be","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mbs","scroll-mbe","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pbs","scroll-pbe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},UG=wG(VG);function Bt(...t){return UG(yD(t))}const WG=E4("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 shadow-sm",outline:"glass-subtle border text-foreground hover:bg-accent hover:text-accent-foreground",secondary:"glass-subtle text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent/50 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),be=T.forwardRef(({className:t,variant:e,size:n,asChild:s=!1,...r},i)=>{const a=s?gD:"button";return o.jsx(a,{"data-slot":"button",className:Bt(WG({variant:e,size:n,className:t})),ref:i,...r})});be.displayName="Button";function sn({className:t,type:e,...n}){return o.jsx("input",{type:e,"data-slot":"input",className:Bt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground glass-subtle border-border/50 flex h-10 w-full min-w-0 rounded-lg border px-4 py-2 text-base transition-[color,box-shadow,border] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-primary focus-visible:ring-primary/20 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}function ze({className:t,...e}){return o.jsx("div",{"data-slot":"card",className:Bt("glass text-card-foreground flex flex-col gap-6 rounded-xl shadow-sm",t),...e})}function Ot({className:t,...e}){return o.jsx("div",{"data-slot":"card-header",className:Bt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function Ft({className:t,...e}){return o.jsx("h4",{"data-slot":"card-title",className:Bt("leading-none",t),...e})}function as({className:t,...e}){return o.jsx("p",{"data-slot":"card-description",className:Bt("text-muted-foreground",t),...e})}function Ue({className:t,...e}){return o.jsx("div",{"data-slot":"card-content",className:Bt("px-6 [&:last-child]:pb-6",t),...e})}function gt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function GG(t,e){const n=T.createContext(e),s=i=>{const{children:a,...l}=i,c=T.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};s.displayName=t+"Provider";function r(i){const a=T.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[s,r]}function ei(t,e=[]){let n=[];function s(i,a){const l=T.createContext(a),c=n.length;n=[...n,a];const u=h=>{const{scope:p,children:g,...x}=h,y=p?.[t]?.[c]||l,v=T.useMemo(()=>x,Object.values(x));return o.jsx(y.Provider,{value:v,children:g})};u.displayName=i+"Provider";function d(h,p){const g=p?.[t]?.[c]||l,x=T.useContext(g);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=n.map(a=>T.createContext(a));return function(l){const c=l?.[t]||i;return T.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return r.scopeName=t,[s,HG(r,...e)]}function HG(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const a=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function BE(t){const e=KG(t),n=T.forwardRef((s,r)=>{const{children:i,...a}=s,l=T.Children.toArray(i),c=l.find(XG);if(c){const u=c.props.children,d=l.map(h=>h===c?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return o.jsx(e,{...a,ref:r,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return o.jsx(e,{...a,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function KG(t){const e=T.forwardRef((n,s)=>{const{children:r,...i}=n;if(T.isValidElement(r)){const a=ZG(r),l=YG(i,r.props);return r.type!==T.Fragment&&(l.ref=s?Xl(s,a):a),T.cloneElement(r,l)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var qG=Symbol("radix.slottable");function XG(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===qG}function YG(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function ZG(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Pm(t){const e=t+"CollectionProvider",[n,s]=ei(e),[r,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=y=>{const{scope:v,children:w}=y,N=et.useRef(null),k=et.useRef(new Map).current;return o.jsx(r,{scope:v,itemMap:k,collectionRef:N,children:w})};a.displayName=e;const l=t+"CollectionSlot",c=BE(l),u=et.forwardRef((y,v)=>{const{scope:w,children:N}=y,k=i(l,w),C=qt(v,k.collectionRef);return o.jsx(c,{ref:C,children:N})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=BE(d),g=et.forwardRef((y,v)=>{const{scope:w,children:N,...k}=y,C=et.useRef(null),j=qt(v,C),R=i(d,w);return et.useEffect(()=>(R.itemMap.set(C,{ref:C,...k}),()=>void R.itemMap.delete(C))),o.jsx(p,{[h]:"",ref:j,children:N})});g.displayName=d;function x(y){const v=i(t+"CollectionConsumer",y);return et.useCallback(()=>{const N=v.collectionRef.current;if(!N)return[];const k=Array.from(N.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((R,_)=>k.indexOf(R.ref.current)-k.indexOf(_.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},x,s]}var Gs=globalThis?.document?T.useLayoutEffect:()=>{},JG=j4[" useId ".trim().toString()]||(()=>{}),QG=0;function ja(t){const[e,n]=T.useState(JG());return Gs(()=>{n(s=>s??String(QG++))},[t]),t||(e?`radix-${e}`:"")}var _m=pD();const DD=I4(_m);function eH(t){const e=tH(t),n=T.forwardRef((s,r)=>{const{children:i,...a}=s,l=T.Children.toArray(i),c=l.find(sH);if(c){const u=c.props.children,d=l.map(h=>h===c?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return o.jsx(e,{...a,ref:r,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return o.jsx(e,{...a,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function tH(t){const e=T.forwardRef((n,s)=>{const{children:r,...i}=n;if(T.isValidElement(r)){const a=iH(r),l=rH(i,r.props);return r.type!==T.Fragment&&(l.ref=s?Xl(s,a):a),T.cloneElement(r,l)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nH=Symbol("radix.slottable");function sH(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nH}function rH(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function iH(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var aH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dt=aH.reduce((t,e)=>{const n=eH(`Primitive.${e}`),s=T.forwardRef((r,i)=>{const{asChild:a,...l}=r,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function PD(t,e){t&&_m.flushSync(()=>t.dispatchEvent(e))}function br(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),T.useMemo(()=>(...n)=>e.current?.(...n),[])}var oH=j4[" useInsertionEffect ".trim().toString()]||Gs;function ra({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[r,i,a]=lH({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:r;{const d=T.useRef(t!==void 0);T.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const u=T.useCallback(d=>{if(l){const h=cH(d)?d(t):d;h!==t&&a.current?.(h)}else i(d)},[l,t,i,a]);return[c,u]}function lH({defaultProp:t,onChange:e}){const[n,s]=T.useState(t),r=T.useRef(n),i=T.useRef(e);return oH(()=>{i.current=e},[e]),T.useEffect(()=>{r.current!==n&&(i.current?.(n),r.current=n)},[n,r]),[n,s,i]}function cH(t){return typeof t=="function"}var uH=T.createContext(void 0);function ou(t){const e=T.useContext(uH);return t||e||"ltr"}var pw="rovingFocusGroup.onEntryFocus",dH={bubbles:!1,cancelable:!0},Om="RovingFocusGroup",[CN,_D,hH]=Pm(Om),[fH,jf]=ei(Om,[hH]),[pH,mH]=fH(Om),OD=T.forwardRef((t,e)=>o.jsx(CN.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(CN.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(gH,{...t,ref:e})})}));OD.displayName=Om;var gH=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,p=T.useRef(null),g=qt(e,p),x=ou(i),[y,v]=ra({prop:a,defaultProp:l??null,onChange:c,caller:Om}),[w,N]=T.useState(!1),k=br(u),C=_D(n),j=T.useRef(!1),[R,_]=T.useState(0);return T.useEffect(()=>{const A=p.current;if(A)return A.addEventListener(pw,k),()=>A.removeEventListener(pw,k)},[k]),o.jsx(pH,{scope:n,orientation:s,dir:x,loop:r,currentTabStopId:y,onItemFocus:T.useCallback(A=>v(A),[v]),onItemShiftTab:T.useCallback(()=>N(!0),[]),onFocusableItemAdd:T.useCallback(()=>_(A=>A+1),[]),onFocusableItemRemove:T.useCallback(()=>_(A=>A-1),[]),children:o.jsx(Dt.div,{tabIndex:w||R===0?-1:0,"data-orientation":s,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:gt(t.onMouseDown,()=>{j.current=!0}),onFocus:gt(t.onFocus,A=>{const O=!j.current;if(A.target===A.currentTarget&&O&&!w){const L=new CustomEvent(pw,dH);if(A.currentTarget.dispatchEvent(L),!L.defaultPrevented){const D=C().filter(ee=>ee.focusable),q=D.find(ee=>ee.active),V=D.find(ee=>ee.id===y),J=[q,V,...D].filter(Boolean).map(ee=>ee.ref.current);LD(J,d)}}j.current=!1}),onBlur:gt(t.onBlur,()=>N(!1))})})}),FD="RovingFocusGroupItem",MD=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:i,children:a,...l}=t,c=ja(),u=i||c,d=mH(FD,n),h=d.currentTabStopId===u,p=_D(n),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:y}=d;return T.useEffect(()=>{if(s)return g(),()=>x()},[s,g,x]),o.jsx(CN.ItemSlot,{scope:n,id:u,focusable:s,active:r,children:o.jsx(Dt.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:gt(t.onMouseDown,v=>{s?d.onItemFocus(u):v.preventDefault()}),onFocus:gt(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:gt(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const w=vH(v,d.orientation,d.dir);if(w!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let k=p().filter(C=>C.focusable).map(C=>C.ref.current);if(w==="last")k.reverse();else if(w==="prev"||w==="next"){w==="prev"&&k.reverse();const C=k.indexOf(v.currentTarget);k=d.loop?bH(k,C+1):k.slice(C+1)}setTimeout(()=>LD(k))}}),children:typeof a=="function"?a({isCurrentTabStop:h,hasTabStop:y!=null}):a})})});MD.displayName=FD;var xH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function yH(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function vH(t,e,n){const s=yH(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return xH[s]}function LD(t,e=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function bH(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var R4=OD,D4=MD;function wH(t,e){return T.useReducer((n,s)=>e[n][s]??n,t)}var ti=t=>{const{present:e,children:n}=t,s=NH(e),r=typeof n=="function"?n({present:s.isPresent}):T.Children.only(n),i=qt(s.ref,SH(r));return typeof n=="function"||s.isPresent?T.cloneElement(r,{ref:i}):null};ti.displayName="Presence";function NH(t){const[e,n]=T.useState(),s=T.useRef(null),r=T.useRef(t),i=T.useRef("none"),a=t?"mounted":"unmounted",[l,c]=wH(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const u=c1(s.current);i.current=l==="mounted"?u:"none"},[l]),Gs(()=>{const u=s.current,d=r.current;if(d!==t){const p=i.current,g=c1(u);t?c("MOUNT"):g==="none"||u?.display==="none"?c("UNMOUNT"):c(d&&p!==g?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,c]),Gs(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=g=>{const y=c1(s.current).includes(CSS.escape(g.animationName));if(g.target===e&&y&&(c("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},p=g=>{g.target===e&&(i.current=c1(s.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:T.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function c1(t){return t?.animationName||"none"}function SH(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var fy="Tabs",[kH]=ei(fy,[jf]),BD=jf(),[CH,P4]=kH(fy),zD=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=ou(l),[h,p]=ra({prop:s,onChange:r,defaultProp:i??"",caller:fy});return o.jsx(CH,{scope:n,baseId:ja(),value:h,onValueChange:p,orientation:a,dir:d,activationMode:c,children:o.jsx(Dt.div,{dir:d,"data-orientation":a,...u,ref:e})})});zD.displayName=fy;var VD="TabsList",UD=T.forwardRef((t,e)=>{const{__scopeTabs:n,loop:s=!0,...r}=t,i=P4(VD,n),a=BD(n);return o.jsx(R4,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:s,children:o.jsx(Dt.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});UD.displayName=VD;var WD="TabsTrigger",GD=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...i}=t,a=P4(WD,n),l=BD(n),c=qD(a.baseId,s),u=XD(a.baseId,s),d=s===a.value;return o.jsx(D4,{asChild:!0,...l,focusable:!r,active:d,children:o.jsx(Dt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...i,ref:e,onMouseDown:gt(t.onMouseDown,h=>{!r&&h.button===0&&h.ctrlKey===!1?a.onValueChange(s):h.preventDefault()}),onKeyDown:gt(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(s)}),onFocus:gt(t.onFocus,()=>{const h=a.activationMode!=="manual";!d&&!r&&h&&a.onValueChange(s)})})})});GD.displayName=WD;var HD="TabsContent",KD=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,forceMount:r,children:i,...a}=t,l=P4(HD,n),c=qD(l.baseId,s),u=XD(l.baseId,s),d=s===l.value,h=T.useRef(d);return T.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),o.jsx(ti,{present:r||d,children:({present:p})=>o.jsx(Dt.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});KD.displayName=HD;function qD(t,e){return`${t}-trigger-${e}`}function XD(t,e){return`${t}-content-${e}`}var TH=zD,IH=UD,jH=GD,EH=KD;function Sr({className:t,...e}){return o.jsx(TH,{"data-slot":"tabs",className:Bt("flex flex-col gap-2",t),...e})}function kr({className:t,...e}){return o.jsx(IH,{"data-slot":"tabs-list",className:Bt("glass-subtle text-muted-foreground inline-flex h-10 w-fit items-center justify-center rounded-xl p-1 flex",t),...e})}function Jt({className:t,...e}){return o.jsx(jH,{"data-slot":"tabs-trigger",className:Bt("data-[state=active]:glass-strong dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground/70 dark:text-muted-foreground inline-flex h-[calc(100%-6px)] flex-1 items-center justify-center gap-1.5 rounded-lg border border-transparent px-3 py-1.5 text-sm font-medium whitespace-nowrap transition-all focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 data-[state=active]:shadow-sm",t),...e})}function Qt({className:t,...e}){return o.jsx(EH,{"data-slot":"tabs-content",className:Bt("flex-1 outline-none",t),...e})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AH=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),zE=t=>{const e=AH(t);return e.charAt(0).toUpperCase()+e.slice(1)},YD=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:a,...l},c)=>T.createElement("svg",{ref:c,...RH,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:YD("lucide",r),...l},[...a.map(([u,d])=>T.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(t,e)=>{const n=T.forwardRef(({className:s,...r},i)=>T.createElement(DH,{ref:i,iconNode:e,className:YD(`lucide-${$H(zE(t))}`,`lucide-${t}`,s),...r}));return n.displayName=zE(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],TN=Xe("activity",PH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ad=Xe("arrow-left",_H);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],IN=Xe("arrow-right",OH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],jp=Xe("arrow-up-right",FH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ml=Xe("award",MH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],hi=Xe("badge-check",LH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],lf=Xe("bell",BH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],VH=Xe("book-open",zH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],WH=Xe("book",UH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],HH=Xe("bookmark",GH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],ZD=Xe("building-2",KH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ho=Xe("calendar",qH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],zo=Xe("camera",XH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Vc=Xe("chart-column",YH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],jN=Xe("check-check",ZH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],an=Xe("check",JH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],py=Xe("chevron-down",QH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tK=Xe("chevron-left",eK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gr=Xe("chevron-right",nK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],JD=Xe("chevron-up",sK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],od=Xe("circle-alert",rK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Uc=Xe("circle-check-big",iK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],VE=Xe("circle-check",aK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],QD=Xe("circle-help",oK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M1=Xe("circle",lK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],md=Xe("clock",cK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],dK=Xe("coffee",uK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],tm=Xe("credit-card",hK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fK=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],hs=Xe("crown",fK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],nm=Xe("dollar-sign",pK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],gK=Xe("download",mK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xK=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],sm=Xe("droplets",xK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],eP=Xe("ellipsis-vertical",yK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],tP=Xe("ellipsis",vK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bK=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ld=Xe("external-link",bK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],UE=Xe("eye-off",wK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ea=Xe("eye",NK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_p=Xe("file-text",SK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],CK=Xe("flag",kK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],EN=Xe("flame",TK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],nP=Xe("funnel",IK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],l0=Xe("gift",jK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Wc=Xe("globe",EK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Gp=Xe("hash",$K);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Yn=Xe("heart",AK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],$N=Xe("image",RK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],c0=Xe("infinity",DK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Hp=Xe("info",PK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],AN=Xe("instagram",_K);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],FK=Xe("leaf",OK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xh=Xe("loader-circle",MK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cf=Xe("lock",LK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],zK=Xe("log-out",BK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Gc=Xe("mail",VK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],rm=Xe("map-pin",UK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],GK=Xe("maximize-2",WK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],KK=Xe("maximize",HK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],_r=Xe("message-circle",qK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],YK=Xe("minimize-2",XK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["path",{d:"M5 12h14",key:"1ays0h"}]],JK=Xe("minus",ZK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],RN=Xe("moon",QK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],cd=Xe("package",eq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],nq=Xe("paperclip",tq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],rq=Xe("pause",sq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],aq=Xe("pen-line",iq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],sP=Xe("percent",oq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],_4=Xe("phone",lq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],td=Xe("play",cq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],u0=Xe("plus",uq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],im=Xe("radio",dq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],rP=Xe("rotate-ccw",hq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mw=Xe("save",fq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],d0=Xe("search",pq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],am=Xe("send",mq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ll=Xe("settings",gq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],uf=Xe("share-2",xq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],iP=Xe("share",yq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Sa=Xe("shield",vq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],Go=Xe("shopping-bag",bq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Nq=Xe("shopping-cart",wq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],kq=Xe("skip-back",Sq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],Tq=Xe("skip-forward",Cq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],DN=Xe("sliders-horizontal",Iq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],aP=Xe("smartphone",jq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],oP=Xe("smile",Eq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ln=Xe("sparkles",$q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],PN=Xe("square-pen",Aq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],bs=Xe("star",Rq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Pq=Xe("store",Dq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],om=Xe("sun",_q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],Fq=Xe("sunrise",Oq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=[["path",{d:"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5",key:"mtk2lu"}],["path",{d:"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5",key:"120jsl"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m18 22-3-3 3-3",key:"kgdoj7"}],["path",{d:"m6 2 3 3-3 3",key:"1fnbkv"}]],Lq=Xe("switch-camera",Mq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],zq=Xe("tag",Bq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],my=Xe("target",Vq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],lP=Xe("thumbs-up",Uq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],gd=Xe("trash-2",Wq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Hq=Xe("trending-down",Gq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Zr=Xe("trending-up",Kq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],df=Xe("trophy",qq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Yq=Xe("truck",Xq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],_N=Xe("twitter",Zq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],h0=Xe("upload",Jq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],eX=Xe("user-check",Qq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],cP=Xe("user-plus",tX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hf=Xe("user",nX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],so=Xe("users",sX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],O4=Xe("video",rX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],uP=Xe("volume-2",iX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],oX=Xe("volume-x",aX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],gy=Xe("wallet",lX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],uX=Xe("wind",cX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Us=Xe("x",dX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],ON=Xe("youtube",hX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],gi=Xe("zap",fX),nn=t=>typeof t=="string",Ep=()=>{let t,e;const n=new Promise((s,r)=>{t=s,e=r});return n.resolve=t,n.reject=e,n},WE=t=>t==null?"":""+t,pX=(t,e,n)=>{t.forEach(s=>{e[s]&&(n[s]=e[s])})},mX=/###/g,GE=t=>t&&t.indexOf("###")>-1?t.replace(mX,"."):t,HE=t=>!t||nn(t),Kp=(t,e,n)=>{const s=nn(e)?e.split("."):e;let r=0;for(;r<s.length-1;){if(HE(t))return{};const i=GE(s[r]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++r}return HE(t)?{}:{obj:t,k:GE(s[r])}},KE=(t,e,n)=>{const{obj:s,k:r}=Kp(t,e,Object);if(s!==void 0||e.length===1){s[r]=n;return}let i=e[e.length-1],a=e.slice(0,e.length-1),l=Kp(t,a,Object);for(;l.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),l=Kp(t,a,Object),l?.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=n},gX=(t,e,n,s)=>{const{obj:r,k:i}=Kp(t,e,Object);r[i]=r[i]||[],r[i].push(n)},f0=(t,e)=>{const{obj:n,k:s}=Kp(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},xX=(t,e,n)=>{const s=f0(t,n);return s!==void 0?s:f0(e,n)},dP=(t,e,n)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in t?nn(t[s])||t[s]instanceof String||nn(e[s])||e[s]instanceof String?n&&(t[s]=e[s]):dP(t[s],e[s],n):t[s]=e[s]);return t},Uu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var yX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const vX=t=>nn(t)?t.replace(/[&<>"'\/]/g,e=>yX[e]):t;class bX{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const wX=[" ",",","?","!",";"],NX=new bX(20),SX=(t,e,n)=>{e=e||"",n=n||"";const s=wX.filter(a=>e.indexOf(a)<0&&n.indexOf(a)<0);if(s.length===0)return!0;const r=NX.getRegExp(`(${s.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!r.test(t);if(!i){const a=t.indexOf(n);a>0&&!r.test(t.substring(0,a))&&(i=!0)}return i},FN=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const s=e.split(n);let r=t;for(let i=0;i<s.length;){if(!r||typeof r!="object")return;let a,l="";for(let c=i;c<s.length;++c)if(c!==i&&(l+=n),l+=s[c],a=r[l],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<s.length-1)continue;i+=c-i+1;break}r=a}return r},lm=t=>t?.replace("_","-"),kX={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};let CX=class MN{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||kX,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,s,r){return r&&!this.debug?null:(nn(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new MN(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new MN(this.logger,e)}};var Vo=new CX;class xy{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const r=this.observers[s].get(n)||0;this.observers[s].set(n,r+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,i])=>{for(let a=0;a<i;a++)r(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,i])=>{for(let a=0;a<i;a++)r.apply(r,[e,...n])})}}class qE extends xy{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,s,r={}){const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,a=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,n],s&&(Array.isArray(s)?l.push(...s):nn(s)&&i?l.push(...s.split(i)):l.push(s)));const c=f0(this.data,l);return!c&&!n&&!s&&e.indexOf(".")>-1&&(e=l[0],n=l[1],s=l.slice(2).join(".")),c||!a||!nn(s)?c:FN(this.data?.[e]?.[n],s,i)}addResource(e,n,s,r,i={silent:!1}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[e,n];s&&(l=l.concat(a?s.split(a):s)),e.indexOf(".")>-1&&(l=e.split("."),r=n,n=l[1]),this.addNamespaces(n),KE(this.data,l,r),i.silent||this.emit("added",e,n,s,r)}addResources(e,n,s,r={silent:!1}){for(const i in s)(nn(s[i])||Array.isArray(s[i]))&&this.addResource(e,n,i,s[i],{silent:!0});r.silent||this.emit("added",e,n,s)}addResourceBundle(e,n,s,r,i,a={silent:!1,skipCopy:!1}){let l=[e,n];e.indexOf(".")>-1&&(l=e.split("."),r=s,s=n,n=l[1]),this.addNamespaces(n);let c=f0(this.data,l)||{};a.skipCopy||(s=JSON.parse(JSON.stringify(s))),r?dP(c,s,i):c={...c,...s},KE(this.data,l,c),a.silent||this.emit("added",e,n,s)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var hP={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,s,r){return t.forEach(i=>{e=this.processors[i]?.process(e,n,s,r)??e}),e}};const fP=Symbol("i18next/PATH_KEY");function TX(){const t=[],e=Object.create(null);let n;return e.get=(s,r)=>(n?.revoke?.(),r===fP?t:(t.push(r),n=Proxy.revocable(s,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}function LN(t,e){const{[fP]:n}=t(TX());return n.join(e?.keySeparator??".")}const XE={},gw=t=>!nn(t)&&typeof t!="boolean"&&typeof t!="number";class p0 extends xy{constructor(e,n={}){super(),pX(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Vo.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const s={...n};if(e==null)return!1;const r=this.resolve(e,s);if(r?.res===void 0)return!1;const i=gw(r.res);return!(s.returnObjects===!1&&i)}extractFromKey(e,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const a=s&&e.indexOf(s)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!SX(e,s,r);if(a&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:nn(i)?[i]:i};const u=e.split(s);(s!==r||s===r&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(r)}return{key:e,namespaces:nn(i)?[i]:i}}translate(e,n,s){let r=typeof n=="object"?{...n}:n;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=LN(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const i=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],r),u=c[c.length-1];let d=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=r.lng||this.language,p=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h?.toLowerCase()==="cimode")return p?i?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(r)}:`${u}${d}${l}`:i?{res:l,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(r)}:l;const g=this.resolve(e,r);let x=g?.res;const y=g?.usedKey||l,v=g?.exactUsedKey||l,w=["[object Number]","[object Function]","[object RegExp]"],N=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,C=r.count!==void 0&&!nn(r.count),j=p0.hasDefaultValue(r),R=C?this.pluralResolver.getSuffix(h,r.count,r):"",_=r.ordinal&&C?this.pluralResolver.getSuffix(h,r.count,{ordinal:!1}):"",A=C&&!r.ordinal&&r.count===0,O=A&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${R}`]||r[`defaultValue${_}`]||r.defaultValue;let L=x;k&&!x&&j&&(L=O);const D=gw(L),q=Object.prototype.toString.apply(L);if(k&&L&&D&&w.indexOf(q)<0&&!(nn(N)&&Array.isArray(L))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const V=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,L,{...r,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return i?(g.res=V,g.usedParams=this.getUsedParamsDetails(r),g):V}if(a){const V=Array.isArray(L),ne=V?[]:{},J=V?v:y;for(const ee in L)if(Object.prototype.hasOwnProperty.call(L,ee)){const te=`${J}${a}${ee}`;j&&!x?ne[ee]=this.translate(te,{...r,defaultValue:gw(O)?O[ee]:void 0,joinArrays:!1,ns:c}):ne[ee]=this.translate(te,{...r,joinArrays:!1,ns:c}),ne[ee]===te&&(ne[ee]=L[ee])}x=ne}}else if(k&&nn(N)&&Array.isArray(x))x=x.join(N),x&&(x=this.extendTranslation(x,e,r,s));else{let V=!1,ne=!1;!this.isValidLookup(x)&&j&&(V=!0,x=O),this.isValidLookup(x)||(ne=!0,x=l);const ee=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ne?void 0:x,te=j&&O!==x&&this.options.updateMissing;if(ne||V||te){if(this.logger.log(te?"updateKey":"missingKey",h,u,l,te?O:x),a){const H=this.resolve(l,{...r,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let X=[];const Q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Q&&Q[0])for(let H=0;H<Q.length;H++)X.push(Q[H]);else this.options.saveMissingTo==="all"?X=this.languageUtils.toResolveHierarchy(r.lng||this.language):X.push(r.lng||this.language);const G=(H,ie,de)=>{const ke=j&&de!==x?de:ee;this.options.missingKeyHandler?this.options.missingKeyHandler(H,u,ie,ke,te,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(H,u,ie,ke,te,r),this.emit("missingKey",H,u,ie,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?X.forEach(H=>{const ie=this.pluralResolver.getSuffixes(H,r);A&&r[`defaultValue${this.options.pluralSeparator}zero`]&&ie.indexOf(`${this.options.pluralSeparator}zero`)<0&&ie.push(`${this.options.pluralSeparator}zero`),ie.forEach(de=>{G([H],l+de,r[`defaultValue${de}`]||O)})}):G(X,l,O))}x=this.extendTranslation(x,e,r,g,s),ne&&x===l&&this.options.appendNamespaceToMissingKey&&(x=`${u}${d}${l}`),(ne||V)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,V?x:void 0,r))}return i?(g.res=x,g.usedParams=this.getUsedParamsDetails(r),g):x}extendTranslation(e,n,s,r,i){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const c=nn(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const h=e.match(this.interpolator.nestingRegexp);u=h&&h.length}let d=s.replace&&!nn(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,s.lng||this.language||r.usedLng,s),c){const h=e.match(this.interpolator.nestingRegexp),p=h&&h.length;u<p&&(s.nest=!1)}!s.lng&&r&&r.res&&(s.lng=this.language||r.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...h)=>i?.[0]===h[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${n[0]}`),null):this.translate(...h,n),s)),s.interpolation&&this.interpolator.reset()}const a=s.postProcess||this.options.postProcess,l=nn(a)?[a]:a;return e!=null&&l?.length&&s.applyPostProcessor!==!1&&(e=hP.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,n={}){let s,r,i,a,l;return nn(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(s))return;const u=this.extractFromKey(c,n),d=u.key;r=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=n.count!==void 0&&!nn(n.count),g=p&&!n.ordinal&&n.count===0,x=n.context!==void 0&&(nn(n.context)||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(v=>{this.isValidLookup(s)||(l=v,!XE[`${y[0]}-${v}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(XE[`${y[0]}-${v}`]=!0,this.logger.warn(`key "${r}" for languages "${y.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(w=>{if(this.isValidLookup(s))return;a=w;const N=[d];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(N,d,w,v,n);else{let C;p&&(C=this.pluralResolver.getSuffix(w,n.count,n));const j=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(n.ordinal&&C.indexOf(R)===0&&N.push(d+C.replace(R,this.options.pluralSeparator)),N.push(d+C),g&&N.push(d+j)),x){const _=`${d}${this.options.contextSeparator||"_"}${n.context}`;N.push(_),p&&(n.ordinal&&C.indexOf(R)===0&&N.push(_+C.replace(R,this.options.pluralSeparator)),N.push(_+C),g&&N.push(_+j))}}let k;for(;k=N.pop();)this.isValidLookup(s)||(i=k,s=this.getResource(w,v,k,n))}))})}),{res:s,usedKey:r,exactUsedKey:i,usedLng:a,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,s,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,s,r):this.resourceStore.getResource(e,n,s,r)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!nn(e.replace);let r=s?e.replace:e;if(s&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!s){r={...r};for(const i of n)delete r[i]}return r}static hasDefaultValue(e){const n="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&n===s.substring(0,n.length)&&e[s]!==void 0)return!0;return!1}}class YE{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Vo.create("languageUtils")}getScriptPartFromCode(e){if(e=lm(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=lm(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(nn(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(s=>{if(n)return;const r=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(r))&&(n=r)}),!n&&this.options.supportedLngs&&e.forEach(s=>{if(n)return;const r=this.getScriptPartFromCode(s);if(this.isSupportedCode(r))return n=r;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(a=>{if(a===i)return a;if(!(a.indexOf("-")<0&&i.indexOf("-")<0)&&(a.indexOf("-")>0&&i.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===i||a.indexOf(i)===0&&i.length>1))return a})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),nn(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let s=e[n];return s||(s=e[this.getScriptPartFromCode(n)]),s||(s=e[this.formatLanguageCode(n)]),s||(s=e[this.getLanguagePartFromCode(n)]),s||(s=e.default),s||[]}toResolveHierarchy(e,n){const s=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),r=[],i=a=>{a&&(this.isSupportedCode(a)?r.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return nn(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):nn(e)&&i(this.formatLanguageCode(e)),s.forEach(a=>{r.indexOf(a)<0&&i(this.formatLanguageCode(a))}),r}}const ZE={zero:0,one:1,two:2,few:3,many:4,other:5},JE={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class IX{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=Vo.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const s=lm(e==="dev"?"en":e),r=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(s,{type:r})}catch{if(typeof Intl>"u")return this.logger.error("No Intl support, please use an Intl polyfill!"),JE;if(!e.match(/-|_/))return JE;const c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,n)}return this.pluralRulesCache[i]=a,a}needsPlural(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,s={}){return this.getSuffixes(e,s).map(r=>`${n}${r}`)}getSuffixes(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?s.resolvedOptions().pluralCategories.sort((r,i)=>ZE[r]-ZE[i]).map(r=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,n,s={}){const r=this.getRule(e,s);return r?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,s))}}const QE=(t,e,n,s=".",r=!0)=>{let i=xX(t,e,n);return!i&&r&&nn(n)&&(i=FN(t,n,s),i===void 0&&(i=FN(e,n,s))),i},xw=t=>t.replace(/\$/g,"$$$$");class e${constructor(e={}){this.logger=Vo.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:r,prefix:i,prefixEscaped:a,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:g,nestingSuffix:x,nestingSuffixEscaped:y,nestingOptionsSeparator:v,maxReplaces:w,alwaysFormat:N}=e.interpolation;this.escape=n!==void 0?n:vX,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=i?Uu(i):a||"{{",this.suffix=l?Uu(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?Uu(p):g||Uu("$t("),this.nestingSuffix=x?Uu(x):y||Uu(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=w||1e3,this.alwaysFormat=N!==void 0?N:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,s)=>n?.source===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,s,r){let i,a,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const w=QE(n,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,s,{...r,...n,interpolationkey:g}):w}const x=g.split(this.formatSeparator),y=x.shift().trim(),v=x.join(this.formatSeparator).trim();return this.format(QE(n,c,y,this.options.keySeparator,this.options.ignoreJSONStructure),v,s,{...r,...n,interpolationkey:y})};this.resetRegExp();const d=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>xw(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?xw(this.escape(g)):xw(g)}].forEach(g=>{for(l=0;i=g.regex.exec(e);){const x=i[1].trim();if(a=u(x),a===void 0)if(typeof d=="function"){const v=d(e,i,r);a=nn(v)?v:""}else if(r&&Object.prototype.hasOwnProperty.call(r,x))a="";else if(h){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),a="";else!nn(a)&&!this.useRawValueToEscape&&(a=WE(a));const y=g.safeValue(a);if(e=e.replace(i[0],y),h?(g.regex.lastIndex+=a.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,n,s={}){let r,i,a;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const h=c.split(new RegExp(`${Uu(d)}[ ]*{`));let p=`{${h[1]}`;c=h[0],p=this.interpolate(p,a);const g=p.match(/'/g),x=p.match(/"/g);((g?.length??0)%2===0&&!x||(x?.length??0)%2!==0)&&(p=p.replace(/'/g,'"'));try{a=JSON.parse(p),u&&(a={...u,...a})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,y),`${c}${d}${p}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];a={...s},a=a.replace&&!nn(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const u=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(u!==-1&&(c=r[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),r[1]=r[1].slice(0,u)),i=n(l.call(this,r[1].trim(),a),a),i&&r[0]===e&&!nn(i))return i;nn(i)||(i=WE(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),c.length&&(i=c.reduce((d,h)=>this.format(d,h,s.lng,{...s,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const jX=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const s=t.split("(");e=s[0].toLowerCase().trim();const r=s[1].substring(0,s[1].length-1);e==="currency"&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(a=>{if(a){const[l,...c]=a.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();n[d]||(n[d]=u),u==="false"&&(n[d]=!1),u==="true"&&(n[d]=!0),isNaN(u)||(n[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},t$=t=>{const e={};return(n,s,r)=>{let i=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(i={...i,[r.interpolationkey]:void 0});const a=s+JSON.stringify(i);let l=e[a];return l||(l=t(lm(s),r),e[a]=l),l(n)}},EX=t=>(e,n,s)=>t(lm(n),s)(e);class $X{constructor(e={}){this.logger=Vo.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const s=n.cacheInBuiltFormats?t$:EX;this.formats={number:s((r,i)=>{const a=new Intl.NumberFormat(r,{...i});return l=>a.format(l)}),currency:s((r,i)=>{const a=new Intl.NumberFormat(r,{...i,style:"currency"});return l=>a.format(l)}),datetime:s((r,i)=>{const a=new Intl.DateTimeFormat(r,{...i});return l=>a.format(l)}),relativetime:s((r,i)=>{const a=new Intl.RelativeTimeFormat(r,{...i});return l=>a.format(l,i.range||"day")}),list:s((r,i)=>{const a=new Intl.ListFormat(r,{...i});return l=>a.format(l)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=t$(n)}format(e,n,s,r={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,c)=>{const{formatName:u,formatOptions:d}=jX(c);if(this.formats[u]){let h=l;try{const p=r?.formatParams?.[r.interpolationkey]||{},g=p.locale||p.lng||r.locale||r.lng||s;h=this.formats[u](l,g,{...d,...r,...p})}catch(p){this.logger.warn(p)}return h}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const AX=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class RX extends xy{constructor(e,n,s,r={}){super(),this.backend=e,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=r,this.logger=Vo.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,r.backend,r)}queueLoad(e,n,s,r){const i={},a={},l={},c={};return e.forEach(u=>{let d=!0;n.forEach(h=>{const p=`${u}|${h}`;!s.reload&&this.store.hasResourceBundle(u,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?a[p]===void 0&&(a[p]=!0):(this.state[p]=1,d=!1,a[p]===void 0&&(a[p]=!0),i[p]===void 0&&(i[p]=!0),c[h]===void 0&&(c[h]=!0)))}),d||(l[u]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,n,s){const r=e.split("|"),i=r[0],a=r[1];n&&this.emit("failedLoading",i,a,n),!n&&s&&this.store.addResourceBundle(i,a,s,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&s&&(this.state[e]=0);const l={};this.queue.forEach(c=>{gX(c.loaded,[i],a),AX(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(h=>{l[u][h]===void 0&&(l[u][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,n,s,r=0,i=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:s,tried:r,wait:i,callback:a});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,s,r+1,i*2,a)},i);return}a(u,d)},c=this.backend[s].bind(this.backend);if(c.length===2){try{const u=c(e,n);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,n,l)}prepareLoading(e,n,s={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();nn(e)&&(e=this.languageUtils.toResolveHierarchy(e)),nn(n)&&(n=[n]);const i=this.queueLoad(e,n,s,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,n,s){this.prepareLoading(e,n,{},s)}reload(e,n,s){this.prepareLoading(e,n,{reload:!0},s)}loadOne(e,n=""){const s=e.split("|"),r=s[0],i=s[1];this.read(r,i,"read",void 0,void 0,(a,l)=>{a&&this.logger.warn(`${n}loading namespace ${i} for language ${r} failed`,a),!a&&l&&this.logger.log(`${n}loaded namespace ${i} for language ${r}`,l),this.loaded(e,a,l)})}saveMissing(e,n,s,r,i,a={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const c={...a,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,n,s,r,c):d=u(e,n,s,r),d&&typeof d.then=="function"?d.then(h=>l(null,h)).catch(l):l(null,d)}catch(d){l(d)}else u(e,n,s,r,l,c)}!e||!e[0]||this.store.addResource(e[0],n,s,r)}}}const yw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),nn(t[1])&&(e.defaultValue=t[1]),nn(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(s=>{e[s]=n[s]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),n$=t=>(nn(t.ns)&&(t.ns=[t.ns]),nn(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),nn(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),u1=()=>{},DX=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})},pP="__i18next_supportNoticeShown",PX=()=>typeof globalThis<"u"&&!!globalThis[pP],_X=()=>{typeof globalThis<"u"&&(globalThis[pP]=!0)},OX=t=>!!(t?.modules?.backend?.name?.indexOf("Locize")>0||t?.modules?.backend?.constructor?.name?.indexOf("Locize")>0||t?.options?.backend?.backends&&t.options.backend.backends.some(e=>e?.name?.indexOf("Locize")>0||e?.constructor?.name?.indexOf("Locize")>0)||t?.options?.backend?.projectId||t?.options?.backend?.backendOptions&&t.options.backend.backendOptions.some(e=>e?.projectId));class qp extends xy{constructor(e={},n){if(super(),this.options=n$(e),this.services={},this.logger=Vo,this.modules={external:[]},DX(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(nn(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=yw();this.options={...s,...this.options,...n$(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=s.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!OX(this)&&!PX()&&(typeof console<"u"&&typeof console.info<"u"&&console.info(" i18next is maintained with support from Locize  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com "),_X());const r=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Vo.init(r(this.modules.logger),this.options):Vo.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=$X;const d=new YE(this.options);this.store=new qE(this.options.resources,this.options);const h=this.services;h.logger=Vo,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new IX(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(h.formatter=r(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new e$(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new RX(r(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(g,...x)=>{this.emit(g,...x)}),this.modules.languageDetector&&(h.languageDetector=r(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=r(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new p0(this.services,this.options),this.translator.on("*",(g,...x)=>{this.emit(g,...x)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=u1),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const l=Ep(),c=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),n(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,n=u1){let s=n;const r=nn(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const i=[],a=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&i.indexOf(u)<0&&i.push(u)})};r?a(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload?.forEach?.(l=>a(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(l)})}else s(null)}reloadResources(e,n,s){const r=Ep();return typeof e=="function"&&(s=e,e=void 0),typeof n=="function"&&(s=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),s||(s=u1),this.services.backendConnector.reload(e,n,i=>{r.resolve(),s(i)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&hP.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const s=Ep();this.emit("languageChanging",e);const r=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},i=(l,c)=>{c?this.isLanguageChangingTo===e&&(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve((...u)=>this.t(...u)),n&&n(l,(...u)=>this.t(...u))},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=nn(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(nn(l)?[l]:l);u&&(this.language||r(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,d=>{i(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,n,s){const r=(i,a,...l)=>{let c;typeof a!="object"?c=this.options.overloadTranslationOptionHandler([i,a].concat(l)):c={...a},c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||s||r.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(i)?d=i.map(h=>(typeof h=="function"&&(h=LN(h,{...this.options,...a})),`${c.keyPrefix}${u}${h}`)):(typeof i=="function"&&(i=LN(i,{...this.options,...a})),d=c.keyPrefix?`${c.keyPrefix}${u}${i}`:i),this.t(d,c)};return nn(e)?r.lng=e:r.lngs=e,r.ns=n,r.keyPrefix=s,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const a=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(n.precheck){const l=n.precheck(this,a);if(l!==void 0)return l}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(s,e)&&(!r||a(i,e)))}loadNamespaces(e,n){const s=Ep();return this.options.ns?(nn(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{s.resolve(),n&&n(r)}),s):(n&&n(),Promise.resolve())}loadLanguages(e,n){const s=Ep();nn(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(a=>r.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=r.concat(i),this.loadResources(a=>{s.resolve(),n&&n(a)}),s):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const i=r.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new YE(yw());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const s=new qp(e,n);return s.createInstance=qp.createInstance,s}cloneInstance(e={},n=u1){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new qp(r);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,h)=>(d[h]={...c[u][h]},d),c[u]),c),{});i.store=new qE(l,r),i.services.resourceStore=i.store}if(e.interpolation){const c={...yw().interpolation,...this.options.interpolation,...e.interpolation},u={...r,interpolation:c};i.services.interpolator=new e$(u)}return i.translator=new p0(i.services,r),i.translator.on("*",(l,...c)=>{i.emit(l,...c)}),i.init(r,n),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Si=qp.createInstance();Si.createInstance;Si.dir;Si.init;Si.loadResources;Si.reloadResources;Si.use;Si.changeLanguage;Si.getFixedT;Si.t;Si.exists;Si.setDefaultNamespace;Si.hasLoadedNamespace;Si.loadNamespaces;Si.loadLanguages;const FX=(t,e,n,s)=>{const r=[n,{code:e,...s||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(r,"warn","react-i18next::",!0);xd(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...r):console?.warn&&console.warn(...r)},s$={},mP=(t,e,n,s)=>{xd(n)&&s$[n]||(xd(n)&&(s$[n]=new Date),FX(t,e,n,s))},gP=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},BN=(t,e,n)=>{t.loadNamespaces(e,gP(t,n))},r$=(t,e,n,s)=>{if(xd(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return BN(t,n,s);n.forEach(r=>{t.options.ns.indexOf(r)<0&&t.options.ns.push(r)}),t.loadLanguages(e,gP(t,s))},MX=(t,e,n={})=>!e.languages||!e.languages.length?(mP(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!r(s.isLanguageChangingTo,t))return!1}}),xd=t=>typeof t=="string",LX=t=>typeof t=="object"&&t!==null,BX=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,zX={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},VX=t=>zX[t],UX=t=>t.replace(BX,VX);let zN={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:UX,transDefaultProps:void 0};const WX=(t={})=>{zN={...zN,...t}},GX=()=>zN;let xP;const HX=t=>{xP=t},KX=()=>xP,qX={type:"3rdParty",init(t){WX(t.options.react),HX(t)}},XX=T.createContext();class YX{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var vw={exports:{}},bw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i$;function ZX(){if(i$)return bw;i$=1;var t=hy();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,r=t.useEffect,i=t.useLayoutEffect,a=t.useDebugValue;function l(h,p){var g=p(),x=s({inst:{value:g,getSnapshot:p}}),y=x[0].inst,v=x[1];return i(function(){y.value=g,y.getSnapshot=p,c(y)&&v({inst:y})},[h,g,p]),r(function(){return c(y)&&v({inst:y}),h(function(){c(y)&&v({inst:y})})},[h]),a(g),g}function c(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!n(h,g)}catch{return!0}}function u(h,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return bw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,bw}var a$;function JX(){return a$||(a$=1,vw.exports=ZX()),vw.exports}var yP=JX();const QX=(t,e)=>xd(e)?e:LX(e)&&xd(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,eY={t:QX,ready:!1},tY=()=>()=>{},Ef=(t,e={})=>{const{i18n:n}=e,{i18n:s,defaultNS:r}=T.useContext(XX)||{},i=n||s||KX();i&&!i.reportNamespaces&&(i.reportNamespaces=new YX),i||mP(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const a=T.useMemo(()=>({...GX(),...i?.options?.react,...e}),[i,e]),{useSuspense:l,keyPrefix:c}=a,u=r||i?.options?.defaultNS,d=xd(u)?[u]:u||["translation"],h=T.useMemo(()=>d,d);i?.reportNamespaces?.addUsedNamespaces?.(h);const p=T.useRef(0),g=T.useCallback(O=>{if(!i)return tY;const{bindI18n:L,bindI18nStore:D}=a,q=()=>{p.current+=1,O()};return L&&i.on(L,q),D&&i.store.on(D,q),()=>{L&&L.split(" ").forEach(V=>i.off(V,q)),D&&D.split(" ").forEach(V=>i.store.off(V,q))}},[i,a]),x=T.useRef(),y=T.useCallback(()=>{if(!i)return eY;const O=!!(i.isInitialized||i.initializedStoreOnce)&&h.every(J=>MX(J,i,a)),L=e.lng||i.language,D=p.current,q=x.current;if(q&&q.ready===O&&q.lng===L&&q.keyPrefix===c&&q.revision===D)return q;const ne={t:i.getFixedT(L,a.nsMode==="fallback"?h:h[0],c),ready:O,lng:L,keyPrefix:c,revision:D};return x.current=ne,ne},[i,h,c,a,e.lng]),[v,w]=T.useState(0),{t:N,ready:k}=yP.useSyncExternalStore(g,y,y);T.useEffect(()=>{if(i&&!k&&!l){const O=()=>w(L=>L+1);e.lng?r$(i,e.lng,h,O):BN(i,h,O)}},[i,e.lng,h,k,l,v]);const C=i||{},j=T.useRef(null),R=T.useRef(),_=O=>{const L=Object.getOwnPropertyDescriptors(O);L.__original&&delete L.__original;const D=Object.create(Object.getPrototypeOf(O),L);if(!Object.prototype.hasOwnProperty.call(D,"__original"))try{Object.defineProperty(D,"__original",{value:O,writable:!1,enumerable:!1,configurable:!1})}catch{}return D},A=T.useMemo(()=>{const O=C,L=O?.language;let D=O;O&&(j.current&&j.current.__original===O?R.current!==L?(D=_(O),j.current=D,R.current=L):D=j.current:(D=_(O),j.current=D,R.current=L));const q=[N,D,k];return q.t=N,q.i18n=D,q.ready=k,q},[N,C,k,C.resolvedLanguage,C.language,C.languages]);if(i&&l&&!k)throw new Promise(O=>{const L=()=>O();e.lng?r$(i,e.lng,h,L):BN(i,h,L)});return A};function nY(t,e=globalThis?.document){const n=br(t);T.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var sY="DismissableLayer",VN="dismissableLayer.update",rY="dismissableLayer.pointerDownOutside",iY="dismissableLayer.focusOutside",o$,vP=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yy=T.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=T.useContext(vP),[d,h]=T.useState(null),p=d?.ownerDocument??globalThis?.document,[,g]=T.useState({}),x=qt(e,_=>h(_)),y=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(v),N=d?y.indexOf(d):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,C=N>=w,j=lY(_=>{const A=_.target,O=[...u.branches].some(L=>L.contains(A));!C||O||(r?.(_),a?.(_),_.defaultPrevented||l?.())},p),R=cY(_=>{const A=_.target;[...u.branches].some(L=>L.contains(A))||(i?.(_),a?.(_),_.defaultPrevented||l?.())},p);return nY(_=>{N===u.layers.size-1&&(s?.(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},p),T.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(o$=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),l$(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=o$)}},[d,p,n,u]),T.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),l$())},[d,u]),T.useEffect(()=>{const _=()=>g({});return document.addEventListener(VN,_),()=>document.removeEventListener(VN,_)},[]),o.jsx(Dt.div,{...c,ref:x,style:{pointerEvents:k?C?"auto":"none":void 0,...t.style},onFocusCapture:gt(t.onFocusCapture,R.onFocusCapture),onBlurCapture:gt(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:gt(t.onPointerDownCapture,j.onPointerDownCapture)})});yy.displayName=sY;var aY="DismissableLayerBranch",oY=T.forwardRef((t,e)=>{const n=T.useContext(vP),s=T.useRef(null),r=qt(e,s);return T.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Dt.div,{...t,ref:r})});oY.displayName=aY;function lY(t,e=globalThis?.document){const n=br(t),s=T.useRef(!1),r=T.useRef(()=>{});return T.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){bP(rY,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);s.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function cY(t,e=globalThis?.document){const n=br(t),s=T.useRef(!1);return T.useEffect(()=>{const r=i=>{i.target&&!s.current&&bP(iY,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function l$(){const t=new CustomEvent(VN);document.dispatchEvent(t)}function bP(t,e,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?PD(r,i):r.dispatchEvent(i)}var ww=0;function F4(){T.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??c$()),document.body.insertAdjacentElement("beforeend",t[1]??c$()),ww++,()=>{ww===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ww--}},[])}function c$(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Nw="focusScope.autoFocusOnMount",Sw="focusScope.autoFocusOnUnmount",u$={bubbles:!1,cancelable:!0},uY="FocusScope",vy=T.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...a}=t,[l,c]=T.useState(null),u=br(r),d=br(i),h=T.useRef(null),p=qt(e,y=>c(y)),g=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(s){let y=function(k){if(g.paused||!l)return;const C=k.target;l.contains(C)?h.current=C:Ic(h.current,{select:!0})},v=function(k){if(g.paused||!l)return;const C=k.relatedTarget;C!==null&&(l.contains(C)||Ic(h.current,{select:!0}))},w=function(k){if(document.activeElement===document.body)for(const j of k)j.removedNodes.length>0&&Ic(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const N=new MutationObserver(w);return l&&N.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),N.disconnect()}}},[s,l,g.paused]),T.useEffect(()=>{if(l){h$.add(g);const y=document.activeElement;if(!l.contains(y)){const w=new CustomEvent(Nw,u$);l.addEventListener(Nw,u),l.dispatchEvent(w),w.defaultPrevented||(dY(gY(wP(l)),{select:!0}),document.activeElement===y&&Ic(l))}return()=>{l.removeEventListener(Nw,u),setTimeout(()=>{const w=new CustomEvent(Sw,u$);l.addEventListener(Sw,d),l.dispatchEvent(w),w.defaultPrevented||Ic(y??document.body,{select:!0}),l.removeEventListener(Sw,d),h$.remove(g)},0)}}},[l,u,d,g]);const x=T.useCallback(y=>{if(!n&&!s||g.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,w=document.activeElement;if(v&&w){const N=y.currentTarget,[k,C]=hY(N);k&&C?!y.shiftKey&&w===C?(y.preventDefault(),n&&Ic(k,{select:!0})):y.shiftKey&&w===k&&(y.preventDefault(),n&&Ic(C,{select:!0})):w===N&&y.preventDefault()}},[n,s,g.paused]);return o.jsx(Dt.div,{tabIndex:-1,...a,ref:p,onKeyDown:x})});vy.displayName=uY;function dY(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(Ic(s,{select:e}),document.activeElement!==n)return}function hY(t){const e=wP(t),n=d$(e,t),s=d$(e.reverse(),t);return[n,s]}function wP(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function d$(t,e){for(const n of t)if(!fY(n,{upTo:e}))return n}function fY(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function pY(t){return t instanceof HTMLInputElement&&"select"in t}function Ic(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&pY(t)&&e&&t.select()}}var h$=mY();function mY(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=f$(t,e),t.unshift(e)},remove(e){t=f$(t,e),t[0]?.resume()}}}function f$(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function gY(t){return t.filter(e=>e.tagName!=="A")}const xY=["top","right","bottom","left"],Hc=Math.min,ea=Math.max,m0=Math.round,d1=Math.floor,Ho=t=>({x:t,y:t}),yY={left:"right",right:"left",bottom:"top",top:"bottom"},vY={start:"end",end:"start"};function UN(t,e,n){return ea(t,Hc(e,n))}function Bl(t,e){return typeof t=="function"?t(e):t}function zl(t){return t.split("-")[0]}function $f(t){return t.split("-")[1]}function M4(t){return t==="x"?"y":"x"}function L4(t){return t==="y"?"height":"width"}const bY=new Set(["top","bottom"]);function Uo(t){return bY.has(zl(t))?"y":"x"}function B4(t){return M4(Uo(t))}function wY(t,e,n){n===void 0&&(n=!1);const s=$f(t),r=B4(t),i=L4(r);let a=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=g0(a)),[a,g0(a)]}function NY(t){const e=g0(t);return[WN(t),e,WN(e)]}function WN(t){return t.replace(/start|end/g,e=>vY[e])}const p$=["left","right"],m$=["right","left"],SY=["top","bottom"],kY=["bottom","top"];function CY(t,e,n){switch(t){case"top":case"bottom":return n?e?m$:p$:e?p$:m$;case"left":case"right":return e?SY:kY;default:return[]}}function TY(t,e,n,s){const r=$f(t);let i=CY(zl(t),n==="start",s);return r&&(i=i.map(a=>a+"-"+r),e&&(i=i.concat(i.map(WN)))),i}function g0(t){return t.replace(/left|right|bottom|top/g,e=>yY[e])}function IY(t){return{top:0,right:0,bottom:0,left:0,...t}}function NP(t){return typeof t!="number"?IY(t):{top:t,right:t,bottom:t,left:t}}function x0(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}function g$(t,e,n){let{reference:s,floating:r}=t;const i=Uo(e),a=B4(e),l=L4(a),c=zl(e),u=i==="y",d=s.x+s.width/2-r.width/2,h=s.y+s.height/2-r.height/2,p=s[l]/2-r[l]/2;let g;switch(c){case"top":g={x:d,y:s.y-r.height};break;case"bottom":g={x:d,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:h};break;case"left":g={x:s.x-r.width,y:h};break;default:g={x:s.x,y:s.y}}switch($f(e)){case"start":g[a]-=p*(n&&u?-1:1);break;case"end":g[a]+=p*(n&&u?-1:1);break}return g}async function jY(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=Bl(e,t),x=NP(g),v=l[p?h==="floating"?"reference":"floating":h],w=x0(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),N=h==="floating"?{x:s,y:r,width:a.floating.width,height:a.floating.height}:a.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},j=x0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:N,offsetParent:k,strategy:c}):N);return{top:(w.top-j.top+x.top)/C.y,bottom:(j.bottom-w.bottom+x.bottom)/C.y,left:(w.left-j.left+x.left)/C.x,right:(j.right-w.right+x.right)/C.x}}const EY=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:r}),{x:d,y:h}=g$(u,s,c),p=s,g={},x=0;for(let v=0;v<l.length;v++){var y;const{name:w,fn:N}=l[v],{x:k,y:C,data:j,reset:R}=await N({x:d,y:h,initialPlacement:s,placement:p,strategy:r,middlewareData:g,rects:u,platform:{...a,detectOverflow:(y=a.detectOverflow)!=null?y:jY},elements:{reference:t,floating:e}});d=k??d,h=C??h,g={...g,[w]:{...g[w],...j}},R&&x<=50&&(x++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(u=R.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:r}):R.rects),{x:d,y:h}=g$(u,p,c)),v=-1)}return{x:d,y:h,placement:p,strategy:r,middlewareData:g}},$Y=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Bl(t,e)||{};if(u==null)return{};const h=NP(d),p={x:n,y:s},g=B4(r),x=L4(g),y=await a.getDimensions(u),v=g==="y",w=v?"top":"left",N=v?"bottom":"right",k=v?"clientHeight":"clientWidth",C=i.reference[x]+i.reference[g]-p[g]-i.floating[x],j=p[g]-i.reference[g],R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let _=R?R[k]:0;(!_||!await(a.isElement==null?void 0:a.isElement(R)))&&(_=l.floating[k]||i.floating[x]);const A=C/2-j/2,O=_/2-y[x]/2-1,L=Hc(h[w],O),D=Hc(h[N],O),q=L,V=_-y[x]-D,ne=_/2-y[x]/2+A,J=UN(q,ne,V),ee=!c.arrow&&$f(r)!=null&&ne!==J&&i.reference[x]/2-(ne<q?L:D)-y[x]/2<0,te=ee?ne<q?ne-q:ne-V:0;return{[g]:p[g]+te,data:{[g]:J,centerOffset:ne-J-te,...ee&&{alignmentOffset:te}},reset:ee}}}),AY=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...v}=Bl(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=zl(r),N=Uo(l),k=zl(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=p||(k||!y?[g0(l)]:NY(l)),R=x!=="none";!p&&R&&j.push(...TY(l,y,x,C));const _=[l,...j],A=await c.detectOverflow(e,v),O=[];let L=((s=i.flip)==null?void 0:s.overflows)||[];if(d&&O.push(A[w]),h){const ne=wY(r,a,C);O.push(A[ne[0]],A[ne[1]])}if(L=[...L,{placement:r,overflows:O}],!O.every(ne=>ne<=0)){var D,q;const ne=(((D=i.flip)==null?void 0:D.index)||0)+1,J=_[ne];if(J&&(!(h==="alignment"?N!==Uo(J):!1)||L.every(X=>Uo(X.placement)===N?X.overflows[0]>0:!0)))return{data:{index:ne,overflows:L},reset:{placement:J}};let ee=(q=L.filter(te=>te.overflows[0]<=0).sort((te,X)=>te.overflows[1]-X.overflows[1])[0])==null?void 0:q.placement;if(!ee)switch(g){case"bestFit":{var V;const te=(V=L.filter(X=>{if(R){const Q=Uo(X.placement);return Q===N||Q==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(Q=>Q>0).reduce((Q,G)=>Q+G,0)]).sort((X,Q)=>X[1]-Q[1])[0])==null?void 0:V[0];te&&(ee=te);break}case"initialPlacement":ee=l;break}if(r!==ee)return{reset:{placement:ee}}}return{}}}};function x$(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function y$(t){return xY.some(e=>t[e]>=0)}const RY=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:s}=e,{strategy:r="referenceHidden",...i}=Bl(t,e);switch(r){case"referenceHidden":{const a=await s.detectOverflow(e,{...i,elementContext:"reference"}),l=x$(a,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:y$(l)}}}case"escaped":{const a=await s.detectOverflow(e,{...i,altBoundary:!0}),l=x$(a,n.floating);return{data:{escapedOffsets:l,escaped:y$(l)}}}default:return{}}}}},SP=new Set(["left","top"]);async function DY(t,e){const{placement:n,platform:s,elements:r}=t,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),a=zl(n),l=$f(n),c=Uo(n)==="y",u=SP.has(a)?-1:1,d=i&&c?-1:1,h=Bl(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*d,y:p*u}:{x:p*u,y:g*d}}const PY=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:i,placement:a,middlewareData:l}=e,c=await DY(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:a}}}}},_Y=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:r,platform:i}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:w=>{let{x:N,y:k}=w;return{x:N,y:k}}},...u}=Bl(t,e),d={x:n,y:s},h=await i.detectOverflow(e,u),p=Uo(zl(r)),g=M4(p);let x=d[g],y=d[p];if(a){const w=g==="y"?"top":"left",N=g==="y"?"bottom":"right",k=x+h[w],C=x-h[N];x=UN(k,x,C)}if(l){const w=p==="y"?"top":"left",N=p==="y"?"bottom":"right",k=y+h[w],C=y-h[N];y=UN(k,y,C)}const v=c.fn({...e,[g]:x,[p]:y});return{...v,data:{x:v.x-n,y:v.y-s,enabled:{[g]:a,[p]:l}}}}}},OY=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:r,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Bl(t,e),d={x:n,y:s},h=Uo(r),p=M4(h);let g=d[p],x=d[h];const y=Bl(l,e),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const k=p==="y"?"height":"width",C=i.reference[p]-i.floating[k]+v.mainAxis,j=i.reference[p]+i.reference[k]-v.mainAxis;g<C?g=C:g>j&&(g=j)}if(u){var w,N;const k=p==="y"?"width":"height",C=SP.has(zl(r)),j=i.reference[h]-i.floating[k]+(C&&((w=a.offset)==null?void 0:w[h])||0)+(C?0:v.crossAxis),R=i.reference[h]+i.reference[k]+(C?0:((N=a.offset)==null?void 0:N[h])||0)-(C?v.crossAxis:0);x<j?x=j:x>R&&(x=R)}return{[p]:g,[h]:x}}}},FY=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:r,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...u}=Bl(t,e),d=await a.detectOverflow(e,u),h=zl(r),p=$f(r),g=Uo(r)==="y",{width:x,height:y}=i.floating;let v,w;h==="top"||h==="bottom"?(v=h,w=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,v=p==="end"?"top":"bottom");const N=y-d.top-d.bottom,k=x-d.left-d.right,C=Hc(y-d[v],N),j=Hc(x-d[w],k),R=!e.middlewareData.shift;let _=C,A=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=k),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(_=N),R&&!p){const L=ea(d.left,0),D=ea(d.right,0),q=ea(d.top,0),V=ea(d.bottom,0);g?A=x-2*(L!==0||D!==0?L+D:ea(d.left,d.right)):_=y-2*(q!==0||V!==0?q+V:ea(d.top,d.bottom))}await c({...e,availableWidth:A,availableHeight:_});const O=await a.getDimensions(l.floating);return x!==O.width||y!==O.height?{reset:{rects:!0}}:{}}}};function by(){return typeof window<"u"}function Af(t){return kP(t)?(t.nodeName||"").toLowerCase():"#document"}function sa(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function il(t){var e;return(e=(kP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function kP(t){return by()?t instanceof Node||t instanceof sa(t).Node:!1}function fo(t){return by()?t instanceof Element||t instanceof sa(t).Element:!1}function el(t){return by()?t instanceof HTMLElement||t instanceof sa(t).HTMLElement:!1}function v$(t){return!by()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof sa(t).ShadowRoot}const MY=new Set(["inline","contents"]);function Fm(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=po(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!MY.has(r)}const LY=new Set(["table","td","th"]);function BY(t){return LY.has(Af(t))}const zY=[":popover-open",":modal"];function wy(t){return zY.some(e=>{try{return t.matches(e)}catch{return!1}})}const VY=["transform","translate","scale","rotate","perspective"],UY=["transform","translate","scale","rotate","perspective","filter"],WY=["paint","layout","strict","content"];function z4(t){const e=V4(),n=fo(t)?po(t):t;return VY.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||UY.some(s=>(n.willChange||"").includes(s))||WY.some(s=>(n.contain||"").includes(s))}function GY(t){let e=Kc(t);for(;el(e)&&!ff(e);){if(z4(e))return e;if(wy(e))return null;e=Kc(e)}return null}function V4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const HY=new Set(["html","body","#document"]);function ff(t){return HY.has(Af(t))}function po(t){return sa(t).getComputedStyle(t)}function Ny(t){return fo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Kc(t){if(Af(t)==="html")return t;const e=t.assignedSlot||t.parentNode||v$(t)&&t.host||il(t);return v$(e)?e.host:e}function CP(t){const e=Kc(t);return ff(e)?t.ownerDocument?t.ownerDocument.body:t.body:el(e)&&Fm(e)?e:CP(e)}function cm(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=CP(t),i=r===((s=t.ownerDocument)==null?void 0:s.body),a=sa(r);if(i){const l=GN(a);return e.concat(a,a.visualViewport||[],Fm(r)?r:[],l&&n?cm(l):[])}return e.concat(r,cm(r,[],n))}function GN(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function TP(t){const e=po(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=el(t),i=r?t.offsetWidth:n,a=r?t.offsetHeight:s,l=m0(n)!==i||m0(s)!==a;return l&&(n=i,s=a),{width:n,height:s,$:l}}function U4(t){return fo(t)?t:t.contextElement}function Yh(t){const e=U4(t);if(!el(e))return Ho(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:i}=TP(e);let a=(i?m0(n.width):n.width)/s,l=(i?m0(n.height):n.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const KY=Ho(0);function IP(t){const e=sa(t);return!V4()||!e.visualViewport?KY:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qY(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==sa(t)?!1:e}function yd(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=U4(t);let a=Ho(1);e&&(s?fo(s)&&(a=Yh(s)):a=Yh(t));const l=qY(i,n,s)?IP(i):Ho(0);let c=(r.left+l.x)/a.x,u=(r.top+l.y)/a.y,d=r.width/a.x,h=r.height/a.y;if(i){const p=sa(i),g=s&&fo(s)?sa(s):s;let x=p,y=GN(x);for(;y&&s&&g!==x;){const v=Yh(y),w=y.getBoundingClientRect(),N=po(y),k=w.left+(y.clientLeft+parseFloat(N.paddingLeft))*v.x,C=w.top+(y.clientTop+parseFloat(N.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,h*=v.y,c+=k,u+=C,x=sa(y),y=GN(x)}}return x0({width:d,height:h,x:c,y:u})}function Sy(t,e){const n=Ny(t).scrollLeft;return e?e.left+n:yd(il(t)).left+n}function jP(t,e){const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-Sy(t,n),r=n.top+e.scrollTop;return{x:s,y:r}}function XY(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const i=r==="fixed",a=il(s),l=e?wy(e.floating):!1;if(s===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Ho(1);const d=Ho(0),h=el(s);if((h||!h&&!i)&&((Af(s)!=="body"||Fm(a))&&(c=Ny(s)),el(s))){const g=yd(s);u=Yh(s),d.x=g.x+s.clientLeft,d.y=g.y+s.clientTop}const p=a&&!h&&!i?jP(a,c):Ho(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-c.scrollTop*u.y+d.y+p.y}}function YY(t){return Array.from(t.getClientRects())}function ZY(t){const e=il(t),n=Ny(t),s=t.ownerDocument.body,r=ea(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=ea(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-n.scrollLeft+Sy(t);const l=-n.scrollTop;return po(s).direction==="rtl"&&(a+=ea(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:a,y:l}}const b$=25;function JY(t,e){const n=sa(t),s=il(t),r=n.visualViewport;let i=s.clientWidth,a=s.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;const d=V4();(!d||d&&e==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}const u=Sy(s);if(u<=0){const d=s.ownerDocument,h=d.body,p=getComputedStyle(h),g=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,x=Math.abs(s.clientWidth-h.clientWidth-g);x<=b$&&(i-=x)}else u<=b$&&(i+=u);return{width:i,height:a,x:l,y:c}}const QY=new Set(["absolute","fixed"]);function eZ(t,e){const n=yd(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,i=el(t)?Yh(t):Ho(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=r*i.x,u=s*i.y;return{width:a,height:l,x:c,y:u}}function w$(t,e,n){let s;if(e==="viewport")s=JY(t,n);else if(e==="document")s=ZY(il(t));else if(fo(e))s=eZ(e,n);else{const r=IP(t);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return x0(s)}function EP(t,e){const n=Kc(t);return n===e||!fo(n)||ff(n)?!1:po(n).position==="fixed"||EP(n,e)}function tZ(t,e){const n=e.get(t);if(n)return n;let s=cm(t,[],!1).filter(l=>fo(l)&&Af(l)!=="body"),r=null;const i=po(t).position==="fixed";let a=i?Kc(t):t;for(;fo(a)&&!ff(a);){const l=po(a),c=z4(a);!c&&l.position==="fixed"&&(r=null),(i?!c&&!r:!c&&l.position==="static"&&!!r&&QY.has(r.position)||Fm(a)&&!c&&EP(t,a))?s=s.filter(d=>d!==a):r=l,a=Kc(a)}return e.set(t,s),s}function nZ(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const a=[...n==="clippingAncestors"?wy(e)?[]:tZ(e,this._c):[].concat(n),s],l=a[0],c=a.reduce((u,d)=>{const h=w$(e,d,r);return u.top=ea(h.top,u.top),u.right=Hc(h.right,u.right),u.bottom=Hc(h.bottom,u.bottom),u.left=ea(h.left,u.left),u},w$(e,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function sZ(t){const{width:e,height:n}=TP(t);return{width:e,height:n}}function rZ(t,e,n){const s=el(e),r=il(e),i=n==="fixed",a=yd(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Ho(0);function u(){c.x=Sy(r)}if(s||!s&&!i)if((Af(e)!=="body"||Fm(r))&&(l=Ny(e)),s){const g=yd(e,!0,i,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else r&&u();i&&!s&&r&&u();const d=r&&!s&&!i?jP(r,l):Ho(0),h=a.left+l.scrollLeft-c.x-d.x,p=a.top+l.scrollTop-c.y-d.y;return{x:h,y:p,width:a.width,height:a.height}}function kw(t){return po(t).position==="static"}function N$(t,e){if(!el(t)||po(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return il(t)===n&&(n=n.ownerDocument.body),n}function $P(t,e){const n=sa(t);if(wy(t))return n;if(!el(t)){let r=Kc(t);for(;r&&!ff(r);){if(fo(r)&&!kw(r))return r;r=Kc(r)}return n}let s=N$(t,e);for(;s&&BY(s)&&kw(s);)s=N$(s,e);return s&&ff(s)&&kw(s)&&!z4(s)?n:s||GY(t)||n}const iZ=async function(t){const e=this.getOffsetParent||$P,n=this.getDimensions,s=await n(t.floating);return{reference:rZ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function aZ(t){return po(t).direction==="rtl"}const oZ={convertOffsetParentRelativeRectToViewportRelativeRect:XY,getDocumentElement:il,getClippingRect:nZ,getOffsetParent:$P,getElementRects:iZ,getClientRects:YY,getDimensions:sZ,getScale:Yh,isElement:fo,isRTL:aZ};function AP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function lZ(t,e){let n=null,s;const r=il(t);function i(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:p,height:g}=u;if(l||e(),!p||!g)return;const x=d1(h),y=d1(r.clientWidth-(d+p)),v=d1(r.clientHeight-(h+g)),w=d1(d),k={rootMargin:-x+"px "+-y+"px "+-v+"px "+-w+"px",threshold:ea(0,Hc(1,c))||1};let C=!0;function j(R){const _=R[0].intersectionRatio;if(_!==c){if(!C)return a();_?a(!1,_):s=setTimeout(()=>{a(!1,1e-7)},1e3)}_===1&&!AP(u,t.getBoundingClientRect())&&a(),C=!1}try{n=new IntersectionObserver(j,{...k,root:r.ownerDocument})}catch{n=new IntersectionObserver(j,k)}n.observe(t)}return a(!0),i}function cZ(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=U4(t),d=r||i?[...u?cm(u):[],...cm(e)]:[];d.forEach(w=>{r&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=u&&l?lZ(u,n):null;let p=-1,g=null;a&&(g=new ResizeObserver(w=>{let[N]=w;N&&N.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var k;(k=g)==null||k.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let x,y=c?yd(t):null;c&&v();function v(){const w=yd(t);y&&!AP(y,w)&&n(),y=w,x=requestAnimationFrame(v)}return n(),()=>{var w;d.forEach(N=>{r&&N.removeEventListener("scroll",n),i&&N.removeEventListener("resize",n)}),h?.(),(w=g)==null||w.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const uZ=PY,dZ=_Y,hZ=AY,fZ=FY,pZ=RY,S$=$Y,mZ=OY,gZ=(t,e,n)=>{const s=new Map,r={platform:oZ,...n},i={...r.platform,_c:s};return EY(t,e,{...r,platform:i})};var xZ=typeof document<"u",yZ=function(){},L1=xZ?T.useLayoutEffect:yZ;function y0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!y0(t[s],e[s]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i==="_owner"&&t.$$typeof)&&!y0(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function RP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function k$(t,e){const n=RP(t);return Math.round(e*n)/n}function Cw(t){const e=T.useRef(t);return L1(()=>{e.current=t}),e}function vZ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=T.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=T.useState(s);y0(p,s)||g(s);const[x,y]=T.useState(null),[v,w]=T.useState(null),N=T.useCallback(X=>{X!==R.current&&(R.current=X,y(X))},[]),k=T.useCallback(X=>{X!==_.current&&(_.current=X,w(X))},[]),C=i||x,j=a||v,R=T.useRef(null),_=T.useRef(null),A=T.useRef(d),O=c!=null,L=Cw(c),D=Cw(r),q=Cw(u),V=T.useCallback(()=>{if(!R.current||!_.current)return;const X={placement:e,strategy:n,middleware:p};D.current&&(X.platform=D.current),gZ(R.current,_.current,X).then(Q=>{const G={...Q,isPositioned:q.current!==!1};ne.current&&!y0(A.current,G)&&(A.current=G,_m.flushSync(()=>{h(G)}))})},[p,e,n,D,q]);L1(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[u]);const ne=T.useRef(!1);L1(()=>(ne.current=!0,()=>{ne.current=!1}),[]),L1(()=>{if(C&&(R.current=C),j&&(_.current=j),C&&j){if(L.current)return L.current(C,j,V);V()}},[C,j,V,L,O]);const J=T.useMemo(()=>({reference:R,floating:_,setReference:N,setFloating:k}),[N,k]),ee=T.useMemo(()=>({reference:C,floating:j}),[C,j]),te=T.useMemo(()=>{const X={position:n,left:0,top:0};if(!ee.floating)return X;const Q=k$(ee.floating,d.x),G=k$(ee.floating,d.y);return l?{...X,transform:"translate("+Q+"px, "+G+"px)",...RP(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Q,top:G}},[n,l,ee.floating,d.x,d.y]);return T.useMemo(()=>({...d,update:V,refs:J,elements:ee,floatingStyles:te}),[d,V,J,ee,te])}const bZ=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:r}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?S$({element:s.current,padding:r}).fn(n):{}:s?S$({element:s,padding:r}).fn(n):{}}}},wZ=(t,e)=>({...uZ(t),options:[t,e]}),NZ=(t,e)=>({...dZ(t),options:[t,e]}),SZ=(t,e)=>({...mZ(t),options:[t,e]}),kZ=(t,e)=>({...hZ(t),options:[t,e]}),CZ=(t,e)=>({...fZ(t),options:[t,e]}),TZ=(t,e)=>({...pZ(t),options:[t,e]}),IZ=(t,e)=>({...bZ(t),options:[t,e]});var jZ="Arrow",DP=T.forwardRef((t,e)=>{const{children:n,width:s=10,height:r=5,...i}=t;return o.jsx(Dt.svg,{...i,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});DP.displayName=jZ;var EZ=DP;function Mm(t){const[e,n]=T.useState(void 0);return Gs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var W4="Popper",[PP,ky]=ei(W4),[$Z,_P]=PP(W4),OP=t=>{const{__scopePopper:e,children:n}=t,[s,r]=T.useState(null);return o.jsx($Z,{scope:e,anchor:s,onAnchorChange:r,children:n})};OP.displayName=W4;var FP="PopperAnchor",MP=T.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...r}=t,i=_P(FP,n),a=T.useRef(null),l=qt(e,a),c=T.useRef(null);return T.useEffect(()=>{const u=c.current;c.current=s?.current||a.current,u!==c.current&&i.onAnchorChange(c.current)}),s?null:o.jsx(Dt.div,{...r,ref:l})});MP.displayName=FP;var G4="PopperContent",[AZ,RZ]=PP(G4),LP=T.forwardRef((t,e)=>{const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:x,...y}=t,v=_P(G4,n),[w,N]=T.useState(null),k=qt(e,Ce=>N(Ce)),[C,j]=T.useState(null),R=Mm(C),_=R?.width??0,A=R?.height??0,O=s+(i!=="center"?"-"+i:""),L=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(u)?u:[u],q=D.length>0,V={padding:L,boundary:D.filter(PZ),altBoundary:q},{refs:ne,floatingStyles:J,placement:ee,isPositioned:te,middlewareData:X}=vZ({strategy:"fixed",placement:O,whileElementsMounted:(...Ce)=>cZ(...Ce,{animationFrame:g==="always"}),elements:{reference:v.anchor},middleware:[wZ({mainAxis:r+A,alignmentAxis:a}),c&&NZ({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?SZ():void 0,...V}),c&&kZ({...V}),CZ({...V,apply:({elements:Ce,rects:Re,availableWidth:se,availableHeight:Te})=>{const{width:Me,height:Ye}=Re.reference,me=Ce.floating.style;me.setProperty("--radix-popper-available-width",`${se}px`),me.setProperty("--radix-popper-available-height",`${Te}px`),me.setProperty("--radix-popper-anchor-width",`${Me}px`),me.setProperty("--radix-popper-anchor-height",`${Ye}px`)}}),C&&IZ({element:C,padding:l}),_Z({arrowWidth:_,arrowHeight:A}),p&&TZ({strategy:"referenceHidden",...V})]}),[Q,G]=VP(ee),H=br(x);Gs(()=>{te&&H?.()},[te,H]);const ie=X.arrow?.x,de=X.arrow?.y,ke=X.arrow?.centerOffset!==0,[we,Ee]=T.useState();return Gs(()=>{w&&Ee(window.getComputedStyle(w).zIndex)},[w]),o.jsx("div",{ref:ne.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:te?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[X.transformOrigin?.x,X.transformOrigin?.y].join(" "),...X.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(AZ,{scope:n,placedSide:Q,onArrowChange:j,arrowX:ie,arrowY:de,shouldHideArrow:ke,children:o.jsx(Dt.div,{"data-side":Q,"data-align":G,...y,ref:k,style:{...y.style,animation:te?void 0:"none"}})})})});LP.displayName=G4;var BP="PopperArrow",DZ={top:"bottom",right:"left",bottom:"top",left:"right"},zP=T.forwardRef(function(e,n){const{__scopePopper:s,...r}=e,i=RZ(BP,s),a=DZ[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(EZ,{...r,ref:n,style:{...r.style,display:"block"}})})});zP.displayName=BP;function PZ(t){return t!==null}var _Z=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:s,middlewareData:r}=e,a=r.arrow?.centerOffset!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,d]=VP(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(r.arrow?.x??0)+l/2,g=(r.arrow?.y??0)+c/2;let x="",y="";return u==="bottom"?(x=a?h:`${p}px`,y=`${-c}px`):u==="top"?(x=a?h:`${p}px`,y=`${s.floating.height+c}px`):u==="right"?(x=`${-c}px`,y=a?h:`${g}px`):u==="left"&&(x=`${s.floating.width+c}px`,y=a?h:`${g}px`),{data:{x,y}}}});function VP(t){const[e,n="center"]=t.split("-");return[e,n]}var UP=OP,WP=MP,GP=LP,HP=zP,OZ="Portal",Cy=T.forwardRef((t,e)=>{const{container:n,...s}=t,[r,i]=T.useState(!1);Gs(()=>i(!0),[]);const a=n||r&&globalThis?.document?.body;return a?DD.createPortal(o.jsx(Dt.div,{...s,ref:e}),a):null});Cy.displayName=OZ;function FZ(t){const e=MZ(t),n=T.forwardRef((s,r)=>{const{children:i,...a}=s,l=T.Children.toArray(i),c=l.find(BZ);if(c){const u=c.props.children,d=l.map(h=>h===c?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return o.jsx(e,{...a,ref:r,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return o.jsx(e,{...a,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function MZ(t){const e=T.forwardRef((n,s)=>{const{children:r,...i}=n;if(T.isValidElement(r)){const a=VZ(r),l=zZ(i,r.props);return r.type!==T.Fragment&&(l.ref=s?Xl(s,a):a),T.cloneElement(r,l)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var LZ=Symbol("radix.slottable");function BZ(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===LZ}function zZ(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function VZ(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var UZ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ih=new WeakMap,h1=new WeakMap,f1={},Tw=0,KP=function(t){return t&&(t.host||KP(t.parentNode))},WZ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=KP(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},GZ=function(t,e,n,s){var r=WZ(e,Array.isArray(t)?t:[t]);f1[n]||(f1[n]=new WeakMap);var i=f1[n],a=[],l=new Set,c=new Set(r),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};r.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))d(p);else try{var g=p.getAttribute(s),x=g!==null&&g!=="false",y=(Ih.get(p)||0)+1,v=(i.get(p)||0)+1;Ih.set(p,y),i.set(p,v),a.push(p),y===1&&x&&h1.set(p,!0),v===1&&p.setAttribute(n,"true"),x||p.setAttribute(s,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return d(e),l.clear(),Tw++,function(){a.forEach(function(h){var p=Ih.get(h)-1,g=i.get(h)-1;Ih.set(h,p),i.set(h,g),p||(h1.has(h)||h.removeAttribute(s),h1.delete(h)),g||h.removeAttribute(n)}),Tw--,Tw||(Ih=new WeakMap,Ih=new WeakMap,h1=new WeakMap,f1={})}},H4=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),r=UZ(t);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),GZ(s,r,n,"aria-hidden")):function(){return null}},Bo=function(){return Bo=Object.assign||function(e){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Bo.apply(this,arguments)};function qP(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function HZ(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}var B1="right-scroll-bar-position",z1="width-before-scroll-bar",KZ="with-scroll-bars-hidden",qZ="--removed-body-scroll-bar-size";function Iw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function XZ(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=e,n.facade}var YZ=typeof window<"u"?T.useLayoutEffect:T.useEffect,C$=new WeakMap;function ZZ(t,e){var n=XZ(null,function(s){return t.forEach(function(r){return Iw(r,s)})});return YZ(function(){var s=C$.get(n);if(s){var r=new Set(s),i=new Set(t),a=n.current;r.forEach(function(l){i.has(l)||Iw(l,null)}),i.forEach(function(l){r.has(l)||Iw(l,a)})}C$.set(n,t)},[t]),n}function JZ(t){return t}function QZ(t,e){e===void 0&&(e=JZ);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,s);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(s=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){s=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return r}function eJ(t){t===void 0&&(t={});var e=QZ(null);return e.options=Bo({async:!0,ssr:!1},t),e}var XP=function(t){var e=t.sideCar,n=qP(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return T.createElement(s,Bo({},n))};XP.isSideCarExport=!0;function tJ(t,e){return t.useMedium(e),XP}var YP=eJ(),jw=function(){},Ty=T.forwardRef(function(t,e){var n=T.useRef(null),s=T.useState({onScrollCapture:jw,onWheelCapture:jw,onTouchMoveCapture:jw}),r=s[0],i=s[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,p=t.sideCar,g=t.noRelative,x=t.noIsolation,y=t.inert,v=t.allowPinchZoom,w=t.as,N=w===void 0?"div":w,k=t.gapMode,C=qP(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,R=ZZ([n,e]),_=Bo(Bo({},C),r);return T.createElement(T.Fragment,null,d&&T.createElement(j,{sideCar:YP,removeScrollBar:u,shards:h,noRelative:g,noIsolation:x,inert:y,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:k}),a?T.cloneElement(T.Children.only(l),Bo(Bo({},_),{ref:R})):T.createElement(N,Bo({},_,{className:c,ref:R}),l))});Ty.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ty.classNames={fullWidth:z1,zeroRight:B1};var nJ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function sJ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=nJ();return e&&t.setAttribute("nonce",e),t}function rJ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function iJ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var aJ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=sJ())&&(rJ(e,n),iJ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},oJ=function(){var t=aJ();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ZP=function(){var t=oJ(),e=function(n){var s=n.styles,r=n.dynamic;return t(s,r),null};return e},lJ={left:0,top:0,right:0,gap:0},Ew=function(t){return parseInt(t||"",10)||0},cJ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Ew(n),Ew(s),Ew(r)]},uJ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return lJ;var e=cJ(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},dJ=ZP(),Zh="data-scroll-locked",hJ=function(t,e,n,s){var r=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(KZ,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Zh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(B1,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(z1,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(B1," .").concat(B1,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(z1," .").concat(z1,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Zh,`] {
    `).concat(qZ,": ").concat(l,`px;
  }
`)},T$=function(){var t=parseInt(document.body.getAttribute(Zh)||"0",10);return isFinite(t)?t:0},fJ=function(){T.useEffect(function(){return document.body.setAttribute(Zh,(T$()+1).toString()),function(){var t=T$()-1;t<=0?document.body.removeAttribute(Zh):document.body.setAttribute(Zh,t.toString())}},[])},pJ=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,r=s===void 0?"margin":s;fJ();var i=T.useMemo(function(){return uJ(r)},[r]);return T.createElement(dJ,{styles:hJ(i,!e,r,n?"":"!important")})},HN=!1;if(typeof window<"u")try{var p1=Object.defineProperty({},"passive",{get:function(){return HN=!0,!0}});window.addEventListener("test",p1,p1),window.removeEventListener("test",p1,p1)}catch{HN=!1}var jh=HN?{passive:!1}:!1,mJ=function(t){return t.tagName==="TEXTAREA"},JP=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!mJ(t)&&n[e]==="visible")},gJ=function(t){return JP(t,"overflowY")},xJ=function(t){return JP(t,"overflowX")},I$=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=QP(t,s);if(r){var i=e6(t,s),a=i[1],l=i[2];if(a>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},yJ=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},vJ=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},QP=function(t,e){return t==="v"?gJ(e):xJ(e)},e6=function(t,e){return t==="v"?yJ(e):vJ(e)},bJ=function(t,e){return t==="h"&&e==="rtl"?-1:1},wJ=function(t,e,n,s,r){var i=bJ(t,window.getComputedStyle(e).direction),a=i*s,l=n.target,c=e.contains(l),u=!1,d=a>0,h=0,p=0;do{if(!l)break;var g=e6(t,l),x=g[0],y=g[1],v=g[2],w=y-v-i*x;(x||w)&&QP(t,l)&&(h+=w,p+=x);var N=l.parentNode;l=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&Math.abs(h)<1||!d&&Math.abs(p)<1)&&(u=!0),u},m1=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},j$=function(t){return[t.deltaX,t.deltaY]},E$=function(t){return t&&"current"in t?t.current:t},NJ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},SJ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},kJ=0,Eh=[];function CJ(t){var e=T.useRef([]),n=T.useRef([0,0]),s=T.useRef(),r=T.useState(kJ++)[0],i=T.useState(ZP)[0],a=T.useRef(t);T.useEffect(function(){a.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var y=HZ([t.lockRef.current],(t.shards||[]).map(E$),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var l=T.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!a.current.allowPinchZoom;var w=m1(y),N=n.current,k="deltaX"in y?y.deltaX:N[0]-w[0],C="deltaY"in y?y.deltaY:N[1]-w[1],j,R=y.target,_=Math.abs(k)>Math.abs(C)?"h":"v";if("touches"in y&&_==="h"&&R.type==="range")return!1;var A=window.getSelection(),O=A&&A.anchorNode,L=O?O===R||O.contains(R):!1;if(L)return!1;var D=I$(_,R);if(!D)return!0;if(D?j=_:(j=_==="v"?"h":"v",D=I$(_,R)),!D)return!1;if(!s.current&&"changedTouches"in y&&(k||C)&&(s.current=j),!j)return!0;var q=s.current||j;return wJ(q,v,y,q==="h"?k:C)},[]),c=T.useCallback(function(y){var v=y;if(!(!Eh.length||Eh[Eh.length-1]!==i)){var w="deltaY"in v?j$(v):m1(v),N=e.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&NJ(j.delta,w)})[0];if(N&&N.should){v.cancelable&&v.preventDefault();return}if(!N){var k=(a.current.shards||[]).map(E$).filter(Boolean).filter(function(j){return j.contains(v.target)}),C=k.length>0?l(v,k[0]):!a.current.noIsolation;C&&v.cancelable&&v.preventDefault()}}},[]),u=T.useCallback(function(y,v,w,N){var k={name:y,delta:v,target:w,should:N,shadowParent:TJ(w)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(C){return C!==k})},1)},[]),d=T.useCallback(function(y){n.current=m1(y),s.current=void 0},[]),h=T.useCallback(function(y){u(y.type,j$(y),y.target,l(y,t.lockRef.current))},[]),p=T.useCallback(function(y){u(y.type,m1(y),y.target,l(y,t.lockRef.current))},[]);T.useEffect(function(){return Eh.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,jh),document.addEventListener("touchmove",c,jh),document.addEventListener("touchstart",d,jh),function(){Eh=Eh.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,jh),document.removeEventListener("touchmove",c,jh),document.removeEventListener("touchstart",d,jh)}},[]);var g=t.removeScrollBar,x=t.inert;return T.createElement(T.Fragment,null,x?T.createElement(i,{styles:SJ(r)}):null,g?T.createElement(pJ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function TJ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const IJ=tJ(YP,CJ);var Iy=T.forwardRef(function(t,e){return T.createElement(Ty,Bo({},t,{ref:e,sideCar:IJ}))});Iy.classNames=Ty.classNames;var KN=["Enter"," "],jJ=["ArrowDown","PageUp","Home"],t6=["ArrowUp","PageDown","End"],EJ=[...jJ,...t6],$J={ltr:[...KN,"ArrowRight"],rtl:[...KN,"ArrowLeft"]},AJ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Lm="Menu",[um,RJ,DJ]=Pm(Lm),[Fd,n6]=ei(Lm,[DJ,ky,jf]),jy=ky(),s6=jf(),[PJ,Md]=Fd(Lm),[_J,Bm]=Fd(Lm),r6=t=>{const{__scopeMenu:e,open:n=!1,children:s,dir:r,onOpenChange:i,modal:a=!0}=t,l=jy(e),[c,u]=T.useState(null),d=T.useRef(!1),h=br(i),p=ou(r);return T.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),o.jsx(UP,{...l,children:o.jsx(PJ,{scope:e,open:n,onOpenChange:h,content:c,onContentChange:u,children:o.jsx(_J,{scope:e,onClose:T.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:p,modal:a,children:s})})})};r6.displayName=Lm;var OJ="MenuAnchor",K4=T.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,r=jy(n);return o.jsx(WP,{...r,...s,ref:e})});K4.displayName=OJ;var q4="MenuPortal",[FJ,i6]=Fd(q4,{forceMount:void 0}),a6=t=>{const{__scopeMenu:e,forceMount:n,children:s,container:r}=t,i=Md(q4,e);return o.jsx(FJ,{scope:e,forceMount:n,children:o.jsx(ti,{present:n||i.open,children:o.jsx(Cy,{asChild:!0,container:r,children:s})})})};a6.displayName=q4;var $a="MenuContent",[MJ,X4]=Fd($a),o6=T.forwardRef((t,e)=>{const n=i6($a,t.__scopeMenu),{forceMount:s=n.forceMount,...r}=t,i=Md($a,t.__scopeMenu),a=Bm($a,t.__scopeMenu);return o.jsx(um.Provider,{scope:t.__scopeMenu,children:o.jsx(ti,{present:s||i.open,children:o.jsx(um.Slot,{scope:t.__scopeMenu,children:a.modal?o.jsx(LJ,{...r,ref:e}):o.jsx(BJ,{...r,ref:e})})})})}),LJ=T.forwardRef((t,e)=>{const n=Md($a,t.__scopeMenu),s=T.useRef(null),r=qt(e,s);return T.useEffect(()=>{const i=s.current;if(i)return H4(i)},[]),o.jsx(Y4,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:gt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),BJ=T.forwardRef((t,e)=>{const n=Md($a,t.__scopeMenu);return o.jsx(Y4,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),zJ=FZ("MenuContent.ScrollLock"),Y4=T.forwardRef((t,e)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:g,disableOutsideScroll:x,...y}=t,v=Md($a,n),w=Bm($a,n),N=jy(n),k=s6(n),C=RJ(n),[j,R]=T.useState(null),_=T.useRef(null),A=qt(e,_,v.onContentChange),O=T.useRef(0),L=T.useRef(""),D=T.useRef(0),q=T.useRef(null),V=T.useRef("right"),ne=T.useRef(0),J=x?Iy:T.Fragment,ee=x?{as:zJ,allowPinchZoom:!0}:void 0,te=Q=>{const G=L.current+Q,H=C().filter(Ce=>!Ce.disabled),ie=document.activeElement,de=H.find(Ce=>Ce.ref.current===ie)?.textValue,ke=H.map(Ce=>Ce.textValue),we=QJ(ke,G,de),Ee=H.find(Ce=>Ce.textValue===we)?.ref.current;(function Ce(Re){L.current=Re,window.clearTimeout(O.current),Re!==""&&(O.current=window.setTimeout(()=>Ce(""),1e3))})(G),Ee&&setTimeout(()=>Ee.focus())};T.useEffect(()=>()=>window.clearTimeout(O.current),[]),F4();const X=T.useCallback(Q=>V.current===q.current?.side&&tQ(Q,q.current?.area),[]);return o.jsx(MJ,{scope:n,searchRef:L,onItemEnter:T.useCallback(Q=>{X(Q)&&Q.preventDefault()},[X]),onItemLeave:T.useCallback(Q=>{X(Q)||(_.current?.focus(),R(null))},[X]),onTriggerLeave:T.useCallback(Q=>{X(Q)&&Q.preventDefault()},[X]),pointerGraceTimerRef:D,onPointerGraceIntentChange:T.useCallback(Q=>{q.current=Q},[]),children:o.jsx(J,{...ee,children:o.jsx(vy,{asChild:!0,trapped:r,onMountAutoFocus:gt(i,Q=>{Q.preventDefault(),_.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(yy,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:g,children:o.jsx(R4,{asChild:!0,...k,dir:w.dir,orientation:"vertical",loop:s,currentTabStopId:j,onCurrentTabStopIdChange:R,onEntryFocus:gt(c,Q=>{w.isUsingKeyboardRef.current||Q.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(GP,{role:"menu","aria-orientation":"vertical","data-state":S6(v.open),"data-radix-menu-content":"",dir:w.dir,...N,...y,ref:A,style:{outline:"none",...y.style},onKeyDown:gt(y.onKeyDown,Q=>{const H=Q.target.closest("[data-radix-menu-content]")===Q.currentTarget,ie=Q.ctrlKey||Q.altKey||Q.metaKey,de=Q.key.length===1;H&&(Q.key==="Tab"&&Q.preventDefault(),!ie&&de&&te(Q.key));const ke=_.current;if(Q.target!==ke||!EJ.includes(Q.key))return;Q.preventDefault();const Ee=C().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);t6.includes(Q.key)&&Ee.reverse(),ZJ(Ee)}),onBlur:gt(t.onBlur,Q=>{Q.currentTarget.contains(Q.target)||(window.clearTimeout(O.current),L.current="")}),onPointerMove:gt(t.onPointerMove,dm(Q=>{const G=Q.target,H=ne.current!==Q.clientX;if(Q.currentTarget.contains(G)&&H){const ie=Q.clientX>ne.current?"right":"left";V.current=ie,ne.current=Q.clientX}}))})})})})})})});o6.displayName=$a;var VJ="MenuGroup",Z4=T.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return o.jsx(Dt.div,{role:"group",...s,ref:e})});Z4.displayName=VJ;var UJ="MenuLabel",l6=T.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return o.jsx(Dt.div,{...s,ref:e})});l6.displayName=UJ;var v0="MenuItem",$$="menu.itemSelect",Ey=T.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:s,...r}=t,i=T.useRef(null),a=Bm(v0,t.__scopeMenu),l=X4(v0,t.__scopeMenu),c=qt(e,i),u=T.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent($$,{bubbles:!0,cancelable:!0});h.addEventListener($$,g=>s?.(g),{once:!0}),PD(h,p),p.defaultPrevented?u.current=!1:a.onClose()}};return o.jsx(c6,{...r,ref:c,disabled:n,onClick:gt(t.onClick,d),onPointerDown:h=>{t.onPointerDown?.(h),u.current=!0},onPointerUp:gt(t.onPointerUp,h=>{u.current||h.currentTarget?.click()}),onKeyDown:gt(t.onKeyDown,h=>{const p=l.searchRef.current!=="";n||p&&h.key===" "||KN.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Ey.displayName=v0;var c6=T.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...i}=t,a=X4(v0,n),l=s6(n),c=T.useRef(null),u=qt(e,c),[d,h]=T.useState(!1),[p,g]=T.useState("");return T.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[i.children]),o.jsx(um.ItemSlot,{scope:n,disabled:s,textValue:r??p,children:o.jsx(D4,{asChild:!0,...l,focusable:!s,children:o.jsx(Dt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:u,onPointerMove:gt(t.onPointerMove,dm(x=>{s?a.onItemLeave(x):(a.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:gt(t.onPointerLeave,dm(x=>a.onItemLeave(x))),onFocus:gt(t.onFocus,()=>h(!0)),onBlur:gt(t.onBlur,()=>h(!1))})})})}),WJ="MenuCheckboxItem",u6=T.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:s,...r}=t;return o.jsx(m6,{scope:t.__scopeMenu,checked:n,children:o.jsx(Ey,{role:"menuitemcheckbox","aria-checked":b0(n)?"mixed":n,...r,ref:e,"data-state":Q4(n),onSelect:gt(r.onSelect,()=>s?.(b0(n)?!0:!n),{checkForDefaultPrevented:!1})})})});u6.displayName=WJ;var d6="MenuRadioGroup",[GJ,HJ]=Fd(d6,{value:void 0,onValueChange:()=>{}}),h6=T.forwardRef((t,e)=>{const{value:n,onValueChange:s,...r}=t,i=br(s);return o.jsx(GJ,{scope:t.__scopeMenu,value:n,onValueChange:i,children:o.jsx(Z4,{...r,ref:e})})});h6.displayName=d6;var f6="MenuRadioItem",p6=T.forwardRef((t,e)=>{const{value:n,...s}=t,r=HJ(f6,t.__scopeMenu),i=n===r.value;return o.jsx(m6,{scope:t.__scopeMenu,checked:i,children:o.jsx(Ey,{role:"menuitemradio","aria-checked":i,...s,ref:e,"data-state":Q4(i),onSelect:gt(s.onSelect,()=>r.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});p6.displayName=f6;var J4="MenuItemIndicator",[m6,KJ]=Fd(J4,{checked:!1}),g6=T.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:s,...r}=t,i=KJ(J4,n);return o.jsx(ti,{present:s||b0(i.checked)||i.checked===!0,children:o.jsx(Dt.span,{...r,ref:e,"data-state":Q4(i.checked)})})});g6.displayName=J4;var qJ="MenuSeparator",x6=T.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return o.jsx(Dt.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});x6.displayName=qJ;var XJ="MenuArrow",y6=T.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,r=jy(n);return o.jsx(HP,{...r,...s,ref:e})});y6.displayName=XJ;var YJ="MenuSub",[ROe,v6]=Fd(YJ),Op="MenuSubTrigger",b6=T.forwardRef((t,e)=>{const n=Md(Op,t.__scopeMenu),s=Bm(Op,t.__scopeMenu),r=v6(Op,t.__scopeMenu),i=X4(Op,t.__scopeMenu),a=T.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},d=T.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return T.useEffect(()=>d,[d]),T.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),o.jsx(K4,{asChild:!0,...u,children:o.jsx(c6,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":S6(n.open),...t,ref:Xl(e,r.onTriggerChange),onClick:h=>{t.onClick?.(h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:gt(t.onPointerMove,dm(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:gt(t.onPointerLeave,dm(h=>{d();const p=n.content?.getBoundingClientRect();if(p){const g=n.content?.dataset.side,x=g==="right",y=x?-5:5,v=p[x?"left":"right"],w=p[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:v,y:p.top},{x:w,y:p.top},{x:w,y:p.bottom},{x:v,y:p.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:gt(t.onKeyDown,h=>{const p=i.searchRef.current!=="";t.disabled||p&&h.key===" "||$J[s.dir].includes(h.key)&&(n.onOpenChange(!0),n.content?.focus(),h.preventDefault())})})})});b6.displayName=Op;var w6="MenuSubContent",N6=T.forwardRef((t,e)=>{const n=i6($a,t.__scopeMenu),{forceMount:s=n.forceMount,...r}=t,i=Md($a,t.__scopeMenu),a=Bm($a,t.__scopeMenu),l=v6(w6,t.__scopeMenu),c=T.useRef(null),u=qt(e,c);return o.jsx(um.Provider,{scope:t.__scopeMenu,children:o.jsx(ti,{present:s||i.open,children:o.jsx(um.Slot,{scope:t.__scopeMenu,children:o.jsx(Y4,{id:l.contentId,"aria-labelledby":l.triggerId,...r,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{a.isUsingKeyboardRef.current&&c.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:gt(t.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:gt(t.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:gt(t.onKeyDown,d=>{const h=d.currentTarget.contains(d.target),p=AJ[a.dir].includes(d.key);h&&p&&(i.onOpenChange(!1),l.trigger?.focus(),d.preventDefault())})})})})})});N6.displayName=w6;function S6(t){return t?"open":"closed"}function b0(t){return t==="indeterminate"}function Q4(t){return b0(t)?"indeterminate":t?"checked":"unchecked"}function ZJ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function JJ(t,e){return t.map((n,s)=>t[(e+s)%t.length])}function QJ(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=JJ(t,Math.max(i,0));r.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function eQ(t,e){const{x:n,y:s}=t;let r=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i],c=e[a],u=l.x,d=l.y,h=c.x,p=c.y;d>s!=p>s&&n<(h-u)*(s-d)/(p-d)+u&&(r=!r)}return r}function tQ(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return eQ(n,e)}function dm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var nQ=r6,sQ=K4,rQ=a6,iQ=o6,aQ=Z4,oQ=l6,lQ=Ey,cQ=u6,uQ=h6,dQ=p6,hQ=g6,fQ=x6,pQ=y6,mQ=b6,gQ=N6,$y="DropdownMenu",[xQ]=ei($y,[n6]),ki=n6(),[yQ,k6]=xQ($y),C6=t=>{const{__scopeDropdownMenu:e,children:n,dir:s,open:r,defaultOpen:i,onOpenChange:a,modal:l=!0}=t,c=ki(e),u=T.useRef(null),[d,h]=ra({prop:r,defaultProp:i??!1,onChange:a,caller:$y});return o.jsx(yQ,{scope:e,triggerId:ja(),triggerRef:u,contentId:ja(),open:d,onOpenChange:h,onOpenToggle:T.useCallback(()=>h(p=>!p),[h]),modal:l,children:o.jsx(nQ,{...c,open:d,onOpenChange:h,dir:s,modal:l,children:n})})};C6.displayName=$y;var T6="DropdownMenuTrigger",I6=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=t,i=k6(T6,n),a=ki(n);return o.jsx(sQ,{asChild:!0,...a,children:o.jsx(Dt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Xl(e,i.triggerRef),onPointerDown:gt(t.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:gt(t.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});I6.displayName=T6;var vQ="DropdownMenuPortal",j6=t=>{const{__scopeDropdownMenu:e,...n}=t,s=ki(e);return o.jsx(rQ,{...s,...n})};j6.displayName=vQ;var E6="DropdownMenuContent",$6=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=k6(E6,n),i=ki(n),a=T.useRef(!1);return o.jsx(iQ,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...s,ref:e,onCloseAutoFocus:gt(t.onCloseAutoFocus,l=>{a.current||r.triggerRef.current?.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:gt(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!r.modal||d)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$6.displayName=E6;var bQ="DropdownMenuGroup",wQ=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(aQ,{...r,...s,ref:e})});wQ.displayName=bQ;var NQ="DropdownMenuLabel",SQ=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(oQ,{...r,...s,ref:e})});SQ.displayName=NQ;var kQ="DropdownMenuItem",A6=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(lQ,{...r,...s,ref:e})});A6.displayName=kQ;var CQ="DropdownMenuCheckboxItem",TQ=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(cQ,{...r,...s,ref:e})});TQ.displayName=CQ;var IQ="DropdownMenuRadioGroup",jQ=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(uQ,{...r,...s,ref:e})});jQ.displayName=IQ;var EQ="DropdownMenuRadioItem",$Q=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(dQ,{...r,...s,ref:e})});$Q.displayName=EQ;var AQ="DropdownMenuItemIndicator",RQ=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(hQ,{...r,...s,ref:e})});RQ.displayName=AQ;var DQ="DropdownMenuSeparator",R6=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(fQ,{...r,...s,ref:e})});R6.displayName=DQ;var PQ="DropdownMenuArrow",_Q=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(pQ,{...r,...s,ref:e})});_Q.displayName=PQ;var OQ="DropdownMenuSubTrigger",FQ=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(mQ,{...r,...s,ref:e})});FQ.displayName=OQ;var MQ="DropdownMenuSubContent",LQ=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=ki(n);return o.jsx(gQ,{...r,...s,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});LQ.displayName=MQ;var BQ=C6,zQ=I6,VQ=j6,UQ=$6,WQ=A6,GQ=R6;function eS({...t}){return o.jsx(BQ,{"data-slot":"dropdown-menu",...t})}function tS({...t}){return o.jsx(zQ,{"data-slot":"dropdown-menu-trigger",...t})}function nS({className:t,sideOffset:e=4,...n}){return o.jsx(VQ,{children:o.jsx(UQ,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Bt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function ud({className:t,inset:e,variant:n="default",...s}){return o.jsx(WQ,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:Bt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function HQ({className:t,...e}){return o.jsx(GQ,{"data-slot":"dropdown-menu-separator",className:Bt("bg-border -mx-1 my-1 h-px",t),...e})}const D6=T.createContext({isRTL:!1,direction:"ltr",toggleLanguage:()=>{},currentLanguage:"en",setLanguage:()=>{}}),Rf=()=>T.useContext(D6);function KQ({children:t}){const{i18n:e}=Ef(),[n,s]=T.useState(e.language==="ar");T.useEffect(()=>{const a=e.language==="ar";s(a),document.documentElement.dir=a?"rtl":"ltr",document.documentElement.lang=e.language,a?document.documentElement.classList.add("rtl"):document.documentElement.classList.remove("rtl")},[e.language]);const r=()=>{const a=e.language==="en"?"ar":"en";e.changeLanguage(a)},i=a=>{e.changeLanguage(a)};return o.jsx(D6.Provider,{value:{isRTL:n,direction:n?"rtl":"ltr",toggleLanguage:r,currentLanguage:e.language,setLanguage:i},children:t})}function P6(){const{currentLanguage:t,setLanguage:e}=Rf(),{t:n}=Ef(),s=[{code:"en",name:"English",nativeName:"English"},{code:"ar",name:"Arabic",nativeName:""}];return o.jsxs(eS,{children:[o.jsx(tS,{asChild:!0,children:o.jsxs(be,{variant:"ghost",size:"sm",className:"gap-1",children:[o.jsx(Wc,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs uppercase",children:t})]})}),o.jsx(nS,{align:"end",children:s.map(r=>o.jsx(ud,{onClick:()=>e(r.code),className:t===r.code?"bg-primary/10":"",children:o.jsxs("span",{className:"flex items-center gap-2 w-full",children:[o.jsx("span",{children:r.nativeName}),t===r.code&&o.jsx("span",{className:"ml-auto text-primary",children:""})]})},r.code))})]})}const _6=T.createContext(void 0);function A$(t){return{userId:t.userId,email:t.email,firstName:t.firstName,lastName:t.lastName,membershipType:t.membershipType,membershipStatus:"active",profileImageUrl:void 0,isCreator:!1,isVerified:!1,walletBalance:0,totalScansUsed:0,questionnaireCompleted:t.questionnaireCompleted}}function qQ(t){return{userId:t.userId,email:"",firstName:"Guest",lastName:"",membershipType:t.membershipType,membershipStatus:"active",profileImageUrl:void 0,isCreator:!1,isVerified:!1,walletBalance:0,totalScansUsed:0,questionnaireCompleted:!1}}function $h(t,e=0,n){const s=t.membershipType.toLowerCase(),r=s==="pro"?9999:s==="member"?3:1;return{id:t.userId,type:s,membershipType:s,scansToday:e,maxScans:n??r,name:`${t.firstName} ${t.lastName}`.trim(),email:t.email,profileImage:t.profileImageUrl,hasStation:t.isCreator,walletBalance:t.walletBalance,subscriptionStatus:t.membershipStatus.toLowerCase()==="active"?"active":"expired",questionnaireCompleted:t.questionnaireCompleted,skinProfile:t.skinProfile?{skinType:t.skinProfile.skinType,skinConcerns:t.skinProfile.skinConcerns,currentRoutine:t.skinProfile.currentRoutine,sunExposure:t.skinProfile.sunExposure,lifestyle:t.skinProfile.lifestyle}:void 0}}function XQ({children:t}){const[e,n]=T.useState(null),[s,r]=T.useState(null),[i,a]=T.useState(!0);T.useEffect(()=>{(async()=>{if(Ln.isAuthenticated())try{const{data:v,error:w}=await Ln.getCurrentUser();if(v){r(v);const N=await Ln.getDailyUsage(),k=N.data?.scanCount??0,C=N.data?.maxScans;n($h(v,k,C))}else Ln.clearTokens()}catch(v){console.error("Failed to restore session:",v),Ln.clearTokens()}a(!1)})();const y=()=>{n(null),r(null)};return window.addEventListener("auth:logout",y),()=>window.removeEventListener("auth:logout",y)},[]);const l=T.useCallback(async(x,y)=>{a(!0);try{const{data:v,error:w}=await Ln.login(x,y);if(w||!v)return a(!1),{success:!1,error:w||"Login failed"};const{data:N}=await Ln.getCurrentUser();if(N){r(N);const k=await Ln.getDailyUsage(),C=k.data?.scanCount??0,j=k.data?.maxScans;n($h(N,C,j))}else{const k=A$(v);r(k);const C=await Ln.getDailyUsage(),j=C.data?.scanCount??0,R=C.data?.maxScans;n($h(k,j,R))}return a(!1),{success:!0}}catch{return a(!1),{success:!1,error:"An unexpected error occurred"}}},[]),c=T.useCallback(async x=>{a(!0);try{const{data:y,error:v}=await Ln.register(x);if(v||!y)return a(!1),{success:!1,error:v||"Registration failed"};const w=A$(y);return r(w),n($h(w)),a(!1),{success:!0}}catch{return a(!1),{success:!1,error:"An unexpected error occurred"}}},[]),u=T.useCallback(async()=>{a(!0);try{const{data:x,error:y}=await Ln.guestLogin();if(y||!x)return a(!1),{success:!1,error:y||"Guest login failed"};const v=qQ(x);return r(v),n($h(v)),a(!1),{success:!0}}catch{return a(!1),{success:!1,error:"An unexpected error occurred"}}},[]),d=T.useCallback(async()=>{a(!0);try{await Ln.logout()}catch(x){console.error("Logout error:",x)}n(null),r(null),a(!1)},[]),h=T.useCallback(async()=>{if(Ln.isAuthenticated())try{const{data:x}=await Ln.getCurrentUser();x&&(r(x),n(y=>({...$h(x),scansToday:y?.scansToday||0,questionnaireCompleted:y?.questionnaireCompleted,skinProfile:y?.skinProfile,stationData:y?.stationData})))}catch(x){console.error("Failed to refresh user:",x)}},[]),p=T.useCallback(x=>{n(y=>y?{...y,...x}:null)},[]),g={user:e,apiUser:s,isLoading:i,isAuthenticated:!!e,login:l,register:c,guestLogin:u,logout:d,refreshUser:h,updateUser:p};return o.jsx(_6.Provider,{value:g,children:t})}function sS(){const t=T.useContext(_6);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function YQ(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const ZQ=t=>{switch(t){case"success":return eee;case"info":return nee;case"warning":return tee;case"error":return see;default:return null}},JQ=Array(12).fill(0),QQ=({visible:t,className:e})=>et.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},et.createElement("div",{className:"sonner-spinner"},JQ.map((n,s)=>et.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),eee=et.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},et.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tee=et.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},et.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),nee=et.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},et.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),see=et.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},et.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ree=et.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},et.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),et.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),iee=()=>{const[t,e]=et.useState(document.hidden);return et.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let qN=1;class aee{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:s,...r}=e,i=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:qN++,a=this.toasts.find(c=>c.id===i),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:s}),{...c,...e,id:i,dismissible:l,title:s}):c):this.addToast({title:s,...r,dismissible:l,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i=s!==void 0,a;const l=r.then(async u=>{if(a=["resolve",u],et.isValidElement(u))i=!1,this.create({id:s,type:"default",message:u});else if(lee(u)&&!u.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,x=typeof h=="object"&&!et.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:p,...x})}else if(u instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(u):n.error,p=typeof n.description=="function"?await n.description(u):n.description,x=typeof h=="object"&&!et.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:p,...x})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(u):n.success,p=typeof n.description=="function"?await n.description(u):n.description,x=typeof h=="object"&&!et.isValidElement(h)?h:{message:h};this.create({id:s,type:"success",description:p,...x})}}).catch(async u=>{if(a=["reject",u],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,g=typeof d=="object"&&!et.isValidElement(d)?d:{message:d};this.create({id:s,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),c=()=>new Promise((u,d)=>l.then(()=>a[0]==="reject"?d(a[1]):u(a[1])).catch(d));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(e,n)=>{const s=n?.id||qN++;return this.create({jsx:e(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Oi=new aee,oee=(t,e)=>{const n=e?.id||qN++;return Oi.addToast({title:t,...e,id:n}),n},lee=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",cee=oee,uee=()=>Oi.toasts,dee=()=>Oi.getActiveToasts(),He=Object.assign(cee,{success:Oi.success,info:Oi.info,warning:Oi.warning,error:Oi.error,custom:Oi.custom,message:Oi.message,promise:Oi.promise,dismiss:Oi.dismiss,loading:Oi.loading},{getHistory:uee,getToasts:dee});YQ("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function g1(t){return t.label!==void 0}const hee=3,fee="24px",pee="16px",R$=4e3,mee=356,gee=14,xee=45,yee=200;function Ro(...t){return t.filter(Boolean).join(" ")}function vee(t){const[e,n]=t.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}const bee=t=>{var e,n,s,r,i,a,l,c,u;const{invert:d,toast:h,unstyled:p,interacting:g,setHeights:x,visibleToasts:y,heights:v,index:w,toasts:N,expanded:k,removeToast:C,defaultRichColors:j,closeButton:R,style:_,cancelButtonStyle:A,actionButtonStyle:O,className:L="",descriptionClassName:D="",duration:q,position:V,gap:ne,expandByDefault:J,classNames:ee,icons:te,closeButtonAriaLabel:X="Close toast"}=t,[Q,G]=et.useState(null),[H,ie]=et.useState(null),[de,ke]=et.useState(!1),[we,Ee]=et.useState(!1),[Ce,Re]=et.useState(!1),[se,Te]=et.useState(!1),[Me,Ye]=et.useState(!1),[me,xe]=et.useState(0),[$e,Ze]=et.useState(0),bt=et.useRef(h.duration||q||R$),$t=et.useRef(null),at=et.useRef(null),nt=w===0,Xt=w+1<=y,dn=h.type,Zn=h.dismissible!==!1,Gn=h.className||"",Jn=h.descriptionClassName||"",$n=et.useMemo(()=>v.findIndex(dt=>dt.toastId===h.id)||0,[v,h.id]),ms=et.useMemo(()=>{var dt;return(dt=h.closeButton)!=null?dt:R},[h.closeButton,R]),In=et.useMemo(()=>h.duration||q||R$,[h.duration,q]),As=et.useRef(0),gs=et.useRef(0),Ne=et.useRef(0),ft=et.useRef(null),[on,Sn]=V.split("-"),An=et.useMemo(()=>v.reduce((dt,ns,ss)=>ss>=$n?dt:dt+ns.height,0),[v,$n]),Pn=iee(),Ss=h.invert||d,Rn=dn==="loading";gs.current=et.useMemo(()=>$n*ne+An,[$n,An]),et.useEffect(()=>{bt.current=In},[In]),et.useEffect(()=>{ke(!0)},[]),et.useEffect(()=>{const dt=at.current;if(dt){const ns=dt.getBoundingClientRect().height;return Ze(ns),x(ss=>[{toastId:h.id,height:ns,position:h.position},...ss]),()=>x(ss=>ss.filter(xs=>xs.toastId!==h.id))}},[x,h.id]),et.useLayoutEffect(()=>{if(!de)return;const dt=at.current,ns=dt.style.height;dt.style.height="auto";const ss=dt.getBoundingClientRect().height;dt.style.height=ns,Ze(ss),x(xs=>xs.find(_n=>_n.toastId===h.id)?xs.map(_n=>_n.toastId===h.id?{..._n,height:ss}:_n):[{toastId:h.id,height:ss,position:h.position},...xs])},[de,h.title,h.description,x,h.id,h.jsx,h.action,h.cancel]);const hn=et.useCallback(()=>{Ee(!0),xe(gs.current),x(dt=>dt.filter(ns=>ns.toastId!==h.id)),setTimeout(()=>{C(h)},yee)},[h,C,x,gs]);et.useEffect(()=>{if(h.promise&&dn==="loading"||h.duration===1/0||h.type==="loading")return;let dt;return k||g||Pn?(()=>{if(Ne.current<As.current){const xs=new Date().getTime()-As.current;bt.current=bt.current-xs}Ne.current=new Date().getTime()})():(()=>{bt.current!==1/0&&(As.current=new Date().getTime(),dt=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),hn()},bt.current))})(),()=>clearTimeout(dt)},[k,g,h,dn,Pn,hn]),et.useEffect(()=>{h.delete&&(hn(),h.onDismiss==null||h.onDismiss.call(h,h))},[hn,h.delete]);function qi(){var dt;if(te?.loading){var ns;return et.createElement("div",{className:Ro(ee?.loader,h==null||(ns=h.classNames)==null?void 0:ns.loader,"sonner-loader"),"data-visible":dn==="loading"},te.loading)}return et.createElement(QQ,{className:Ro(ee?.loader,h==null||(dt=h.classNames)==null?void 0:dt.loader),visible:dn==="loading"})}const Ci=h.icon||te?.[dn]||ZQ(dn);var Hs,ar;return et.createElement("li",{tabIndex:0,ref:at,className:Ro(L,Gn,ee?.toast,h==null||(e=h.classNames)==null?void 0:e.toast,ee?.default,ee?.[dn],h==null||(n=h.classNames)==null?void 0:n[dn]),"data-sonner-toast":"","data-rich-colors":(Hs=h.richColors)!=null?Hs:j,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":de,"data-promise":!!h.promise,"data-swiped":Me,"data-removed":we,"data-visible":Xt,"data-y-position":on,"data-x-position":Sn,"data-index":w,"data-front":nt,"data-swiping":Ce,"data-dismissible":Zn,"data-type":dn,"data-invert":Ss,"data-swipe-out":se,"data-swipe-direction":H,"data-expanded":!!(k||J&&de),"data-testid":h.testId,style:{"--index":w,"--toasts-before":w,"--z-index":N.length-w,"--offset":`${we?me:gs.current}px`,"--initial-height":J?"auto":`${$e}px`,..._,...h.style},onDragEnd:()=>{Re(!1),G(null),ft.current=null},onPointerDown:dt=>{dt.button!==2&&(Rn||!Zn||($t.current=new Date,xe(gs.current),dt.target.setPointerCapture(dt.pointerId),dt.target.tagName!=="BUTTON"&&(Re(!0),ft.current={x:dt.clientX,y:dt.clientY})))},onPointerUp:()=>{var dt,ns,ss;if(se||!Zn)return;ft.current=null;const xs=Number(((dt=at.current)==null?void 0:dt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Lr=Number(((ns=at.current)==null?void 0:ns.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),_n=new Date().getTime()-((ss=$t.current)==null?void 0:ss.getTime()),cs=Q==="x"?xs:Lr,Rs=Math.abs(cs)/_n;if(Math.abs(cs)>=xee||Rs>.11){xe(gs.current),h.onDismiss==null||h.onDismiss.call(h,h),ie(Q==="x"?xs>0?"right":"left":Lr>0?"down":"up"),hn(),Te(!0);return}else{var Hn,gr;(Hn=at.current)==null||Hn.style.setProperty("--swipe-amount-x","0px"),(gr=at.current)==null||gr.style.setProperty("--swipe-amount-y","0px")}Ye(!1),Re(!1),G(null)},onPointerMove:dt=>{var ns,ss,xs;if(!ft.current||!Zn||((ns=window.getSelection())==null?void 0:ns.toString().length)>0)return;const _n=dt.clientY-ft.current.y,cs=dt.clientX-ft.current.x;var Rs;const Hn=(Rs=t.swipeDirections)!=null?Rs:vee(V);!Q&&(Math.abs(cs)>1||Math.abs(_n)>1)&&G(Math.abs(cs)>Math.abs(_n)?"x":"y");let gr={x:0,y:0};const ca=On=>1/(1.5+Math.abs(On)/20);if(Q==="y"){if(Hn.includes("top")||Hn.includes("bottom"))if(Hn.includes("top")&&_n<0||Hn.includes("bottom")&&_n>0)gr.y=_n;else{const On=_n*ca(_n);gr.y=Math.abs(On)<Math.abs(_n)?On:_n}}else if(Q==="x"&&(Hn.includes("left")||Hn.includes("right")))if(Hn.includes("left")&&cs<0||Hn.includes("right")&&cs>0)gr.x=cs;else{const On=cs*ca(cs);gr.x=Math.abs(On)<Math.abs(cs)?On:cs}(Math.abs(gr.x)>0||Math.abs(gr.y)>0)&&Ye(!0),(ss=at.current)==null||ss.style.setProperty("--swipe-amount-x",`${gr.x}px`),(xs=at.current)==null||xs.style.setProperty("--swipe-amount-y",`${gr.y}px`)}},ms&&!h.jsx&&dn!=="loading"?et.createElement("button",{"aria-label":X,"data-disabled":Rn,"data-close-button":!0,onClick:Rn||!Zn?()=>{}:()=>{hn(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Ro(ee?.closeButton,h==null||(s=h.classNames)==null?void 0:s.closeButton)},(ar=te?.close)!=null?ar:ree):null,(dn||h.icon||h.promise)&&h.icon!==null&&(te?.[dn]!==null||h.icon)?et.createElement("div",{"data-icon":"",className:Ro(ee?.icon,h==null||(r=h.classNames)==null?void 0:r.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||qi():null,h.type!=="loading"?Ci:null):null,et.createElement("div",{"data-content":"",className:Ro(ee?.content,h==null||(i=h.classNames)==null?void 0:i.content)},et.createElement("div",{"data-title":"",className:Ro(ee?.title,h==null||(a=h.classNames)==null?void 0:a.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?et.createElement("div",{"data-description":"",className:Ro(D,Jn,ee?.description,h==null||(l=h.classNames)==null?void 0:l.description)},typeof h.description=="function"?h.description():h.description):null),et.isValidElement(h.cancel)?h.cancel:h.cancel&&g1(h.cancel)?et.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||A,onClick:dt=>{g1(h.cancel)&&Zn&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,dt),hn())},className:Ro(ee?.cancelButton,h==null||(c=h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,et.isValidElement(h.action)?h.action:h.action&&g1(h.action)?et.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||O,onClick:dt=>{g1(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,dt),!dt.defaultPrevented&&hn())},className:Ro(ee?.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function D$(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function wee(t,e){const n={};return[t,e].forEach((s,r)=>{const i=r===1,a=i?"--mobile-offset":"--offset",l=i?pee:fee;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${a}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(u=>{s[u]===void 0?n[`${a}-${u}`]=l:n[`${a}-${u}`]=typeof s[u]=="number"?`${s[u]}px`:s[u]}):c(l)}),n}const Nee=et.forwardRef(function(e,n){const{id:s,invert:r,position:i="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:c,className:u,offset:d,mobileOffset:h,theme:p="light",richColors:g,duration:x,style:y,visibleToasts:v=hee,toastOptions:w,dir:N=D$(),gap:k=gee,icons:C,containerAriaLabel:j="Notifications"}=e,[R,_]=et.useState([]),A=et.useMemo(()=>s?R.filter(de=>de.toasterId===s):R.filter(de=>!de.toasterId),[R,s]),O=et.useMemo(()=>Array.from(new Set([i].concat(A.filter(de=>de.position).map(de=>de.position)))),[A,i]),[L,D]=et.useState([]),[q,V]=et.useState(!1),[ne,J]=et.useState(!1),[ee,te]=et.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),X=et.useRef(null),Q=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),G=et.useRef(null),H=et.useRef(!1),ie=et.useCallback(de=>{_(ke=>{var we;return(we=ke.find(Ee=>Ee.id===de.id))!=null&&we.delete||Oi.dismiss(de.id),ke.filter(({id:Ee})=>Ee!==de.id)})},[]);return et.useEffect(()=>Oi.subscribe(de=>{if(de.dismiss){requestAnimationFrame(()=>{_(ke=>ke.map(we=>we.id===de.id?{...we,delete:!0}:we))});return}setTimeout(()=>{DD.flushSync(()=>{_(ke=>{const we=ke.findIndex(Ee=>Ee.id===de.id);return we!==-1?[...ke.slice(0,we),{...ke[we],...de},...ke.slice(we+1)]:[de,...ke]})})})}),[R]),et.useEffect(()=>{if(p!=="system"){te(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te("dark"):te("light")),typeof window>"u")return;const de=window.matchMedia("(prefers-color-scheme: dark)");try{de.addEventListener("change",({matches:ke})=>{te(ke?"dark":"light")})}catch{de.addListener(({matches:we})=>{try{te(we?"dark":"light")}catch(Ee){console.error(Ee)}})}},[p]),et.useEffect(()=>{R.length<=1&&V(!1)},[R]),et.useEffect(()=>{const de=ke=>{var we;if(a.every(Re=>ke[Re]||ke.code===Re)){var Ce;V(!0),(Ce=X.current)==null||Ce.focus()}ke.code==="Escape"&&(document.activeElement===X.current||(we=X.current)!=null&&we.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",de),()=>document.removeEventListener("keydown",de)},[a]),et.useEffect(()=>{if(X.current)return()=>{G.current&&(G.current.focus({preventScroll:!0}),G.current=null,H.current=!1)}},[X.current]),et.createElement("section",{ref:n,"aria-label":`${j} ${Q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((de,ke)=>{var we;const[Ee,Ce]=de.split("-");return A.length?et.createElement("ol",{key:de,dir:N==="auto"?D$():N,tabIndex:-1,ref:X,className:u,"data-sonner-toaster":!0,"data-sonner-theme":ee,"data-y-position":Ee,"data-x-position":Ce,style:{"--front-toast-height":`${((we=L[0])==null?void 0:we.height)||0}px`,"--width":`${mee}px`,"--gap":`${k}px`,...y,...wee(d,h)},onBlur:Re=>{H.current&&!Re.currentTarget.contains(Re.relatedTarget)&&(H.current=!1,G.current&&(G.current.focus({preventScroll:!0}),G.current=null))},onFocus:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||H.current||(H.current=!0,G.current=Re.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{ne||V(!1)},onDragEnd:()=>V(!1),onPointerDown:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||J(!0)},onPointerUp:()=>J(!1)},A.filter(Re=>!Re.position&&ke===0||Re.position===de).map((Re,se)=>{var Te,Me;return et.createElement(bee,{key:Re.id,icons:C,index:se,toast:Re,defaultRichColors:g,duration:(Te=w?.duration)!=null?Te:x,className:w?.className,descriptionClassName:w?.descriptionClassName,invert:r,visibleToasts:v,closeButton:(Me=w?.closeButton)!=null?Me:c,interacting:ne,position:de,style:w?.style,unstyled:w?.unstyled,classNames:w?.classNames,cancelButtonStyle:w?.cancelButtonStyle,actionButtonStyle:w?.actionButtonStyle,closeButtonAriaLabel:w?.closeButtonAriaLabel,removeToast:ie,toasts:A.filter(Ye=>Ye.position==Re.position),heights:L.filter(Ye=>Ye.position==Re.position),setHeights:D,expandByDefault:l,gap:k,expanded:q,swipeDirections:e.swipeDirections})})):null}))});var See=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kee=See.reduce((t,e)=>{const n=Dm(`Primitive.${e}`),s=T.forwardRef((r,i)=>{const{asChild:a,...l}=r,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{}),Cee="Separator",P$="horizontal",Tee=["horizontal","vertical"],O6=T.forwardRef((t,e)=>{const{decorative:n,orientation:s=P$,...r}=t,i=Iee(s)?s:P$,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(kee.div,{"data-orientation":i,...l,...r,ref:e})});O6.displayName=Cee;function Iee(t){return Tee.includes(t)}var jee=O6;function Bn({className:t,orientation:e="horizontal",decorative:n=!0,...s}){return o.jsx(jee,{"data-slot":"separator-root",decorative:n,orientation:e,className:Bt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...s})}const Eee=()=>o.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),$ee=()=>o.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),Aee=()=>o.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"#1877F2",children:o.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})});function Ree({onSuccess:t,onError:e,disabled:n}){const[s,r]=T.useState(null),i=async a=>{r(a);try{const l=`${a}user${Date.now()}@${a}.com`,c=`mock_${a}_token_${Date.now()}`,u=await Ln.socialLogin({provider:a,idToken:c,email:l,firstName:a.charAt(0).toUpperCase()+a.slice(1),lastName:"User"});if(u.error)throw new Error(u.error);u.data&&t({id:u.data.userId,email:u.data.email,name:`${u.data.firstName} ${u.data.lastName}`,type:u.data.membershipType.toLowerCase(),isNewUser:u.data.isNewUser,questionnaireCompleted:u.data.questionnaireCompleted})}catch(l){e(l.message||`${a} login failed`)}finally{r(null)}};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Bn,{className:"flex-1"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"or continue with"}),o.jsx(Bn,{className:"flex-1"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsx(be,{variant:"outline",onClick:()=>i("google"),disabled:n||s!==null,className:"h-12",children:s==="google"?o.jsx(Xh,{className:"w-5 h-5 animate-spin"}):o.jsx(Eee,{})}),o.jsx(be,{variant:"outline",onClick:()=>i("apple"),disabled:n||s!==null,className:"h-12",children:s==="apple"?o.jsx(Xh,{className:"w-5 h-5 animate-spin"}):o.jsx($ee,{})}),o.jsx(be,{variant:"outline",onClick:()=>i("facebook"),disabled:n||s!==null,className:"h-12",children:s==="facebook"?o.jsx(Xh,{className:"w-5 h-5 animate-spin"}):o.jsx(Aee,{})})]}),o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})}function Dee({onAuth:t,onCreateAccount:e}){const{t:n}=Ef(),{isRTL:s}=Rf(),{login:r,guestLogin:i,isLoading:a}=sS(),[l,c]=T.useState(""),[u,d]=T.useState(""),[h,p]=T.useState(""),[g,x]=T.useState(!1),[y,v]=T.useState(""),w=async()=>{x(!0),v("");const{success:R,error:_}=await i();R?t({id:"guest-"+Date.now(),type:"guest",scansToday:0,maxScans:1}):(v(_||"Failed to login as guest"),He.error(_||"Failed to login as guest")),x(!1)},N=async()=>{if(!l||!u){v("Please enter email and password"),He.error("Please enter email and password");return}x(!0),v("");const{success:R,error:_}=await r(l,u);R?t({id:"member-"+Date.now(),type:"member",scansToday:0,maxScans:5,name:h||"Member",email:l}):(v(_||"Login failed"),He.error(_||"Login failed")),x(!1)},k=g||a,C=R=>{He.success(`Welcome${R.isNewUser?"":" back"}, ${R.name}!`),t({id:R.id,type:R.type||"member",scansToday:0,maxScans:R.type==="pro"?999:R.type==="member"?3:1,name:R.name,email:R.email,questionnaireCompleted:R.questionnaireCompleted})},j=R=>{v(R),He.error(R)};return o.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",dir:s?"rtl":"ltr",children:o.jsxs("div",{className:"w-full max-w-md space-y-6",children:[o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx(P6,{})}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h1",{className:"text-5xl font-bold mb-4",style:{color:"#00b4d8"},children:n("auth.title")}),o.jsx("p",{className:"text-muted-foreground",children:n("auth.subtitle")})]}),o.jsxs(Sr,{defaultValue:"guest",className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-2 glass",children:[o.jsx(Jt,{value:"guest",children:n("auth.guest")}),o.jsx(Jt,{value:"member",children:n("auth.member")})]}),o.jsx(Qt,{value:"guest",className:"space-y-4",children:o.jsxs(ze,{className:"glass border-0",children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:`flex items-center gap-2 ${s?"flex-row-reverse":""}`,children:[o.jsx(gi,{className:"w-5 h-5"}),n("auth.quickStart")]}),o.jsx(as,{children:n("auth.trySkinPAI")})]}),o.jsxs(Ue,{className:"space-y-4",children:[o.jsxs("div",{className:"bg-secondary/20 rounded-lg p-4 space-y-2",children:[o.jsx("h4",{className:"font-medium",children:n("auth.guestFeatures")}),o.jsxs("ul",{className:`text-sm text-muted-foreground space-y-1 ${s?"text-right":""}`,children:[o.jsxs("li",{children:[" ",n("auth.guestFeature1")]}),o.jsxs("li",{children:[" ",n("auth.guestFeature2")]}),o.jsxs("li",{children:[" ",n("auth.guestFeature3")]}),o.jsxs("li",{children:[" ",n("auth.guestFeature4")]})]})]}),o.jsxs(be,{onClick:w,className:"w-full",disabled:k,children:[k?o.jsx(Xh,{className:"w-4 h-4 animate-spin mr-2"}):null,n("auth.continueAsGuest")]})]})]})}),o.jsx(Qt,{value:"member",className:"space-y-4",children:o.jsxs(ze,{className:"glass border-0",children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:`flex items-center gap-2 ${s?"flex-row-reverse":""}`,children:[o.jsx(so,{className:"w-5 h-5"}),n("auth.memberAccess")]}),o.jsx(as,{children:n("auth.signInForFeatures")})]}),o.jsxs(Ue,{className:"space-y-4",children:[o.jsxs("div",{className:"bg-primary/10 rounded-lg p-4 space-y-2",children:[o.jsx("h4",{className:"font-medium",children:n("auth.memberBenefits")}),o.jsxs("ul",{className:`text-sm text-muted-foreground space-y-1 ${s?"text-right":""}`,children:[o.jsxs("li",{children:[" ",n("auth.memberBenefit1")]}),o.jsxs("li",{children:[" ",n("auth.memberBenefit2")]}),o.jsxs("li",{children:[" ",n("auth.memberBenefit3")]}),o.jsxs("li",{children:[" ",n("auth.memberBenefit4")]}),o.jsxs("li",{children:[" ",n("auth.memberBenefit5")]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(sn,{type:"text",placeholder:n("auth.name"),value:h,onChange:R=>p(R.target.value),dir:s?"rtl":"ltr"}),o.jsx(sn,{type:"email",placeholder:n("auth.email"),value:l,onChange:R=>c(R.target.value),dir:"ltr"}),o.jsx(sn,{type:"password",placeholder:n("auth.password"),value:u,onChange:R=>d(R.target.value),dir:"ltr"})]}),o.jsxs("div",{className:"space-y-2",children:[y&&o.jsx("p",{className:"text-sm text-destructive text-center",children:y}),o.jsxs(be,{onClick:N,className:"w-full",disabled:k,children:[k?o.jsx(Xh,{className:"w-4 h-4 animate-spin mr-2"}):null,n("common.signIn")]}),o.jsx(be,{variant:"outline",className:"w-full",onClick:e,children:n("auth.createAccount")})]}),o.jsx(Ree,{onSuccess:C,onError:j,disabled:k})]})]})})]}),o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:n("auth.termsAgreement")})]})})}var Pee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_ee=Pee.reduce((t,e)=>{const n=Dm(`Primitive.${e}`),s=T.forwardRef((r,i)=>{const{asChild:a,...l}=r,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{}),Oee="Label",F6=T.forwardRef((t,e)=>o.jsx(_ee.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));F6.displayName=Oee;var Fee=F6;function _t({className:t,...e}){return o.jsx(Fee,{"data-slot":"label",className:Bt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function zm(t){const e=T.useRef({value:t,previous:t});return T.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var rS="Radio",[Mee,M6]=ei(rS),[Lee,Bee]=Mee(rS),L6=T.forwardRef((t,e)=>{const{__scopeRadio:n,name:s,checked:r=!1,required:i,disabled:a,value:l="on",onCheck:c,form:u,...d}=t,[h,p]=T.useState(null),g=qt(e,v=>p(v)),x=T.useRef(!1),y=h?u||!!h.closest("form"):!0;return o.jsxs(Lee,{scope:n,checked:r,disabled:a,children:[o.jsx(Dt.button,{type:"button",role:"radio","aria-checked":r,"data-state":U6(r),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:gt(t.onClick,v=>{r||c?.(),y&&(x.current=v.isPropagationStopped(),x.current||v.stopPropagation())})}),y&&o.jsx(V6,{control:h,bubbles:!x.current,name:s,value:l,checked:r,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});L6.displayName=rS;var B6="RadioIndicator",z6=T.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:s,...r}=t,i=Bee(B6,n);return o.jsx(ti,{present:s||i.checked,children:o.jsx(Dt.span,{"data-state":U6(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})})});z6.displayName=B6;var zee="RadioBubbleInput",V6=T.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:s=!0,...r},i)=>{const a=T.useRef(null),l=qt(a,i),c=zm(n),u=Mm(e);return T.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&g){const x=new Event("click",{bubbles:s});g.call(d,n),d.dispatchEvent(x)}},[c,n,s]),o.jsx(Dt.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:l,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});V6.displayName=zee;function U6(t){return t?"checked":"unchecked"}var Vee=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ay="RadioGroup",[Uee]=ei(Ay,[jf,M6]),W6=jf(),G6=M6(),[Wee,Gee]=Uee(Ay),H6=T.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:s,defaultValue:r,value:i,required:a=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...p}=t,g=W6(n),x=ou(u),[y,v]=ra({prop:i,defaultProp:r??null,onChange:h,caller:Ay});return o.jsx(Wee,{scope:n,name:s,required:a,disabled:l,value:y,onValueChange:v,children:o.jsx(R4,{asChild:!0,...g,orientation:c,dir:x,loop:d,children:o.jsx(Dt.div,{role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":l?"":void 0,dir:x,...p,ref:e})})})});H6.displayName=Ay;var K6="RadioGroupItem",q6=T.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:s,...r}=t,i=Gee(K6,n),a=i.disabled||s,l=W6(n),c=G6(n),u=T.useRef(null),d=qt(e,u),h=i.value===r.value,p=T.useRef(!1);return T.useEffect(()=>{const g=y=>{Vee.includes(y.key)&&(p.current=!0)},x=()=>p.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",x)}},[]),o.jsx(D4,{asChild:!0,...l,focusable:!a,active:h,children:o.jsx(L6,{disabled:a,required:i.required,checked:h,...c,...r,name:i.name,ref:d,onCheck:()=>i.onValueChange(r.value),onKeyDown:gt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:gt(r.onFocus,()=>{p.current&&u.current?.click()})})})});q6.displayName=K6;var Hee="RadioGroupIndicator",X6=T.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...s}=t,r=G6(n);return o.jsx(z6,{...r,...s,ref:e})});X6.displayName=Hee;var Kee=H6,qee=q6,Xee=X6;function iS({className:t,...e}){return o.jsx(Kee,{"data-slot":"radio-group",className:Bt("grid gap-3",t),...e})}function dd({className:t,...e}){return o.jsx(qee,{"data-slot":"radio-group-item",className:Bt("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:o.jsx(Xee,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:o.jsx(M1,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var Ry="Checkbox",[Yee]=ei(Ry),[Zee,aS]=Yee(Ry);function Jee(t){const{__scopeCheckbox:e,checked:n,children:s,defaultChecked:r,disabled:i,form:a,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=t,[p,g]=ra({prop:n,defaultProp:r??!1,onChange:c,caller:Ry}),[x,y]=T.useState(null),[v,w]=T.useState(null),N=T.useRef(!1),k=x?!!a||!!x.closest("form"):!0,C={checked:p,disabled:i,setChecked:g,control:x,setControl:y,name:l,form:a,value:d,hasConsumerStoppedPropagationRef:N,required:u,defaultChecked:Pc(r)?!1:r,isFormControl:k,bubbleInput:v,setBubbleInput:w};return o.jsx(Zee,{scope:e,...C,children:Qee(h)?h(C):s})}var Y6="CheckboxTrigger",Z6=T.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...s},r)=>{const{control:i,value:a,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:g,bubbleInput:x}=aS(Y6,t),y=qt(r,d),v=T.useRef(c);return T.useEffect(()=>{const w=i?.form;if(w){const N=()=>h(v.current);return w.addEventListener("reset",N),()=>w.removeEventListener("reset",N)}},[i,h]),o.jsx(Dt.button,{type:"button",role:"checkbox","aria-checked":Pc(c)?"mixed":c,"aria-required":u,"data-state":s_(c),"data-disabled":l?"":void 0,disabled:l,value:a,...s,ref:y,onKeyDown:gt(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:gt(n,w=>{h(N=>Pc(N)?!0:!N),x&&g&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})})});Z6.displayName=Y6;var J6=T.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:s,checked:r,defaultChecked:i,required:a,disabled:l,value:c,onCheckedChange:u,form:d,...h}=t;return o.jsx(Jee,{__scopeCheckbox:n,checked:r,defaultChecked:i,disabled:l,required:a,onCheckedChange:u,name:s,form:d,value:c,internal_do_not_use_render:({isFormControl:p})=>o.jsxs(o.Fragment,{children:[o.jsx(Z6,{...h,ref:e,__scopeCheckbox:n}),p&&o.jsx(n_,{__scopeCheckbox:n})]})})});J6.displayName=Ry;var Q6="CheckboxIndicator",e_=T.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:s,...r}=t,i=aS(Q6,n);return o.jsx(ti,{present:s||Pc(i.checked)||i.checked===!0,children:o.jsx(Dt.span,{"data-state":s_(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...t.style}})})});e_.displayName=Q6;var t_="CheckboxBubbleInput",n_=T.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:s,hasConsumerStoppedPropagationRef:r,checked:i,defaultChecked:a,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:p,setBubbleInput:g}=aS(t_,t),x=qt(n,g),y=zm(i),v=Mm(s);T.useEffect(()=>{const N=p;if(!N)return;const k=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(k,"checked").set,R=!r.current;if(y!==i&&j){const _=new Event("click",{bubbles:R});N.indeterminate=Pc(i),j.call(N,Pc(i)?!1:i),N.dispatchEvent(_)}},[p,y,i,r]);const w=T.useRef(Pc(i)?!1:i);return o.jsx(Dt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??w.current,required:l,disabled:c,name:u,value:d,form:h,...e,tabIndex:-1,ref:x,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});n_.displayName=t_;function Qee(t){return typeof t=="function"}function Pc(t){return t==="indeterminate"}function s_(t){return Pc(t)?"indeterminate":t?"checked":"unchecked"}function Hr({className:t,...e}){return o.jsx(J6,{"data-slot":"checkbox",className:Bt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:o.jsx(e_,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:o.jsx(an,{className:"size-3.5"})})})}const ete=E4("inline-flex items-center justify-center rounded-full border-0 px-2.5 py-1 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90 shadow-sm",secondary:"glass-subtle text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 shadow-sm",outline:"glass-subtle border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function it({className:t,variant:e,asChild:n=!1,...s}){const r=n?gD:"span";return o.jsx(r,{"data-slot":"badge",className:Bt(ete({variant:e}),t),...s})}function tte({onAccountCreated:t,onBack:e}){const{register:n}=sS(),[s,r]=T.useState("info"),[i,a]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1),[h,p]=T.useState(null),[g,x]=T.useState(""),[y,v]=T.useState(""),[w,N]=T.useState(""),[k,C]=T.useState(""),[j,R]=T.useState(""),[_,A]=T.useState(""),[O,L]=T.useState(""),[D,q]=T.useState(!1),[V,ne]=T.useState("guest"),[J,ee]=T.useState("monthly"),[te,X]=T.useState("card"),[Q,G]=T.useState(""),[H,ie]=T.useState(""),[de,ke]=T.useState(""),[we,Ee]=T.useState(""),[Ce,Re]=T.useState(!1),se={guest:{monthly:0,yearly:0},member:{monthly:9.99,yearly:79.99,yearlyMonthly:6.67},pro:{monthly:29.99,yearly:239.99,yearlyMonthly:19.99}},Te=[{icon:Zr,text:"5 scans",included:!0},{icon:ho,text:"Progress tracking",included:!0},{icon:lf,text:"Routine reminders",included:!0},{icon:Ml,text:"Achievements",included:!0},{icon:Yn,text:"Personalized tips",included:!0},{icon:Sa,text:"Data backup",included:!0},{icon:im,text:"Creator Station",included:!1},{icon:Vc,text:"Analytics Dashboard",included:!1}],Me=[{icon:c0,text:"Unlimited scans",included:!0,highlight:!0},{icon:im,text:"Create Creator Station",included:!0,highlight:!0},{icon:Vc,text:"Advanced Analytics Dashboard",included:!0,highlight:!0},{icon:so,text:"Audience insights",included:!0,highlight:!0},{icon:nm,text:"Monetization tools",included:!0},{icon:ln,text:"Priority support",included:!0},{icon:gi,text:"Early feature access",included:!0},{icon:Ll,text:"Custom branding",included:!0},{icon:bs,text:"Verified badge",included:!0},{icon:Sa,text:"Advanced data export",included:!0}],Ye=nt=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(nt),me=nt=>nt.length>=8,xe=()=>{if(!g||!y){He.error("Please enter your full name");return}if(!w||!Ye(w)){He.error("Please enter a valid email address");return}if(!k||!me(k)){He.error("Password must be at least 8 characters");return}if(k!==j){He.error("Passwords do not match");return}if(!D){He.error("Please agree to the Terms of Service and Privacy Policy");return}r("membership")},$e=async()=>{V==="guest"?await Ze():r("payment")},Ze=async()=>{d(!0),p(null);try{const nt=await n({email:w,password:k,firstName:g,lastName:y,dateOfBirth:_||void 0,phoneNumber:O||void 0});He.success(" Account created successfully!",{description:`Welcome to SkinPAI, ${g}!`}),t(nt)}catch(nt){const Xt=nt.message||"Failed to create account";p(Xt),He.error(Xt)}finally{d(!1)}},bt=async()=>{if(te==="card"&&(!Q||!H||!de||!we)){He.error("Please fill in all payment details");return}const nt=J==="yearly"?se[V].yearly:se[V].monthly;He.success(` Payment of $${nt} processed successfully!`),Re(!1),await Ze()},$t=()=>V==="guest"?0:J==="yearly"?se[V].yearly:se[V].monthly,at=()=>{if(J==="yearly"&&V!=="guest"){const nt=se[V].yearly;return se[V].monthly*12-nt}return 0};return o.jsxs("div",{className:"min-h-screen bg-background p-4",children:[o.jsxs("div",{className:"max-w-4xl mx-auto mb-6",children:[o.jsxs(be,{variant:"ghost",onClick:s==="info"?e:()=>r(s==="payment"?"membership":"info"),className:"mb-4",children:[o.jsx(ad,{className:"w-4 h-4 mr-2"}),"Back"]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium bg-[#00B4D8] text-white",children:s==="info"?"1":o.jsx(an,{className:"w-4 h-4"})}),o.jsx("div",{className:`w-16 h-0.5 ${s==="membership"||s==="payment"?"bg-[#00B4D8]":"bg-muted"}`}),o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${s==="membership"||s==="payment"?"bg-[#00B4D8] text-white":"bg-muted text-muted-foreground"}`,children:s==="payment"?o.jsx(an,{className:"w-4 h-4"}):"2"}),o.jsx("div",{className:`w-16 h-0.5 ${s==="payment"?"bg-[#00B4D8]":"bg-muted"}`}),o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${s==="payment"?"bg-[#00B4D8] text-white":"bg-muted text-muted-foreground"}`,children:"3"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",style:{color:"#00b4d8"},children:"SkinPAI"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Create Your Account"}),o.jsxs("p",{className:"text-muted-foreground",children:[s==="info"&&"Tell us about yourself",s==="membership"&&"Choose your membership plan",s==="payment"&&"Complete your payment"]})]})]}),s==="info"&&o.jsxs(ze,{className:"max-w-2xl mx-auto",children:[o.jsxs(Ot,{children:[o.jsx(Ft,{children:"Personal Information"}),o.jsx(as,{children:"Create your SkinPAI account to get started"})]}),o.jsxs(Ue,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"firstName",children:"First Name *"}),o.jsxs("div",{className:"relative",children:[o.jsx(hf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(sn,{id:"firstName",placeholder:"John",value:g,onChange:nt=>x(nt.target.value),className:"pl-10"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"lastName",children:"Last Name *"}),o.jsxs("div",{className:"relative",children:[o.jsx(hf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(sn,{id:"lastName",placeholder:"Doe",value:y,onChange:nt=>v(nt.target.value),className:"pl-10"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"email",children:"Email Address *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Gc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(sn,{id:"email",type:"email",placeholder:"john.doe@example.com",value:w,onChange:nt=>N(nt.target.value),className:"pl-10"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"dateOfBirth",children:"Date of Birth (Optional)"}),o.jsxs("div",{className:"relative",children:[o.jsx(ho,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(sn,{id:"dateOfBirth",type:"date",value:_,onChange:nt=>A(nt.target.value),className:"pl-10"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"phoneNumber",children:"Phone Number (Optional)"}),o.jsxs("div",{className:"relative",children:[o.jsx(_4,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(sn,{id:"phoneNumber",type:"tel",placeholder:"+1 (555) 000-0000",value:O,onChange:nt=>L(nt.target.value),className:"pl-10"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"password",children:"Password *"}),o.jsxs("div",{className:"relative",children:[o.jsx(cf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(sn,{id:"password",type:i?"text":"password",placeholder:"Minimum 8 characters",value:k,onChange:nt=>C(nt.target.value),className:"pl-10 pr-10"}),o.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 -translate-y-1/2",children:i?o.jsx(UE,{className:"w-4 h-4 text-muted-foreground"}):o.jsx(Ea,{className:"w-4 h-4 text-muted-foreground"})})]}),k&&o.jsx("div",{className:"text-xs space-y-1",children:o.jsxs("div",{className:`flex items-center gap-2 ${k.length>=8?"text-green-600":"text-muted-foreground"}`,children:[k.length>=8?o.jsx(an,{className:"w-3 h-3"}):o.jsx(Us,{className:"w-3 h-3"}),"At least 8 characters"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"confirmPassword",children:"Confirm Password *"}),o.jsxs("div",{className:"relative",children:[o.jsx(cf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(sn,{id:"confirmPassword",type:l?"text":"password",placeholder:"Re-enter your password",value:j,onChange:nt=>R(nt.target.value),className:"pl-10 pr-10"}),o.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2",children:l?o.jsx(UE,{className:"w-4 h-4 text-muted-foreground"}):o.jsx(Ea,{className:"w-4 h-4 text-muted-foreground"})})]}),j&&o.jsxs("div",{className:`text-xs flex items-center gap-2 ${k===j?"text-green-600":"text-red-600"}`,children:[k===j?o.jsx(an,{className:"w-3 h-3"}):o.jsx(Us,{className:"w-3 h-3"}),k===j?"Passwords match":"Passwords do not match"]})]}),o.jsxs("div",{className:"flex items-start space-x-2 pt-4",children:[o.jsx(Hr,{id:"terms",checked:D,onCheckedChange:nt=>q(nt)}),o.jsxs(_t,{htmlFor:"terms",className:"text-sm leading-relaxed cursor-pointer",children:["I agree to the"," ",o.jsx("span",{className:"text-[#00B4D8] hover:underline cursor-pointer",children:"Terms of Service"})," ","and"," ",o.jsx("span",{className:"text-[#00B4D8] hover:underline cursor-pointer",children:"Privacy Policy"})]})]}),o.jsx(be,{onClick:xe,className:"w-full h-12 bg-gradient-to-r from-[#00B4D8] to-[#006D77] hover:from-[#00B4D8]/90 hover:to-[#006D77]/90",children:"Continue to Membership Selection"})]})]}),s==="membership"&&o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsx(Ft,{className:"text-center",children:"Choose Your Plan"}),o.jsx(as,{className:"text-center",children:"Select the plan that best fits your skincare journey"})]}),o.jsx(Ue,{children:o.jsxs(Sr,{value:V,onValueChange:nt=>ne(nt),className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-3 h-auto p-1 bg-muted",children:[o.jsxs(Jt,{value:"guest",className:"flex flex-col items-center gap-1 py-3",children:[o.jsx(gi,{className:"w-5 h-5"}),o.jsx("span",{className:"font-semibold",children:"Guest"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Free"})]}),o.jsxs(Jt,{value:"member",className:"flex flex-col items-center gap-1 py-3",children:[o.jsx(hs,{className:"w-5 h-5"}),o.jsx("span",{className:"font-semibold",children:"Member"}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["$",J==="monthly"?se.member.monthly:se.member.yearlyMonthly,"/mo"]})]}),o.jsxs(Jt,{value:"pro",className:"flex flex-col items-center gap-1 py-3 relative",children:[o.jsx(it,{className:"absolute -top-1 -right-1 bg-[#FF6B35] text-[10px] px-1.5 py-0.5",children:"HOT"}),o.jsx(hs,{className:"w-5 h-5"}),o.jsx("span",{className:"font-semibold",children:"Pro"}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["$",J==="monthly"?se.pro.monthly:se.pro.yearlyMonthly,"/mo"]})]})]}),o.jsxs(Qt,{value:"guest",className:"space-y-4 mt-6",children:[o.jsxs("div",{className:"text-center space-y-2 mb-6",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-[#C0D6DF] to-[#006D77] mb-2",children:o.jsx(gi,{className:"w-8 h-8 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold",children:"Guest Plan"}),o.jsx("p",{className:"text-muted-foreground",children:"Try it out for free"}),o.jsx("div",{className:"text-4xl font-bold text-[#006D77] mt-4",children:"$0"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Forever free"})]}),o.jsxs("div",{className:"space-y-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[o.jsx(an,{className:"w-5 h-5 text-[#00B4D8] flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"1 scan per day"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Basic skin analysis"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[o.jsx(an,{className:"w-5 h-5 text-[#00B4D8] flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"AI analysis"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get instant skin insights"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[o.jsx(an,{className:"w-5 h-5 text-[#00B4D8] flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Product recommendations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Discover products for your skin"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[o.jsx(an,{className:"w-5 h-5 text-[#00B4D8] flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Community access"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Join the SkinPAI community"})]})]})]})]}),o.jsxs(Qt,{value:"member",className:"space-y-4 mt-6",children:[o.jsxs("div",{className:"text-center space-y-2 mb-6",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-[#006D77] to-[#003D5C] mb-2",children:o.jsx(hs,{className:"w-8 h-8 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold",children:"Member Plan"}),o.jsx("p",{className:"text-muted-foreground",children:"Essential features for dedicated users"}),o.jsxs("div",{className:"text-4xl font-bold text-[#006D77] mt-4",children:["$",J==="monthly"?se.member.monthly:se.member.yearlyMonthly]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:J==="monthly"?"per month":"per month, billed yearly"})]}),o.jsx("div",{className:"space-y-3 max-w-md mx-auto",children:Te.slice(0,6).map((nt,Xt)=>o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[o.jsx(an,{className:"w-5 h-5 text-[#00B4D8] flex-shrink-0 mt-0.5"}),o.jsx("div",{children:o.jsx("p",{className:"font-medium",children:nt.text})})]},Xt))})]}),o.jsxs(Qt,{value:"pro",className:"space-y-4 mt-6",children:[o.jsxs("div",{className:"text-center space-y-2 mb-6",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-[#FF6B35] to-[#FF8C5A] mb-2",children:o.jsx(hs,{className:"w-8 h-8 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-[#FF6B35] to-[#FF8C5A] bg-clip-text text-transparent",children:"Pro Plan"}),o.jsx("p",{className:"text-muted-foreground",children:"For creators and power users"}),o.jsxs("div",{className:"text-4xl font-bold bg-gradient-to-r from-[#FF6B35] to-[#FF8C5A] bg-clip-text text-transparent mt-4",children:["$",J==="monthly"?se.pro.monthly:se.pro.yearlyMonthly]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:J==="monthly"?"per month":"per month, billed yearly"})]}),o.jsx("div",{className:"space-y-3 max-w-md mx-auto",children:Me.slice(0,8).map((nt,Xt)=>o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[o.jsx(an,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${nt.highlight?"text-[#FF6B35]":"text-[#00B4D8]"}`}),o.jsx("div",{children:o.jsx("p",{className:`font-medium ${nt.highlight?"text-[#FF6B35]":""}`,children:nt.text})})]},Xt))})]})]})})]}),V!=="guest"&&o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsx(Ft,{className:"text-center",children:"Billing Period"})}),o.jsx(Ue,{children:o.jsx(iS,{value:J,onValueChange:nt=>ee(nt),children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${J==="monthly"?"border-[#00B4D8] bg-[#00B4D8]/5":"border-muted"}`,onClick:()=>ee("monthly"),children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[o.jsx(dd,{value:"monthly",id:"monthly"}),o.jsx(_t,{htmlFor:"monthly",className:"cursor-pointer font-medium",children:"Monthly"})]}),o.jsxs("div",{className:"ml-7",children:[o.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Pay month by month"}),o.jsxs("div",{className:"font-bold text-lg",children:["$",se[V].monthly,"/mo"]})]})]}),o.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all relative ${J==="yearly"?"border-[#00B4D8] bg-[#00B4D8]/5":"border-muted"}`,onClick:()=>ee("yearly"),children:[o.jsxs(it,{className:"absolute -top-2 -right-2 bg-[#FF6B35]",children:["Save ",Math.round(at()/(se[V].monthly*12)*100),"%"]}),o.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[o.jsx(dd,{value:"yearly",id:"yearly"}),o.jsx(_t,{htmlFor:"yearly",className:"cursor-pointer font-medium",children:"Yearly"})]}),o.jsxs("div",{className:"ml-7",children:[o.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["$",se[V].yearlyMonthly,"/month billed annually"]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsxs("div",{className:"font-bold text-lg",children:["$",se[V].yearly,"/yr"]}),o.jsxs("div",{className:"text-xs text-muted-foreground line-through",children:["$",se[V].monthly*12]})]})]})]})]})})})]}),o.jsx(ze,{className:"bg-gradient-to-r from-[#00B4D8]/10 to-[#006D77]/10 border-[#00B4D8]/30",children:o.jsxs(Ue,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-lg",children:[V==="pro"?"Pro":V==="member"?"Member":"Guest",V!=="guest"&&` - ${J==="monthly"?"Monthly":"Yearly"}`]}),J==="yearly"&&V!=="guest"&&o.jsxs("p",{className:"text-sm text-green-600 font-medium",children:[" Save $",at().toFixed(2)," per year!"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-3xl font-bold text-[#006D77]",children:["$",$t()]}),V!=="guest"&&o.jsx("div",{className:"text-xs text-muted-foreground",children:J==="yearly"?"billed annually":"billed monthly"})]})]}),o.jsx(Bn,{className:"my-4"}),o.jsx(be,{onClick:$e,className:"w-full h-12 text-lg bg-gradient-to-r from-[#00B4D8] to-[#006D77] hover:from-[#00B4D8]/90 hover:to-[#006D77]/90",children:V==="guest"?"Create Free Account":"Continue to Payment"})]})})]}),s==="payment"&&o.jsxs(ze,{className:"max-w-2xl mx-auto",children:[o.jsxs(Ot,{children:[o.jsx(Ft,{children:"Complete Your Payment"}),o.jsxs(as,{children:["Secure payment for your ",V==="pro"?"Pro":"Member"," subscription"]})]}),o.jsxs(Ue,{className:"space-y-6",children:[o.jsxs(Sr,{defaultValue:"card",value:te,onValueChange:nt=>X(nt),children:[o.jsxs(kr,{className:"grid w-full grid-cols-2",children:[o.jsxs(Jt,{value:"card",children:[o.jsx(tm,{className:"w-4 h-4 mr-2"}),"Card"]}),o.jsxs(Jt,{value:"wallet",children:[o.jsx(gy,{className:"w-4 h-4 mr-2"}),"Wallet"]})]}),o.jsxs(Qt,{value:"card",className:"space-y-4 mt-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"cardNumber",children:"Card Number"}),o.jsx(sn,{id:"cardNumber",placeholder:"1234 5678 9012 3456",value:Q,onChange:nt=>G(nt.target.value),maxLength:19})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"cardHolder",children:"Card Holder Name"}),o.jsx(sn,{id:"cardHolder",placeholder:"John Doe",value:H,onChange:nt=>ie(nt.target.value)})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"expiry",children:"Expiry Date"}),o.jsx(sn,{id:"expiry",placeholder:"MM/YY",value:de,onChange:nt=>ke(nt.target.value),maxLength:5})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"cvv",children:"CVV"}),o.jsx(sn,{id:"cvv",type:"password",placeholder:"123",value:we,onChange:nt=>Ee(nt.target.value),maxLength:4})]})]}),o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg text-sm",children:[o.jsx(Sa,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-muted-foreground",children:"Your payment is secure and encrypted"})]})]}),o.jsx(Qt,{value:"wallet",className:"space-y-4 mt-6",children:o.jsxs("div",{className:"p-4 bg-gradient-to-r from-[#00B4D8]/10 to-[#006D77]/10 rounded-lg border border-[#00B4D8]/20 text-center",children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Wallet payment coming soon!"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Please use card payment for now."})]})})]}),o.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),o.jsxs("span",{className:"font-medium",children:["$",$t()]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Tax"}),o.jsx("span",{className:"font-medium",children:"$0.00"})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-semibold",children:"Total"}),o.jsxs("span",{className:"text-2xl font-bold text-[#006D77]",children:["$",$t()]})]})]}),o.jsxs(be,{onClick:bt,className:"w-full h-12 bg-gradient-to-r from-[#00B4D8] to-[#006D77] hover:from-[#00B4D8]/90 hover:to-[#006D77]/90",children:[o.jsx(Sa,{className:"w-4 h-4 mr-2"}),"Complete Payment $",$t()]})]})]})]})}const nte=E4("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function x1({className:t,variant:e,...n}){return o.jsx("div",{"data-slot":"alert",role:"alert",className:Bt(nte({variant:e}),t),...n})}function y1({className:t,...e}){return o.jsx("div",{"data-slot":"alert-description",className:Bt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}const oS=T.createContext({});function lS(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const r_=typeof window<"u",i_=r_?T.useLayoutEffect:T.useEffect,Dy=T.createContext(null);function cS(t,e){t.indexOf(e)===-1&&t.push(e)}function w0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const tl=(t,e,n)=>n>e?e:n<t?t:n;let uS=()=>{};const Vl={},a_=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function o_(t){return typeof t=="object"&&t!==null}const l_=t=>/^0[^.\s]+$/u.test(t);function c_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Aa=t=>t,ste=(t,e)=>n=>e(t(n)),Vm=(...t)=>t.reduce(ste),hm=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class dS{constructor(){this.subscriptions=[]}add(e){return cS(this.subscriptions,e),()=>w0(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let i=0;i<r;i++){const a=this.subscriptions[i];a&&a(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ro=t=>t*1e3,ka=t=>t/1e3;function u_(t,e){return e?t*(1e3/e):0}const d_=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,rte=1e-7,ite=12;function ate(t,e,n,s,r){let i,a,l=0;do a=e+(n-e)/2,i=d_(a,s,r)-t,i>0?n=a:e=a;while(Math.abs(i)>rte&&++l<ite);return a}function Um(t,e,n,s){if(t===e&&n===s)return Aa;const r=i=>ate(i,0,1,t,n);return i=>i===0||i===1?i:d_(r(i),e,s)}const h_=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,f_=t=>e=>1-t(1-e),p_=Um(.33,1.53,.69,.99),hS=f_(p_),m_=h_(hS),g_=t=>(t*=2)<1?.5*hS(t):.5*(2-Math.pow(2,-10*(t-1))),fS=t=>1-Math.sin(Math.acos(t)),x_=f_(fS),y_=h_(fS),ote=Um(.42,0,1,1),lte=Um(0,0,.58,1),v_=Um(.42,0,.58,1),cte=t=>Array.isArray(t)&&typeof t[0]!="number",b_=t=>Array.isArray(t)&&typeof t[0]=="number",ute={linear:Aa,easeIn:ote,easeInOut:v_,easeOut:lte,circIn:fS,circInOut:y_,circOut:x_,backIn:hS,backInOut:m_,backOut:p_,anticipate:g_},dte=t=>typeof t=="string",_$=t=>{if(b_(t)){uS(t.length===4);const[e,n,s,r]=t;return Um(e,n,s,r)}else if(dte(t))return ute[t];return t},v1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function hte(t,e){let n=new Set,s=new Set,r=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){a.has(d)&&(u.schedule(d),t()),d(l)}const u={schedule:(d,h=!1,p=!1)=>{const x=p&&r?n:s;return h&&a.add(d),x.has(d)||x.add(d),d},cancel:d=>{s.delete(d),a.delete(d)},process:d=>{if(l=d,r){i=!0;return}r=!0,[n,s]=[s,n],n.forEach(c),n.clear(),r=!1,i&&(i=!1,u.process(d))}};return u}const fte=40;function w_(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=v1.reduce((k,C)=>(k[C]=hte(i),k),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:p,render:g,postRender:x}=a,y=()=>{const k=Vl.useManualTiming?r.timestamp:performance.now();n=!1,Vl.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(k-r.timestamp,fte),1)),r.timestamp=k,r.isProcessing=!0,l.process(r),c.process(r),u.process(r),d.process(r),h.process(r),p.process(r),g.process(r),x.process(r),r.isProcessing=!1,n&&e&&(s=!1,t(y))},v=()=>{n=!0,s=!0,r.isProcessing||t(y)};return{schedule:v1.reduce((k,C)=>{const j=a[C];return k[C]=(R,_=!1,A=!1)=>(n||v(),j.schedule(R,_,A)),k},{}),cancel:k=>{for(let C=0;C<v1.length;C++)a[v1[C]].cancel(k)},state:r,steps:a}}const{schedule:os,cancel:qc,state:Dr,steps:$w}=w_(typeof requestAnimationFrame<"u"?requestAnimationFrame:Aa,!0);let V1;function pte(){V1=void 0}const fi={now:()=>(V1===void 0&&fi.set(Dr.isProcessing||Vl.useManualTiming?Dr.timestamp:performance.now()),V1),set:t=>{V1=t,queueMicrotask(pte)}},N_=t=>e=>typeof e=="string"&&e.startsWith(t),S_=N_("--"),mte=N_("var(--"),pS=t=>mte(t)?gte.test(t.split("/*")[0].trim()):!1,gte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function O$(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Df={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},fm={...Df,transform:t=>tl(0,1,t)},b1={...Df,default:1},Xp=t=>Math.round(t*1e5)/1e5,mS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xte(t){return t==null}const yte=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gS=(t,e)=>n=>!!(typeof n=="string"&&yte.test(n)&&n.startsWith(t)||e&&!xte(n)&&Object.prototype.hasOwnProperty.call(n,e)),k_=(t,e,n)=>s=>{if(typeof s!="string")return s;const[r,i,a,l]=s.match(mS);return{[t]:parseFloat(r),[e]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},vte=t=>tl(0,255,t),Aw={...Df,transform:t=>Math.round(vte(t))},nd={test:gS("rgb","red"),parse:k_("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Aw.transform(t)+", "+Aw.transform(e)+", "+Aw.transform(n)+", "+Xp(fm.transform(s))+")"};function bte(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const XN={test:gS("#"),parse:bte,transform:nd.transform},Wm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),jc=Wm("deg"),Ko=Wm("%"),jt=Wm("px"),wte=Wm("vh"),Nte=Wm("vw"),F$={...Ko,parse:t=>Ko.parse(t)/100,transform:t=>Ko.transform(t*100)},Vh={test:gS("hsl","hue"),parse:k_("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Ko.transform(Xp(e))+", "+Ko.transform(Xp(n))+", "+Xp(fm.transform(s))+")"},Xs={test:t=>nd.test(t)||XN.test(t)||Vh.test(t),parse:t=>nd.test(t)?nd.parse(t):Vh.test(t)?Vh.parse(t):XN.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?nd.transform(t):Vh.transform(t),getAnimatableNone:t=>{const e=Xs.parse(t);return e.alpha=0,Xs.transform(e)}},Ste=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kte(t){return isNaN(t)&&typeof t=="string"&&(t.match(mS)?.length||0)+(t.match(Ste)?.length||0)>0}const C_="number",T_="color",Cte="var",Tte="var(",M$="${}",Ite=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pm(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const l=e.replace(Ite,c=>(Xs.test(c)?(s.color.push(i),r.push(T_),n.push(Xs.parse(c))):c.startsWith(Tte)?(s.var.push(i),r.push(Cte),n.push(c)):(s.number.push(i),r.push(C_),n.push(parseFloat(c))),++i,M$)).split(M$);return{values:n,split:l,indexes:s,types:r}}function I_(t){return pm(t).values}function j_(t){const{split:e,types:n}=pm(t),s=e.length;return r=>{let i="";for(let a=0;a<s;a++)if(i+=e[a],r[a]!==void 0){const l=n[a];l===C_?i+=Xp(r[a]):l===T_?i+=Xs.transform(r[a]):i+=r[a]}return i}}const jte=t=>typeof t=="number"?0:Xs.test(t)?Xs.getAnimatableNone(t):t;function Ete(t){const e=I_(t);return j_(t)(e.map(jte))}const io={test:kte,parse:I_,createTransformer:j_,getAnimatableNone:Ete};function Rw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $te({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,i=0,a=0;if(!e)r=i=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;r=Rw(c,l,t+1/3),i=Rw(c,l,t),a=Rw(c,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}function N0(t,e){return n=>n>0?e:t}const Is=(t,e,n)=>t+(e-t)*n,Dw=(t,e,n)=>{const s=t*t,r=n*(e*e-s)+s;return r<0?0:Math.sqrt(r)},Ate=[XN,nd,Vh],Rte=t=>Ate.find(e=>e.test(t));function L$(t){const e=Rte(t);if(!e)return!1;let n=e.parse(t);return e===Vh&&(n=$te(n)),n}const B$=(t,e)=>{const n=L$(t),s=L$(e);if(!n||!s)return N0(t,e);const r={...n};return i=>(r.red=Dw(n.red,s.red,i),r.green=Dw(n.green,s.green,i),r.blue=Dw(n.blue,s.blue,i),r.alpha=Is(n.alpha,s.alpha,i),nd.transform(r))},YN=new Set(["none","hidden"]);function Dte(t,e){return YN.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Pte(t,e){return n=>Is(t,e,n)}function xS(t){return typeof t=="number"?Pte:typeof t=="string"?pS(t)?N0:Xs.test(t)?B$:Fte:Array.isArray(t)?E_:typeof t=="object"?Xs.test(t)?B$:_te:N0}function E_(t,e){const n=[...t],s=n.length,r=t.map((i,a)=>xS(i)(i,e[a]));return i=>{for(let a=0;a<s;a++)n[a]=r[a](i);return n}}function _te(t,e){const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=xS(t[r])(t[r],e[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}}function Ote(t,e){const n=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const i=e.types[r],a=t.indexes[i][s[i]],l=t.values[a]??0;n[r]=l,s[i]++}return n}const Fte=(t,e)=>{const n=io.createTransformer(e),s=pm(t),r=pm(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?YN.has(t)&&!r.values.length||YN.has(e)&&!s.values.length?Dte(t,e):Vm(E_(Ote(s,r),r.values),n):N0(t,e)};function $_(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Is(t,e,n):xS(t)(t,e)}const Mte=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>os.update(e,n),stop:()=>qc(e),now:()=>Dr.isProcessing?Dr.timestamp:fi.now()}},A_=(t,e,n=10)=>{let s="";const r=Math.max(Math.round(e/n),2);for(let i=0;i<r;i++)s+=Math.round(t(i/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},S0=2e4;function yS(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<S0;)e+=n,s=t.next(e);return e>=S0?1/0:e}function Lte(t,e=100,n){const s=n({...t,keyframes:[0,e]}),r=Math.min(yS(s),S0);return{type:"keyframes",ease:i=>s.next(r*i).value/e,duration:ka(r)}}const Bte=5;function R_(t,e,n){const s=Math.max(e-Bte,0);return u_(n-t(s),e-s)}const Ps={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Pw=.001;function zte({duration:t=Ps.duration,bounce:e=Ps.bounce,velocity:n=Ps.velocity,mass:s=Ps.mass}){let r,i,a=1-e;a=tl(Ps.minDamping,Ps.maxDamping,a),t=tl(Ps.minDuration,Ps.maxDuration,ka(t)),a<1?(r=u=>{const d=u*a,h=d*t,p=d-n,g=ZN(u,a),x=Math.exp(-h);return Pw-p/g*x},i=u=>{const h=u*a*t,p=h*n+n,g=Math.pow(a,2)*Math.pow(u,2)*t,x=Math.exp(-h),y=ZN(Math.pow(u,2),a);return(-r(u)+Pw>0?-1:1)*((p-g)*x)/y}):(r=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-Pw+d*h},i=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const l=5/t,c=Ute(r,i,l);if(t=ro(t),isNaN(c))return{stiffness:Ps.stiffness,damping:Ps.damping,duration:t};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:a*2*Math.sqrt(s*u),duration:t}}}const Vte=12;function Ute(t,e,n){let s=n;for(let r=1;r<Vte;r++)s=s-t(s)/e(s);return s}function ZN(t,e){return t*Math.sqrt(1-e*e)}const Wte=["duration","bounce"],Gte=["stiffness","damping","mass"];function z$(t,e){return e.some(n=>t[n]!==void 0)}function Hte(t){let e={velocity:Ps.velocity,stiffness:Ps.stiffness,damping:Ps.damping,mass:Ps.mass,isResolvedFromDuration:!1,...t};if(!z$(t,Gte)&&z$(t,Wte))if(e.velocity=0,t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,i=2*tl(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Ps.mass,stiffness:r,damping:i}}else{const n=zte({...t,velocity:0});e={...e,...n,mass:Ps.mass},e.isResolvedFromDuration=!0}return e}function k0(t=Ps.visualDuration,e=Ps.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:p,isResolvedFromDuration:g}=Hte({...n,velocity:-ka(n.velocity||0)}),x=p||0,y=u/(2*Math.sqrt(c*d)),v=a-i,w=ka(Math.sqrt(c/d)),N=Math.abs(v)<5;s||(s=N?Ps.restSpeed.granular:Ps.restSpeed.default),r||(r=N?Ps.restDelta.granular:Ps.restDelta.default);let k;if(y<1){const j=ZN(w,y);k=R=>{const _=Math.exp(-y*w*R);return a-_*((x+y*w*v)/j*Math.sin(j*R)+v*Math.cos(j*R))}}else if(y===1)k=j=>a-Math.exp(-w*j)*(v+(x+w*v)*j);else{const j=w*Math.sqrt(y*y-1);k=R=>{const _=Math.exp(-y*w*R),A=Math.min(j*R,300);return a-_*((x+y*w*v)*Math.sinh(A)+j*v*Math.cosh(A))/j}}const C={calculatedDuration:g&&h||null,next:j=>{const R=k(j);if(g)l.done=j>=h;else{let _=j===0?x:0;y<1&&(_=j===0?ro(x):R_(k,j,R));const A=Math.abs(_)<=s,O=Math.abs(a-R)<=r;l.done=A&&O}return l.value=l.done?a:R,l},toString:()=>{const j=Math.min(yS(C),S0),R=A_(_=>C.next(j*_).value,j,30);return j+"ms "+R},toTransition:()=>{}};return C}k0.applyToOptions=t=>{const e=Lte(t,100,k0);return t.ease=e.ease,t.duration=ro(e.duration),t.type="keyframes",t};function JN({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},g=A=>l!==void 0&&A<l||c!==void 0&&A>c,x=A=>l===void 0?c:c===void 0||Math.abs(l-A)<Math.abs(c-A)?l:c;let y=n*e;const v=h+y,w=a===void 0?v:a(v);w!==v&&(y=w-h);const N=A=>-y*Math.exp(-A/s),k=A=>w+N(A),C=A=>{const O=N(A),L=k(A);p.done=Math.abs(O)<=u,p.value=p.done?w:L};let j,R;const _=A=>{g(p.value)&&(j=A,R=k0({keyframes:[p.value,x(p.value)],velocity:R_(k,A,p.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:A=>{let O=!1;return!R&&j===void 0&&(O=!0,C(A),_(A)),j!==void 0&&A>=j?R.next(A-j):(!O&&C(A),p)}}}function Kte(t,e,n){const s=[],r=n||Vl.mix||$_,i=t.length-1;for(let a=0;a<i;a++){let l=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Aa:e;l=Vm(c,l)}s.push(l)}return s}function qte(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const i=t.length;if(uS(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Kte(e,s,r),c=l.length,u=d=>{if(a&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=hm(t[h],t[h+1],d);return l[h](p)};return n?d=>u(tl(t[0],t[i-1],d)):u}function Xte(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=hm(0,e,s);t.push(Is(n,1,r))}}function Yte(t){const e=[0];return Xte(e,t.length-1),e}function Zte(t,e){return t.map(n=>n*e)}function Jte(t,e){return t.map(()=>e||v_).splice(0,t.length-1)}function Yp({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=cte(s)?s.map(_$):_$(s),i={done:!1,value:e[0]},a=Zte(n&&n.length===e.length?n:Yte(e),t),l=qte(a,e,{ease:Array.isArray(r)?r:Jte(e,r)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const Qte=t=>t!==null;function vS(t,{repeat:e,repeatType:n="loop"},s,r=1){const i=t.filter(Qte),l=r<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!l||s===void 0?i[l]:s}const ene={decay:JN,inertia:JN,tween:Yp,keyframes:Yp,spring:k0};function D_(t){typeof t.type=="string"&&(t.type=ene[t.type])}class bS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const tne=t=>t/100;class wS extends bS{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==fi.now()&&this.tick(fi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;D_(e);const{type:n=Yp,repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=e;let{keyframes:l}=e;const c=n||Yp;c!==Yp&&typeof l[0]!="number"&&(this.mixKeyframes=Vm(tne,$_(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=yS(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:r,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return s.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:g,type:x,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-u*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?w<0:w>r;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let k=this.currentTime,C=s;if(h){const A=Math.min(this.currentTime,r)/l;let O=Math.floor(A),L=A%1;!L&&A>=1&&(L=1),L===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(p==="reverse"?(L=1-L,g&&(L-=g/l)):p==="mirror"&&(C=a)),k=tl(0,1,L)*l}const j=N?{done:!1,value:d[0]}:C.next(k);i&&(j.value=i(j.value));let{done:R}=j;!N&&c!==null&&(R=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return _&&x!==JN&&(j.value=vS(d,this.options,v,this.speed)),y&&y(j.value),_&&this.finish(),j}then(e,n){return this.finished.then(e,n)}get duration(){return ka(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ka(e)}get time(){return ka(this.currentTime)}set time(e){e=ro(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(fi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ka(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Mte,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function nne(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const sd=t=>t*180/Math.PI,QN=t=>{const e=sd(Math.atan2(t[1],t[0]));return e3(e)},sne={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:QN,rotateZ:QN,skewX:t=>sd(Math.atan(t[1])),skewY:t=>sd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},e3=t=>(t=t%360,t<0&&(t+=360),t),V$=QN,U$=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),W$=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),rne={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:U$,scaleY:W$,scale:t=>(U$(t)+W$(t))/2,rotateX:t=>e3(sd(Math.atan2(t[6],t[5]))),rotateY:t=>e3(sd(Math.atan2(-t[2],t[0]))),rotateZ:V$,rotate:V$,skewX:t=>sd(Math.atan(t[4])),skewY:t=>sd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function t3(t){return t.includes("scale")?1:0}function n3(t,e){if(!t||t==="none")return t3(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(n)s=rne,r=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=sne,r=l}if(!r)return t3(e);const i=s[e],a=r[1].split(",").map(ane);return typeof i=="function"?i(a):a[i]}const ine=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return n3(n,e)};function ane(t){return parseFloat(t.trim())}const Pf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_f=new Set(Pf),G$=t=>t===Df||t===jt,one=new Set(["x","y","z"]),lne=Pf.filter(t=>!one.has(t));function cne(t){const e=[];return lne.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const $c={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>n3(e,"x"),y:(t,{transform:e})=>n3(e,"y")};$c.translateX=$c.x;$c.translateY=$c.y;const hd=new Set;let s3=!1,r3=!1,i3=!1;function P_(){if(r3){const t=Array.from(hd).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const r=cne(s);r.length&&(n.set(s,r),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([i,a])=>{s.getValue(i)?.set(a)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}r3=!1,s3=!1,hd.forEach(t=>t.complete(i3)),hd.clear()}function __(){hd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(r3=!0)})}function une(){i3=!0,__(),P_(),i3=!1}class NS{constructor(e,n,s,r,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(hd.add(this),s3||(s3=!0,os.read(__),os.resolveKeyframes(P_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:r}=this;if(e[0]===null){const i=r?.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(s&&n){const l=s.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&i===void 0&&r.set(e[0])}nne(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),hd.delete(this)}cancel(){this.state==="scheduled"&&(hd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const dne=t=>t.startsWith("--");function hne(t,e,n){dne(e)?t.style.setProperty(e,n):t.style[e]=n}const fne={};function O_(t,e){const n=c_(t);return()=>fne[e]??n()}const pne=O_(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),F_=O_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Fp=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,H$={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fp([0,.65,.55,1]),circOut:Fp([.55,0,1,.45]),backIn:Fp([.31,.01,.66,-.59]),backOut:Fp([.33,1.53,.69,.99])};function M_(t,e){if(t)return typeof t=="function"?F_()?A_(t,e):"ease-out":b_(t)?Fp(t):Array.isArray(t)?t.map(n=>M_(n,e)||H$.easeOut):H$[t]}function mne(t,e,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=M_(l,r);Array.isArray(h)&&(d.easing=h);const p={delay:s,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),t.animate(d,p)}function L_(t){return typeof t=="function"&&"applyToOptions"in t}function gne({type:t,...e}){return L_(t)&&F_()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class B_ extends bS{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:s,keyframes:r,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,uS(typeof e.type!="string");const u=gne(e);this.animation=mne(n,s,r,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=vS(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):hne(n,s,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ka(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ka(e)}get time(){return ka(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ro(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&pne()?(this.animation.timeline=e,Aa):n(this)}}const z_={anticipate:g_,backInOut:m_,circInOut:y_};function xne(t){return t in z_}function yne(t){typeof t.ease=="string"&&xne(t.ease)&&(t.ease=z_[t.ease])}const _w=10;class vne extends B_{constructor(e){yne(e),D_(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:r,element:i,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new wS({...a,autoplay:!1}),c=Math.max(_w,fi.now()-this.startTime),u=tl(0,_w,c-_w);n.setWithVelocity(l.sample(Math.max(0,c-u)).value,l.sample(c).value,u),l.stop()}}const K$=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(io.test(t)||t==="0")&&!t.startsWith("url("));function bne(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function wne(t,e,n,s){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=K$(r,e),l=K$(i,e);return!a||!l?!1:bne(t)||(n==="spring"||L_(n))&&s}function a3(t){t.duration=0,t.type="keyframes"}const Nne=new Set(["opacity","clipPath","filter","transform"]),Sne=c_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function kne(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:r,damping:i,type:a}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return Sne()&&n&&Nne.has(n)&&(n!=="transform"||!u)&&!c&&!s&&r!=="mirror"&&i!==0&&a!=="inertia"}const Cne=40;class Tne extends bS{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=fi.now();const p={autoplay:e,delay:n,type:s,repeat:r,repeatDelay:i,repeatType:a,name:c,motionValue:u,element:d,...h},g=d?.KeyframeResolver||NS;this.keyframeResolver=new g(l,(x,y,v)=>this.onKeyframesResolved(x,y,p,!v),c,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,r){this.keyframeResolver=void 0;const{name:i,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:d}=s;this.resolvedAt=fi.now(),wne(e,i,a,l)||((Vl.instantAnimations||!c)&&d?.(vS(e,s,n)),e[0]=e[e.length-1],a3(s),s.repeat=0);const p={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>Cne?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},g=!u&&kne(p),x=p.motionValue?.owner?.current,y=g?new vne({...p,element:x}):new wS(p);y.finished.then(()=>{this.notifyFinished()}).catch(Aa),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),une()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function V_(t,e,n,s=0,r=1){const i=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),a=t.size,l=(a-1)*s;return typeof n=="function"?n(i,a):r===1?i*s:l-i*s}const Ine=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function jne(t){const e=Ine.exec(t);if(!e)return[,];const[,n,s,r]=e;return[`--${n??s}`,r]}function U_(t,e,n=1){const[s,r]=jne(t);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const a=i.trim();return a_(a)?parseFloat(a):a}return pS(r)?U_(r,e,n+1):r}const Ene={type:"spring",stiffness:500,damping:25,restSpeed:10},$ne=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Ane={type:"keyframes",duration:.8},Rne={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Dne=(t,{keyframes:e})=>e.length>2?Ane:_f.has(t)?t.startsWith("scale")?$ne(e[1]):Ene:Rne,Pne=t=>t!==null;function _ne(t,{repeat:e,repeatType:n="loop"},s){const r=t.filter(Pne),i=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[i]}function W_(t,e){if(t?.inherit&&e){const{inherit:n,...s}=t;return{...e,...s}}return t}function SS(t,e){const n=t?.[e]??t?.default??t;return n!==t?W_(n,t):n}function One({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const kS=(t,e,n,s={},r,i)=>a=>{const l=SS(s,t)||{},c=l.delay||s.delay||0;let{elapsed:u=0}=s;u=u-ro(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:p=>{e.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:r};One(l)||Object.assign(d,Dne(t,d)),d.duration&&(d.duration=ro(d.duration)),d.repeatDelay&&(d.repeatDelay=ro(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(a3(d),d.delay===0&&(h=!0)),(Vl.instantAnimations||Vl.skipAnimations||r?.shouldSkipAnimations)&&(h=!0,a3(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&e.get()!==void 0){const p=_ne(d.keyframes,l);if(p!==void 0){os.update(()=>{d.onUpdate(p),d.onComplete()});return}}return l.isSync?new wS(d):new Tne(d)};function q$(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function CS(t,e,n,s){if(typeof e=="function"){const[r,i]=q$(s);e=e(n!==void 0?n:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=q$(s);e=e(n!==void 0?n:t.custom,r,i)}return e}function Jh(t,e,n){const s=t.getProps();return CS(s,e,n!==void 0?n:s.custom,t)}const G_=new Set(["width","height","top","left","right","bottom",...Pf]),X$=30,Fne=t=>!isNaN(parseFloat(t));class Mne{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const r=fi.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=fi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Fne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new dS);const s=this.events[e].add(n);return e==="change"?()=>{s(),os.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=fi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>X$)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,X$);return u_(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pf(t,e){return new Mne(t,e)}const o3=t=>Array.isArray(t);function Lne(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,pf(n))}function Bne(t){return o3(t)?t[t.length-1]||0:t}function zne(t,e){const n=Jh(t,e);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const a in i){const l=Bne(i[a]);Lne(t,a,l)}}const Yr=t=>!!(t&&t.getVelocity);function Vne(t){return!!(Yr(t)&&t.add)}function l3(t,e){const n=t.getValue("willChange");if(Vne(n))return n.add(e);if(!n&&Vl.WillChange){const s=new Vl.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function TS(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const Une="framerAppearId",H_="data-"+TS(Une);function K_(t){return t.props[H_]}function Wne({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function q_(t,e,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i,transitionEnd:a,...l}=e;const c=t.getDefaultTransition();i=i?W_(i,c):c;const u=i?.reduceMotion;s&&(i=s);const d=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const p in l){const g=t.getValue(p,t.latestValues[p]??null),x=l[p];if(x===void 0||h&&Wne(h,p))continue;const y={delay:n,...SS(i||{},p)},v=g.get();if(v!==void 0&&!g.isAnimating&&!Array.isArray(x)&&x===v&&!y.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const C=K_(t);if(C){const j=window.MotionHandoffAnimation(C,p,os);j!==null&&(y.startTime=j,w=!0)}}l3(t,p);const N=u??t.shouldReduceMotion;g.start(kS(p,g,x,N&&G_.has(p)?{type:!1}:y,t,w));const k=g.animation;k&&d.push(k)}if(a){const p=()=>os.update(()=>{a&&zne(t,a)});d.length?Promise.all(d).then(p):p()}return d}function c3(t,e,n={}){const s=Jh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(q_(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return Gne(t,e,c,u,d,h,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function Gne(t,e,n=0,s=0,r=0,i=1,a){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(c3(c,e,{...a,delay:n+(typeof s=="function"?0:s)+V_(t.variantChildren,c,s,r,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function Hne(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>c3(t,i,n));s=Promise.all(r)}else if(typeof e=="string")s=c3(t,e,n);else{const r=typeof e=="function"?Jh(t,e,n.custom):e;s=Promise.all(q_(t,r,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const Kne={test:t=>t==="auto",parse:t=>t},X_=t=>e=>e.test(t),Y_=[Df,jt,Ko,jc,Nte,wte,Kne],Y$=t=>Y_.find(X_(t));function qne(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||l_(t):!0}const Xne=new Set(["brightness","contrast","saturate","opacity"]);function Yne(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(mS)||[];if(!s)return t;const r=n.replace(s,"");let i=Xne.has(e)?1:0;return s!==n&&(i*=100),e+"("+i+r+")"}const Zne=/\b([a-z-]*)\(.*?\)/gu,u3={...io,getAnimatableNone:t=>{const e=t.match(Zne);return e?e.map(Yne).join(" "):t}},d3={...io,getAnimatableNone:t=>{const e=io.parse(t);return io.createTransformer(t)(e.map(s=>typeof s=="number"?0:typeof s=="object"?{...s,alpha:1}:s))}},Z$={...Df,transform:Math.round},Jne={rotate:jc,rotateX:jc,rotateY:jc,rotateZ:jc,scale:b1,scaleX:b1,scaleY:b1,scaleZ:b1,skew:jc,skewX:jc,skewY:jc,distance:jt,translateX:jt,translateY:jt,translateZ:jt,x:jt,y:jt,z:jt,perspective:jt,transformPerspective:jt,opacity:fm,originX:F$,originY:F$,originZ:jt},IS={borderWidth:jt,borderTopWidth:jt,borderRightWidth:jt,borderBottomWidth:jt,borderLeftWidth:jt,borderRadius:jt,borderTopLeftRadius:jt,borderTopRightRadius:jt,borderBottomRightRadius:jt,borderBottomLeftRadius:jt,width:jt,maxWidth:jt,height:jt,maxHeight:jt,top:jt,right:jt,bottom:jt,left:jt,inset:jt,insetBlock:jt,insetBlockStart:jt,insetBlockEnd:jt,insetInline:jt,insetInlineStart:jt,insetInlineEnd:jt,padding:jt,paddingTop:jt,paddingRight:jt,paddingBottom:jt,paddingLeft:jt,paddingBlock:jt,paddingBlockStart:jt,paddingBlockEnd:jt,paddingInline:jt,paddingInlineStart:jt,paddingInlineEnd:jt,margin:jt,marginTop:jt,marginRight:jt,marginBottom:jt,marginLeft:jt,marginBlock:jt,marginBlockStart:jt,marginBlockEnd:jt,marginInline:jt,marginInlineStart:jt,marginInlineEnd:jt,fontSize:jt,backgroundPositionX:jt,backgroundPositionY:jt,...Jne,zIndex:Z$,fillOpacity:fm,strokeOpacity:fm,numOctaves:Z$},Qne={...IS,color:Xs,backgroundColor:Xs,outlineColor:Xs,fill:Xs,stroke:Xs,borderColor:Xs,borderTopColor:Xs,borderRightColor:Xs,borderBottomColor:Xs,borderLeftColor:Xs,filter:u3,WebkitFilter:u3,mask:d3,WebkitMask:d3},Z_=t=>Qne[t],ese=new Set([u3,d3]);function J_(t,e){let n=Z_(t);return ese.has(n)||(n=io),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const tse=new Set(["auto","none","0"]);function nse(t,e,n){let s=0,r;for(;s<t.length&&!r;){const i=t[s];typeof i=="string"&&!tse.has(i)&&pm(i).values.length&&(r=t[s]),s++}if(r&&n)for(const i of e)t[i]=J_(n,r)}class sse extends NS{constructor(e,n,s,r,i){super(e,n,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),pS(h))){const p=U_(h,n.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!G_.has(s)||e.length!==2)return;const[r,i]=e,a=Y$(r),l=Y$(i),c=O$(r),u=O$(i);if(c!==u&&$c[s]){this.needsMeasurement=!0;return}if(a!==l)if(G$(a)&&G$(l))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else $c[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let r=0;r<e.length;r++)(e[r]===null||qne(e[r]))&&s.push(r);s.length&&nse(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$c[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const i=s.length-1,a=s[i];s[i]=$c[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const rse=new Set(["opacity","clipPath","filter","transform"]);function Q_(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const r=n?.[t]??s.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t).filter(s=>s!=null)}const eO=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function h3(t){return o_(t)&&"offsetHeight"in t}const{schedule:jS}=w_(queueMicrotask,!1),Ja={x:!1,y:!1};function tO(){return Ja.x||Ja.y}function ise(t){return t==="x"||t==="y"?Ja[t]?null:(Ja[t]=!0,()=>{Ja[t]=!1}):Ja.x||Ja.y?null:(Ja.x=Ja.y=!0,()=>{Ja.x=Ja.y=!1})}function nO(t,e){const n=Q_(t),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[n,r,()=>s.abort()]}function ase(t){return!(t.pointerType==="touch"||tO())}function ose(t,e,n={}){const[s,r,i]=nO(t,n);return s.forEach(a=>{let l=!1,c=!1,u;const d=()=>{a.removeEventListener("pointerleave",x)},h=v=>{u&&(u(v),u=void 0),d()},p=v=>{l=!1,window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",p),c&&(c=!1,h(v))},g=()=>{l=!0,window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",p,r)},x=v=>{if(v.pointerType!=="touch"){if(l){c=!0;return}h(v)}},y=v=>{if(!ase(v))return;c=!1;const w=e(a,v);typeof w=="function"&&(u=w,a.addEventListener("pointerleave",x,r))};a.addEventListener("pointerenter",y,r),a.addEventListener("pointerdown",g,r)}),i}const sO=(t,e)=>e?t===e?!0:sO(t,e.parentElement):!1,ES=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,lse=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cse(t){return lse.has(t.tagName)||t.isContentEditable===!0}const use=new Set(["INPUT","SELECT","TEXTAREA"]);function dse(t){return use.has(t.tagName)||t.isContentEditable===!0}const U1=new WeakSet;function J$(t){return e=>{e.key==="Enter"&&t(e)}}function Ow(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const hse=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=J$(()=>{if(U1.has(n))return;Ow(n,"down");const r=J$(()=>{Ow(n,"up")}),i=()=>Ow(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Q$(t){return ES(t)&&!tO()}const eA=new WeakSet;function fse(t,e,n={}){const[s,r,i]=nO(t,n),a=l=>{const c=l.currentTarget;if(!Q$(l)||eA.has(l))return;U1.add(c),n.stopPropagation&&eA.add(l);const u=e(c,l),d=(g,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),U1.has(c)&&U1.delete(c),Q$(g)&&typeof u=="function"&&u(g,{success:x})},h=g=>{d(g,c===window||c===document||n.useGlobalTarget||sO(c,g.target))},p=g=>{d(g,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",p,r)};return s.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,r),h3(l)&&(l.addEventListener("focus",u=>hse(u,r)),!cse(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function $S(t){return o_(t)&&"ownerSVGElement"in t}const W1=new WeakMap;let G1;const rO=(t,e,n)=>(s,r)=>r&&r[0]?r[0][t+"Size"]:$S(s)&&"getBBox"in s?s.getBBox()[e]:s[n],pse=rO("inline","width","offsetWidth"),mse=rO("block","height","offsetHeight");function gse({target:t,borderBoxSize:e}){W1.get(t)?.forEach(n=>{n(t,{get width(){return pse(t,e)},get height(){return mse(t,e)}})})}function xse(t){t.forEach(gse)}function yse(){typeof ResizeObserver>"u"||(G1=new ResizeObserver(xse))}function vse(t,e){G1||yse();const n=Q_(t);return n.forEach(s=>{let r=W1.get(s);r||(r=new Set,W1.set(s,r)),r.add(e),G1?.observe(s)}),()=>{n.forEach(s=>{const r=W1.get(s);r?.delete(e),r?.size||G1?.unobserve(s)})}}const H1=new Set;let Uh;function bse(){Uh=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};H1.forEach(e=>e(t))},window.addEventListener("resize",Uh)}function wse(t){return H1.add(t),Uh||bse(),()=>{H1.delete(t),!H1.size&&typeof Uh=="function"&&(window.removeEventListener("resize",Uh),Uh=void 0)}}function tA(t,e){return typeof t=="function"?wse(t):vse(t,e)}function Nse(t){return $S(t)&&t.tagName==="svg"}const Sse=[...Y_,Xs,io],kse=t=>Sse.find(X_(t)),nA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wh=()=>({x:nA(),y:nA()}),sA=()=>({min:0,max:0}),ur=()=>({x:sA(),y:sA()}),Cse=new WeakMap;function Py(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function mm(t){return typeof t=="string"||Array.isArray(t)}const AS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],RS=["initial",...AS];function _y(t){return Py(t.animate)||RS.some(e=>mm(t[e]))}function iO(t){return!!(_y(t)||t.variants)}function Tse(t,e,n){for(const s in e){const r=e[s],i=n[s];if(Yr(r))t.addValue(s,r);else if(Yr(i))t.addValue(s,pf(r,{owner:t}));else if(i!==r)if(t.hasValue(s)){const a=t.getValue(s);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(s);t.addValue(s,pf(a!==void 0?a:r,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const f3={current:null},aO={current:!1},Ise=typeof window<"u";function jse(){if(aO.current=!0,!!Ise)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>f3.current=t.matches;t.addEventListener("change",e),e()}else f3.current=!1}const rA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let C0={};function oO(t){C0=t}function Ese(){return C0}class $se{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,skipAnimations:i,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=NS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=fi.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,os.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.skipAnimationsConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=_y(n),this.isVariantNode=iO(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const x=p[g];u[g]!==void 0&&Yr(x)&&x.set(u[g])}}mount(e){if(this.hasBeenMounted)for(const n in this.initialValues)this.values.get(n)?.jump(this.initialValues[n]),this.latestValues[n]=this.initialValues[n];this.current=e,Cse.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(aO.current||jse(),this.shouldReduceMotion=f3.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),qc(this.notifyUpdate),qc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&rse.has(e)&&this.current instanceof HTMLElement){const{factory:a,keyframes:l,times:c,ease:u,duration:d}=n.accelerate,h=new B_({element:this.current,name:e,keyframes:l,times:c,ease:u,duration:ro(d)}),p=a(h);this.valueSubscriptions.set(e,()=>{p(),h.cancel()});return}const s=_f.has(e);s&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&os.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in C0){const n=C0[e];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ur()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<rA.length;s++){const r=rA[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,a=e[i];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=Tse(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=pf(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(a_(s)||l_(s))?s=parseFloat(s):!kse(s)&&io.test(n)&&(s=J_(e,n)),this.setBaseTarget(e,Yr(s)?s.get():s)),Yr(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const i=CS(this.props,n,this.presenceContext?.custom);i&&(s=i[e])}if(n&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Yr(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new dS),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){jS.render(this.render)}}class lO extends $se{constructor(){super(...arguments),this.KeyframeResolver=sse}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const s=e.style;return s?s[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Yr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class lu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function cO({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function Ase({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Rse(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Fw(t){return t===void 0||t===1}function p3({scale:t,scaleX:e,scaleY:n}){return!Fw(t)||!Fw(e)||!Fw(n)}function Xu(t){return p3(t)||uO(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function uO(t){return iA(t.x)||iA(t.y)}function iA(t){return t&&t!=="0%"}function T0(t,e,n){const s=t-n,r=e*s;return n+r}function aA(t,e,n,s,r){return r!==void 0&&(t=T0(t,r,s)),T0(t,n,s)+e}function m3(t,e=0,n=1,s,r){t.min=aA(t.min,e,n,s,r),t.max=aA(t.max,e,n,s,r)}function dO(t,{x:e,y:n}){m3(t.x,e.translate,e.scale,e.originPoint),m3(t.y,n.translate,n.scale,n.originPoint)}const oA=.999999999999,lA=1.0000000000001;function Dse(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let i,a;for(let l=0;l<r;l++){i=n[l],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Hh(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,dO(t,a)),s&&Xu(i.latestValues)&&Hh(t,i.latestValues))}e.x<lA&&e.x>oA&&(e.x=1),e.y<lA&&e.y>oA&&(e.y=1)}function Gh(t,e){t.min=t.min+e,t.max=t.max+e}function cA(t,e,n,s,r=.5){const i=Is(t.min,t.max,r);m3(t,e,n,i,s)}function Hh(t,e){cA(t.x,e.x,e.scaleX,e.scale,e.originX),cA(t.y,e.y,e.scaleY,e.scale,e.originY)}function hO(t,e){return cO(Rse(t.getBoundingClientRect(),e))}function Pse(t,e,n){const s=hO(t,n),{scroll:r}=e;return r&&(Gh(s.x,r.offset.x),Gh(s.y,r.offset.y)),s}const _se={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ose=Pf.length;function Fse(t,e,n){let s="",r=!0;for(let i=0;i<Ose;i++){const a=Pf[i],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(a.startsWith("scale")?1:0);else{const u=parseFloat(l);c=a.startsWith("scale")?u===1:u===0}if(!c||n){const u=eO(l,IS[a]);if(!c){r=!1;const d=_se[a]||a;s+=`${d}(${u}) `}n&&(e[a]=u)}}return s=s.trim(),n?s=n(e,r?"":s):r&&(s="none"),s}function DS(t,e,n){const{style:s,vars:r,transformOrigin:i}=t;let a=!1,l=!1;for(const c in e){const u=e[c];if(_f.has(c)){a=!0;continue}else if(S_(c)){r[c]=u;continue}else{const d=eO(u,IS[c]);c.startsWith("origin")?(l=!0,i[c]=d):s[c]=d}}if(e.transform||(a||n?s.transform=Fse(e,t.transform,n):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;s.transformOrigin=`${c} ${u} ${d}`}}function fO(t,{style:e,vars:n},s,r){const i=t.style;let a;for(a in e)i[a]=e[a];r?.applyProjectionStyles(i,s);for(a in n)i.setProperty(a,n[a])}function uA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $p={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(jt.test(t))t=parseFloat(t);else return t;const n=uA(t,e.target.x),s=uA(t,e.target.y);return`${n}% ${s}%`}},Mse={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=io.parse(t);if(r.length>5)return s;const i=io.createTransformer(t),a=typeof r[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;r[0+a]/=l,r[1+a]/=c;const u=Is(l,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),i(r)}},g3={borderRadius:{...$p,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$p,borderTopRightRadius:$p,borderBottomLeftRadius:$p,borderBottomRightRadius:$p,boxShadow:Mse};function pO(t,{layout:e,layoutId:n}){return _f.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!g3[t]||t==="opacity")}function PS(t,e,n){const s=t.style,r=e?.style,i={};if(!s)return i;for(const a in s)(Yr(s[a])||r&&Yr(r[a])||pO(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=s[a]);return i}function Lse(t){return window.getComputedStyle(t)}class Bse extends lO{constructor(){super(...arguments),this.type="html",this.renderInstance=fO}readValueFromInstance(e,n){if(_f.has(n))return this.projection?.isProjecting?t3(n):ine(e,n);{const s=Lse(e),r=(S_(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return hO(e,n)}build(e,n,s){DS(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return PS(e,n,s)}}const zse={offset:"stroke-dashoffset",array:"stroke-dasharray"},Vse={offset:"strokeDashoffset",array:"strokeDasharray"};function Use(t,e,n=1,s=0,r=!0){t.pathLength=1;const i=r?zse:Vse;t[i.offset]=`${-s}`,t[i.array]=`${e} ${n}`}const Wse=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function mO(t,{attrX:e,attrY:n,attrScale:s,pathLength:r,pathSpacing:i=1,pathOffset:a=0,...l},c,u,d){if(DS(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=d?.transformBox??"fill-box",delete h.transformBox);for(const g of Wse)h[g]!==void 0&&(p[g]=h[g],delete h[g]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),s!==void 0&&(h.scale=s),r!==void 0&&Use(h,r,i,a,!1)}const gO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),xO=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Gse(t,e,n,s){fO(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(gO.has(r)?r:TS(r),e.attrs[r])}function yO(t,e,n){const s=PS(t,e,n);for(const r in t)if(Yr(t[r])||Yr(e[r])){const i=Pf.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=t[r]}return s}class Hse extends lO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ur}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(_f.has(n)){const s=Z_(n);return s&&s.default||0}return n=gO.has(n)?n:TS(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return yO(e,n,s)}build(e,n,s){mO(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,r){Gse(e,n,s,r)}mount(e){this.isSVGTag=xO(e.tagName),super.mount(e)}}const Kse=RS.length;function vO(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?vO(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Kse;n++){const s=RS[n],r=t.props[s];(mm(r)||r===!1)&&(e[s]=r)}return e}function bO(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const qse=[...AS].reverse(),Xse=AS.length;function Yse(t){return e=>Promise.all(e.map(({animation:n,options:s})=>Hne(t,n,s)))}function Zse(t){let e=Yse(t),n=dA(),s=!0;const r=c=>(u,d)=>{const h=Jh(t,d,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:p,transitionEnd:g,...x}=h;u={...u,...x,...g}}return u};function i(c){e=c(t)}function a(c){const{props:u}=t,d=vO(t.parent)||{},h=[],p=new Set;let g={},x=1/0;for(let v=0;v<Xse;v++){const w=qse[v],N=n[w],k=u[w]!==void 0?u[w]:d[w],C=mm(k),j=w===c?N.isActive:null;j===!1&&(x=v);let R=k===d[w]&&k!==u[w]&&C;if(R&&s&&t.manuallyAnimateOnMount&&(R=!1),N.protectedKeys={...g},!N.isActive&&j===null||!k&&!N.prevProp||Py(k)||typeof k=="boolean")continue;if(w==="exit"&&N.isActive&&j!==!0){N.prevResolvedValues&&(g={...g,...N.prevResolvedValues});continue}const _=Jse(N.prevProp,k);let A=_||w===c&&N.isActive&&!R&&C||v>x&&C,O=!1;const L=Array.isArray(k)?k:[k];let D=L.reduce(r(w),{});j===!1&&(D={});const{prevResolvedValues:q={}}=N,V={...q,...D},ne=te=>{A=!0,p.has(te)&&(O=!0,p.delete(te)),N.needsAnimating[te]=!0;const X=t.getValue(te);X&&(X.liveStyle=!1)};for(const te in V){const X=D[te],Q=q[te];if(g.hasOwnProperty(te))continue;let G=!1;o3(X)&&o3(Q)?G=!bO(X,Q):G=X!==Q,G?X!=null?ne(te):p.add(te):X!==void 0&&p.has(te)?ne(te):N.protectedKeys[te]=!0}N.prevProp=k,N.prevResolvedValues=D,N.isActive&&(g={...g,...D}),s&&t.blockInitialAnimation&&(A=!1);const J=R&&_;A&&(!J||O)&&h.push(...L.map(te=>{const X={type:w};if(typeof te=="string"&&s&&!J&&t.manuallyAnimateOnMount&&t.parent){const{parent:Q}=t,G=Jh(Q,te);if(Q.enteringChildren&&G){const{delayChildren:H}=G.transition||{};X.delay=V_(Q.enteringChildren,t,H)}}return{animation:te,options:X}}))}if(p.size){const v={};if(typeof u.initial!="boolean"){const w=Jh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);w&&w.transition&&(v.transition=w.transition)}p.forEach(w=>{const N=t.getBaseTarget(w),k=t.getValue(w);k&&(k.liveStyle=!0),v[w]=N??null}),h.push({animation:v})}let y=!!h.length;return s&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),s=!1,y?e(h):Promise.resolve()}function l(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,u)),n[c].isActive=u;const d=a(c);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=dA()}}}function Jse(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!bO(e,t):!1}function Wu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dA(){return{animate:Wu(!0),whileInView:Wu(),whileHover:Wu(),whileTap:Wu(),whileDrag:Wu(),whileFocus:Wu(),exit:Wu()}}function hA(t,e){t.min=e.min,t.max=e.max}function Ya(t,e){hA(t.x,e.x),hA(t.y,e.y)}function fA(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const wO=1e-4,Qse=1-wO,ere=1+wO,NO=.01,tre=0-NO,nre=0+NO;function pi(t){return t.max-t.min}function sre(t,e,n){return Math.abs(t-e)<=n}function pA(t,e,n,s=.5){t.origin=s,t.originPoint=Is(e.min,e.max,t.origin),t.scale=pi(n)/pi(e),t.translate=Is(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Qse&&t.scale<=ere||isNaN(t.scale))&&(t.scale=1),(t.translate>=tre&&t.translate<=nre||isNaN(t.translate))&&(t.translate=0)}function Zp(t,e,n,s){pA(t.x,e.x,n.x,s?s.originX:void 0),pA(t.y,e.y,n.y,s?s.originY:void 0)}function mA(t,e,n){t.min=n.min+e.min,t.max=t.min+pi(e)}function rre(t,e,n){mA(t.x,e.x,n.x),mA(t.y,e.y,n.y)}function gA(t,e,n){t.min=e.min-n.min,t.max=t.min+pi(e)}function I0(t,e,n){gA(t.x,e.x,n.x),gA(t.y,e.y,n.y)}function xA(t,e,n,s,r){return t-=e,t=T0(t,1/n,s),r!==void 0&&(t=T0(t,1/r,s)),t}function ire(t,e=0,n=1,s=.5,r,i=t,a=t){if(Ko.test(e)&&(e=parseFloat(e),e=Is(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=Is(i.min,i.max,s);t===i&&(l-=e),t.min=xA(t.min,e,n,l,r),t.max=xA(t.max,e,n,l,r)}function yA(t,e,[n,s,r],i,a){ire(t,e[n],e[s],e[r],e.scale,i,a)}const are=["x","scaleX","originX"],ore=["y","scaleY","originY"];function vA(t,e,n,s){yA(t.x,e,are,n?n.x:void 0,s?s.x:void 0),yA(t.y,e,ore,n?n.y:void 0,s?s.y:void 0)}function bA(t){return t.translate===0&&t.scale===1}function SO(t){return bA(t.x)&&bA(t.y)}function wA(t,e){return t.min===e.min&&t.max===e.max}function lre(t,e){return wA(t.x,e.x)&&wA(t.y,e.y)}function NA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function kO(t,e){return NA(t.x,e.x)&&NA(t.y,e.y)}function SA(t){return pi(t.x)/pi(t.y)}function kA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Po(t){return[t("x"),t("y")]}function cre(t,e,n){let s="";const r=t.x.translate/e.x,i=t.y.translate/e.y,a=n?.z||0;if((r||i||a)&&(s=`translate3d(${r}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:p,skewX:g,skewY:x}=n;u&&(s=`perspective(${u}px) ${s}`),d&&(s+=`rotate(${d}deg) `),h&&(s+=`rotateX(${h}deg) `),p&&(s+=`rotateY(${p}deg) `),g&&(s+=`skewX(${g}deg) `),x&&(s+=`skewY(${x}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const CO=["TopLeft","TopRight","BottomLeft","BottomRight"],ure=CO.length,CA=t=>typeof t=="string"?parseFloat(t):t,TA=t=>typeof t=="number"||jt.test(t);function dre(t,e,n,s,r,i){r?(t.opacity=Is(0,n.opacity??1,hre(s)),t.opacityExit=Is(e.opacity??1,0,fre(s))):i&&(t.opacity=Is(e.opacity??1,n.opacity??1,s));for(let a=0;a<ure;a++){const l=`border${CO[a]}Radius`;let c=IA(e,l),u=IA(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||TA(c)===TA(u)?(t[l]=Math.max(Is(CA(c),CA(u),s),0),(Ko.test(u)||Ko.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=Is(e.rotate||0,n.rotate||0,s))}function IA(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const hre=TO(0,.5,x_),fre=TO(.5,.95,Aa);function TO(t,e,n){return s=>s<t?0:s>e?1:n(hm(t,e,s))}function pre(t,e,n){const s=Yr(t)?t:pf(t);return s.start(kS("",s,e,n)),s.animation}function gm(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}const mre=(t,e)=>t.depth-e.depth;class gre{constructor(){this.children=[],this.isDirty=!1}add(e){cS(this.children,e),this.isDirty=!0}remove(e){w0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(mre),this.isDirty=!1,this.children.forEach(e)}}function xre(t,e){const n=fi.now(),s=({timestamp:r})=>{const i=r-n;i>=e&&(qc(s),t(i-e))};return os.setup(s,!0),()=>qc(s)}function K1(t){return Yr(t)?t.get():t}class yre{constructor(){this.members=[]}add(e){cS(this.members,e);for(let n=this.members.length-1;n>=0;n--){const s=this.members[n];if(s===e||s===this.lead||s===this.prevLead)continue;const r=s.instance;r&&r.isConnected===!1&&s.isPresent!==!1&&!s.snapshot&&w0(this.members,s)}e.scheduleRender()}remove(e){if(w0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r],a=i.instance;if(i.isPresent!==!1&&(!a||a.isConnected!==!1)){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender();const r=s.options.layoutDependency,i=e.options.layoutDependency;if(!(r!==void 0&&i!==void 0&&r===i)){const c=s.instance;c&&c.isConnected===!1&&!s.snapshot||(e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:l}=e.options;l===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const q1={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Mw=["","X","Y","Z"],vre=1e3;let bre=0;function Lw(t,e,n,s){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),s&&(s[t]=0))}function IO(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=K_(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",os,!(r||i))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&IO(s)}function jO({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},l=e?.()){this.id=bre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Sre),this.nodes.forEach(Ire),this.nodes.forEach(jre),this.nodes.forEach(kre)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new gre)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new dS),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=$S(a)&&!Nse(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const p=()=>this.root.updateBlockedByResize=!1;os.read(()=>{h=window.innerWidth}),t(a,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,d&&d(),d=xre(p,250),q1.hasAnimatedSinceResize&&(q1.hasAnimatedSinceResize=!1,this.nodes.forEach($A)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||Dre,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),w=!this.targetLayout||!kO(this.targetLayout,g),N=!h&&p;if(this.options.layoutRoot||this.resumeFrom||N||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...SS(x,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(d,N)}else h||$A(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ere),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&IO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(EA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Tre),this.nodes.forEach(wre),this.nodes.forEach(Nre)):this.nodes.forEach(EA),this.clearAllSnapshots();const l=fi.now();Dr.delta=tl(0,1e3/60,l-Dr.timestamp),Dr.timestamp=l,Dr.isProcessing=!0,$w.update.process(Dr),$w.preRender.process(Dr),$w.render.process(Dr),Dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Cre),this.sharedNodes.forEach($re)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,os.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){os.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pi(this.snapshot.measuredBox.x)&&!pi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ur(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!SO(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||Xu(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),Pre(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ur();const l=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(_re))){const{scroll:u}=this.root;u&&(Gh(l.x,u.offset.x),Gh(l.y,u.offset.y))}return l}removeElementScroll(a){const l=ur();if(Ya(l,a),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Ya(l,a),Gh(l.x,d.offset.x),Gh(l.y,d.offset.y))}return l}applyTransform(a,l=!1){const c=ur();Ya(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Hh(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Xu(d.latestValues)&&Hh(c,d.latestValues)}return Xu(this.latestValues)&&Hh(c,this.latestValues),c}removeTransform(a){const l=ur();Ya(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Xu(u.latestValues))continue;p3(u.latestValues)&&u.updateSnapshot();const d=ur(),h=u.measurePageBox();Ya(d,h),vA(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Xu(this.latestValues)&&vA(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=Dr.timestamp;const p=this.getClosestProjectingParent();p&&this.linkedParentVersion!==p.layoutVersion&&!p.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(p&&p.layout?this.createRelativeTarget(p,this.layout.layoutBox,p.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ur(),this.targetWithTransforms=ur()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ya(this.target,this.layout.layoutBox),dO(this.target,this.targetDelta)):Ya(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?this.createRelativeTarget(p,this.target,p.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||p3(this.parent.latestValues)||uO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,l,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ur(),this.relativeTargetOrigin=ur(),I0(this.relativeTargetOrigin,l,c),Ya(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Dr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ya(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;Dse(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ur());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fA(this.prevProjectionDelta.x,this.projectionDelta.x),fA(this.prevProjectionDelta.y,this.projectionDelta.y)),Zp(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!kA(this.projectionDelta.x,this.prevProjectionDelta.x)||!kA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wh(),this.projectionDelta=Wh(),this.projectionDeltaWithTransform=Wh()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Wh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=ur(),g=c?c.source:void 0,x=this.layout?this.layout.source:void 0,y=g!==x,v=this.getStack(),w=!v||v.members.length<=1,N=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some(Rre));this.animationProgress=0;let k;this.mixTargetDelta=C=>{const j=C/1e3;AA(h.x,a.x,j),AA(h.y,a.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(I0(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Are(this.relativeTarget,this.relativeTargetOrigin,p,j),k&&lre(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=ur()),Ya(k,this.relativeTarget)),y&&(this.animationValues=d,dre(d,u,this.latestValues,j,N,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(qc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=os.update(()=>{q1.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=pf(0)),this.motionValue.jump(0,!1),this.currentAnimation=pre(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&EO(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ur();const h=pi(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const p=pi(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+p}Ya(l,c),Hh(l,d),Zp(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new yre),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Lw("z",a,u,this.animationValues);for(let d=0;d<Mw.length;d++)Lw(`rotate${Mw[d]}`,a,u,this.animationValues),Lw(`skew${Mw[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=K1(l?.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=K1(l?.pointerEvents)||""),this.hasProjected&&!Xu(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=cre(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),a.transform=h;const{x:p,y:g}=this.projectionDelta;a.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in g3){if(d[x]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:w}=g3[x],N=h==="none"?d[x]:y(d[x],u);if(v){const k=v.length;for(let C=0;C<k;C++)a[v[C]]=N}else w?this.options.visualElement.renderState.vars[x]=N:a[x]=N}this.options.layoutId&&(a.pointerEvents=u===this?K1(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(jA),this.root.sharedNodes.clear()}}}function wre(t){t.updateLayout()}function Nre(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:r}=t.options,i=e.source!==t.layout.source;r==="size"?Po(d=>{const h=i?e.measuredBox[d]:e.layoutBox[d],p=pi(h);h.min=n[d].min,h.max=h.min+p}):EO(r,e.layoutBox,n)&&Po(d=>{const h=i?e.measuredBox[d]:e.layoutBox[d],p=pi(n[d]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Wh();Zp(a,n,e.layoutBox);const l=Wh();i?Zp(l,t.applyTransform(s,!0),e.measuredBox):Zp(l,n,e.layoutBox);const c=!SO(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:p}=d;if(h&&p){const g=ur();I0(g,e.layoutBox,h.layoutBox);const x=ur();I0(x,n,p.layoutBox),kO(g,x)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Sre(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function kre(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Cre(t){t.clearSnapshot()}function jA(t){t.clearMeasurements()}function EA(t){t.isLayoutDirty=!1}function Tre(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $A(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Ire(t){t.resolveTargetDelta()}function jre(t){t.calcProjection()}function Ere(t){t.resetSkewAndRotation()}function $re(t){t.removeLeadSnapshot()}function AA(t,e,n){t.translate=Is(e.translate,0,n),t.scale=Is(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function RA(t,e,n,s){t.min=Is(e.min,n.min,s),t.max=Is(e.max,n.max,s)}function Are(t,e,n,s){RA(t.x,e.x,n.x,s),RA(t.y,e.y,n.y,s)}function Rre(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Dre={duration:.45,ease:[.4,0,.1,1]},DA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),PA=DA("applewebkit/")&&!DA("chrome/")?Math.round:Aa;function _A(t){t.min=PA(t.min),t.max=PA(t.max)}function Pre(t){_A(t.x),_A(t.y)}function EO(t,e,n){return t==="position"||t==="preserve-aspect"&&!sre(SA(e),SA(n),.2)}function _re(t){return t!==t.root&&t.scroll?.wasRoot}const Ore=jO({attachResizeListener:(t,e)=>gm(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),Bw={current:void 0},$O=jO({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Bw.current){const t=new Ore({});t.mount(window),t.setOptions({layoutScroll:!0}),Bw.current=t}return Bw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),_S=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function OA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Fre(...t){return e=>{let n=!1;const s=t.map(r=>{const i=OA(r,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():OA(t[r],null)}}}}function Mre(...t){return T.useCallback(Fre(...t),t)}class Lre extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const s=n.offsetParent,r=h3(s)&&s.offsetWidth||0,i=h3(s)&&s.offsetHeight||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=r-a.width-a.left,a.bottom=i-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Bre({children:t,isPresent:e,anchorX:n,anchorY:s,root:r,pop:i}){const a=T.useId(),l=T.useRef(null),c=T.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=T.useContext(_S),d=t.props?.ref??t?.ref,h=Mre(l,d);return T.useInsertionEffect(()=>{const{width:p,height:g,top:x,left:y,right:v,bottom:w}=c.current;if(e||i===!1||!l.current||!p||!g)return;const N=n==="left"?`left: ${y}`:`right: ${v}`,k=s==="bottom"?`bottom: ${w}`:`top: ${x}`;l.current.dataset.motionPopId=a;const C=document.createElement("style");u&&(C.nonce=u);const j=r??document.head;return j.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${g}px !important;
            ${N}px !important;
            ${k}px !important;
          }
        `),()=>{j.contains(C)&&j.removeChild(C)}},[e]),o.jsx(Lre,{isPresent:e,childRef:l,sizeRef:c,pop:i,children:i===!1?t:T.cloneElement(t,{ref:h})})}const zre=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:a,anchorX:l,anchorY:c,root:u})=>{const d=lS(Vre),h=T.useId();let p=!0,g=T.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:n,custom:r,onExitComplete:x=>{d.set(x,!0);for(const y of d.values())if(!y)return;s&&s()},register:x=>(d.set(x,!1),()=>d.delete(x))}),[n,d,s]);return i&&p&&(g={...g}),T.useMemo(()=>{d.forEach((x,y)=>d.set(y,!1))},[n]),T.useEffect(()=>{!n&&!d.size&&s&&s()},[n]),t=o.jsx(Bre,{pop:a==="popLayout",isPresent:n,anchorX:l,anchorY:c,root:u,children:t}),o.jsx(Dy.Provider,{value:g,children:t})};function Vre(){return new Map}function AO(t=!0){const e=T.useContext(Dy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=e,i=T.useId();T.useEffect(()=>{if(t)return r(i)},[t]);const a=T.useCallback(()=>t&&s&&s(i),[i,s,t]);return!n&&s?[!1,a]:[!0]}const w1=t=>t.key||"";function FA(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const Ure=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:a=!1,anchorX:l="left",anchorY:c="top",root:u})=>{const[d,h]=AO(a),p=T.useMemo(()=>FA(t),[t]),g=a&&!d?[]:p.map(w1),x=T.useRef(!0),y=T.useRef(p),v=lS(()=>new Map),w=T.useRef(new Set),[N,k]=T.useState(p),[C,j]=T.useState(p);i_(()=>{x.current=!1,y.current=p;for(let A=0;A<C.length;A++){const O=w1(C[A]);g.includes(O)?(v.delete(O),w.current.delete(O)):v.get(O)!==!0&&v.set(O,!1)}},[C,g.length,g.join("-")]);const R=[];if(p!==N){let A=[...p];for(let O=0;O<C.length;O++){const L=C[O],D=w1(L);g.includes(D)||(A.splice(O,0,L),R.push(L))}return i==="wait"&&R.length&&(A=R),j(FA(A)),k(p),null}const{forceRender:_}=T.useContext(oS);return o.jsx(o.Fragment,{children:C.map(A=>{const O=w1(A),L=a&&!d?!1:p===C||g.includes(O),D=()=>{if(w.current.has(O))return;if(w.current.add(O),v.has(O))v.set(O,!0);else return;let q=!0;v.forEach(V=>{V||(q=!1)}),q&&(_?.(),j(y.current),a&&h?.(),s&&s())};return o.jsx(zre,{isPresent:L,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:i,root:u,onExitComplete:L?void 0:D,anchorX:l,anchorY:c,children:A},O)})})},RO=T.createContext({strict:!1}),MA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let LA=!1;function Wre(){if(LA)return;const t={};for(const e in MA)t[e]={isEnabled:n=>MA[e].some(s=>!!n[s])};oO(t),LA=!0}function DO(){return Wre(),Ese()}function Gre(t){const e=DO();for(const n in t)e[n]={...e[n],...t[n]};oO(e)}const Hre=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function j0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Hre.has(t)}let PO=t=>!j0(t);function Kre(t){typeof t=="function"&&(PO=e=>e.startsWith("on")?!j0(e):t(e))}try{Kre(require("@emotion/is-prop-valid").default)}catch{}function qre(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(PO(r)||n===!0&&j0(r)||!e&&!j0(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}const Oy=T.createContext({});function Xre(t,e){if(_y(t)){const{initial:n,animate:s}=t;return{initial:n===!1||mm(n)?n:void 0,animate:mm(s)?s:void 0}}return t.inherit!==!1?e:{}}function Yre(t){const{initial:e,animate:n}=Xre(t,T.useContext(Oy));return T.useMemo(()=>({initial:e,animate:n}),[BA(e),BA(n)])}function BA(t){return Array.isArray(t)?t.join(" "):t}const OS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _O(t,e,n){for(const s in e)!Yr(e[s])&&!pO(s,n)&&(t[s]=e[s])}function Zre({transformTemplate:t},e){return T.useMemo(()=>{const n=OS();return DS(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Jre(t,e){const n=t.style||{},s={};return _O(s,n,t),Object.assign(s,Zre(t,e)),s}function Qre(t,e){const n={},s=Jre(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const OO=()=>({...OS(),attrs:{}});function eie(t,e,n,s){const r=T.useMemo(()=>{const i=OO();return mO(i,e,xO(s),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};_O(i,t.style,t),r.style={...i,...r.style}}return r}const tie=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function FS(t){return typeof t!="string"||t.includes("-")?!1:!!(tie.indexOf(t)>-1||/[A-Z]/u.test(t))}function nie(t,e,n,{latestValues:s},r,i=!1,a){const c=(a??FS(t)?eie:Qre)(e,s,r,t),u=qre(e,typeof t=="string",i),d=t!==T.Fragment?{...u,...c,ref:n}:{},{children:h}=e,p=T.useMemo(()=>Yr(h)?h.get():h,[h]);return T.createElement(t,{...d,children:p})}function sie({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,r){return{latestValues:rie(n,s,r,t),renderState:e()}}function rie(t,e,n,s){const r={},i=s(t,{});for(const p in i)r[p]=K1(i[p]);let{initial:a,animate:l}=t;const c=_y(t),u=iO(t);e&&u&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;if(h&&typeof h!="boolean"&&!Py(h)){const p=Array.isArray(h)?h:[h];for(let g=0;g<p.length;g++){const x=CS(t,p[g]);if(x){const{transitionEnd:y,transition:v,...w}=x;for(const N in w){let k=w[N];if(Array.isArray(k)){const C=d?k.length-1:0;k=k[C]}k!==null&&(r[N]=k)}for(const N in y)r[N]=y[N]}}}return r}const FO=t=>(e,n)=>{const s=T.useContext(Oy),r=T.useContext(Dy),i=()=>sie(t,e,s,r);return n?i():lS(i)},iie=FO({scrapeMotionValuesFromProps:PS,createRenderState:OS}),aie=FO({scrapeMotionValuesFromProps:yO,createRenderState:OO}),oie=Symbol.for("motionComponentSymbol");function lie(t,e,n){const s=T.useRef(n);T.useInsertionEffect(()=>{s.current=n});const r=T.useRef(null);return T.useCallback(i=>{i&&t.onMount?.(i),e&&(i?e.mount(i):e.unmount());const a=s.current;if(typeof a=="function")if(i){const l=a(i);typeof l=="function"&&(r.current=l)}else r.current?(r.current(),r.current=null):a(i);else a&&(a.current=i)},[e])}const MO=T.createContext({});function Fh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function cie(t,e,n,s,r,i){const{visualElement:a}=T.useContext(Oy),l=T.useContext(RO),c=T.useContext(Dy),u=T.useContext(_S),d=u.reducedMotion,h=u.skipAnimations,p=T.useRef(null),g=T.useRef(!1);s=s||l.renderer,!p.current&&s&&(p.current=s(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d,skipAnimations:h,isSVG:i}),g.current&&p.current&&(p.current.manuallyAnimateOnMount=!0));const x=p.current,y=T.useContext(MO);x&&!x.projection&&r&&(x.type==="html"||x.type==="svg")&&uie(p.current,n,r,y);const v=T.useRef(!1);T.useInsertionEffect(()=>{x&&v.current&&x.update(n,c)});const w=n[H_],N=T.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return i_(()=>{g.current=!0,x&&(v.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),x.scheduleRenderMicrotask(),N.current&&x.animationState&&x.animationState.animateChanges())}),T.useEffect(()=>{x&&(!N.current&&x.animationState&&x.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),N.current=!1),x.enteringChildren=void 0)}),x}function uie(t,e,n,s){const{layoutId:r,layout:i,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:LO(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!a||l&&Fh(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:c,layoutRoot:u})}function LO(t){if(t)return t.options.allowProjection!==!1?t.projection:LO(t.parent)}function zw(t,{forwardMotionProps:e=!1,type:n}={},s,r){s&&Gre(s);const i=n?n==="svg":FS(t),a=i?aie:iie;function l(u,d){let h;const p={...T.useContext(_S),...u,layoutId:die(u)},{isStatic:g}=p,x=Yre(u),y=a(u,g);if(!g&&r_){hie();const v=fie(p);h=v.MeasureLayout,x.visualElement=cie(t,y,p,r,v.ProjectionNode,i)}return o.jsxs(Oy.Provider,{value:x,children:[h&&x.visualElement?o.jsx(h,{visualElement:x.visualElement,...p}):null,nie(t,u,lie(y,x.visualElement,d),y,g,e,i)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=T.forwardRef(l);return c[oie]=t,c}function die({layoutId:t}){const e=T.useContext(oS).id;return e&&t!==void 0?e+"-"+t:t}function hie(t,e){T.useContext(RO).strict}function fie(t){const e=DO(),{drag:n,layout:s}=e;if(!n&&!s)return{};const r={...n,...s};return{MeasureLayout:n?.isEnabled(t)||s?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function pie(t,e){if(typeof Proxy>"u")return zw;const n=new Map,s=(i,a)=>zw(i,a,t,e),r=(i,a)=>s(i,a);return new Proxy(r,{get:(i,a)=>a==="create"?s:(n.has(a)||n.set(a,zw(a,void 0,t,e)),n.get(a))})}const mie=(t,e)=>e.isSVG??FS(t)?new Hse(e):new Bse(e,{allowProjection:t!==T.Fragment});class gie extends lu{constructor(e){super(e),e.animationState||(e.animationState=Zse(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Py(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let xie=0;class yie extends lu{constructor(){super(...arguments),this.id=xie++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const vie={animation:{Feature:gie},exit:{Feature:yie}};function Gm(t){return{point:{x:t.pageX,y:t.pageY}}}const bie=t=>e=>ES(e)&&t(e,Gm(e));function Jp(t,e,n,s){return gm(t,e,bie(n),s)}const BO=({current:t})=>t?t.ownerDocument.defaultView:null,zA=(t,e)=>Math.abs(t-e);function wie(t,e){const n=zA(t.x,e.x),s=zA(t.y,e.y);return Math.sqrt(n**2+s**2)}const VA=new Set(["auto","scroll"]);class zO{constructor(e,n,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=g=>{this.handleScroll(g.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Uw(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,y=wie(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!y)return;const{point:v}=g,{timestamp:w}=Dr;this.history.push({...v,timestamp:w});const{onStart:N,onMove:k}=this.handlers;x||(N&&N(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Vw(x,this.transformPagePoint),os.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:w}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Uw(g.type==="pointercancel"?this.lastMoveEventInfo:Vw(x,this.transformPagePoint),this.history);this.startEvent&&y&&y(g,N),v&&v(g,N)},!ES(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=a,this.contextWindow=r||window;const c=Gm(e),u=Vw(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=Dr;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,Uw(u,this.history)),this.removeListeners=Vm(Jp(this.contextWindow,"pointermove",this.handlePointerMove),Jp(this.contextWindow,"pointerup",this.handlePointerUp),Jp(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let n=e.parentElement;for(;n;){const s=getComputedStyle(n);(VA.has(s.overflowX)||VA.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const s=e===window,r=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:r.x-n.x,y:r.y-n.y};i.x===0&&i.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,r),os.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),qc(this.updatePoint)}}function Vw(t,e){return e?{point:e(t.point)}:t}function UA(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Uw({point:t},e){return{point:t,delta:UA(t,VO(e)),offset:UA(t,Nie(e)),velocity:Sie(e,.1)}}function Nie(t){return t[0]}function VO(t){return t[t.length-1]}function Sie(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=VO(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>ro(e)));)n--;if(!s)return{x:0,y:0};s===t[0]&&t.length>2&&r.timestamp-s.timestamp>ro(e)*2&&(s=t[1]);const i=ka(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function kie(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Is(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Is(n,t,s.max):Math.min(t,n)),t}function WA(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Cie(t,{top:e,left:n,bottom:s,right:r}){return{x:WA(t.x,n,r),y:WA(t.y,e,s)}}function GA(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function Tie(t,e){return{x:GA(t.x,e.x),y:GA(t.y,e.y)}}function Iie(t,e){let n=.5;const s=pi(t),r=pi(e);return r>s?n=hm(e.min,e.max-s,t.min):s>r&&(n=hm(t.min,t.max-r,e.min)),tl(0,1,n)}function jie(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const x3=.35;function Eie(t=x3){return t===!1?t=0:t===!0&&(t=x3),{x:HA(t,"left","right"),y:HA(t,"top","bottom")}}function HA(t,e,n){return{min:KA(t,e),max:KA(t,n)}}function KA(t,e){return typeof t=="number"?t:t[e]||0}const $ie=new WeakMap;class Aie{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ur(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{n&&this.snapToCursor(Gm(h).point),this.stopAnimation()},a=(h,p)=>{const{drag:g,dragPropagation:x,onDragStart:y}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ise(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Po(w=>{let N=this.getAxisMotionValue(w).get()||0;if(Ko.test(N)){const{projection:k}=this.visualElement;if(k&&k.layout){const C=k.layout.layoutBox[w];C&&(N=pi(C)*(parseFloat(N)/100))}}this.originPoint[w]=N}),y&&os.update(()=>y(h,p),!1,!0),l3(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},l=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:y,onDrag:v}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=p;if(x&&this.currentDirection===null){this.currentDirection=Die(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,w),this.updateAxis("y",p.point,w),this.visualElement.render(),v&&os.update(()=>v(h,p),!1,!0)},c=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new zO(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:s,contextWindow:BO(this.visualElement),element:this.visualElement.current})}stop(e,n){const s=e||this.latestPointerEvent,r=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!s)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&os.postRender(()=>l(s,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!N1(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=kie(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Fh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=Cie(s.layoutBox,e):this.constraints=!1,this.elastic=Eie(n),r!==this.constraints&&!Fh(e)&&s&&this.constraints&&!this.hasMutatedConstraints&&Po(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=jie(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Fh(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=Pse(s,r.root,this.visualElement.getTransformPagePoint());let a=Tie(r.layout.layoutBox,i);if(n){const l=n(Ase(a));this.hasMutatedConstraints=!!l,l&&(a=cO(l))}return a}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Po(d=>{if(!N1(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const p=r?200:1e6,g=r?40:1e7,x={type:"inertia",velocity:s?e[d]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return l3(this.visualElement,e),s.start(kS(e,s,0,n,this.visualElement,!1))}stopAnimation(){Po(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Po(n=>{const{drag:s}=this.getProps();if(!N1(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[n],c=i.get()||0;i.set(e[n]-Is(a,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Fh(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Po(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();r[a]=Iie({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.constraints=!1,this.resolveConstraints(),Po(a=>{if(!N1(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Is(c,u,r[a]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;$ie.set(this.visualElement,this);const e=this.visualElement.current,n=Jp(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps(),p=u.target,g=p!==e&&dse(p);d&&h&&!g&&this.start(u)});let s;const r=()=>{const{dragConstraints:u}=this.getProps();Fh(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),s||(s=Rie(e,u.current,()=>this.scalePositionWithinConstraints())))},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),os.read(r);const l=gm(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Po(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{l(),n(),a(),c&&c(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=x3,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function qA(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function Rie(t,e,n){const s=tA(t,qA(n)),r=tA(e,qA(n));return()=>{s(),r()}}function N1(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Die(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Pie extends lu{constructor(e){super(e),this.removeGroupControls=Aa,this.removeListeners=Aa,this.controls=new Aie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Aa}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Ww=t=>(e,n)=>{t&&os.update(()=>t(e,n),!1,!0)};class _ie extends lu{constructor(){super(...arguments),this.removePointerDownListener=Aa}onPointerDown(e){this.session=new zO(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BO(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:Ww(e),onStart:Ww(n),onMove:Ww(s),onEnd:(i,a)=>{delete this.session,r&&os.postRender(()=>r(i,a))}}}mount(){this.removePointerDownListener=Jp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Gw=!1;class Oie extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),Gw&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),q1.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,{projection:a}=s;return a&&(a.isPresent=i,e.layoutDependency!==n&&a.setOptions({...a.options,layoutDependency:n}),Gw=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||os.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),jS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;Gw=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function UO(t){const[e,n]=AO(),s=T.useContext(oS);return o.jsx(Oie,{...t,layoutGroup:s,switchLayoutGroup:T.useContext(MO),isPresent:e,safeToRemove:n})}const Fie={pan:{Feature:_ie},drag:{Feature:Pie,ProjectionNode:$O,MeasureLayout:UO}};function XA(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,i=s[r];i&&os.postRender(()=>i(e,Gm(e)))}class Mie extends lu{mount(){const{current:e}=this.node;e&&(this.unmount=ose(e,(n,s)=>(XA(this.node,s,"Start"),r=>XA(this.node,r,"End"))))}unmount(){}}class Lie extends lu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vm(gm(this.node.current,"focus",()=>this.onFocus()),gm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function YA(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),i=s[r];i&&os.postRender(()=>i(e,Gm(e)))}class Bie extends lu{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:s}=this.node.props;this.unmount=fse(e,(r,i)=>(YA(this.node,i,"Start"),(a,{success:l})=>YA(this.node,a,l?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:s?.tap===!1})}unmount(){}}const y3=new WeakMap,Hw=new WeakMap,zie=t=>{const e=y3.get(t.target);e&&e(t)},Vie=t=>{t.forEach(zie)};function Uie({root:t,...e}){const n=t||document;Hw.has(n)||Hw.set(n,{});const s=Hw.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(Vie,{root:t,...e})),s[r]}function Wie(t,e,n){const s=Uie(e);return y3.set(t,n),s.observe(t),()=>{y3.delete(t),s.unobserve(t)}}const Gie={some:0,all:1};class Hie extends lu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:Gie[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=u?d:h;p&&p(c)};return Wie(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Kie(e,n))&&this.startObserver()}unmount(){}}function Kie({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const qie={inView:{Feature:Hie},tap:{Feature:Bie},focus:{Feature:Lie},hover:{Feature:Mie}},Xie={layout:{ProjectionNode:$O,MeasureLayout:UO}},Yie={...vie,...qie,...Fie,...Xie},Rl=pie(Yie,mie);function Hm(){const{t,i18n:e}=Ef(),{isRTL:n,direction:s,currentLanguage:r,setLanguage:i,toggleLanguage:a}=Rf();return{t,i18n:e,isRTL:n,direction:s,currentLanguage:r,setLanguage:i,toggleLanguage:a,rtlClass:(v,w)=>n&&w||v,flipClass:v=>{if(!n)return v;const w={left:"right",right:"left","ml-":"mr-","mr-":"ml-","pl-":"pr-","pr-":"pl-","text-left":"text-right","text-right":"text-left","border-l":"border-r","border-r":"border-l","rounded-l":"rounded-r","rounded-r":"rounded-l","-left-":"-right-","-right-":"-left-","left-":"right-","right-":"left-"};let N=v;for(const[k,C]of Object.entries(w))N.includes(k)&&(N=N.replace(new RegExp(k,"g"),C));return N},flexDir:(v="row")=>n?v==="row"?"flex-row-reverse":v==="row-reverse"?"flex-row":`flex-${v}`:`flex-${v}`,textAlign:(v="left")=>v==="center"?"text-center":n?v==="left"?"text-right":"text-left":`text-${v}`,iconRotation:(v=!0)=>n&&v?"transform rotate-180":"",spacing:{ms:v=>n?`mr-${v}`:`ml-${v}`,me:v=>n?`ml-${v}`:`mr-${v}`,ps:v=>n?`pr-${v}`:`pl-${v}`,pe:v=>n?`pl-${v}`:`pr-${v}`},formatNumber:v=>r==="ar"?v.toLocaleString("ar-EG"):v.toLocaleString("en-US"),formatDate:(v,w)=>{const N=typeof v=="string"?new Date(v):v,k=r==="ar"?"ar-EG":"en-US",C={month:"long",day:"numeric",year:"numeric",...w};return N.toLocaleDateString(k,C)},formatPercent:v=>r==="ar"?`${v.toLocaleString("ar-EG")}`:`${v}%`}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zie=1e-7,Jie=1e-4;class WO{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class MS{refCount(e){return Di("refCount")}incRef(e){return Di("incRef")}timerAvailable(){return!0}time(e){return Di("time")}read(e){return Di("read")}readSync(e){return Di("readSync")}readToGPU(e,n){return Di("readToGPU")}numDataIds(){return Di("numDataIds")}disposeData(e,n){return Di("disposeData")}write(e,n,s){return Di("write")}move(e,n,s,r,i){return Di("move")}createTensorFromGPUData(e,n,s){return Di("createTensorFromGPUData")}memory(){return Di("memory")}floatPrecision(){return Di("floatPrecision")}epsilon(){return this.floatPrecision()===32?Zie:Jie}dispose(){return Di("dispose")}}function Di(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qie(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Mh(t,e,n)}function LS(t,e,n){return Math.max(t,Math.min(e,n))}function BS(t){return t%2===0?t:t+1}function Mh(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}function eae(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function K(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Hi(t,e,n=""){K(bn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Of(t){K(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Le(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function tae(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function bn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function mf(t){return t%1===0}function v3(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Qh(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function ZA(t,e=r=>0,n,s){return new Promise((r,i)=>{let a=0;const l=()=>{if(t()){r();return}a++;const c=e(a);if(n!=null&&a>=n){i();return}s!=null?s(l,c):setTimeout(l,c)};l()})}function GO(t,e){let n=1,s=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${i}`);s=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(s===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const r=t.slice();return r[s]=e/n,r}function fn(t,e){const n=e.length;return t=t==null?e.map((s,r)=>r):[].concat(t),K(t.every(s=>s>=-n&&s<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),K(t.every(s=>mf(s)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(s=>s<0?n+s:s)}function cu(t,e){const n=[],s=[],r=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||r?null:fn(e,t).sort();let a=0;for(let l=0;l<t.length;++l){if(i!=null){if(i[a]===l&&t[l]!==1)throw new Error(`Can't squeeze axis ${l} since its dim '${t[l]}' is not 1`);(i[a]==null||i[a]>l)&&t[l]===1&&(n.push(t[l]),s.push(l)),i[a]<=l&&a++}t[l]!==1&&(n.push(t[l]),s.push(l))}return{newShape:n,keptDims:s}}function Cr(t,e){return _s(t,e)}function _s(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function nae(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${e} being uploaded contains ${s}.`)}}function sae(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function HO(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function E0(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function rae(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Km(t){return typeof t=="string"||t instanceof String}function iae(t){return typeof t=="boolean"}function b3(t){return typeof t=="number"}function Ff(t){return Array.isArray(t)?Ff(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":b3(t)?"float32":Km(t)?"string":iae(t)?"bool":"float32"}function w3(t){return!!(t&&t.constructor&&t.call&&t.apply)}function N3(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Mt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let s=e-3;s>=0;--s)n[s]=n[s+1]*t[s+1];return n}function KO(t,e,n,s=!1){const r=new Array;if(e.length===1){const i=e[0]*(s?2:1);for(let a=0;a<i;a++)r[a]=n[t+a]}else{const i=e[0],a=e.slice(1),l=a.reduce((c,u)=>c*u)*(s?2:1);for(let c=0;c<i;c++)r[c]=KO(t+c*l,a,n,s)}return r}function Ra(t,e,n=!1){if(t.length===0)return e[0];const s=t.reduce((r,i)=>r*i)*(n?2:1);if(s===0)return[];if(s!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return KO(0,t,e,n)}function aae(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function zS(t,e){const n=Or(t,e);for(let s=0;s<n.length;s++)n[s]=1;return n}function Or(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function qO(t,e){const n=t.reduce((s,r)=>s*r,1);if(e==null||e==="float32")return Ra(t,new Float32Array(n));if(e==="int32")return Ra(t,new Int32Array(n));if(e==="bool")return Ra(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function oa(t){t.forEach(e=>{K(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function qo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let s=t[t.length-1];for(let r=0;r<t.length-1;++r)s+=n[r]*t[r];return s}function Mf(t,e,n){if(e===0)return[];if(e===1)return[t];const s=new Array(e);for(let r=0;r<s.length-1;++r)s[r]=Math.floor(t/n[r]),t-=s[r]*n[r];return s[s.length-1]=t,s}function vd(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JA="tfjsflags";class oae{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=lae,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Pe().getBool("IS_TEST")||Pe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,s){if(this.flagRegistry[e]={evaluationFn:n,setHook:s},this.urlFlags[e]!=null){const r=this.urlFlags[e];Pe().getBool("IS_TEST")||Pe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${r}.`),this.set(e,r)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(vd(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);JA in e&&e[JA].split(",").forEach(s=>{const[r,i]=s.split(":");this.urlFlags[r]=uae(r,i)})}}function lae(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...s)=>(cae(e,s[0],s[1]),s.join("="))),e}function cae(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function uae(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Pe(){return XO}let XO=null;function dae(t){XO=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Kw;function YO(){if(Kw==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Kw=t}return Kw}function hae(){const t=YO();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function VS(t,e){const n=hae();if(n.has(t))return n.get(t);{const s=e();return n.set(t,s),n.get(t)}}const Fy="Abs",qm="Acos",Xm="Acosh",Lf="Add",My="AddN",US="All",WS="Any",Ly="ArgMax",By="ArgMin",Ym="Asin",Zm="Asinh",Jm="Atan",Qm="Atanh",eg="Atan2",zy="AvgPool",GS="AvgPoolGrad",Vy="AvgPool3D",HS="AvgPool3DGrad",Uy="BatchMatMul",Wy="BatchToSpaceND",KS="Bincount",Gy="BitwiseAnd",fae="BroadcastTo",qS="BroadcastArgs",tg="Cast",ng="Ceil",sg="ClipByValue",XS="Complex",Hy="ComplexAbs",Ky="Concat",qy="Conv2D",YS="Conv2DBackpropFilter",Xy="Conv2DBackpropInput",Yy="Conv3D",ZS="Conv3DBackpropFilterV2",JS="Conv3DBackpropInputV2",rg="Cos",ig="Cosh",QS="Cumprod",Zy="Cumsum",ek="CropAndResize",tk="DenseBincount",nk="DepthToSpace",Jy="DepthwiseConv2dNative",sk="DepthwiseConv2dNativeBackpropFilter",rk="DepthwiseConv2dNativeBackpropInput",ik="Diag",Qy="Dilation2D",S3="Dilation2DBackpropInput",k3="Dilation2DBackpropFilter",pae="Draw",ag="RealDiv",ak="Einsum",og="Elu",ok="EluGrad",lg="Erf",e2="Equal",cg="Exp",t2="ExpandDims",ug="Expm1",lk="FFT",ck="Fill",uk="FlipLeftRight",dg="Floor",hg="FloorDiv",n2="FusedBatchNorm",s2="GatherV2",dk="GatherNd",r2="Greater",fg="GreaterEqual",pg="Identity",hk="IFFT",fk="Imag",mg="IsFinite",gg="IsInf",xg="IsNan",i2="LeakyRelu",a2="Less",o2="LessEqual",pk="LinSpace",yg="Log",vg="Log1p",l2="LogicalAnd",c2="LogicalNot",u2="LogicalOr",mae="LogSoftmax",d2="LRN",mk="LRNGrad",h2="Max",bg="Maximum",f2="MaxPool",gk="MaxPoolGrad",p2="MaxPool3D",xk="MaxPool3DGrad",yk="MaxPoolWithArgmax",m2="Mean",g2="Min",wg="Minimum",x2="MirrorPad",Ng="Mod",vk="Multinomial",Sg="Multiply",y2="Neg",v2="NotEqual",bk="NonMaxSuppressionV3",wk="NonMaxSuppressionV4",Nk="NonMaxSuppressionV5",b2="OnesLike",w2="OneHot",N2="Pack",S2="PadV2",kg="Pow",k2="Prelu",C2="Prod",Sk="RaggedGather",kk="RaggedRange",Ck="RaggedTensorToTensor",Tk="Range",Ik="Real",Cg="Reciprocal",Tg="Relu",T2="Reshape",I2="ResizeNearestNeighbor",jk="ResizeNearestNeighborGrad",j2="ResizeBilinear",Ek="ResizeBilinearGrad",Ig="Relu6",E2="Reverse",jg="Round",Eg="Rsqrt",$k="ScatterNd",Ak="TensorScatterUpdate",Rk="SearchSorted",$2="Select",$g="Selu",A2="Slice",Ag="Sin",Rg="Sinh",Dg="Sign",Pg="Sigmoid",_g="Softplus",Og="Sqrt",R2="Sum",D2="SpaceToBatchND",P2="SplitV",_2="Softmax",Dk="SparseFillEmptyRows",Pk="SparseReshape",_k="SparseSegmentMean",Ok="SparseSegmentSum",Fk="SparseToDense",Fg="SquaredDifference",Mk="Square",O2="StaticRegexReplace",Lk="StridedSlice",Bk="StringNGrams",zk="StringSplit",Vk="StringToHashBucketFast",Mg="Sub",Lg="Tan",Bg="Tanh",zg="Tile",Uk="TopK",Wk="Transform",ef="Transpose",Gk="Unique",F2="Unpack",M2="UnsortedSegmentSum",L2="ZerosLike",Vg="Step",C3="FromPixels",Hk="RotateWithOffset",$0="_FusedMatMul",A0="FusedConv2D",R0="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ta(...t){Pe().getBool("IS_TEST")||Pe().getBool("PROD")||console.warn(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D0=VS("kernelRegistry",()=>new Map),T3=VS("gradRegistry",()=>new Map);function I3(t,e){const n=JO(t,e);return D0.get(n)}function QA(t){return T3.get(t)}function e5(t){const e=D0.entries(),n=[];for(;;){const{done:s,value:r}=e.next();if(s)break;const[i,a]=r,[l]=i.split("_");l===t&&n.push(a)}return n}function ZO(t){const{kernelName:e,backendName:n}=t,s=JO(e,n);D0.has(s)&&ta(`The kernel '${e}' for backend '${n}' is already registered`),D0.set(s,t)}function gae(t){const{kernelName:e}=t;T3.has(e)&&Pe().getBool("DEBUG")&&ta(`Overriding the gradient for '${e}'`),T3.set(e,t)}function JO(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QO(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var qw,t5;function xae(){if(t5)return qw;t5=1,qw=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(L,D,q){this.low=L|0,this.high=D|0,this.unsigned=!!q}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(L){return(L&&L.__isLong__)===!0}e.isLong=n;var s={},r={};function i(L,D){var q,V,ne;return D?(L>>>=0,(ne=0<=L&&L<256)&&(V=r[L],V)?V:(q=l(L,(L|0)<0?-1:0,!0),ne&&(r[L]=q),q)):(L|=0,(ne=-128<=L&&L<128)&&(V=s[L],V)?V:(q=l(L,L<0?-1:0,!1),ne&&(s[L]=q),q))}e.fromInt=i;function a(L,D){if(isNaN(L))return D?N:w;if(D){if(L<0)return N;if(L>=x)return _}else{if(L<=-y)return A;if(L+1>=y)return R}return L<0?a(-L,D).neg():l(L%g|0,L/g|0,D)}e.fromNumber=a;function l(L,D,q){return new e(L,D,q)}e.fromBits=l;var c=Math.pow;function u(L,D,q){if(L.length===0)throw Error("empty string");if(L==="NaN"||L==="Infinity"||L==="+Infinity"||L==="-Infinity")return w;if(typeof D=="number"?(q=D,D=!1):D=!!D,q=q||10,q<2||36<q)throw RangeError("radix");var V;if((V=L.indexOf("-"))>0)throw Error("interior hyphen");if(V===0)return u(L.substring(1),D,q).neg();for(var ne=a(c(q,8)),J=w,ee=0;ee<L.length;ee+=8){var te=Math.min(8,L.length-ee),X=parseInt(L.substring(ee,ee+te),q);if(te<8){var Q=a(c(q,te));J=J.mul(Q).add(a(X))}else J=J.mul(ne),J=J.add(a(X))}return J.unsigned=D,J}e.fromString=u;function d(L,D){return typeof L=="number"?a(L,D):typeof L=="string"?u(L,D):l(L.low,L.high,typeof D=="boolean"?D:L.unsigned)}e.fromValue=d;var h=65536,p=1<<24,g=h*h,x=g*g,y=x/2,v=i(p),w=i(0);e.ZERO=w;var N=i(0,!0);e.UZERO=N;var k=i(1);e.ONE=k;var C=i(1,!0);e.UONE=C;var j=i(-1);e.NEG_ONE=j;var R=l(-1,2147483647,!1);e.MAX_VALUE=R;var _=l(-1,-1,!0);e.MAX_UNSIGNED_VALUE=_;var A=l(0,-2147483648,!1);e.MIN_VALUE=A;var O=e.prototype;return O.toInt=function(){return this.unsigned?this.low>>>0:this.low},O.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},O.toString=function(D){if(D=D||10,D<2||36<D)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(A)){var q=a(D),V=this.div(q),ne=V.mul(q).sub(this);return V.toString(D)+ne.toInt().toString(D)}else return"-"+this.neg().toString(D);for(var J=a(c(D,6),this.unsigned),ee=this,te="";;){var X=ee.div(J),Q=ee.sub(X.mul(J)).toInt()>>>0,G=Q.toString(D);if(ee=X,ee.isZero())return G+te;for(;G.length<6;)G="0"+G;te=""+G+te}},O.getHighBits=function(){return this.high},O.getHighBitsUnsigned=function(){return this.high>>>0},O.getLowBits=function(){return this.low},O.getLowBitsUnsigned=function(){return this.low>>>0},O.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var D=this.high!=0?this.high:this.low,q=31;q>0&&(D&1<<q)==0;q--);return this.high!=0?q+33:q+1},O.isZero=function(){return this.high===0&&this.low===0},O.eqz=O.isZero,O.isNegative=function(){return!this.unsigned&&this.high<0},O.isPositive=function(){return this.unsigned||this.high>=0},O.isOdd=function(){return(this.low&1)===1},O.isEven=function(){return(this.low&1)===0},O.equals=function(D){return n(D)||(D=d(D)),this.unsigned!==D.unsigned&&this.high>>>31===1&&D.high>>>31===1?!1:this.high===D.high&&this.low===D.low},O.eq=O.equals,O.notEquals=function(D){return!this.eq(D)},O.neq=O.notEquals,O.ne=O.notEquals,O.lessThan=function(D){return this.comp(D)<0},O.lt=O.lessThan,O.lessThanOrEqual=function(D){return this.comp(D)<=0},O.lte=O.lessThanOrEqual,O.le=O.lessThanOrEqual,O.greaterThan=function(D){return this.comp(D)>0},O.gt=O.greaterThan,O.greaterThanOrEqual=function(D){return this.comp(D)>=0},O.gte=O.greaterThanOrEqual,O.ge=O.greaterThanOrEqual,O.compare=function(D){if(n(D)||(D=d(D)),this.eq(D))return 0;var q=this.isNegative(),V=D.isNegative();return q&&!V?-1:!q&&V?1:this.unsigned?D.high>>>0>this.high>>>0||D.high===this.high&&D.low>>>0>this.low>>>0?-1:1:this.sub(D).isNegative()?-1:1},O.comp=O.compare,O.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(k)},O.neg=O.negate,O.add=function(D){n(D)||(D=d(D));var q=this.high>>>16,V=this.high&65535,ne=this.low>>>16,J=this.low&65535,ee=D.high>>>16,te=D.high&65535,X=D.low>>>16,Q=D.low&65535,G=0,H=0,ie=0,de=0;return de+=J+Q,ie+=de>>>16,de&=65535,ie+=ne+X,H+=ie>>>16,ie&=65535,H+=V+te,G+=H>>>16,H&=65535,G+=q+ee,G&=65535,l(ie<<16|de,G<<16|H,this.unsigned)},O.subtract=function(D){return n(D)||(D=d(D)),this.add(D.neg())},O.sub=O.subtract,O.multiply=function(D){if(this.isZero())return w;if(n(D)||(D=d(D)),t){var q=t.mul(this.low,this.high,D.low,D.high);return l(q,t.get_high(),this.unsigned)}if(D.isZero())return w;if(this.eq(A))return D.isOdd()?A:w;if(D.eq(A))return this.isOdd()?A:w;if(this.isNegative())return D.isNegative()?this.neg().mul(D.neg()):this.neg().mul(D).neg();if(D.isNegative())return this.mul(D.neg()).neg();if(this.lt(v)&&D.lt(v))return a(this.toNumber()*D.toNumber(),this.unsigned);var V=this.high>>>16,ne=this.high&65535,J=this.low>>>16,ee=this.low&65535,te=D.high>>>16,X=D.high&65535,Q=D.low>>>16,G=D.low&65535,H=0,ie=0,de=0,ke=0;return ke+=ee*G,de+=ke>>>16,ke&=65535,de+=J*G,ie+=de>>>16,de&=65535,de+=ee*Q,ie+=de>>>16,de&=65535,ie+=ne*G,H+=ie>>>16,ie&=65535,ie+=J*Q,H+=ie>>>16,ie&=65535,ie+=ee*X,H+=ie>>>16,ie&=65535,H+=V*G+ne*Q+J*X+ee*te,H&=65535,l(de<<16|ke,H<<16|ie,this.unsigned)},O.mul=O.multiply,O.divide=function(D){if(n(D)||(D=d(D)),D.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&D.low===-1&&D.high===-1)return this;var q=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,D.low,D.high);return l(q,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?N:w;var V,ne,J;if(this.unsigned){if(D.unsigned||(D=D.toUnsigned()),D.gt(this))return N;if(D.gt(this.shru(1)))return C;J=N}else{if(this.eq(A)){if(D.eq(k)||D.eq(j))return A;if(D.eq(A))return k;var ee=this.shr(1);return V=ee.div(D).shl(1),V.eq(w)?D.isNegative()?k:j:(ne=this.sub(D.mul(V)),J=V.add(ne.div(D)),J)}else if(D.eq(A))return this.unsigned?N:w;if(this.isNegative())return D.isNegative()?this.neg().div(D.neg()):this.neg().div(D).neg();if(D.isNegative())return this.div(D.neg()).neg();J=w}for(ne=this;ne.gte(D);){V=Math.max(1,Math.floor(ne.toNumber()/D.toNumber()));for(var te=Math.ceil(Math.log(V)/Math.LN2),X=te<=48?1:c(2,te-48),Q=a(V),G=Q.mul(D);G.isNegative()||G.gt(ne);)V-=X,Q=a(V,this.unsigned),G=Q.mul(D);Q.isZero()&&(Q=k),J=J.add(Q),ne=ne.sub(G)}return J},O.div=O.divide,O.modulo=function(D){if(n(D)||(D=d(D)),t){var q=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,D.low,D.high);return l(q,t.get_high(),this.unsigned)}return this.sub(this.div(D).mul(D))},O.mod=O.modulo,O.rem=O.modulo,O.not=function(){return l(~this.low,~this.high,this.unsigned)},O.and=function(D){return n(D)||(D=d(D)),l(this.low&D.low,this.high&D.high,this.unsigned)},O.or=function(D){return n(D)||(D=d(D)),l(this.low|D.low,this.high|D.high,this.unsigned)},O.xor=function(D){return n(D)||(D=d(D)),l(this.low^D.low,this.high^D.high,this.unsigned)},O.shiftLeft=function(D){return n(D)&&(D=D.toInt()),(D&=63)===0?this:D<32?l(this.low<<D,this.high<<D|this.low>>>32-D,this.unsigned):l(0,this.low<<D-32,this.unsigned)},O.shl=O.shiftLeft,O.shiftRight=function(D){return n(D)&&(D=D.toInt()),(D&=63)===0?this:D<32?l(this.low>>>D|this.high<<32-D,this.high>>D,this.unsigned):l(this.high>>D-32,this.high>=0?0:-1,this.unsigned)},O.shr=O.shiftRight,O.shiftRightUnsigned=function(D){if(n(D)&&(D=D.toInt()),D&=63,D===0)return this;var q=this.high;if(D<32){var V=this.low;return l(V>>>D|q<<32-D,q>>>D,this.unsigned)}else return D===32?l(q,0,this.unsigned):l(q>>>D-32,0,this.unsigned)},O.shru=O.shiftRightUnsigned,O.shr_u=O.shiftRightUnsigned,O.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},O.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},O.toBytes=function(D){return D?this.toBytesLE():this.toBytesBE()},O.toBytesLE=function(){var D=this.high,q=this.low;return[q&255,q>>>8&255,q>>>16&255,q>>>24,D&255,D>>>8&255,D>>>16&255,D>>>24]},O.toBytesBE=function(){var D=this.high,q=this.low;return[D>>>24,D>>>16&255,D>>>8&255,D&255,q>>>24,q>>>16&255,q>>>8&255,q&255]},e.fromBytes=function(D,q,V){return V?e.fromBytesLE(D,q):e.fromBytesBE(D,q)},e.fromBytesLE=function(D,q){return new e(D[0]|D[1]<<8|D[2]<<16|D[3]<<24,D[4]|D[5]<<8|D[6]<<16|D[7]<<24,q)},e.fromBytesBE=function(D,q){return new e(D[4]<<24|D[5]<<16|D[6]<<8|D[7],D[0]<<24|D[1]<<16|D[2]<<8|D[3],q)},qw}var eF=xae();const tF=I4(eF),yae=fD({__proto__:null,default:tF},[eF]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zu=tF||yae;function B2(t){return Zu.fromString(t,!0,16)}const nF=B2("c3a5c85c97cb3127"),Yu=B2("b492b66fbe98f273"),qr=B2("9ae16a3b2f90404f");function j3(t){return t.xor(t.shru(47))}function sF(t,e,n){const s=t.slice(e,e+n);return Zu.fromBytes(Array.from(s),!0,!0)}function es(t,e){return sF(t,e,8)}function n5(t,e){return sF(t,e,4)}function dr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function _c(t,e,n=B2("9ddfea08eb382d69")){let s=t.xor(e).mul(n);s=s.xor(s.shru(47));let r=e.xor(s).mul(n);return r=r.xor(r.shru(47)),r=r.mul(n),r}function vae(t,e,n,s,r,i){r=r.add(t),i=dr(i.add(r).add(s),21);const a=r;return r=r.add(e),r=r.add(n),i=i.add(dr(r,44)),[r.add(s),i.add(a)]}function S1(t,e,n,s){return vae(es(t,e),es(t,e+8),es(t,e+16),es(t,e+24),n,s)}function bae(t,e=t.length){if(e>=8){const n=qr.add(e*2),s=es(t,0).add(qr),r=es(t,e-8),i=dr(r,37).mul(n).add(s),a=dr(s,25).add(r).mul(n);return _c(i,a,n)}if(e>=4){const n=qr.add(e*2),s=n5(t,0);return _c(s.shl(3).add(e),n5(t,e-4),n)}if(e>0){const n=t[0],s=t[e>>1],r=t[e-1],i=n+(s<<8),a=e+(r<<2);return j3(qr.mul(i).xor(nF.mul(a))).mul(qr)}return qr}function wae(t,e=t.length){const n=qr.add(e*2),s=es(t,0).mul(Yu),r=es(t,8),i=es(t,e-8).mul(n),a=es(t,e-16).mul(qr);return _c(dr(s.add(r),43).add(dr(i,30)).add(a),s.add(dr(r.add(qr),18)).add(i),n)}function Nae(t,e=t.length){const n=qr.add(e*2),s=es(t,0).mul(qr),r=es(t,8),i=es(t,e-8).mul(n),a=es(t,e-16).mul(qr),l=dr(s.add(r),43).add(dr(i,30)).add(a),c=_c(l,s.add(dr(r.add(qr),18)).add(i),n),u=es(t,16).mul(n),d=es(t,24),h=l.add(es(t,e-32)).mul(n),p=c.add(es(t,e-24)).mul(n);return _c(dr(u.add(d),43).add(dr(h,30)).add(p),u.add(dr(d.add(s),18)).add(h),n)}function Sae(t,e=t.length){const n=Zu.fromNumber(81,!0);if(e<=32)return e<=16?bae(t,e):wae(t,e);if(e<=64)return Nae(t,e);let s=n,r=n.mul(Yu).add(113),i=j3(r.mul(qr).add(113)).mul(qr),a=[Zu.UZERO,Zu.UZERO],l=[Zu.UZERO,Zu.UZERO];s=s.mul(qr).add(es(t,0));let c=0;const u=(e-1>>6)*64,d=u+(e-1&63)-63;do s=dr(s.add(r).add(a[0]).add(es(t,c+8)),37).mul(Yu),r=dr(r.add(a[1]).add(es(t,c+48)),42).mul(Yu),s=s.xor(l[1]),r=r.add(a[0]).add(es(t,c+40)),i=dr(i.add(l[0]),33).mul(Yu),a=S1(t,c,a[1].mul(Yu),s.add(l[0])),l=S1(t,c+32,i.add(l[1]),r.add(es(t,c+16))),[i,s]=[s,i],c+=64;while(c!==u);const h=Yu.add(i.and(255).shl(1));return c=d,l[0]=l[0].add(e-1&63),a[0]=a[0].add(l[0]),l[0]=l[0].add(a[0]),s=dr(s.add(r).add(a[0]).add(es(t,c+8)),37).mul(h),r=dr(r.add(a[1]).add(es(t,c+48)),42).mul(h),s=s.xor(l[1].mul(9)),r=r.add(a[0].mul(9).add(es(t,c+40))),i=dr(i.add(l[0]),33).mul(h),a=S1(t,c,a[1].mul(h),s.add(l[0])),l=S1(t,c+32,i.add(l[1]),r.add(es(t,c+16))),[i,s]=[s,i],_c(_c(a[0],l[0],h).add(j3(r).mul(nF)).add(i),_c(a[1],l[1],h).add(s),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uu(t,e){return e==="string"?Oc(t):Ld([t],e)}function kae(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Ld(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=bd(t)),Pe().getBool("DEBUG")&&nae(t,e),kae(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let s=0;s<n.length;++s)Math.round(t[s])!==0&&(n[s]=1);return n}else throw new Error(`Unknown data type ${e}`)}function ci(){return Pe().platform.now()}function Oc(t,e="utf-8"){return e=e||"utf-8",Pe().platform.encode(t,e)}function Xc(t,e="utf-8"){return e=e||"utf-8",Pe().platform.decode(t,e)}function Pa(t){return Pe().platform.isTypedArray!=null?Pe().platform.isTypedArray(t):QO(t)}function bd(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||vd(t)||t==null||Pa(t)&&n)e.push(t);else if(Array.isArray(t)||Pa(t))for(let s=0;s<t.length;++s)bd(t[s],e,n);else{let s=-1;for(const r of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(r)&&(s=Math.max(s,Number(r)));for(let r=0;r<=s;r++)bd(t[r],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cae{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Iae)}profileKernel(e,n,s){let r;const i=()=>{r=s()};let a;const l=ci();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();for(const u of r)u.dataSync();a=Promise.resolve({kernelMs:ci()-l})}if(Pe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<r.length;u++){const d=r[u];d.data().then(h=>{Tae(h,d.dtype,e)})}return{kernelName:e,outputs:r,inputs:n,timeMs:a.then(u=>u.kernelMs),extraInfo:a.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:s,timeMs:r,inputs:i,extraInfo:a}=e;s.forEach(l=>{Promise.all([l.data(),r,a]).then(c=>{this.logger.logKernelProfile(n,l,c[0],c[1],i,c[2])})})}}function Tae(t,e,n){if(e!=="float32")return!1;for(let s=0;s<t.length;s++){const r=t[s];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}return!1}class Iae{logKernelProfile(e,n,s,r,i,a){const l=typeof r=="number"?Qh(`${r}ms`,9):r.error,c=Qh(e,25),u=n.rank,d=n.size,h=Qh(n.shape.toString(),14);let p="";for(const g in i){const x=i[g];if(x!=null){const y=x.shape||n.shape,v=y.length;p+=`${g}: ${v}D ${v>0?y:""} `}}console.log(`%c${c}	%c${l}	%c${u}D ${h}	%c${d}	%c${p}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jae(t,e,n){const s={},r={};for(let c=0;c<e.length;c++)s[e[c].id]=!0;for(let c=0;c<t.length;c++){const u=t[c],d=u.inputs;for(const h in d){const p=d[h];let g=!1;for(let x=0;x<e.length;x++)if(s[p.id]){u.outputs.forEach(y=>s[y.id]=!0),g=!0,r[u.id]=!0;break}if(g)break}}const i={};i[n.id]=!0;const a={};for(let c=t.length-1;c>=0;c--){const u=t[c],d=u.inputs;for(let h=0;h<u.outputs.length;h++)if(i[u.outputs[h].id]){for(const p in d)i[d[p].id]=!0,a[u.id]=!0;break}}const l=[];for(let c=0;c<t.length;c++){const u=t[c];if(r[u.id]&&a[u.id]){const d={};for(const p in u.inputs){const g=u.inputs[p];s[g.id]&&(d[p]=g)}const h=Object.assign({},u);h.inputs=d,h.outputs=u.outputs,l.push(h)}}return l}function Eae(t,e,n,s){for(let r=e.length-1;r>=0;r--){const i=e[r],a=[];if(i.outputs.forEach(c=>{const u=t[c.id];u!=null?a.push(u):a.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const l=i.gradient(a);for(const c in i.inputs){if(!(c in l))throw new Error(`Cannot backprop through input ${c}. Available gradients found: ${Object.keys(l)}.`);const u=n(()=>l[c]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${c} must have 'float32' dtype, but has '${u.dtype}'`);const d=i.inputs[c];if(!bn(u.shape,d.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${c}' has shape '${u.shape}', which does not match the shape of the input '${d.shape}'`);if(t[d.id]==null)t[d.id]=u;else{const h=t[d.id];t[d.id]=s(h,u),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s5=20,Ap=3,Xw=7;function $ae(t,e,n,s){const r=Mt(e),i=Aae(t,e,n,r),a=e.length,l=X1(t,e,n,r,i),c=["Tensor"];return s&&(c.push(`  dtype: ${n}`),c.push(`  rank: ${a}`),c.push(`  shape: [${e}]`),c.push("  values:")),c.push(l.map(u=>"    "+u).join(`
`)),c.join(`
`)}function Aae(t,e,n,s){const r=Le(e),i=s[s.length-1],a=new Array(i).fill(0),l=e.length,c=n==="complex64"?Lp(t):t;if(l>1)for(let u=0;u<r/i;u++){const d=u*i;for(let h=0;h<i;h++)a[h]=Math.max(a[h],Mp(c[d+h],0,n).length)}return a}function Mp(t,e,n){let s;return Array.isArray(t)?s=`${parseFloat(t[0].toFixed(Xw))} + ${parseFloat(t[1].toFixed(Xw))}j`:Km(t)?s=`'${t}'`:n==="bool"?s=rF(t):s=parseFloat(t.toFixed(Xw)).toString(),Qh(s,e)}function rF(t){return t===0?"false":"true"}function X1(t,e,n,s,r,i=!0){const a=n==="complex64"?2:1,l=e[0],c=e.length;if(c===0){if(n==="complex64"){const y=Lp(t);return[Mp(y[0],0,n)]}return n==="bool"?[rF(t[0])]:[t[0].toString()]}if(c===1){if(l>s5){const v=Ap*a;let w=Array.from(t.slice(0,v)),N=Array.from(t.slice((l-Ap)*a,l*a));return n==="complex64"&&(w=Lp(w),N=Lp(N)),["["+w.map((k,C)=>Mp(k,r[C],n)).join(", ")+", ..., "+N.map((k,C)=>Mp(k,r[l-Ap+C],n)).join(", ")+"]"]}return["["+(n==="complex64"?Lp(t):Array.from(t)).map((v,w)=>Mp(v,r[w],n)).join(", ")+"]"]}const u=e.slice(1),d=s.slice(1),h=s[0]*a,p=[];if(l>s5){for(let y=0;y<Ap;y++){const v=y*h,w=v+h;p.push(...X1(t.slice(v,w),u,n,d,r,!1))}p.push("...");for(let y=l-Ap;y<l;y++){const v=y*h,w=v+h;p.push(...X1(t.slice(v,w),u,n,d,r,y===l-1))}}else for(let y=0;y<l;y++){const v=y*h,w=v+h;p.push(...X1(t.slice(v,w),u,n,d,r,y===l-1))}const g=c===2?",":"";p[0]="["+(l>0?p[0]+g:"");for(let y=1;y<p.length-1;y++)p[y]=" "+p[y]+g;let x=`,
`;for(let y=2;y<c;y++)x+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":x),p}function Lp(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tr{constructor(e,n,s){if(this.dtype=n,this.shape=e.slice(),this.size=Le(e),s!=null){const r=s.length;K(r===this.size,()=>`Length of values '${r}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||_s(n,this.size),this.strides=Mt(e)}set(e,...n){n.length===0&&(n=[0]),K(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const s=this.locToIndex(n);this.values[s]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const r of e){if(r<0||r>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let s=e[e.length-1];for(let r=0;r<e.length-1;++r)s+=this.strides[r]*e[r];return this.values[s]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let s=0;s<e.length-1;++s)n+=this.strides[s]*e[s];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let s=0;s<n.length-1;++s)n[s]=Math.floor(e/this.strides[s]),e-=n[s]*this.strides[s];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return to().makeTensor(this.values,this.shape,this.dtype)}}let to=null,Lh=null;function Rae(t){to=t}function Dae(t){Lh=t}class zn{constructor(e,n,s,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Le(e),this.strides=Mt(e),this.dataId=s,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Lh.buffer(this.shape,this.dtype,e)}bufferSync(){return Lh.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Ra(this.shape,e,this.dtype==="complex64")}arraySync(){return Ra(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=to().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(s=>Xc(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),to().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=to().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Xc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await to().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),to().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Lh.print(this,e)}clone(){return this.throwIfDisposed(),Lh.clone(this)}toString(e=!1){const n=this.dataSync();return $ae(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Lh.cast(this,e)}variable(e=!0,n,s){return this.throwIfDisposed(),to().makeVariable(this,e,n,s)}}Object.defineProperty(zn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Be(){return VS("Tensor",()=>zn)}Be();class P0 extends zn{constructor(e,n,s,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=n,this.name=s}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!bn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);to().disposeTensor(this),this.dataId=e.dataId,to().incRef(this,null)}dispose(){to().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(P0,Symbol.hasInstance,{value:t=>t instanceof zn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r5;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(r5||(r5={}));var E3;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(E3||(E3={}));var $3;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})($3||($3={}));var A3;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(A3||(A3={}));var R3;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(R3||(R3={}));const Pae={float32:A3,int32:E3,bool:$3,complex64:R3};function Vi(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Pae[t][e]}function Kk(t){return Vi(t,"int32")}function iF(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function aF(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $s(t,e){if(t.dtype===e.dtype)return[t,e];const n=Vi(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function _ae(t,e){K(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function oF(t){const e=[];return lF(t,e,new Set),e}function lF(t,e,n){if(t==null)return;if(t instanceof zn){e.push(t);return}if(!Oae(t))return;const s=t;for(const r in s){const i=s[r];n.has(i)||(n.add(i),lF(i,e,n))}}function Oae(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yw(t){return t.kernelName!=null}class i5{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class gf{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new i5}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const s=e[n];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,s=1){return e in this.registryFactory?(ta(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:s},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:s}=this.initializeBackend(e);if(!(s?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Cae(this.backendInstance),!0}setupRegisteredKernels(){e5(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){e5(e).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const s=n.factory();if(s&&!(s instanceof MS)&&typeof s.then=="function"){const r=++this.pendingBackendInitId,i=s.then(a=>r<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(r<this.pendingBackendInitId||(this.pendingBackendInit=null,ta(`Initialization of backend ${e} failed`),ta(a.stack||a.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=s,{success:!0,asyncInit:!1}}catch(s){return ta(`Initialization of backend ${e} failed`),ta(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const s=e[n],{success:r,asyncInit:i}=this.initializeBackend(s);if(i||r)return{name:s,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const s=this.state.tensorInfo.get(n),r=s.backend,i=this.readSync(n),a=r.refCount(n);r.disposeData(n,!0),s.backend=e,e.move(n,i,s.shape,s.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let s=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=e}let r;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(r),()=>(r=n(),r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r))}scopedRun(e,n,s){e();try{const r=s();return n(),r}catch(r){throw n(),r}}nextTensorId(){return gf.nextTensorId++}nextVariableId(){return gf.nextVariableId++}clone(e){const n=fe.runKernel(pg,{x:e}),s={x:e},r=a=>({x:()=>{const l="float32",c={x:a},u={dtype:l};return fe.runKernel(tg,c,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,s,[n],r,i,{}),n}runKernel(e,n,s){if(this.backendName==null&&this.backend,!(I3(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,s){const r=this.backend.numDataIds();let i=0;s.forEach(c=>{i+=c.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=r-n-i-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let n,s=[];const r=this.isTapeOn(),i=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c;const u=Yw(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Yw(e)){const{kernelName:x,inputs:y,attrs:v}=e;this.backendName==null&&this.backend;const w=I3(x,this.backendName);K(w!=null,()=>`Cannot find registered kernel '${x}' for backend '${this.backendName}'`),l=()=>{const N=this.backend.numDataIds();c=w.kernelFunc({inputs:y,attrs:v,backend:this.backend});const k=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(x,N,k);const C=k.map(j=>j.rank!=null?j:this.makeTensorFromTensorInfo(j));if(r){const j=this.getTensorsForGradient(x,y,C);s=this.saveTensorsForBackwardMode(j)}return C}}else{const{forwardFunc:x}=e,y=v=>{r&&(s=v.map(w=>this.keep(this.clone(w))))};l=()=>{const v=this.backend.numDataIds();c=this.tidy(()=>x(this.backend,y));const w=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,w),w}}const{inputs:d,attrs:h}=e,p=Yw(e)?null:e.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=l():(g=this.profiler.profileKernel(u,d,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),n=g.outputs)}),r&&this.addTapeNode(u,d,n,p,s,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(x=>d[x]!=null?d[x].shape:null),outputShapes:n.map(x=>x.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(c)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(e,n,s){const r=QA(e);if(r!=null){const i=r.inputsToSave||[],a=r.outputsToSave||[];let l;r.saveAllInputs?(K(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(n).map(u=>n[u])):l=i.map(u=>n[u]);const c=s.filter((u,d)=>a[d]);return l.concat(c)}return[]}makeTensor(e,n,s,r){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",r=r||this.backend;let i=e;s==="string"&&Km(e[0])&&(i=e.map(c=>Oc(c)));const a=r.write(i,n,s),l=new zn(n,s,a,this.nextTensorId());if(this.trackTensor(l,r),s==="string"){const c=this.state.tensorInfo.get(a),u=rae(i);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(e,n,s,r){s=s||"float32";const i={dataId:e,shape:n,dtype:s};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(e,n){const{dataId:s,shape:r,dtype:i}=e,a=new zn(r,i,s,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(e,n=!0,s,r){s=s||this.nextVariableId().toString(),r!=null&&r!==e.dtype&&(e=e.cast(r));const i=new P0(e,n,s,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let s=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(s=e.size*E0(e.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:s})),e instanceof P0||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const s=e.size*E0(e.dtype);this.state.numBytes-=s}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(r=>r.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,s,r,i,a){const l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:s,saved:i},c=QA(e);c!=null&&(r=c.gradFunc),r!=null&&(l.gradient=u=>(u=u.map((d,h)=>{if(d==null){const p=s[h],g=Or(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return d}),r(u.length>1?u:u[0],i,a))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=oF(e),s=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const a=this.state.activeScope.track[i];!a.kept&&!s.has(a.id)&&a.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===r.id&&this.track(i)})}gradients(e,n,s,r=!1){if(K(n.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));K(i instanceof zn,()=>"The result y returned by f() must be a tensor.");const a=jae(this.state.activeTape,n,i);if(!r&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const l={};l[i.id]=s??Fae(i.shape),Eae(l,a,u=>this.tidy(u),Mae);const c=n.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const d of u.saved)d.dispose()}),this.state.activeTape=null),{value:i,grads:c}})}customGrad(e){return K(w3(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{K(n.every(l=>l instanceof zn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const r={};n.forEach((l,c)=>{r[c]=l});const i=(l,c)=>(s=e(...n,c),K(s.value instanceof zn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),K(w3(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),a=(l,c)=>{const u=s.gradFunc(l,c),d=Array.isArray(u)?u:[u];K(d.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),K(d.every(p=>p instanceof zn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return d.forEach((p,g)=>{h[g]=()=>p}),h};return this.runKernelFunc({forwardFunc:i,backwardsFunc:a,inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=ci(),s=await this.backend.time(e);return s.wallMs=ci()-n,s}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new i5;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}gf.nextTensorId=0;gf.nextVariableId=0;function Fae(t){const e=zS(Le(t),"float32");return fe.makeTensor(e,t,"float32")}function cF(){const t=YO();if(t._tfengine==null){const e=new oae(t);t._tfengine=new gf(e)}return dae(t._tfengine.ENV),Rae(()=>t._tfengine),t._tfengine}const fe=cF();function Mae(t,e){const n={a:t,b:e};return fe.runKernel(Lf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lae(){return typeof navigator<"u"&&navigator!=null}function uF(t){if(t||Lae()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function dF(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bi=Pe();bi.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});bi.registerFlag("IS_BROWSER",()=>dF());bi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");bi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));bi.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));bi.registerFlag("PROD",()=>!1);bi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>bi.getBool("DEBUG"));bi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);bi.registerFlag("IS_TEST",()=>!1);bi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>bi.getBool("DEBUG"));bi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);bi.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);bi.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function du(t,e){let n=t;if(Pa(t))return e==="string"?[]:[t.length];if(iF(t)){const r=t.channels||"RGBA";return[t.height,t.width*r.length]}else if(aF(t))return[t.buffer.size/(e==null?4:E0(e))];if(!Array.isArray(t))return[];const s=[];for(;Array.isArray(n)||Pa(n)&&e!=="string";)s.push(n.length),n=n[0];return Array.isArray(t)&&Pe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&hF(t,s,[]),s}function hF(t,e,n){if(n=n||[],!Array.isArray(t)&&!Pa(t)){K(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}K(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),K(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const s=e.slice(1);for(let r=0;r<t.length;++r)hF(t[r],s,n.concat(r))}function a5(t,e,n,s){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${s}' must be ${t} tensor, but got ${e} tensor`)}}function Z(t,e,n,s="numeric"){if(t instanceof Be())return a5(s,t.dtype,e,n),t;let r=Ff(t);if(r!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(r=s),a5(s,r,e,n),t==null||!Pa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const c=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${c}'`)}const i=du(t,r);!Pa(t)&&!Array.isArray(t)&&(t=[t]);const l=r!=="string"?Ld(t,r):bd(t,[],!0);return fe.makeTensor(l,i,r)}function _0(t,e,n,s="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,a)=>Z(i,`${e}[${a}]`,n,s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fF="__op";function ue(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const s=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+fF;const r=(...i)=>{fe.startScope(n);try{const a=s(...i);return vd(a)&&console.error("Cannot return a Promise inside of tidy."),fe.endScope(a),a}catch(a){throw fe.endScope(null),a}};return Object.defineProperty(r,"name",{value:n,configurable:!0}),r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bae(t,e){const n=Z(t,"real","complex"),s=Z(e,"imag","complex");Hi(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const r={real:n,imag:s};return fe.runKernel(XS,r)}const Yc=ue({complex_:Bae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hu(t,e,n,s){if(s==null)s=Ff(t);else if(s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(aF(t)||iF(t)){if(s!=="float32"&&s!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${s}.`);return fe.backend.createTensorFromGPUData(t,e||n,s)}if(!Pa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){oa(e);const r=Le(e),i=Le(n);K(r===i,()=>`Based on the provided shape, [${e}], the tensor should have ${r} values but has ${i}`);for(let a=0;a<n.length;++a){const l=n[a],c=a===n.length-1?l!==Le(e.slice(a)):!0;K(n[a]===e[a]||!c,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Pa(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=s!=="string"?Ld(t,s):bd(t,[],!0),fe.makeTensor(t,e,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ao(t,e,n){const s=du(t,n);return hu(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wd={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class vo{static join(e){return new vo(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(s=>Pa(s)?s.buffer:s),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let s=0;s<e.length;s++){const r=e[s];s!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+r.byteLength;this.shards.push({buffer:r,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const s=this.findShardForByte(e);if(s===-1)throw new Error(`Could not find start shard for byte ${e}`);const r=n-e,i=new ArrayBuffer(r),a=new Uint8Array(i);let l=0;for(let c=s;c<this.shards.length;c++){const u=this.shards[c],h=e+l-u.start,p=l,x=Math.min(n,u.end)-u.start,y=new Uint8Array(u.buffer,h,x-h);if(a.set(y,p),l+=y.length,n<u.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(r){return e<r.start?-1:e>=r.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const s=zae(this.shards,n);return s===-1?-1:(this.previousShardIndex=s,this.previousShardIndex)}}function zae(t,e){let n=0,s=t.length;for(;n<=s;){const r=Math.floor((s-n)/2)+n,i=e(t[r]);if(i===0)return r;i<0?s=r:n=r+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _o(){return fe}function o5(){return fe.memory()}function Ie(t,e){return fe.tidy(t,e)}function Kt(t){oF(t).forEach(n=>n.dispose())}function hr(t){return fe.keep(t)}function l5(t){return fe.setBackend(t)}function c5(){return fe.ready()}function pF(){return fe.backendName}function mF(t,e,n=1){return fe.registerBackend(t,e,n)}function gF(){return fe.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zc=4;async function D3(t,e){const n=[],s=[],r=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<r.length;++a){const l=r[a],c=Array.isArray(t)?t[a].tensor:t[l];if(c.dtype!=="float32"&&c.dtype!=="int32"&&c.dtype!=="bool"&&c.dtype!=="string"&&c.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${l}': ${c.dtype}`);const u={name:l,shape:c.shape,dtype:c.dtype};if(c.dtype==="string"){const d=new Promise(async h=>{const p=await c.bytes(),g=p.reduce((v,w)=>v+w.length,0)+Zc*p.length,x=new Uint8Array(g);let y=0;for(let v=0;v<p.length;v++){const w=p[v],N=new Uint8Array(new Uint32Array([w.length]).buffer);x.set(N,y),y+=Zc,x.set(w,y),y+=w.length}h(x)});s.push(d)}else s.push(c.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(s);return{data:Wae(i),specs:n}}function xF(t,e){const n=new vo(t),s={};let r=0;for(const i of e){const a=Vae(i,(l,c)=>n.slice(r+l,r+c));s[i.name]=yF(i,n.slice(r,r+a)),r+=a}return s}function Vae(t,e){const n=Le(t.shape);let s;if("quantization"in t){const r=t.quantization;s=wd[r.dtype]}else if(t.dtype==="string"){let r=0;for(let i=0;i<n;i++)r+=Zc+new Uint32Array(e(r,r+Zc))[0];return r}else s=wd[t.dtype];return n*s}async function Uae(t,e){const n=Le(t.shape);let s;if("quantization"in t){const r=t.quantization;s=wd[r.dtype]}else if(t.dtype==="string"){let r=0;for(let i=0;i<n;i++)r+=Zc+new Uint32Array(await e(r,r+Zc))[0];return r}else s=wd[t.dtype];return n*s}function yF(t,e){const n=t.name,s=t.dtype,r=t.shape,i=Le(r);let a,l=0;if("quantization"in t){const c=t.quantization;if(c.dtype==="uint8"||c.dtype==="uint16"){if(!("min"in c&&"scale"in c))throw new Error(`Weight ${t.name} with quantization ${c.dtype} doesn't have corresponding metadata min and scale.`)}else if(c.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${t.name} is quantized with ${c.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${c.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=wd[c.dtype],d=c.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(s==="float32")if(c.dtype==="uint8"||c.dtype==="uint16"){a=new Float32Array(d.length);for(let h=0;h<d.length;h++){const p=d[h];a[h]=p*c.scale+c.min}}else if(c.dtype==="float16")a=Yae()(d);else throw new Error(`Unsupported quantization type ${c.dtype} for weight type float32.`);else if(s==="int32"){if(c.dtype!=="uint8"&&c.dtype!=="uint16")throw new Error(`Unsupported quantization type ${c.dtype} for weight type int32.`);a=new Int32Array(d.length);for(let h=0;h<d.length;h++){const p=d[h];a[h]=Math.round(p*c.scale+c.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${s}`);l+=i*u}else if(s==="string"){const c=Le(t.shape);a=[];for(let u=0;u<c;u++){const d=new Uint32Array(e.slice(l,l+Zc))[0];l+=Zc;const h=new Uint8Array(e.slice(l,l+d));a.push(h),l+=d}}else{const c=wd[s];if(s==="float32")a=new Float32Array(e);else if(s==="int32")a=new Int32Array(e);else if(s==="bool")a=new Uint8Array(e);else if(s==="complex64"){a=new Float32Array(e);const u=new Float32Array(a.length/2),d=new Float32Array(a.length/2);for(let x=0;x<u.length;x++)u[x]=a[x*2],d[x]=a[x*2+1];const h=ao(u,r,"float32"),p=ao(d,r,"float32"),g=Yc(h,p);return h.dispose(),p.dispose(),g}else throw new Error(`Unsupported dtype in weight '${n}': ${s}`);l+=i*c}return ao(a,r,s)}async function u5(t,e,n){let s=new Uint8Array(e);for(;s.byteLength<n;){const{done:r,value:i}=await t.read();if(r&&i==null){const l=n-s.byteLength;throw new Error(`Reader is done but ${l} bytes are still expected`)}const a=new Uint8Array(s.length+i.byteLength);a.set(s,0),a.set(new Uint8Array(i),s.length),s=a}return s.buffer}async function vF(t,e){const n={},s=t.getReader();let r=new ArrayBuffer(0);for(const i of e){const a=await Uae(i,async(u,d)=>(r=await u5(s,r,d),r.slice(u,d)));r=await u5(s,r,a);const l=r.slice(0,a);r=r.slice(a);const c=yF(i,l);if(n[i.name]=c,pF()==="webgpu"){const u=gF();"uploadToGPU"in u&&Le(c.shape)>=Pe().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(c.dataId)}}return n}function Wae(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const s=new Uint8Array(e);let r=0;return n.forEach(i=>{s.set(new Uint8Array(i.buffer),r),r+=i.byteLength}),s.buffer}const qk=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function d5(t){return qk?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Gae(t){if(qk)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let s=0,r=e.length;s<r;s++)n+=String.fromCharCode(e[s]);return btoa(n)}function Hae(t){if(qk){const s=Buffer.from(t,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;++s)n.set([e.charCodeAt(s)],s);return n.buffer}function bF(t){return vo.join(t)}function h5(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const n=t.split("/");return n[n.length-1]}function wF(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function NF(t,e,n){const s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(s.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");s.weightSpecs=e,s.weightData=n}return t.signature!=null&&(s.signature=t.signature),t.userDefinedMetadata!=null&&(s.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(s.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(s.initializerSignature=t.initializerSignature),s}async function Xk(t,e){let n,s;return t.weightsManifest!=null&&([n,s]=await e(t.weightsManifest)),NF(t,n,s)}function Ug(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:d5(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:d5(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new vo(t.weightData).byteLength}}function P3(t){const e=[];for(const n of t)e.push(...n.weights);return e}function Kae(){const t=n=>{let s=n<<13,r=0;for(;(s&8388608)===0;)r-=8388608,s<<=1;return s&=-8388609,r+=947912704,s|r},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function qae(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function Xae(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function Yae(){const t=Kae(),e=qae(),n=Xae();return s=>{const r=new ArrayBuffer(4*s.length),i=new Uint32Array(r);for(let a=0;a<s.length;a++){const l=s[a],c=t[n[l>>10]+(l&1023)]+e[l>>10];i[a]=c}return new Float32Array(r)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vs{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return vs.instance==null&&(vs.instance=new vs),vs.instance}static registerSaveRouter(e){vs.getInstance().saveRouters.push(e)}static registerLoadRouter(e){vs.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return vs.getHandlers(e,"save")}static getLoadHandlers(e,n){return vs.getHandlers(e,"load",n)}static getHandlers(e,n,s){const r=[];return(n==="load"?vs.getInstance().loadRouters:vs.getInstance().saveRouters).forEach(a=>{const l=a(e,s);l!==null&&r.push(l)}),r}}const Zae=t=>vs.registerSaveRouter(t),Jae=t=>vs.registerLoadRouter(t),SF=t=>vs.getSaveHandlers(t),Qae=(t,e)=>vs.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _3="tensorflowjs",O3=1,rd="models_store",Ac="model_info_store";function kF(){if(!Pe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function F3(t){const e=t.result;e.createObjectStore(rd,{keyPath:"modelPath"}),e.createObjectStore(Ac,{keyPath:"modelPath"})}class Nd{constructor(e){if(this.indexedDB=kF(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((s,r)=>{const i=this.indexedDB.open(_3,O3);i.onupgradeneeded=()=>F3(i),i.onsuccess=()=>{const a=i.result;if(n==null){const l=a.transaction(rd,"readonly"),u=l.objectStore(rd).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),r(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(u.result.modelArtifacts)},u.onerror=d=>(a.close(),r(u.error)),l.oncomplete=()=>a.close()}else{n.weightData=vo.join(n.weightData);const l=Ug(n),c=a.transaction(Ac,"readwrite");let u=c.objectStore(Ac),d;try{d=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(p){return r(p)}let h;d.onsuccess=()=>{h=a.transaction(rd,"readwrite");const p=h.objectStore(rd);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:l})}catch(x){return r(x)}g.onsuccess=()=>s({modelArtifactsInfo:l}),g.onerror=x=>{u=c.objectStore(Ac);const y=u.delete(this.modelPath);y.onsuccess=()=>(a.close(),r(g.error)),y.onerror=v=>(a.close(),r(g.error))}},d.onerror=p=>(a.close(),r(d.error)),c.oncomplete=()=>{h==null?a.close():h.oncomplete=()=>a.close()}}},i.onerror=a=>r(i.error)})}}Nd.URL_SCHEME="indexeddb://";const CF=t=>Pe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Nd.URL_SCHEME)?eoe(t.slice(Nd.URL_SCHEME.length)):null;vs.registerSaveRouter(CF);vs.registerLoadRouter(CF);function eoe(t){return new Nd(t)}function toe(t){return t.startsWith(Nd.URL_SCHEME)?t.slice(Nd.URL_SCHEME.length):t}class noe{constructor(){this.indexedDB=kF()}async listModels(){return new Promise((e,n)=>{const s=this.indexedDB.open(_3,O3);s.onupgradeneeded=()=>F3(s),s.onsuccess=()=>{const r=s.result,i=r.transaction(Ac,"readonly"),l=i.objectStore(Ac).getAll();l.onsuccess=()=>{const c={};for(const u of l.result)c[u.modelPath]=u.modelArtifactsInfo;e(c)},l.onerror=c=>(r.close(),n(l.error)),i.oncomplete=()=>r.close()},s.onerror=r=>n(s.error)})}async removeModel(e){return e=toe(e),new Promise((n,s)=>{const r=this.indexedDB.open(_3,O3);r.onupgradeneeded=()=>F3(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(Ac,"readwrite"),l=a.objectStore(Ac),c=l.get(e);let u;c.onsuccess=()=>{if(c.result==null)return i.close(),s(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const d=l.delete(e),h=()=>{u=i.transaction(rd,"readwrite");const g=u.objectStore(rd).delete(e);g.onsuccess=()=>n(c.result.modelArtifactsInfo),g.onerror=x=>s(c.error)};d.onsuccess=h,d.onerror=p=>(h(),i.close(),s(c.error))}},c.onerror=d=>(i.close(),s(c.error)),a.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},r.onerror=i=>s(r.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Al="/",Bh="tensorflowjs_models",TF="info",soe="model_topology",roe="weight_specs",ioe="weight_data",aoe="model_metadata";function IF(t){return{info:[Bh,t,TF].join(Al),topology:[Bh,t,soe].join(Al),weightSpecs:[Bh,t,roe].join(Al),weightData:[Bh,t,ioe].join(Al),modelMetadata:[Bh,t,aoe].join(Al)}}function jF(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function ooe(t){const e=t.split(Al);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Al)}function loe(t){return t.startsWith(Sd.URL_SCHEME)?t.slice(Sd.URL_SCHEME.length):t}class Sd{constructor(e){if(!Pe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=IF(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),s=JSON.stringify(e.weightSpecs),r=Ug(e),i=vo.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,Gae(i));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:r}}catch{throw jF(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=s;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(r==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const l=JSON.parse(i);n.format=l.format,n.generatedBy=l.generatedBy,n.convertedBy=l.convertedBy,l.signature!=null&&(n.signature=l.signature),l.userDefinedMetadata!=null&&(n.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(n.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(n.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(n.trainingConfig=l.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Hae(a),n}}Sd.URL_SCHEME="localstorage://";const EF=t=>Pe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Sd.URL_SCHEME)?coe(t.slice(Sd.URL_SCHEME.length)):null;vs.registerSaveRouter(EF);vs.registerLoadRouter(EF);function coe(t){return new Sd(t)}class uoe{constructor(){K(Pe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),K(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Bh+Al,s=Al+TF;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(n)&&i.endsWith(s)){const a=ooe(i);e[a]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=loe(e);const n=IF(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const s=JSON.parse(this.LS.getItem(n.info));return jF(n),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tf="://";class Kr{constructor(){this.managers={}}static getInstance(){return Kr.instance==null&&(Kr.instance=new Kr),Kr.instance}static registerManager(e,n){K(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(tf)&&(e=e.slice(0,e.indexOf(tf))),K(e.length>0,()=>"scheme must not be an empty string.");const s=Kr.getInstance();K(s.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),s.managers[e]=n}static getManager(e){const n=Kr.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Kr.getInstance().managers)}}function Y1(t){if(t.indexOf(tf)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Kr.getSchemes().join(",")}`);return{scheme:t.split(tf)[0],path:t.split(tf)[1]}}async function $F(t,e,n=!1){K(t!==e,()=>`Old path and new path are the same: '${t}'`);const s=vs.getLoadHandlers(t);K(s.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),K(s.length<2,()=>`Copying failed because more than one (${s.length}) load handlers for source URL ${t}.`);const r=s[0],i=vs.getSaveHandlers(e);K(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),K(i.length<2,()=>`Copying failed because more than one (${s.length}) save handlers for destination URL ${e}.`);const a=i[0],l=Y1(t).scheme,c=Y1(t).path,u=l===Y1(t).scheme,d=await r.load();n&&u&&await Kr.getManager(l).removeModel(c);const h=await a.save(d);return n&&!u&&await Kr.getManager(l).removeModel(c),h.modelArtifactsInfo}async function doe(){const t=Kr.getSchemes(),e={};for(const n of t){const s=await Kr.getManager(n).listModels();for(const r in s){const i=n+tf+r;e[i]=s[r]}}return e}async function hoe(t){const e=Y1(t);return Kr.getManager(e.scheme).removeModel(e.path)}async function foe(t,e){return $F(t,e,!1)}async function poe(t,e){return $F(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class moe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Pe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",s=>{if(s.source===window&&s.data.name===this.messageName){s.stopPropagation();const r=this.functionRefs[s.data.index];r(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return QO(e)}}if(Pe().get("IS_BROWSER")){Pe().setPlatform("browser",new moe);try{Kr.registerManager(Sd.URL_SCHEME,new uoe)}catch{}try{Kr.registerManager(Nd.URL_SCHEME,new noe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const goe={importFetch:()=>require("node-fetch")};let Zw;class xoe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Pe().global.fetch!=null?Pe().global.fetch(e,n):(Zw==null&&(Zw=goe.importFetch()),Zw(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Pe().get("IS_NODE")&&!Pe().get("IS_BROWSER")&&Pe().setPlatform("node",new xoe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function un(t,e="float32",n){return e=e||"float32",oa(t),new tr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yoe(t,e){const n=Z(t,"x","cast");if(!sae(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:n},r={dtype:e};return fe.runKernel(tg,s,r)}const ht=ue({cast_:yoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function voe(t){const n={x:Z(t,"x","clone","string_or_numeric")};return fe.runKernel(pg,n)}const Ol=ue({clone_:voe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AF(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */cF();const boe={buffer:un,cast:ht,clone:Ol,print:AF};Dae(boe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function woe(t,e){let n=Z(t,"a","add"),s=Z(e,"b","add");[n,s]=$s(n,s);const r={a:n,b:s};return fe.runKernel(Lf,r)}const Ke=ue({add_:woe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Noe(t,e){let n=Z(t,"a","floorDiv"),s=Z(e,"b","floorDiv");[n,s]=$s(n,s);const r={a:n,b:s};return fe.runKernel(hg,r)}const Yk=ue({floorDiv_:Noe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Soe(t,e){let n=Z(t,"a","div"),s=Z(e,"b","div");if([n,s]=$s(n,s),n.dtype==="int32"&&s.dtype==="int32")return Yk(n,s);const r={a:n,b:s},i={};return fe.runKernel(ag,r,i)}const yt=ue({div_:Soe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function koe(t,e){let n=Z(t,"a","mul"),s=Z(e,"b","mul");[n,s]=$s(n,s);const r={a:n,b:s};return fe.runKernel(Sg,r)}const he=ue({mul_:koe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Coe(t){const e=Z(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return fe.runKernel(Hy,n)}else{const n={x:e};return fe.runKernel(Fy,n)}}const Ys=ue({abs_:Coe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Toe(t){const n={x:Z(t,"x","acos")};return fe.runKernel(qm,n)}const RF=ue({acos_:Toe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ioe(t){const n={x:Z(t,"x","acosh")};return fe.runKernel(Xm,n)}const DF=ue({acosh_:Ioe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function joe(t){K(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),K(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((r,i)=>Z(r,`tensors${i}`,"addN")),n=e[0];e.forEach(r=>{if(r.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(r=>{if(!bn(r.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const s=e;return fe.runKernel(My,s)}const Eoe=ue({addN_:joe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $oe(t,e=null,n=!1){const r={x:Z(t,"x","all","bool")},i={axis:e,keepDims:n};return fe.runKernel(US,r,i)}const Zk=ue({all_:$oe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aoe(t,e=null,n=!1){const r={x:Z(t,"x","any","bool")},i={axis:e,keepDims:n};return fe.runKernel(WS,r,i)}const O0=ue({any_:Aoe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Roe(t,e=0){const s={x:Z(t,"x","argMax")},r={axis:e};return fe.runKernel(Ly,s,r)}const xf=ue({argMax_:Roe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Doe(t,e=0){const s={x:Z(t,"x","argMin")},r={axis:e};return fe.runKernel(By,s,r)}const PF=ue({argMin_:Doe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Poe(t){const n={x:Z(t,"x","asin")};return fe.runKernel(Ym,n)}const _F=ue({asin_:Poe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _oe(t){const n={x:Z(t,"x","asinh")};return fe.runKernel(Zm,n)}const OF=ue({asinh_:_oe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ooe(t){const n={x:Z(t,"x","atan")};return fe.runKernel(Jm,n)}const FF=ue({atan_:Ooe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Foe(t,e){let n=Z(t,"a","atan2"),s=Z(e,"b","atan2");[n,s]=$s(n,s);const r={a:n,b:s};return fe.runKernel(eg,r)}const MF=ue({atan2_:Foe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Moe(t){const n={x:Z(t,"x","atanh")};return fe.runKernel(Qm,n)}const LF=ue({atanh_:Moe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wg(t,e,n,s,r="NHWC",i){const a=t[3],l=[...e,a],c=Zl(r);return pr(t,l,n,i,s,null,null,c)}function Fa(t,e,n,s,r,i,a="channelsLast"){const[l,c]=xm(e);let u;if(a==="channelsLast")u=[l,c,t[3],t[3]];else if(a==="channelsFirst")u=[l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return pr(t,u,n,s,r,i,!1,a)}function Yl(t,e,n,s,r,i,a="NDHWC"){const[l,c,u]=M3(e);let d,h;if(a==="NDHWC")h="channelsLast",d=[l,c,u,t[4],t[4]];else if(a==="NCDHW")h="channelsFirst",d=[l,c,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return fu(t,d,n,s,r,!1,h,i)}function pr(t,e,n,s,r,i,a=!1,l="channelsLast"){let[c,u,d,h]=[-1,-1,-1,-1];if(l==="channelsLast")[c,u,d,h]=t;else if(l==="channelsFirst")[c,h,u,d]=t;else throw new Error(`Unknown dataFormat ${l}`);const[p,g,,x]=e,[y,v]=xm(n),[w,N]=xm(s),k=nf(p,w),C=nf(g,N),{padInfo:j,outHeight:R,outWidth:_}=zoe(r,u,d,y,v,k,C,i,l),A=a?x*h:x;let O;return l==="channelsFirst"?O=[c,A,R,_]:l==="channelsLast"&&(O=[c,R,_,A]),{batchSize:c,dataFormat:l,inHeight:u,inWidth:d,inChannels:h,outHeight:R,outWidth:_,outChannels:A,padInfo:j,strideHeight:y,strideWidth:v,filterHeight:p,filterWidth:g,effectiveFilterHeight:k,effectiveFilterWidth:C,dilationHeight:w,dilationWidth:N,inShape:t,outShape:O,filterShape:e}}function fu(t,e,n,s,r,i=!1,a="channelsLast",l){let[c,u,d,h,p]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[c,u,d,h,p]=t;else if(a==="channelsFirst")[c,p,u,d,h]=t;else throw new Error(`Unknown dataFormat ${a}`);const[g,x,y,,v]=e,[w,N,k]=M3(n),[C,j,R]=M3(s),_=nf(g,C),A=nf(x,j),O=nf(y,R),{padInfo:L,outDepth:D,outHeight:q,outWidth:V}=Voe(r,u,d,h,w,N,k,_,A,O,l),ne=i?v*p:v;let J;return a==="channelsFirst"?J=[c,ne,D,q,V]:a==="channelsLast"&&(J=[c,D,q,V,ne]),{batchSize:c,dataFormat:a,inDepth:u,inHeight:d,inWidth:h,inChannels:p,outDepth:D,outHeight:q,outWidth:V,outChannels:ne,padInfo:L,strideDepth:w,strideHeight:N,strideWidth:k,filterDepth:g,filterHeight:x,filterWidth:y,effectiveFilterDepth:_,effectiveFilterHeight:A,effectiveFilterWidth:O,dilationDepth:C,dilationHeight:j,dilationWidth:R,inShape:t,outShape:J,filterShape:e}}function Loe(t,e,n,s,r){s==null&&(s=Jk(t,e,n));const i=t[0],a=t[1],l=ym((i-e+2*s)/n+1,r),c=ym((a-e+2*s)/n+1,r);return[l,c]}function Boe(t,e,n,s,r,i){r==null&&(r=Jk(t,e[0],s[0]));const a=[0,0,0,n];for(let l=0;l<3;l++)t[l]+2*r>=e[l]&&(a[l]=ym((t[l]-e[l]+2*r)/s[l]+1,i));return a}function Jk(t,e,n,s=1){const r=nf(e,s);return Math.floor((t[0]*(n-1)-n+r)/2)}function xm(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function M3(t){return typeof t=="number"?[t,t,t]:t}function nf(t,e){return e<=1?t:t+(t-1)*(e-1)}function zoe(t,e,n,s,r,i,a,l,c){let u,d,h;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const g=Loe([e,n],i,s,t,l);d=g[0],h=g[1]}else if(t==="same"){d=Math.ceil(e/s),h=Math.ceil(n/r);const p=Math.max(0,(d-1)*s+i-e),g=Math.max(0,(h-1)*r+a-n),x=Math.floor(p/2),y=p-x,v=Math.floor(g/2),w=g-v;u={top:x,bottom:y,left:v,right:w,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((e-i+1)/s),h=Math.ceil((n-a+1)/r);else if(typeof t=="object"){const p=c==="channelsLast"?t[1][0]:t[2][0],g=c==="channelsLast"?t[1][1]:t[2][1],x=c==="channelsLast"?t[2][0]:t[3][0],y=c==="channelsLast"?t[2][1]:t[3][1];u={top:p,bottom:g,left:x,right:y,type:p===0&&g===0&&x===0&&y===0?"VALID":"EXPLICIT"},d=ym((e-i+p+g)/s+1,l),h=ym((n-a+x+y)/r+1,l)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:d,outWidth:h}}function Voe(t,e,n,s,r,i,a,l,c,u,d){let h,p,g,x;if(t==="valid"&&(t=0),typeof t=="number"){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const v=Boe([e,n,s,1],[l,c,u],1,[r,i,a],t,d);p=v[0],g=v[1],x=v[2]}else if(t==="same"){p=Math.ceil(e/r),g=Math.ceil(n/i),x=Math.ceil(s/a);const y=(p-1)*r+l-e,v=(g-1)*i+c-n,w=(x-1)*a+u-s,N=Math.floor(y/2),k=y-N,C=Math.floor(v/2),j=v-C,R=Math.floor(w/2),_=w-R;h={top:C,bottom:j,left:R,right:_,front:N,back:k,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:h,outDepth:p,outHeight:g,outWidth:x}}function ym(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Jc(t){const[e,n,s]=xm(t);return e===1&&n===1&&s===1}function Ir(t,e){return Jc(t)||Jc(e)}function kd(t){return xm(t).every(e=>e>0)}function Zl(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function ni(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")K(mf(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(s=>{s.forEach(r=>{K(mf(r),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${r}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uoe(t,e){const s={x:Z(t,"x","reshape","string_or_numeric")},r={shape:e};return fe.runKernel(T2,s,r)}const ge=ue({reshape_:Uoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Woe(t,e,n,s,r){const i=Z(t,"x","avgPool","float32"),a=1;K(Ir(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let l=i,c=!1;i.rank===3&&(c=!0,l=ge(i,[1,i.shape[0],i.shape[1],i.shape[2]])),K(l.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${l.rank}.`),ni("avgPool",s,r);const u={x:l},d={filterSize:e,strides:n,pad:s,dimRoundingMode:r};let h=fe.runKernel(zy,u,d);return h=ht(h,i.dtype),c?ge(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const z2=ue({avgPool_:Woe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Goe(t,e,n,s,r,i="NDHWC"){const a=Z(t,"x","avgPool3d","float32");let l=a,c=!1;a.rank===4&&(c=!0,l=ge(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),K(l.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${l.rank}.`),K(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),K(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),ni("avgPool3d",s,r);const u={x:l},d={filterSize:e,strides:n,pad:s,dimRoundingMode:r,dataFormat:i};let h=fe.runKernel(Vy,u,d);return h=ht(h,l.dtype),c?ge(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const BF=ue({avgPool3d_:Goe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hoe(t,e=0){K(t.length>=1,()=>"Pass at least one tensor to concat");const n=_0(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Ol(n[0]);const s=n,r={axis:e};return fe.runKernel(Ky,s,r)}const Es=ue({concat_:Hoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Koe(t,e,n=!1,s=!1){let r=Z(t,"a","matMul"),i=Z(e,"b","matMul");[r,i]=$s(r,i);const a={a:r,b:i},l={transposeA:n,transposeB:s};return fe.runKernel(Uy,a,l)}const gn=ue({matMul_:Koe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qoe(t){const n={x:Z(t,"x","sigmoid","float32")};return fe.runKernel(Pg,n)}const oo=ue({sigmoid_:qoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xoe(t,e,n){const s=Z(t,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const r={x:s},i={begin:e,size:n};return fe.runKernel(A2,r,i)}const Wt=ue({slice_:Xoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yoe(t){const n={x:Z(t,"x","tanh","float32")};return fe.runKernel(Bg,n)}const Cd=ue({tanh_:Yoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zoe(t,e,n,s,r,i){const a=Z(t,"forgetBias","basicLSTMCell"),l=Z(e,"lstmKernel","basicLSTMCell"),c=Z(n,"lstmBias","basicLSTMCell"),u=Z(s,"data","basicLSTMCell"),d=Z(r,"c","basicLSTMCell"),h=Z(i,"h","basicLSTMCell"),p=Es([u,h],1),g=gn(p,l),x=Ke(g,c),y=x.shape[0],v=x.shape[1]/4,w=[y,v],N=Wt(x,[0,0],w),k=Wt(x,[0,v],w),C=Wt(x,[0,v*2],w),j=Wt(x,[0,v*3],w),R=Ke(he(oo(N),Cd(k)),he(d,oo(Ke(a,C)))),_=he(Cd(R),oo(j));return[R,_]}const Joe=ue({basicLSTMCell_:Zoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qoe(t,e,n){const s=Z(t,"x","batchToSpaceND"),r=e.reduce((l,c)=>l*c);K(s.rank>=1+e.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${e.length}`),K(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),K(s.shape[0]%r===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${r}`);const i={x:s},a={blockShape:e,crops:n};return fe.runKernel(Wy,i,a)}const V2=ue({batchToSpaceND_:Qoe});function ele(t){let e;return t.rank===0||t.rank===1?e=ge(t,[1,1,1,t.size]):t.rank===2?e=ge(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tle(t,e,n,s,r,i){i==null&&(i=.001);const a=Z(t,"x","batchNorm"),l=Z(e,"mean","batchNorm"),c=Z(n,"variance","batchNorm");let u;r!=null&&(u=Z(r,"scale","batchNorm"));let d;s!=null&&(d=Z(s,"offset","batchNorm")),K(l.rank===c.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),K(d==null||l.rank===d.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),K(u==null||l.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:ele(a),scale:u,offset:d,mean:l,variance:c},g={varianceEpsilon:i},x=fe.runKernel(n2,p,g);return ge(x,a.shape)}const Gg=ue({batchNorm_:tle});function nle(t,e,n,s,r,i){const a=Z(t,"x","batchNorm"),l=Z(e,"mean","batchNorm"),c=Z(n,"variance","batchNorm");let u;r!=null&&(u=Z(r,"scale","batchNorm"));let d;return s!=null&&(d=Z(s,"offset","batchNorm")),K(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),K(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${l.rank}.`),K(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&K(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),d!=null&&K(d.rank===2||d.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${d.rank}.`),Gg(a,l,c,d,u,i)}const zF=ue({batchNorm2d_:nle});function sle(t,e,n,s,r,i){const a=Z(t,"x","batchNorm"),l=Z(e,"mean","batchNorm"),c=Z(n,"variance","batchNorm");let u;r!=null&&(u=Z(r,"scale","batchNorm"));let d;return s!=null&&(d=Z(s,"offset","batchNorm")),K(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),K(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${l.rank}.`),K(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&K(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),d!=null&&K(d.rank===3||d.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${d.rank}.`),Gg(a,l,c,d,u,i)}const VF=ue({batchNorm3d_:sle});function rle(t,e,n,s,r,i){const a=Z(t,"x","batchNorm"),l=Z(e,"mean","batchNorm"),c=Z(n,"variance","batchNorm");let u;r!=null&&(u=Z(r,"scale","batchNorm"));let d;return s!=null&&(d=Z(s,"offset","batchNorm")),K(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),K(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${l.rank}.`),K(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&K(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),d!=null&&K(d.rank===4||d.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${d.rank}.`),Gg(a,l,c,d,u,i)}const UF=ue({batchNorm4d_:rle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ile(t,e,n){const s=Z(t,"x","bincount"),r=Z(e,"weights","bincount");K(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),K(n>=0,()=>`size must be non-negative, but got ${n}.`),K(r.size===s.size||r.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${r.shape}.`);const i={x:s,weights:r},a={size:n};return fe.runKernel(KS,i,a)}const WF=ue({bincount_:ile});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ale(t,e){const n=Z(t,"x","bitwiseAnd"),s=Z(e,"y","bitwiseAnd");if(!bn(n.shape,s.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${s.shape}`);if(n.dtype!=="int32"||s.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${s.dtype}`);const r={a:n,b:s};return fe.runKernel(Gy,r)}const ole=ue({bitwiseAnd_:ale});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lle(t,e){const n=Z(t,"s0","broadcastArgs","int32"),s=Z(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(s.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${s.rank}`);const r={s0:n,s1:s};return fe.runKernel(qS,r)}const cle=ue({broadcastArgs_:lle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ule(t,e){let n=Z(t,"broadcastTo","x");const s=n.shape;if(oa(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=ge(n,u)}const r=n.shape,i=Array.from(e);for(let u=e.length-1;u>=0;u--)if(r[u]===e[u])i[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${e}].`);if(i.map((u,d)=>u>1?d:-1).filter(u=>u>=0).length===0)return Ol(n);const l={x:n},c={reps:i};return fe.runKernel(zg,l,c)}const sf=ue({broadcastTo_:ule});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dle(t){const n={x:Z(t,"x","ceil","float32")};return fe.runKernel(ng,n)}const GF=ue({ceil_:dle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bf(t,e,n){oa(t),n=n||Ff(e);const s={shape:t,value:e,dtype:n};return fe.runKernel(ck,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hle(t,e,n){const s=Z(t,"x","clipByValue");if(K(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Bf(s.shape,e,s.dtype);const r={x:s},i={clipValueMin:e,clipValueMax:n};return fe.runKernel(sg,r,i)}const wi=ue({clipByValue_:hle});function fle(t){return Es(t,0)}const HF=ue({concat1d_:fle});function ple(t,e){return Es(t,e)}const KF=ue({concat2d_:ple});function mle(t,e){return Es(t,e)}const qF=ue({concat3d_:mle});function gle(t,e){return Es(t,e)}const XF=ue({concat4d_:gle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xle(t,e,n,s,r="NHWC",i=[1,1],a){const l=Z(t,"x","conv2d","float32"),c=Z(e,"filter","conv2d","float32");let u=l,d=!1;l.rank===3&&(d=!0,u=ge(l,[1,l.shape[0],l.shape[1],l.shape[2]])),K(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),K(c.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${c.rank}.`),ni("conv2d",s,a);const h=r==="NHWC"?u.shape[3]:u.shape[1];K(h===c.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${c.shape[2]}.`),K(Ir(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),K(kd(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),K(kd(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:u,filter:c},g={strides:n,pad:s,dataFormat:r,dilations:i,dimRoundingMode:a},x=fe.runKernel(qy,p,g);return d?ge(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const Qc=ue({conv2d_:xle});function yle(t,e,n,s,r="NWC",i=1,a){const l=Z(t,"x","conv1d"),c=Z(e,"filter","conv1d");let u=l,d=!1;l.rank===2&&(d=!0,u=ge(l,[1,l.shape[0],l.shape[1]])),K(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),K(c.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${c.rank}.`),ni("conv1d",s,a),K(u.shape[2]===c.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${c.shape[1]}.`),K(Ir(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),K(kd(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),K(kd(n),()=>"Error in conv1D: Stride should be larger than 0."),K(r==="NWC",()=>`Error in conv1d: got dataFormat of ${r} but only NWC is currently supported.`);const h=ge(c,[1,c.shape[0],c.shape[1],c.shape[2]]),p=ge(u,[u.shape[0],1,u.shape[1],u.shape[2]]),v=Qc(p,h,[1,n],s,"NHWC",[1,i],a);return d?ge(v,[v.shape[2],v.shape[3]]):ge(v,[v.shape[0],v.shape[2],v.shape[3]])}const Qk=ue({conv1d_:yle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vle(t,e,n,s,r,i="NHWC",a){K(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let l=t,c=e,u=!1;e.rank===3&&(u=!0,c=ge(e,[1,e.shape[0],e.shape[1],e.shape[2]]),l=[1,t[0],t[1],t[2]]),K(l.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${l.length}.`),K(c.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${c.rank}`),K(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const d=i==="NHWC"?l[3]:l[1],h=i==="NHWC"?c.shape[3]:c.shape[1];K(d===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${d}) must match input depth for filter ${n.shape[2]}.`),K(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),ni("conv2dDerInput",r,a);const p={dy:c,filter:n},g={strides:s,pad:r,dataFormat:i,dimRoundingMode:a,inputShape:l},x=fe.runKernel(Xy,p,g);return u?ge(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const eC=ue({conv2DBackpropInput_:vle});function ble(t,e,n,s,r,i){const a=Z(t,"x","conv2dTranspose"),l=Z(e,"filter","conv2dTranspose");return eC(n,a,l,s,r,"NHWC",i)}const tC=ue({conv2dTranspose_:ble});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wle(t,e,n,s,r="NDHWC",i=[1,1,1]){const a=Z(t,"x","conv3d"),l=Z(e,"filter","conv3d");let c=a,u=!1;a.rank===4&&(u=!0,c=ge(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),K(c.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${c.rank}.`),K(l.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${l.rank}.`),K(c.shape[4]===l.shape[3],()=>`Error in conv3d: depth of input (${c.shape[4]}) must match input depth for filter ${l.shape[3]}.`),K(Ir(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),K(r==="NDHWC",()=>`Error in conv3d: got dataFormat of ${r} but only NDHWC is currently supported.`),K(kd(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),K(kd(n),()=>"Error in conv3D: Strides should be larger than 0.");const d={x:c,filter:l},h={strides:n,pad:s,dataFormat:r,dilations:i},p=fe.runKernel(Yy,d,h);return u?ge(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const YF=ue({conv3d_:wle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nle(t,e,n,s,r){K(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,a=e,l=!1;e.rank===4&&(l=!0,a=ge(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const c=i[4],u=a.shape[4];K(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),K(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),K(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),K(c===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[3]}.`),K(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const d={dy:a,filter:n},h={pad:r,strides:s,inputShape:i},p=fe.runKernel(JS,d,h);return l?ge(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const ZF=ue({conv3DBackpropInput_:Nle});function Sle(t,e,n,s,r){const i=Z(t,"x","conv3dTranspose"),a=Z(e,"filter","conv3dTranspose");return ZF(n,i,a,s,r)}const JF=ue({conv3dTranspose_:Sle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kle(t){const n={x:Z(t,"x","cos","float32")};return fe.runKernel(rg,n)}const U2=ue({cos_:kle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cle(t){const n={x:Z(t,"x","cosh","float32")};return fe.runKernel(ig,n)}const nC=ue({cosh_:Cle});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tle(t,e=0,n=!1,s=!1){const i={x:Z(t,"x","cumprod")},a={axis:e,exclusive:n,reverse:s};return fe.runKernel(QS,i,a)}const F0=ue({cumprod_:Tle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ile(t,e=0,n=!1,s=!1){const i={x:Z(t,"x","cumsum")},a={axis:e,exclusive:n,reverse:s};return fe.runKernel(Zy,i,a)}const sC=ue({cumsum_:Ile});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jle(t,e,n,s=!1){const r=Z(t,"x","denseBincount"),i=Z(e,"weights","denseBincount");K(r.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${r.dtype}`),K(r.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${r.rank}.`),K(n>=0,()=>`size must be non-negative, but got ${n}.`),K(i.size===r.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${r.shape}, weights shape: ${i.shape}.`);const a={x:r,weights:i},l={size:n,binaryOutput:s};return fe.runKernel(tk,a,l)}const L3=ue({denseBincount_:jle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ele(t,e,n="NHWC"){const s=Z(t,"x","depthToSpace","float32"),r=n==="NHWC"?s.shape[1]:s.shape[2],i=n==="NHWC"?s.shape[2]:s.shape[3],a=n==="NHWC"?s.shape[3]:s.shape[1];K(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),K(r*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${e}  for depthToSpace with input shape
    ${s.shape}`),K(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${s.shape}`),K(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${s.shape}`);const l={x:s},c={blockSize:e,dataFormat:n};return fe.runKernel(nk,l,c)}const QF=ue({depthToSpace_:Ele});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $le(t,e,n,s,r="NHWC",i=[1,1],a){const l=Z(t,"x","depthwiseConv2d","float32"),c=Z(e,"filter","depthwiseConv2d","float32");let u=l,d=!1;l.rank===3&&(d=!0,u=ge(l,[1,l.shape[0],l.shape[1],l.shape[2]])),K(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),K(c.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${c.rank}.`);const h=r==="NHWC"?u.shape[3]:u.shape[1];K(h===c.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${c.shape[2]}.`),ni("depthwiseConv2d",s,a);const p={x:u,filter:c},g={strides:n,pad:s,dataFormat:r,dilations:i,dimRoundingMode:a},x=fe.runKernel(Jy,p,g);return d?ge(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const Hg=ue({depthwiseConv2d_:$le});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ale(t){const n={x:Z(t,"x","diag")};return fe.runKernel(ik,n)}const Rle=ue({diag_:Ale});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dle(t,e,n,s,r=[1,1],i="NHWC"){const a=Z(t,"x","dilation2d"),l=Z(e,"filter","dilation2d");K(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),K(l.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${l.rank}.`),K(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let c=a,u=!1;a.rank===3&&(c=ge(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=!0),K(c.shape[3]===l.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${c.shape[3]} vs ${l.shape[2]}`);const d={x:c,filter:l},h={strides:n,pad:s,dilations:r},p=fe.runKernel(Qy,d,h);return u?ge(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const e8=ue({dilation2d_:Dle});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yf(t,e){const n=t.length,s=[];for(let r=0;r<n;r++){const i=n-1-r,a=t[i]||1;(e[e.length-1-r]||1)>1&&a===1&&s.unshift(i)}return s}function rr(t,e){const n=[];for(let s=0;s<e.length;s++){const r=t[t.length-s-1],i=e.length-s-1,a=e[i];(r==null||r===1&&a>1)&&n.unshift(i)}return n}function rn(t,e){const n=Math.max(t.length,e.length),s=new Array(n);for(let r=0;r<n;r++){let i=t[t.length-r-1];i==null&&(i=1);let a=e[e.length-r-1];if(a==null&&(a=1),i===1)s[n-r-1]=a;else if(a===1)s[n-r-1]=i;else if(i!==a){const l=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(l)}else s[n-r-1]=i}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ple(t,e){let n=Z(t,"a","equal","string_or_numeric"),s=Z(e,"b","equal","string_or_numeric");[n,s]=$s(n,s),rn(n.shape,s.shape);const r={a:n,b:s};return fe.runKernel(e2,r)}const mo=ue({equal_:Ple});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _le(t,e,n){const s=Z(e,"a","where"),r=Z(n,"b","where"),i=Z(t,"condition","where","bool"),a=rn(rn(i.shape,s.shape),r.shape),l=sf(i,a),c=sf(s,a),u=sf(r,a),d={condition:l,t:c,e:u};return fe.runKernel($2,d)}const Pr=ue({where_:_le});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ole(t){const n={x:Z(t,"x","zerosLike")};return fe.runKernel(L2,n)}const Nn=ue({zerosLike_:Ole});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fle(t,e){let n=Z(t,"a","div"),s=Z(e,"b","div");[n,s]=$s(n,s);const r=yt(n,s),i=Nn(r),a=mo(s,i);return Pr(a,i,r)}const t8=ue({divNoNan_:Fle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mle(t,e){const n=Z(t,"t1","dot"),s=Z(e,"t2","dot");K((n.rank===1||n.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${s.rank}.`);const r=n.rank===1?n.size:n.shape[1],i=s.rank===1?s.size:s.shape[0];if(K(r===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${r} and ${i}.`),n.rank===1&&s.rank===1){const a=ge(n,[1,-1]),l=ge(s,[-1,1]),c=gn(a,l);return ge(c,[])}else if(n.rank===1&&s.rank===2){const a=ge(n,[1,-1]),l=ge(s,[s.shape[0],s.shape[1]]),c=gn(a,l);return ge(c,[c.size])}else if(n.rank===2&&s.rank===1){const a=ge(s,[-1,1]),l=gn(n,a);return ge(l,[l.size])}else{const a=ge(s,[s.shape[0],s.shape[1]]);return gn(n,a)}}const n8=ue({dot_:Mle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lle(t,...e){const n=e.map((r,i)=>Z(r,`tensors${i}`,"einsum")),s={equation:t};return fe.runKernel(ak,n,s)}const zh=ue({einsum_:Lle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ble(t){const n={x:Z(t,"x","elu","float32")};return fe.runKernel(og,n)}const Kg=ue({elu_:Ble});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zle(t,e){const n=Z(t,"x","ensureShape","string_or_numeric");if(!tae(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const Vle=ue({ensureShape_:zle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ule(t){let e=Z(t,"x","erf");K(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=ht(e,"float32"));const n={x:e};return fe.runKernel(lg,n)}const rC=ue({erf_:Ule});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iC(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function s8(t,e,n){const s=t.length+e.length,r=[];let i=0,a=0;for(let l=0;l<s;l++)n.indexOf(l)===-1?r.push(t[i++]):r.push(e[a++]);return r}function mr(t,e){const n=[],s=t.length;for(let i=0;i<s;i++)e.indexOf(i)===-1&&n.push(t[i]);const r=e.map(i=>t[i]);return[n,r]}function Os(t,e){const n=e.map(s=>1);return s8(t,n,e)}function jr(t,e,n){K(iC(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Ns(t,e){if(iC(t,e))return null;const n=[];for(let s=0;s<e;++s)t.indexOf(s)===-1&&n.push(s);return t.forEach(s=>n.push(s)),n}function pu(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Fs(t,e){const n=[];for(let s=e-t;s<e;++s)n.push(s);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wle(t,e=null,n=!1){const r={x:Z(t,"x","max")},i={reductionIndices:e,keepDims:n};return fe.runKernel(h2,r,i)}const Da=ue({max_:Wle});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gle(t,e=null,n=!1){const r={x:Z(t,"x","min")},i={axis:e,keepDims:n};return fe.runKernel(g2,r,i)}const vm=ue({min_:Gle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hle(t,e){let n=Z(t,"base","pow"),s=Z(e,"exp","pow");[n,s]=$s(n,s);const r={a:n,b:s};return fe.runKernel(kg,r)}const Ul=ue({pow_:Hle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lt(t,e){if((Pa(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Pa(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return hu(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kle(t){const n={x:Z(t,"x","sqrt","float32")};return fe.runKernel(Og,n)}const Tr=ue({sqrt_:Kle});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qle(t){const e=Z(t,"x","square"),n={};return fe.runKernel("Square",{x:e},n)}const qn=ue({square_:qle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xle(t,e=null,n=!1){let s=Z(t,"x","sum");s.dtype==="bool"&&(s=ht(s,"int32"));const r={x:s},i={axis:e,keepDims:n};return fe.runKernel(R2,r,i)}const kt=ue({sum_:Xle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yle(t,e="euclidean",n=null,s=!1){t=Z(t,"x","norm");const r=r8(t,e,n);let i=r.shape;if(s){const a=fn(n,t.shape);i=Os(r.shape,a)}return ge(r,i)}function r8(t,e,n=null){if(t.rank===0)return Ys(t);if(t.rank!==1&&n===null)return r8(ge(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return kt(Ys(t),n);if(e===1/0)return Da(Ys(t),n);if(e===-1/0)return vm(Ys(t),n);if(e==="euclidean"||e===2)return Tr(kt(Ul(Ys(t),Lt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Da(kt(Ys(t),n[0]),n[1]-1);if(e===1/0)return Da(kt(Ys(t),n[1]),n[0]);if(e===-1/0)return vm(kt(Ys(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Tr(kt(qn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const qg=ue({norm_:Yle});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zle(t,e=null,n=!1){return qg(t,"euclidean",e,n)}const i8=ue({euclideanNorm_:Zle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jle(t){const n={x:Z(t,"x","exp")};return fe.runKernel(cg,n)}const Jr=ue({exp_:Jle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qle(t,e=0){const n=Z(t,"x","expandDims","string_or_numeric");K(e<=n.rank,()=>"Axis must be <= rank of the tensor");const s={input:n},r={dim:e};return fe.runKernel(t2,s,r)}const Zs=ue({expandDims_:Qle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ece(t){const n={x:Z(t,"x","expm1")};return fe.runKernel(ug,n)}const a8=ue({expm1_:ece});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tce(t,e){const n=Z(t,"x","tile","string_or_numeric");K(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const s={x:n},r={reps:e};return fe.runKernel(zg,s,r)}const Ca=ue({tile_:tce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nce(t,e,n,s="float32"){e==null&&(e=t);const r=un([t,e],s),i=t<=e?t:e;for(let l=0;l<i;++l)r.set(1,l,l);const a=ge(r.toTensor(),[t,e]);if(n==null)return a;if(n.length===1)return Ca(Zs(a,0),[n[0],1,1]);if(n.length===2)return Ca(Zs(Zs(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ca(Zs(Zs(Zs(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const aC=ue({eye_:nce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sce(t){const n={x:Z(t,"x","floor","float32")};return fe.runKernel(dg,n)}const Xg=ue({floor_:sce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rce(t,e,n=0,s=0){const r=Z(t,"x","gather"),i=Z(e,"indices","gather","int32"),a={x:r,indices:i},l={axis:n,batchDims:s};return fe.runKernel(s2,a,l)}const Yg=ue({gather_:rce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ice(t,e){let n=Z(t,"a","greater","string_or_numeric"),s=Z(e,"b","greater","string_or_numeric");[n,s]=$s(n,s),rn(n.shape,s.shape);const r={a:n,b:s};return fe.runKernel(r2,r)}const Ki=ue({greater_:ice});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ace(t,e){let n=Z(t,"a","greaterEqual","string_or_numeric"),s=Z(e,"b","greaterEqual","string_or_numeric");[n,s]=$s(n,s),rn(n.shape,s.shape);const r={a:n,b:s};return fe.runKernel(fg,r)}const mu=ue({greaterEqual_:ace});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oce(t){const n={input:Z(t,"input","imag")};return fe.runKernel(fk,n)}const W2=ue({imag_:oce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lce(t){const n={x:Z(t,"x","isFinite")};return fe.runKernel(mg,n)}const o8=ue({isFinite_:lce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cce(t){const n={x:Z(t,"x","isInf")};return fe.runKernel(gg,n)}const l8=ue({isInf_:cce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uce(t){const n={x:Z(t,"x","isNaN")};return fe.runKernel(xg,n)}const c8=ue({isNaN_:uce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dce(t,e=.2){const s={x:Z(t,"x","leakyRelu")},r={alpha:e};return fe.runKernel(i2,s,r)}const G2=ue({leakyRelu_:dce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hce(t,e){let n=Z(t,"a","less","string_or_numeric"),s=Z(e,"b","less","string_or_numeric");[n,s]=$s(n,s),rn(n.shape,s.shape);const r={a:n,b:s};return fe.runKernel(a2,r)}const bm=ue({less_:hce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fce(t,e){let n=Z(t,"a","lessEqual","string_or_numeric"),s=Z(e,"b","lessEqual","string_or_numeric");[n,s]=$s(n,s),rn(n.shape,s.shape);const r={a:n,b:s};return fe.runKernel(o2,r)}const Bd=ue({lessEqual_:fce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pce(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const s={start:t,stop:e,num:n};return fe.runKernel(pk,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mce(t,e=5,n=1,s=1,r=.5){const i=Z(t,"x","localResponseNormalization");K(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),K(mf(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=i,l=!1;i.rank===3&&(l=!0,a=ge(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const c={x:a},u={depthRadius:e,bias:n,alpha:s,beta:r},d=fe.runKernel(d2,c,u);return l?ge(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const u8=ue({localResponseNormalization_:mce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gce(t){const n={x:Z(t,"x","log","float32")};return fe.runKernel(yg,n)}const ia=ue({log_:gce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xce(t){const n={x:Z(t,"x","log1p")};return fe.runKernel(vg,n)}const H2=ue({log1p_:xce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yce(t,e){K(w3(t),()=>"The f passed in variableGrads(f) must be a function"),K(e==null||Array.isArray(e)&&e.every(u=>u instanceof P0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in fe.registeredVariables)e.push(fe.registeredVariables[u])}const s=n?e.filter(u=>!u.trainable):null,r=e.length;e=e.filter(u=>u.trainable),K(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${r} variables is trainable.`);const i=!0,{value:a,grads:l}=fe.gradients(t,e,null,i);K(l.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),K(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const c={};return e.forEach((u,d)=>{l[d]!=null&&(c[u.name]=l[d])}),s?.forEach(u=>c[u.name]=null),{value:a,grads:c}}function Wl(t){return fe.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vce(t){const n={x:Z(t,"x","neg")};return fe.runKernel(y2,n)}const ls=ue({neg_:vce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bce(t){const n={x:Z(t,"x","softplus")};return fe.runKernel(_g,n)}const zf=ue({softplus_:bce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wce(t){const e=Z(t,"x","logSigmoid");return Wl(s=>({value:ls(zf(ls(s))),gradFunc:a=>he(a,oo(ls(s)))}))(e)}const d8=ue({logSigmoid_:wce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nce(t,e){let n=Z(t,"a","sub"),s=Z(e,"b","sub");[n,s]=$s(n,s);const r={a:n,b:s};return fe.runKernel(Mg,r)}const vt=ue({sub_:Nce});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sce(t,e=-1){const n=Z(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Wl((r,i)=>{const l=Da(r,e,!0),c=vt(r,l),u=vt(ht(c,"float32"),ia(kt(Jr(c),e,!0)));return i([u]),{value:u,gradFunc:(h,p)=>{const[g]=p,x=!0,y=Jr(g);return vt(h,he(kt(h,e,x),y))}}})(n)}const oC=ue({logSoftmax_:Sce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kce(t,e=null,n=!1){const s=Z(t,"x","logSumExp"),r=fn(e,s.shape),i=Da(s,r,!0),a=vt(s,i),l=Jr(a),c=kt(l,r),u=ia(c),d=Ke(ge(i,u.shape),u);if(n){const h=Os(d.shape,r);return ge(d,h)}return d}const K2=ue({logSumExp_:kce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cce(t,e){const n=Z(t,"a","logicalAnd","bool"),s=Z(e,"b","logicalAnd","bool");rn(n.shape,s.shape);const r={a:n,b:s};return fe.runKernel(l2,r)}const nl=ue({logicalAnd_:Cce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tce(t){const n={x:Z(t,"x","logicalNot","bool")};return fe.runKernel(c2,n)}const q2=ue({logicalNot_:Tce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ice(t,e){const n=Z(t,"a","logicalOr","bool"),s=Z(e,"b","logicalOr","bool");rn(n.shape,s.shape);const r={a:n,b:s};return fe.runKernel(u2,r)}const lC=ue({logicalOr_:Ice});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jce(t,e){const n=Z(t,"a","logicalXor","bool"),s=Z(e,"b","logicalXor","bool");return rn(n.shape,s.shape),nl(lC(t,e),q2(nl(t,e)))}const h8=ue({logicalXor_:jce});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k1=2147483648;function Ece(t,e,n="left"){const s=Z(t,"sortedSequence","searchSorted"),r=Z(e,"values","searchSorted"),i=s.shape[s.shape.length-1],a=r.shape[r.shape.length-1],l=ge(s,[-1,i]),c=ge(r,[-1,a]);if(l.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(l.shape[0]!==c.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Le(c.shape)>=k1)throw new Error(`values tensor size must less than ${k1}`);if(l.shape[1]>=k1)throw new Error(`trailing dim_size must less than ${k1} for int32 output type, was ${l.shape[1]}`);const u={sortedSequence:l,values:c},d={side:n};return fe.runKernel(Rk,u,d)}const cC=ue({searchSorted_:Ece});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ce(t,e){return cC(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ace(t,e,n,s,r){const i=Z(t,"x","maxPool"),a=1;let l=i,c=!1;i.rank===3&&(c=!0,l=ge(i,[1,i.shape[0],i.shape[1],i.shape[2]])),K(l.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${l.rank}.`),K(Ir(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),ni("maxPool",s,r);const u={x:l},d={filterSize:e,strides:n,pad:s,dimRoundingMode:r},h=fe.runKernel(f2,u,d);return c?ge(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const X2=ue({maxPool_:Ace});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rce(t,e=[1,1,1],n,s,r,i="NDHWC"){const a=Z(t,"x","maxPool3d");let l=a,c=!1;a.rank===4&&(c=!0,l=ge(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),K(l.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${l.rank}.`),K(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),ni("maxPool3d",s,r);const u={x:l},d={filterSize:e,strides:n,pad:s,dimRoundingMode:r,dataFormat:i},h=fe.runKernel(p2,u,d);return c?ge(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const f8=ue({maxPool3d_:Rce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dce(t,e,n,s,r=!1){const a={x:Z(t,"x","maxPoolWithArgmax")},l={filterSize:e,strides:n,pad:s,includeBatchInIndex:r},c=fe.runKernel(yk,a,l);return{result:c[0],indexes:c[1]}}const Pce=ue({maxPoolWithArgmax_:Dce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ce(t,e){let n=Z(t,"a","maximum"),s=Z(e,"b","maximum");[n,s]=$s(n,s),n.dtype==="bool"&&(n=ht(n,"int32"),s=ht(s,"int32")),rn(n.shape,s.shape);const r={a:n,b:s};return fe.runKernel(bg,r)}const Jl=ue({maximum_:_ce});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oce(t,e=null,n=!1){const r={x:Z(t,"x","mean")},i={axis:e,keepDims:n};return fe.runKernel(m2,r,i)}const js=ue({mean_:Oce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Js(t,e="float32"){if(oa(t),e==="complex64"){const s=Js(t,"float32"),r=Js(t,"float32");return Yc(s,r)}const n=Or(Le(t),e);return fe.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bi(t,e="float32"){if(oa(t),e==="complex64"){const s=Bi(t,"float32"),r=Js(t,"float32");return Yc(s,r)}const n=zS(Le(t),e);return fe.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fce(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let s=Z(t,"x","meshgrid",t instanceof zn?t.dtype:"float32");if(e===void 0)return[s];let r=Z(e,"y","meshgrid",e instanceof zn?e.dtype:"float32");const i=Le(s.shape),a=Le(r.shape);return n==="xy"?(s=ge(s,[1,-1]),r=ge(r,[-1,1]),[gn(Bi([a,1],s.dtype),s),gn(r,Bi([1,i],r.dtype))]):(s=ge(s,[-1,1]),r=ge(r,[1,-1]),[gn(s,Bi([1,a],s.dtype)),gn(Bi([i,1],r.dtype),r)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mce(t,e){let n=Z(t,"a","minimum"),s=Z(e,"b","minimum");[n,s]=$s(n,s),n.dtype==="bool"&&(n=ht(n,"int32"),s=ht(s,"int32")),rn(n.shape,s.shape);const r={a:n,b:s};return fe.runKernel(wg,r)}const Td=ue({minimum_:Mce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lce(t,e,n){K(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const s=Z(t,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");K(e.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${e.length}.`);const r=n==="reflect"?1:0;for(let l=0;l<s.rank;l++)K(e[l].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),K(e[l][0]>=0&&e[l][0]<=s.shape[l]-r&&e[l][1]>=0&&e[l][1]<=s.shape[l]-r,()=>`Padding in dimension ${l} cannot be greater than or equal to ${s.shape[l]-r} or less than 0 for input of shape ${s.shape}`);const i={paddings:e,mode:n},a={x:s};return fe.runKernel(x2,a,i)}const p8=ue({mirrorPad_:Lce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bce(t,e){let n=Z(t,"a","mod"),s=Z(e,"b","mod");[n,s]=$s(n,s);const r={a:n,b:s};return fe.runKernel(Ng,r)}const m8=ue({mod_:Bce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zce(t,e=null,n=!1){t=Z(t,"x","moments");const s=fn(e,t.shape),r=js(t,s,n);let i=r.shape;n||(i=Os(r.shape,s));const a=qn(vt(ht(t,"float32"),ge(r,i))),l=js(a,s,n);return{mean:r,variance:l}}const Y2=ue({moments_:zce});function Vce(t,e,n,s){const r=Z(e,"data","multiRNNCell"),i=_0(n,"c","multiRNNCell"),a=_0(s,"h","multiRNNCell");let l=r;const c=[];for(let h=0;h<t.length;h++){const p=t[h](l,i[h],a[h]);c.push(p[0]),c.push(p[1]),l=p[1]}const u=[],d=[];for(let h=0;h<c.length;h+=2)u.push(c[h]),d.push(c[h+1]);return[u,d]}const Uce=ue({multiRNNCell_:Vce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wce(t,e,n,s=!1){const r=Z(t,"logits","multinomial"),i=r.size,a=r.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const c={logits:a===1?ge(r,[1,-1]):r},u={numSamples:e,seed:n,normalized:s},d=fe.runKernel(vk,c,u);return a===1?ge(d,[d.size]):d}const Gce=ue({multinomial_:Wce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hce(t,e){let n=Z(t,"a","notEqual","string_or_numeric"),s=Z(e,"b","notEqual","string_or_numeric");[n,s]=$s(n,s),rn(n.shape,s.shape);const r={a:n,b:s};return fe.runKernel(v2,r)}const vf=ue({notEqual_:Hce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kce(t,e,n=1,s=0,r="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const a={indices:Z(t,"indices","oneHot","int32")},l={dtype:r,depth:e,onValue:n,offValue:s};return fe.runKernel(w2,a,l)}const uC=ue({oneHot_:Kce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qce(t){const n={x:Z(t,"x","onesLike")};return fe.runKernel(b2,n)}const aa=ue({onesLike_:qce});function Xce(t,e){const n=Z(t,"v1","outerProduct"),s=Z(e,"v2","outerProduct");K(n.rank===1&&s.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${s.rank}.`);const r=ge(n,[-1,1]),i=ge(s,[1,-1]);return gn(r,i)}const Yce=ue({outerProduct_:Xce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zce(t,e,n=0){const s=Z(t,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const r={paddings:e,constantValue:n},i={x:s};return fe.runKernel(S2,i,r)}const gu=ue({pad_:Zce});function Jce(t,e,n=0){return K(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),gu(t,[e],n)}const Qce=ue({pad1d_:Jce});function eue(t,e,n=0){return K(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),gu(t,e,n)}const tue=ue({pad2d_:eue});function nue(t,e,n=0){return K(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),gu(t,e,n)}const sue=ue({pad3d_:nue});function rue(t,e,n=0){return K(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),gu(t,e,n)}const iue=ue({pad4d_:rue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aue(t,e,n){const s=Z(t,"x","spaceToBatchND");K(s.rank>=1+e.length,()=>`input rank ${s.rank} should be > than [blockShape] ${e.length}`),K(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),K(s.shape.reduce((a,l,c)=>c>0&&c<=e.length?a&&(l+n[c-1][0]+n[c-1][1])%e[c-1]===0:a,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const r={x:s},i={blockShape:e,paddings:n};return fe.runKernel(D2,r,i)}const Z2=ue({spaceToBatchND_:aue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oue(t,e,n,s,r,i,a){r==null&&(r=[1,1]),i==null&&(i=1),s===0&&(s="valid");const l=Z(t,"x","maxPool");let c=l,u=!1;l.rank===3&&(u=!0,c=ge(l,[1,l.shape[0],l.shape[1],l.shape[2]])),K(Ir(i,r),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${r}'`);const d=Fa(c.shape,e,i,r,s),h=[d.dilationHeight,d.dilationWidth];let p;s==="same"?p=cue([d.filterHeight,d.filterWidth],h):p=[[0,0],[0,0]];const g=h[0]===1&&h[1]===1,[x,y]=lue([d.inHeight,d.inWidth],h,p),v=g?s:"valid",w=g?c:Z2(c,h,x),k=(n==="avg"?()=>z2(w,e,i,v,a):()=>X2(w,e,i,v,a))(),C=g?k:V2(k,h,y);return u?ge(C,[C.shape[1],C.shape[2],C.shape[3]]):C}function lue(t,e,n){const s=n.map(d=>d[0]),r=n.map(d=>d[1]),i=t.concat(s,r),a=e.map((d,h)=>(d-i[h]%d)%d),l=r.map((d,h)=>d+a[h]),c=e.map((d,h)=>[s[h],l[h]]),u=e.map((d,h)=>[0,a[h]]);return[c,u]}function cue(t,e){const s=t.map((a,l)=>a+(a-1)*(e[l]-1)).map(a=>a-1),r=s.map(a=>Math.floor(a/2)),i=s.map((a,l)=>a-r[l]);return s.map((a,l)=>[r[l],i[l]])}const g8=ue({pool_:oue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uue(t,e){const n=Z(t,"x","prelu"),s=Z(e,"alpha","prelu"),r={x:n,alpha:s};return fe.runKernel(k2,r)}const J2=ue({prelu_:uue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function due(t,e=null,n=!1){let s=Z(t,"x","prod");s.dtype==="bool"&&(s=ht(s,"int32"));const r={x:s},i={axis:e,keepDims:n};return fe.runKernel(C2,r,i)}const x8=ue({prod_:due});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hue(t,e,n,s){const r=t.map((d,h)=>Z(d,`tensors${h}`,"raggedGather","int32")),i=Z(e,"paramsDenseValues","raggedGather"),a=Z(n,"indices","raggedGather","int32"),l={paramsNestedSplits:r,paramsDenseValues:i,indices:a},c={outputRaggedRank:s},u=fe.runKernel(Sk,l,c);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const fue=ue({raggedGather_:hue});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pue(t,e,n){const s=Z(t,"starts","raggedRange"),r=Z(e,"limits","raggedRange",s.dtype),i=Z(n,"deltas","raggedRange",s.dtype),a={starts:s,limits:r,deltas:i},l=fe.runKernel(kk,a);return{rtNestedSplits:l[0],rtDenseValues:l[1]}}const mue=ue({raggedRange_:pue});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gue(t,e,n,s,r){const i=Z(t,"shape","raggedTensorToTensor","int32"),a=Z(e,"values","raggedTensorToTensor"),l=Z(n,"defaultValue","raggedTensorToTensor",a.dtype),c=s.map((h,p)=>Z(h,`tensors${p}`,"raggedTensorToTensor","int32")),u={shape:i,values:a,defaultValue:l,rowPartitionTensors:c},d={rowPartitionTypes:r};return fe.runKernel(Ck,u,d)}const xue=ue({raggedTensorToTensor_:gue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yue(t,e,n){oa(t);const s=Le(t);let r=null;if(n==null||n==="float32")r=new Float32Array(s);else if(n==="int32")r=new Int32Array(s);else if(n==="bool")r=new Uint8Array(s);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<s;i++)r[i]=e();return fe.makeTensor(r,t,n)}const vue=ue({rand_:yue});var Z1={exports:{}},bue=Z1.exports,f5;function wue(){return f5||(f5=1,(function(t){(function(e,n,s){function r(c){var u=this,d=l();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=d(" "),u.s1=d(" "),u.s2=d(" "),u.s0-=d(c),u.s0<0&&(u.s0+=1),u.s1-=d(c),u.s1<0&&(u.s1+=1),u.s2-=d(c),u.s2<0&&(u.s2+=1),d=null}function i(c,u){return u.c=c.c,u.s0=c.s0,u.s1=c.s1,u.s2=c.s2,u}function a(c,u){var d=new r(c),h=u&&u.state,p=d.next;return p.int32=function(){return d.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,h&&(typeof h=="object"&&i(h,d),p.state=function(){return i(d,{})}),p}function l(){var c=4022871197,u=function(d){d=String(d);for(var h=0;h<d.length;h++){c+=d.charCodeAt(h);var p=.02519603282416938*c;c=p>>>0,p-=c,p*=c,c=p>>>0,p-=c,c+=p*4294967296}return(c>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=a:this.alea=a})(bue,t)})(Z1)),Z1.exports}var J1={exports:{}},Nue=J1.exports,p5;function Sue(){return p5||(p5=1,(function(t){(function(e,n,s){function r(l){var c=this,u="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var h=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^h^h>>>8},l===(l|0)?c.x=l:u+=l;for(var d=0;d<u.length+64;d++)c.x^=u.charCodeAt(d)|0,c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function a(l,c){var u=new r(l),d=c&&c.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,g=(u.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},h.int32=u.next,h.quick=h,d&&(typeof d=="object"&&i(d,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=a:this.xor128=a})(Nue,t)})(J1)),J1.exports}var Q1={exports:{}},kue=Q1.exports,m5;function Cue(){return m5||(m5=1,(function(t){(function(e,n,s){function r(l){var c=this,u="";c.next=function(){var h=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(h^h<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(l|0)?c.x=l:u+=l;for(var d=0;d<u.length+64;d++)c.x^=u.charCodeAt(d)|0,d==u.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function a(l,c){var u=new r(l),d=c&&c.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,g=(u.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},h.int32=u.next,h.quick=h,d&&(typeof d=="object"&&i(d,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=a:this.xorwow=a})(kue,t)})(Q1)),Q1.exports}var e0={exports:{}},Tue=e0.exports,g5;function Iue(){return g5||(g5=1,(function(t){(function(e,n,s){function r(l){var c=this;c.next=function(){var d=c.x,h=c.i,p,g;return p=d[h],p^=p>>>7,g=p^p<<24,p=d[h+1&7],g^=p^p>>>10,p=d[h+3&7],g^=p^p>>>3,p=d[h+4&7],g^=p^p<<7,p=d[h+7&7],p=p^p<<13,g^=p^p<<9,d[h]=g,c.i=h+1&7,g};function u(d,h){var p,g=[];if(h===(h|0))g[0]=h;else for(h=""+h,p=0;p<h.length;++p)g[p&7]=g[p&7]<<15^h.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],d.x=g,d.i=0,p=256;p>0;--p)d.next()}u(c,l)}function i(l,c){return c.x=l.x.slice(),c.i=l.i,c}function a(l,c){l==null&&(l=+new Date);var u=new r(l),d=c&&c.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,g=(u.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},h.int32=u.next,h.quick=h,d&&(d.x&&i(d,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=a:this.xorshift7=a})(Tue,t)})(e0)),e0.exports}var t0={exports:{}},jue=t0.exports,x5;function Eue(){return x5||(x5=1,(function(t){(function(e,n,s){function r(l){var c=this;c.next=function(){var d=c.w,h=c.X,p=c.i,g,x;return c.w=d=d+1640531527|0,x=h[p+34&127],g=h[p=p+1&127],x^=x<<13,g^=g<<17,x^=x>>>15,g^=g>>>12,x=h[p]=x^g,c.i=p,x+(d^d>>>16)|0};function u(d,h){var p,g,x,y,v,w=[],N=128;for(h===(h|0)?(g=h,h=null):(h=h+"\0",g=0,N=Math.max(N,h.length)),x=0,y=-32;y<N;++y)h&&(g^=h.charCodeAt((y+32)%h.length)),y===0&&(v=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,y>=0&&(v=v+1640531527|0,p=w[y&127]^=g+v,x=p==0?x+1:0);for(x>=128&&(w[(h&&h.length||0)&127]=-1),x=127,y=512;y>0;--y)g=w[x+34&127],p=w[x=x+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,w[x]=g^p;d.w=v,d.X=w,d.i=x}u(c,l)}function i(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function a(l,c){l==null&&(l=+new Date);var u=new r(l),d=c&&c.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,g=(u.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},h.int32=u.next,h.quick=h,d&&(d.X&&i(d,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=a:this.xor4096=a})(jue,t)})(t0)),t0.exports}var n0={exports:{}},$ue=n0.exports,y5;function Aue(){return y5||(y5=1,(function(t){(function(e,n,s){function r(l){var c=this,u="";c.next=function(){var h=c.b,p=c.c,g=c.d,x=c.a;return h=h<<25^h>>>7^p,p=p-g|0,g=g<<24^g>>>8^x,x=x-h|0,c.b=h=h<<20^h>>>12^p,c.c=p=p-g|0,c.d=g<<16^p>>>16^x,c.a=x-h|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=l|0):u+=l;for(var d=0;d<u.length+20;d++)c.b^=u.charCodeAt(d)|0,c.next()}function i(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function a(l,c){var u=new r(l),d=c&&c.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,g=(u.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},h.int32=u.next,h.quick=h,d&&(typeof d=="object"&&i(d,u),h.state=function(){return i(u,{})}),h}n&&n.exports?n.exports=a:this.tychei=a})($ue,t)})(n0)),n0.exports}var s0={exports:{}};const Rue={},Due=Object.freeze(Object.defineProperty({__proto__:null,default:Rue},Symbol.toStringTag,{value:"Module"})),Pue=MW(Due);var _ue=s0.exports,v5;function Oue(){return v5||(v5=1,(function(t){(function(e,n,s){var r=256,i=6,a=52,l="random",c=s.pow(r,i),u=s.pow(2,a),d=u*2,h=r-1,p;function g(C,j,R){var _=[];j=j==!0?{entropy:!0}:j||{};var A=w(v(j.entropy?[C,k(n)]:C??N(),3),_),O=new x(_),L=function(){for(var D=O.g(i),q=c,V=0;D<u;)D=(D+V)*r,q*=r,V=O.g(1);for(;D>=d;)D/=2,q/=2,V>>>=1;return(D+V)/q};return L.int32=function(){return O.g(4)|0},L.quick=function(){return O.g(4)/4294967296},L.double=L,w(k(O.S),n),(j.pass||R||function(D,q,V,ne){return ne&&(ne.S&&y(ne,O),D.state=function(){return y(O,{})}),V?(s[l]=D,q):D})(L,A,"global"in j?j.global:this==s,j.state)}function x(C){var j,R=C.length,_=this,A=0,O=_.i=_.j=0,L=_.S=[];for(R||(C=[R++]);A<r;)L[A]=A++;for(A=0;A<r;A++)L[A]=L[O=h&O+C[A%R]+(j=L[A])],L[O]=j;(_.g=function(D){for(var q,V=0,ne=_.i,J=_.j,ee=_.S;D--;)q=ee[ne=h&ne+1],V=V*r+ee[h&(ee[ne]=ee[J=h&J+q])+(ee[J]=q)];return _.i=ne,_.j=J,V})(r)}function y(C,j){return j.i=C.i,j.j=C.j,j.S=C.S.slice(),j}function v(C,j){var R=[],_=typeof C,A;if(j&&_=="object")for(A in C)try{R.push(v(C[A],j-1))}catch{}return R.length?R:_=="string"?C:C+"\0"}function w(C,j){for(var R=C+"",_,A=0;A<R.length;)j[h&A]=h&(_^=j[h&A]*19)+R.charCodeAt(A++);return k(j)}function N(){try{var C;return p&&(C=p.randomBytes)?C=C(r):(C=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(C)),k(C)}catch{var j=e.navigator,R=j&&j.plugins;return[+new Date,e,R,e.screen,k(n)]}}function k(C){return String.fromCharCode.apply(0,C)}if(w(s.random(),n),t.exports){t.exports=g;try{p=Pue}catch{}}else s["seed"+l]=g})(typeof self<"u"?self:_ue,[],Math)})(s0)),s0.exports}var Jw,b5;function Fue(){if(b5)return Jw;b5=1;var t=wue(),e=Sue(),n=Cue(),s=Iue(),r=Eue(),i=Aue(),a=Oue();return a.alea=t,a.xor128=e,a.xorwow=n,a.xorshift7=s,a.xor4096=r,a.tychei=i,Jw=a,Jw}var Q2=Fue();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dC{constructor(e,n,s,r,i){this.mean=e,this.stdDev=n,this.dtype=s,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=i||Math.random();this.random=Q2.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const r=this.nextVal;return this.nextVal=NaN,r}let e,n,s=!1;for(;!s;){let r,i,a;do r=2*this.random()-1,i=2*this.random()-1,a=r*r+i*i;while(a>=1||a===0);const l=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*l,n=this.mean+this.stdDev*i*l,(!this.truncated||this.isValidTruncated(e))&&(s=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Mue{constructor(e,n,s,r){this.alpha=e,this.beta=1/n,this.dtype=s;const i=r||Math.random();this.randu=Q2.alea(i.toString()),this.randn=new dC(0,1,s,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,s,r,i,a;for(;;){do r=this.randn.nextValue(),a=1+this.c*r;while(a<=0);if(a*=a*a,e=r*r,n=1-.331*e*e,s=.5*e+this.d*(1-a+Math.log(a)),i=this.randu(),i<n||Math.log(i)<s)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class Lue{constructor(e=0,n=1,s,r){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=s,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=Q2.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bue(t,e,n=1,s="float32",r){if(oa(t),n==null&&(n=1),s==null&&(s="float32"),s!=="float32"&&s!=="int32")throw new Error(`Unsupported data type ${s}`);const i=new Mue(e,n,s,r),a=un(t,s);for(let l=0;l<a.values.length;l++)a.values[l]=i.nextValue();return a.toTensor()}const zue=ue({randomGamma_:Bue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vue(t,e=0,n=1,s,r){if(oa(t),s!=null&&s==="bool")throw new Error(`Unsupported data type ${s}`);const i=new dC(e,n,s,!1,r),a=un(t,s);for(let l=0;l<a.values.length;l++)a.values[l]=i.nextValue();return a.toTensor()}const hC=ue({randomNormal_:Vue});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uue(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return hC(t,0,1,e,n)}const Wue=ue({randomStandardNormal_:Uue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gue(t,e=0,n=1,s="float32",r){oa(t);const i=un(t,s),a=new Lue(e,n,null,r);for(let l=0;l<i.values.length;l++)i.values[l]=a.nextValue();return i.toTensor()}const zd=ue({randomUniform_:Gue});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hue(t,e,n,s){return zd(t,e,n,"int32",s)}const Kue=ue({randomUniformInt_:Hue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bf(t,e,n=1,s="float32"){if(n===0)throw new Error("Cannot have a step of zero");const r={start:t,stop:e,step:n,dtype:s};return fe.runKernel(Tk,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function que(t){const n={input:Z(t,"input","real")};return fe.runKernel(Ik,n)}const wm=ue({real_:que});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xue(t){const n={x:Z(t,"x","reciprocal")};return fe.runKernel(Cg,n)}const y8=ue({reciprocal_:Xue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yue(t){const n={x:Z(t,"x","relu")};return fe.runKernel(Tg,n)}const al=ue({relu_:Yue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zue(t){const n={x:Z(t,"x","relu6")};return fe.runKernel(Ig,n)}const fC=ue({relu6_:Zue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jue(t,e){const s={x:Z(t,"x","reverse")},r={dims:e};return fe.runKernel(E2,s,r)}const _a=ue({reverse_:Jue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Que(t){const e=Z(t,"x","reverse");return K(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),_a(e,0)}const ede=ue({reverse1d_:Que});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tde(t,e){const n=Z(t,"x","reverse");return K(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),_a(n,e)}const nde=ue({reverse2d_:tde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sde(t,e){const n=Z(t,"x","reverse");return K(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),_a(n,e)}const rde=ue({reverse3d_:sde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ide(t,e){const n=Z(t,"x","reverse");return K(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),_a(n,e)}const ade=ue({reverse4d_:ide});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ode(t){const n={x:Z(t,"x","round")};return fe.runKernel(jg,n)}const pC=ue({round_:ode});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lde(t){const n={x:Z(t,"x","rsqrt","float32")};return fe.runKernel(Eg,n)}const mC=ue({rsqrt_:lde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cde(t){const n={x:Z(t,"x","selu")};return fe.runKernel($g,n)}const gC=ue({selu_:cde});function ude(t,e,n,s,r,i=[1,1],a="NHWC"){const l=Z(t,"x","separableConv2d"),c=Z(e,"depthwiseFilter","separableConv2d"),u=Z(n,"pointwiseFilter","separableConv2d");let d=l,h=!1;if(l.rank===3&&(h=!0,d=ge(l,[1,l.shape[0],l.shape[1],l.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");K(d.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${d.rank}.`),K(c.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${c.rank}.`),K(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${c.rank}.`),K(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),K(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const p=c.shape[2],g=c.shape[3];K(u.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${u.shape[2]}.`);const x=Hg(d,c,s,r,a,i),v=Qc(x,u,1,"valid",a);return h?ge(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const xC=ue({separableConv2d_:ude});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function dde(t,e){const n=Z(t,"x","setdiff1d"),s=Z(e,"y","setdiff1d");K(n.dtype===s.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${s.dtype}).`),K(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),K(s.rank===1,()=>`y should be 1D tensor, but got y (${s.shape}).`);const r=await n.data(),i=await s.data(),a=new Set(i);let l=0;for(let d=0;d<r.length;d++)a.has(r[d])||l++;const c=new tr([l],n.dtype),u=new tr([l],"int32");for(let d=0,h=0;d<r.length;d++)a.has(r[d])||(c.values[h]=r[d],u.values[h]=d,h++);return[c.toTensor(),u.toTensor()]}const hde=dde;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fde(t){const n={x:Z(t,"x","sign")};return fe.runKernel(Dg,n)}const v8=ue({sign_:fde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pde(t){const n={x:Z(t,"x","sin","float32")};return fe.runKernel(Ag,n)}const yC=ue({sin_:pde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mde(t){const n={x:Z(t,"x","sinh")};return fe.runKernel(Rg,n)}const vC=ue({sinh_:mde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gde(t,e,n){const s=Z(t,"x","slice1d");return K(s.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${s.rank} tensor`),Wt(s,[e],[n])}const ev=ue({slice1d_:gde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xde(t,e,n){const s=Z(t,"x","slice2d");return K(s.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${s.rank} tensor`),Wt(s,e,n)}const bC=ue({slice2d_:xde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yde(t,e,n){const s=Z(t,"x","slice3d");return K(s.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${s.rank} tensor`),Wt(s,e,n)}const tv=ue({slice3d_:yde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vde(t,e,n){const s=Z(t,"x","slice4d");return K(s.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${s.rank} tensor`),Wt(s,e,n)}const Nm=ue({slice4d_:vde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bde(t,e=-1){const n=Z(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const s={logits:n},r={dim:e};return fe.runKernel(_2,s,r)}const nv=ue({softmax_:bde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wde(t){K(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return fe.runKernel(lk,e)}const sv=ue({fft_:wde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nde(t){K(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return fe.runKernel(hk,e)}const Sm=ue({ifft_:Nde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sde(t){const e=t.shape[t.shape.length-1],n=t.size/e;let s;if(e<=2){const r=ge(t,[n,e]);s=Sm(r)}else{const r=[n,2*(e-1)],i=ge(wm(t),[n,e]),a=ge(W2(t),[n,e]),l=_a(Wt(i,[0,1],[n,e-2]),1),c=he(_a(Wt(a,[0,1],[n,e-2]),1),Lt(-1)),u=Es([i,l],1),d=Es([a,c],1),h=ge(Yc(u,d),[r[0],r[1]]);s=Sm(h)}if(s=wm(s),t.rank===3&&t.shape[0]!==0){const r=s,i=t.shape[0];s=ge(s,[i,s.shape[0]/i,s.shape[1]]),r.dispose()}return s}const wC=ue({irfft_:Sde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kde(t,e,n=0){const r={x:Z(t,"x","split")},i={numOrSizeSplits:e,axis:n};return fe.runKernel(P2,r,i)}const zi=ue({split_:kde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cde(t,e){K(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const s=t.size/n;let r;if(e!=null&&e<n){const x=t.shape.map(v=>0),y=t.shape.map(v=>v);y[t.shape.length-1]=e,r=Wt(t,x,y),n=e}else if(e!=null&&e>n){const x=t.shape.map(y=>y);x[t.shape.length-1]=e-n,r=Es([t,Js(x)],t.shape.length-1),n=e}else r=t;const i=Nn(r),a=ge(Yc(r,i),[s,n]),l=sv(a),c=Math.floor(n/2)+1,u=wm(l),d=W2(l),h=zi(u,[c,n-c],u.shape.length-1),p=zi(d,[c,n-c],d.shape.length-1),g=r.shape.slice();return g[r.shape.length-1]=c,ge(Yc(h[0],p[0]),g)}const rv=ue({rfft_:Cde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tde(t,e){let n=Z(t,"a","squaredDifference"),s=Z(e,"b","squaredDifference");[n,s]=$s(n,s),rn(n.shape,s.shape);const r={a:n,b:s},i={};return fe.runKernel(Fg,r,i)}const NC=ue({squaredDifference_:Tde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ide(t,e){const n=Z(t,"x","squeeze","string_or_numeric");return ge(n,cu(n.shape,e).newShape)}const Ts=ue({squeeze_:Ide});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jde(t,e=0){const n=_0(t,"tensors","stack","string_or_numeric");K(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&K(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const s=n,r={axis:e};return fe.runKernel(N2,s,r)}const Ui=ue({stack_:jde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ede(t,e=0){const s={x:Z(t,"x","step")},r={alpha:e};return fe.runKernel(Vg,s,r)}const Vf=ue({step_:Ede});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $de(t,e,n,s,r=0,i=0,a=0,l=0,c=0){const d={x:Z(t,"x","stridedSlice","string_or_numeric")},h={begin:e,end:n,strides:s,beginMask:r,endMask:i,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:c};return fe.runKernel(Lk,d,h)}const b8=ue({stridedSlice_:$de});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ade(t){const n={x:Z(t,"x","tan","float32")};return fe.runKernel(Lg,n)}const w8=ue({tan_:Ade});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ws(t,e){Of(t);const n=du(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return hu(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fc(t,e,n){if(Of(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=du(t,n);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return hu(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8(t,e,n){if(Of(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const s=du(t,n);if(s.length!==3&&s.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return hu(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rde(t,e,n){if(Of(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const s=du(t,n);if(s.length!==4&&s.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return hu(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dde(t,e,n){if(Of(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const s=du(t,n);if(s.length!==5&&s.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return hu(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pde(t,e,n){if(Of(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const s=du(t,n);if(s.length!==6&&s.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||s,hu(t,e,s,n)}function S8(t,e,n){const s=e.rank>1?e.shape[e.rank-1]:1,r=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${s}, and batchDim: ${r}.`;if(n.rank<r)throw new Error(i+` update.rank < ${r}. `);if(t.length<s+(n.rank-r))throw new Error(i+` Output shape length < ${s+(n.rank-r)}`);if(n.rank!==r+t.length-s)throw new Error(i+` update.rank != ${r+t.length-s}`);for(let a=0;a<r;++a)if(n.shape[a]!==e.shape[a])throw new Error(i+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<n.rank-r;++a)if(n.shape[a+r]!==t[a+s])throw new Error(i+` updates.shape[${a+r}] (${n.shape[a+r]}) != shape[${a+r}] (${t[a+r]})`)}function SC(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}S8(n,e,t)}function Vd(t,e,n){const s=e.shape.length,r=s>1?e.shape[s-1]:1,i=n.length;let a=1;for(let h=r;h<i;++h)a*=n[h];const l=r<1?1:r,c=Le(e.shape)/l,u=[...Mt(n.slice(0,r)),1],d=Le(n);return{sliceRank:r,numUpdates:c,sliceSize:a,strides:u,outputSize:d}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _de(t,e,n){const s=Z(t,"tensor","tensorScatterupdate"),r=Z(e,"indices","tensorScatterupdate","int32"),i=Z(n,"updates","tensorScatterupdate");if(SC(i,r,s.shape),s.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${s.dtype} and ${i.dtype}.`);const a={tensor:s,indices:r,updates:i},l={};return fe.runKernel(Ak,a,l)}const Ode=ue({tensorScatterUpdate_:_de});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fde(t,e=1,n=!0){const s=Z(t,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const r=s.shape[s.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>r)throw new Error(`'k' passed to topk() must be <= the last dimension (${r}) but got ${e}`);const i={x:s},a={k:e,sorted:n},[l,c]=fe.runKernel(Uk,i,a);return{values:l,indices:c}}const k8=ue({topk_:Fde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mde(t,e=0,n=1,s,r){if(oa(t),s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new dC(e,n,s,!0,r),a=un(t,s);for(let l=0;l<a.values.length;l++)a.values[l]=i.nextValue();return a.toTensor()}const kC=ue({truncatedNormal_:Mde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lde(t,e=0){const n=Z(t,"x","unique","string_or_numeric");K(n.rank>0,()=>"The input tensor must be at least 1D");const s={x:n},r={axis:e},[i,a]=fe.runKernel(Gk,s,r);return{values:i,indices:a}}const C8=ue({unique_:Lde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bde(t,e,n){const s=Z(t,"x","unsortedSegmentSum"),r=Z(e,"segmentIds","unsortedSegmentSum","int32");K(mf(n),()=>"numSegments must be of dtype int");const i={x:s,segmentIds:r},a={numSegments:n};return fe.runKernel(M2,i,a)}const CC=ue({unsortedSegmentSum_:Bde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zde(t,e=0){const n=Z(t,"x","unstack","string_or_numeric");K(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const s={value:n},r={axis:e};return fe.runKernel(F2,s,r)}const Oa=ue({unstack_:zde});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vde(t,e){return cC(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8(t,e=!0,n,s){return fe.makeVariable(t,e,n,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TC(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const s=un(t,"int32"),r=un([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const a=s.indexToLoc(n[i]),l=i*t.length;r.values.set(a,l)}return r.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ude(t){const e=Z(t,"condition","whereAsync","bool"),n=await e.data(),s=TC(e.shape,n);return t!==e&&e.dispose(),s}const I8=Ude;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Wde(t,e,n){const s=Z(t,"tensor","boolMask"),r=Z(e,"mask","boolMask","bool"),i=n??0,a=r.rank,l=s.shape;K(a>0,()=>"mask cannot be scalar"),Hi(l.slice(i,i+a),r.shape,"mask's shape must match the first K dimensions of tensor's shape,");let c=1;for(let y=i;y<i+a;y++)c*=l[y];const u=l.slice(0,i).concat([c],l.slice(i+a)),d=ge(s,u),h=ge(r,[-1]),p=await I8(h),g=Ts(p,[1]),x=Yg(d,g,i);return t!==s&&s.dispose(),e!==r&&r.dispose(),g.dispose(),d.dispose(),h.dispose(),p.dispose(),x}const Gde=Wde;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hde(t,e,n){const s=Z(t,"x","transpose");if(e==null&&(e=s.shape.map((a,l)=>l).reverse()),K(s.rank===e.length,()=>`Error in transpose: rank of input ${s.rank} must match length of perm ${e}.`),e.forEach(a=>{K(a>=0&&a<s.rank,()=>`All entries in 'perm' must be between 0 and ${s.rank-1} but got ${e}`)}),s.rank<=1)return s.clone();const r={x:s},i={perm:e};return s.dtype==="complex64"?Ie(()=>{let a=wm(s),l=W2(s);return a=fe.runKernel(ef,{x:a},i),l=fe.runKernel(ef,{x:l},i),n&&(l=ls(l)),Yc(a,l)}):fe.runKernel(ef,r,i)}const wn=ue({transpose_:Hde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kde(t,e,n,s,r=!0){const i=Z(t,"v","movingAverage"),a=Z(e,"x","movingAverage"),l=Z(n,"decay","movingAverage");_ae(i,a),K(bn(i.shape,a.shape),()=>"Shape mismatch in v and x");const c=Lt(1),u=vt(c,l);let d=he(vt(a,i),u);if(r){K(s!=null,()=>"When using zeroDebias: true, step is required.");const h=Z(s,"step","movingAverage");d=yt(d,vt(c,Ul(l,h)))}return Ke(i,d)}const qde=ue({movingAverage_:Kde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xde(t,e,n){oa(n);const s=Z(t,"indices","scatterND","int32"),r=Z(e,"updates","scatterND");SC(r,s,n);const i={indices:s,updates:r},a={shape:n};return fe.runKernel($k,i,a)}const Yde=ue({scatterND_:Xde});function Zde(t,e,n,s){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const r=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const a=e.size;if(!(e.rank===0||e.rank===1&&a===r))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${r}]`);if(e.dtype!==s.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jde(t,e,n,s=0){oa(n);const r=Z(t,"sparseIndices","sparseToDense","int32"),i=Z(e,"sparseValues","sparseToDense","string_or_numeric"),a=Z(s,"defaultValue","sparseToDense",i.dtype);Zde(r,i,n,a);const l={sparseIndices:r,sparseValues:i,defaultValue:a},c={outputShape:n};return fe.runKernel(Fk,l,c)}const Qde=ue({sparseToDense_:Jde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ehe(t,e){const n=Z(e,"indices","gatherND","int32"),r={params:Z(t,"x","gatherND","string_or_numeric"),indices:n};return fe.runKernel(dk,r)}const the=ue({gatherND_:ehe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nhe(t,e){if(e==null)return t.shape.slice();if(bn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let s=0;s<t.shape.length;s++)e[s]==null&&t.shape[s]!=null?n.push(t.shape[s]):n.push(e[s]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function she(t,e,n,s){const r=Z(t,"x","dropout");if(K(r.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${r.dtype} tensor instead.`),K(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof zn?r.clone():r;const i=nhe(r,n),a=1-e,l=yt(Xg(Ke(zd(i,0,1,"float32",s),a)),a);return he(r,l)}const j8=ue({dropout_:she});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function IC(t,e,n){const s=1-t%2,r=new Float32Array(t);for(let i=0;i<t;++i){const a=2*Math.PI*i/(t+s-1);r[i]=e-n*Math.cos(a)}return Ws(r,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function rhe(t,e,n=1){const s=Z(t,"predictions","inTopK"),r=Z(e,"targets","inTopK");K(s.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${s.rank}`),K(s.rank-1===r.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${s.rank} and targets rank ${r.rank}`),Hi(s.shape.slice(0,s.shape.length-1),r.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=s.shape[s.shape.length-1];K(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const a=await s.data(),l=await r.data(),[c,u]=[a.length/i,i],d=Cr("bool",c);for(let h=0;h<c;h++){const p=h*u,g=a.subarray(p,p+u),x=[];for(let y=0;y<g.length;y++)x.push({value:g[y],index:y});x.sort((y,v)=>v.value-y.value),d[h]=0;for(let y=0;y<n;y++)if(x[y].index===l[h]){d[h]=1;break}}return t!==s&&s.dispose(),e!==r&&r.dispose(),ao(d,r.shape,"bool")}const ihe=rhe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ahe(t,e,n,s,r,i="NHWC",a){let l=t;t.rank===3&&(l=ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;c.rank===3&&(c=ge(e,[1,e.shape[0],e.shape[1],e.shape[2]])),K(l.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${l.shape}.`),K(c.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${c.shape}.`),K(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?l.shape[3]:l.shape[1],d=i==="NHWC"?c.shape[3]:c.shape[1];K(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),K(d===n[3],()=>`Error in conv2dDerFilter: depth of dy (${d}) must match output depth for filter (${n[3]}).`),ni("conv2dDerFilter",r,a);const h={x:l,dy:c},p={strides:s,pad:r,dataFormat:i,dimRoundingMode:a,filterShape:n};return fe.runKernel(YS,h,p)}const jC=ue({conv2DBackpropFilter_:ahe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iv(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return he(t,Vf(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function av(t,e){let n=e;const s=rr(t.shape,e.shape);return s.length>0&&(n=kt(n,s)),ge(n,t.shape)}function ov(t,e,n,s){if(e==="linear")return t;if(e==="relu")return al(t);if(e==="elu")return Kg(t);if(e==="relu6")return fC(t);if(e==="prelu")return J2(t,n);if(e==="leakyrelu")return G2(t,s);if(e==="sigmoid")return oo(t);throw new Error(`Unknown fused activation ${e}.`)}const lv=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ohe({x:t,filter:e,strides:n,pad:s,dataFormat:r="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:d}){if(c=c||"linear",lv(fe.state.gradientDepth,c)===!1){K(r==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${r} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let R=Qc(t,e,n,s,r,i,a);return l!=null&&(R=Ke(R,l)),ov(R,c,u,d)}const h=Z(t,"x","conv2d","float32"),p=Z(e,"filter","conv2d","float32");let g=h,x=!1;h.rank===3&&(x=!0,g=ge(h,[1,h.shape[0],h.shape[1],h.shape[2]])),K(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),K(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),ni("fused conv2d",s,a);const y=r==="NHWC"?g.shape[3]:g.shape[1];K(p.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${p.shape[2]}.`),K(Ir(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const v=pr(g.shape,p.shape,n,i,s,a);let w;l!=null&&(w=Z(l,"bias","fused conv2d"),[w]=$s(w,h),r==="NHWC"?rn(v.outShape,w.shape):(K(w.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${w.shape.length}.`),K(w.shape.length===0||w.shape[0]===v.outChannels||w.shape[0]===1,()=>`Error in fused conv2d: bias shape (${w.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let N;if(u!=null){const R=u.shape;if(K(R.length<=1||R.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${R.length}.`),R.length===1)K(R[0]===1||R[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${R}) is not compatible with the number of output channels (${v.outChannels}).`);else if(R.length===3)try{rn(R,v.outShape)}catch{const A=`Error in fused conv2d: PReLU activation weights (${R}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(A)}N=Z(u,"prelu weights","fused conv2d")}const k=(R,_)=>{K(r==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${r} but only NHWC is currently supported.`);const[A,O,L,D]=_,q=iv(R,L,c);K(Jc(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const V=eC(O.shape,q,A,n,s),ne=jC(O,q,A.shape,n,s),J=[V,ne];if(D!=null){const ee=av(D,q);J.push(ee)}return J},C={x:g,filter:p,bias:w,preluActivationWeights:N},j={strides:n,pad:s,dataFormat:r,dilations:i,dimRoundingMode:a,activation:c,leakyreluAlpha:d};return l==null?Wl((_,A,O)=>{let L=fe.runKernel(A0,C,j);return O([A,_,L]),x&&(L=ge(L,[L.shape[1],L.shape[2],L.shape[3]])),{value:L,gradFunc:k}})(g,p):Wl((_,A,O,L)=>{let D=fe.runKernel(A0,C,j);return L([A,_,D,O]),x&&(D=ge(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:k}})(g,p,w)}const $8=ue({fusedConv2d_:ohe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lhe(t,e,n,s,r,i=[1,1],a){let l=t;t.rank===3&&(l=ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;c.rank===3&&(c=ge(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:l,dy:c},d={strides:s,pad:r,dimRoundingMode:a,dilations:i,filterShape:n};return fe.runKernel(sk,u,d)}const A8=ue({depthwiseConv2dNativeBackpropFilter_:lhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function che(t,e,n,s,r,i=[1,1],a){let l=e,c=!1;e.rank===3&&(c=!0,l=ge(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:l,filter:n},d={strides:s,pad:r,dimRoundingMode:a,dilations:i,inputShape:t},h=fe.runKernel(rk,u,d);return c?ge(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const R8=ue({depthwiseConv2dNativeBackpropInput_:che});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uhe({x:t,filter:e,strides:n,pad:s,dataFormat:r="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:d}){if(lv(fe.state.gradientDepth,c)===!1){let j=Hg(t,e,n,s,r,i,a);return l!=null&&(j=Ke(j,l)),ov(j,c,u,d)}const h=Z(t,"x","depthwiseConv2d","float32"),p=Z(e,"filter","depthwiseConv2d","float32");let g=h,x=!1;h.rank===3&&(x=!0,g=ge(h,[1,h.shape[0],h.shape[1],h.shape[2]])),K(g.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${g.rank}.`),K(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),K(g.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${g.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),K(Ir(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),ni("fused depthwiseConv2d",s,a);const y=pr(g.shape,p.shape,n,i,s,a,!0);let v;l!=null&&(v=Z(l,"bias","fused conv2d"),[v]=$s(v,h),rn(y.outShape,v.shape));let w;u!=null&&(w=Z(u,"prelu weights","fused depthwiseConv2d"));const N=(j,R)=>{K(Jc(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[_,A,O,L]=R,D=iv(j,O,c),q=R8(A.shape,D,_,n,s,i,a),V=A8(A,D,_.shape,n,s,i,a);if(L!=null){const ne=av(v,D);return[q,V,ne]}return[q,V]},k={x:g,filter:p,bias:v,preluActivationWeights:w},C={strides:n,pad:s,dataFormat:r,dilations:i,dimRoundingMode:a,activation:c,leakyreluAlpha:d};return l==null?Wl((R,_,A)=>{let O=fe.runKernel(R0,k,C);return A([_,R,O]),x&&(O=ge(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:N}})(g,p):Wl((R,_,A,O)=>{let L=fe.runKernel(R0,k,C);return O([_,R,L,A]),x&&(L=ge(L,[L.shape[1],L.shape[2],L.shape[3]])),{value:L,gradFunc:N}})(g,p,v)}const dhe=ue({fusedDepthwiseConv2d_:uhe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hhe({a:t,b:e,transposeA:n=!1,transposeB:s=!1,bias:r,activation:i="linear",preluActivationWeights:a,leakyreluAlpha:l=.2}){if(lv(fe.state.gradientDepth,i)===!1){let D=gn(t,e,n,s);return r!=null&&(D=Ke(D,r)),ov(D,i,a,l)}let c=Z(t,"a","fused matMul"),u=Z(e,"b","fused matMul");[c,u]=$s(c,u);const d=n?c.shape[c.rank-2]:c.shape[c.rank-1],h=s?u.shape[u.rank-1]:u.shape[u.rank-2],p=n?c.shape[c.rank-1]:c.shape[c.rank-2],g=s?u.shape[u.rank-2]:u.shape[u.rank-1],x=c.shape.slice(0,-2),y=u.shape.slice(0,-2),v=Le(x),w=Le(y);K(d===h,()=>`Error in fused matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${c.shape} and ${u.shape} and transposeA=${n} and transposeB=${s} must match.`);const k=rn(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,g]),C=n?ge(c,[v,d,p]):ge(c,[v,p,d]),j=s?ge(u,[w,g,h]):ge(u,[w,h,g]);let R;r!=null&&(R=Z(r,"bias","fused matMul"),[R]=$s(R,c),rn(k,R.shape));let _;a!=null&&(_=Z(a,"prelu weights","fused matMul"));const A=(D,q)=>{const[V,ne,J,ee]=q,te=iv(ge(D,J.shape),J,i);let X,Q;if(!n&&!s?(X=gn(te,ne,!1,!0),Q=gn(V,te,!0,!1)):!n&&s?(X=gn(te,ne,!1,!1),Q=gn(te,V,!0,!1)):n&&!s?(X=gn(ne,te,!1,!0),Q=gn(V,te,!1,!1)):(X=gn(ne,te,!0,!0),Q=gn(te,V,!0,!0)),r!=null){const G=av(ee,te);return[X,Q,G]}else return[X,Q]},O={a:C,b:j,bias:R,preluActivationWeights:_},L={transposeA:n,transposeB:s,activation:i,leakyreluAlpha:l};return r==null?Wl((q,V,ne)=>{const J=fe.runKernel($0,O,L);return ne([q,V,J]),{value:ge(J,k),gradFunc:A}})(C,j):Wl((q,V,ne,J)=>{const ee=fe.runKernel($0,O,L);return J([q,V,ee,ne]),{value:ge(ee,k),gradFunc:A}})(C,j,R)}const B3=ue({fusedMatMul_:hhe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fhe=Object.freeze(Object.defineProperty({__proto__:null,conv2d:$8,depthwiseConv2d:dhe,matMul:B3},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function phe(t){return IC(t,.54,.46)}const mhe=ue({hammingWindow_:phe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ghe(t){return IC(t,.5,.5)}const D8=ue({hannWindow_:ghe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xhe(t,e,n,s=!1,r=0){let i=0;const a=[];for(;i+e<=t.size;)a.push(Wt(t,i,e)),i+=n;if(s)for(;i<t.size;){const l=i+e-t.size,c=Es([Wt(t,i,e-l),Bf([l],r)]);a.push(c),i+=n}return a.length===0?Fc([],[0,e]):ge(Es(a),[a.length,e])}const P8=ue({frame_:xhe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yhe(t,e,n,s,r=D8){s==null&&(s=E8(e));const i=P8(t,e,n),a=he(i,r(e));return rv(a,s)}const vhe=ue({stft_:yhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bhe(t,e,n,s,r="bilinear",i=0){const a=Z(t,"image","cropAndResize"),l=Z(e,"boxes","cropAndResize","float32"),c=Z(n,"boxInd","cropAndResize","int32"),u=l.shape[0];K(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),K(l.rank===2&&l.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${l.shape}.`),K(c.rank===1&&c.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${l.shape}.`),K(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),K(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),K(r==="bilinear"||r==="nearest",()=>`method must be bilinear or nearest, but was ${r}`);const d={image:a,boxes:l,boxInd:c},h={method:r,extrapolationValue:i,cropSize:s};return fe.runKernel(ek,d,h)}const whe=ue({cropAndResize_:bhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nhe(t){const e=Z(t,"image","flipLeftRight","float32");K(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return fe.runKernel(uk,n,{})}const She=ue({flipLeftRight_:Nhe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function khe(t){const e=Z(t,"image","grayscaleToRGB"),n=e.rank-1,s=e.shape[n];K(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),K(s===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${s}.`);const r=new Array(e.rank);return r.fill(1,0,n),r[n]=3,Ca(e,r)}const Che=ue({grayscaleToRGB_:khe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function The(t){const e=Z(t,"image","RGBToGrayscale"),n=e.rank-1,s=e.shape[n];K(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),K(s===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${s}.`);const r=e.dtype,i=ht(e,"float32"),a=Ws([.2989,.587,.114]);let l;switch(e.rank){case 2:l=zh("ij,j->i",i,a);break;case 3:l=zh("ijk,k->ij",i,a);break;case 4:l=zh("ijkl,l->ijk",i,a);break;case 5:l=zh("ijklm,m->ijkl",i,a);break;case 6:l=zh("ijklmn,n->ijklm",i,a);break;default:throw new Error("Not a valid tensor rank.")}return l=Zs(l,-1),ht(l,r)}const Ihe=ue({rgbToGrayscale_:The});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jhe(t,e,n=0,s=.5){const r=Z(t,"image","rotateWithOffset","float32");K(r.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${r.rank}.`);const i={image:r},a={radians:e,fillValue:n,center:s};return fe.runKernel(Hk,i,a)}const Ehe=ue({rotateWithOffset_:jhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uf(t,e,n,s,r,i){s==null&&(s=.5),r==null&&(r=Number.NEGATIVE_INFINITY),i==null&&(i=0);const a=t.shape[0];return n=Math.min(n,a),K(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),K(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),K(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),K(e.rank===1,()=>"scores must be a 1D tensor"),K(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),K(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:s,scoreThreshold:r,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $he(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY){const i=Z(t,"boxes","nonMaxSuppression","float32"),a=Z(e,"scores","nonMaxSuppression","float32"),l=Uf(i,a,n,s,r);n=l.maxOutputSize,s=l.iouThreshold,r=l.scoreThreshold;const c={maxOutputSize:n,iouThreshold:s,scoreThreshold:r};return fe.runKernel(bk,{boxes:i,scores:a},c)}const Ahe=ue({nonMaxSuppression_:$he});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rhe(t,e,n){const s=Dhe(t,e,n),r=s<0?-(s+1):s;t.splice(r,0,e)}function Dhe(t,e,n){return _he(t,e,n||Phe)}function Phe(t,e){return t>e?1:t<e?-1:0}function _he(t,e,n){let s=0,r=t.length,i=0,a=!1;for(;s<r;){i=s+(r-s>>>1);const l=n(e,t[i]);l>0?s=i+1:(r=i,a=!l)}return a?s:-s-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EC(t,e,n,s,r){return RC(t,e,n,s,r,0)}function $C(t,e,n,s,r,i){return RC(t,e,n,s,r,0,!1,i,!0)}function AC(t,e,n,s,r,i){return RC(t,e,n,s,r,i,!0)}function RC(t,e,n,s,r,i,a=!1,l=!1,c=!1){const u=[];for(let v=0;v<e.length;v++)e[v]>r&&u.push({score:e[v],boxIndex:v,suppressBeginIndex:0});u.sort(w5);const d=i>0?-.5/i:0,h=[],p=[];for(;h.length<n&&u.length>0;){const v=u.pop(),{score:w,boxIndex:N,suppressBeginIndex:k}=v;if(w<r)break;let C=!1;for(let j=h.length-1;j>=k;--j){const R=Ohe(t,N,h[j]);if(R>=s){C=!0;break}if(v.score=v.score*Fhe(s,d,R),v.score<=r)break}v.suppressBeginIndex=h.length,C||(v.score===w?(h.push(N),p.push(v.score)):v.score>r&&Rhe(u,v,w5))}const g=h.length,x=n-g;l&&x>0&&(h.push(...new Array(x).fill(0)),p.push(...new Array(x).fill(0)));const y={selectedIndices:h};return a&&(y.selectedScores=p),c&&(y.validOutputs=g),y}function Ohe(t,e,n){const s=t.subarray(e*4,e*4+4),r=t.subarray(n*4,n*4+4),i=Math.min(s[0],s[2]),a=Math.min(s[1],s[3]),l=Math.max(s[0],s[2]),c=Math.max(s[1],s[3]),u=Math.min(r[0],r[2]),d=Math.min(r[1],r[3]),h=Math.max(r[0],r[2]),p=Math.max(r[1],r[3]),g=(l-i)*(c-a),x=(h-u)*(p-d);if(g<=0||x<=0)return 0;const y=Math.max(i,u),v=Math.max(a,d),w=Math.min(l,h),N=Math.min(c,p),k=Math.max(w-y,0)*Math.max(N-v,0);return k/(g+x-k)}function Fhe(t,e,n){const s=Math.exp(e*n*n);return n<=t?s:0}function w5(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Mhe(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY){const i=Z(t,"boxes","nonMaxSuppressionAsync"),a=Z(e,"scores","nonMaxSuppressionAsync"),l=Uf(i,a,n,s,r);n=l.maxOutputSize,s=l.iouThreshold,r=l.scoreThreshold;const c=await Promise.all([i.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:h}=EC(u,d,n,s,r);return i!==t&&i.dispose(),a!==e&&a.dispose(),Ws(h,"int32")}const Lhe=Mhe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bhe(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY,i=0){const a=Z(t,"boxes","nonMaxSuppression"),l=Z(e,"scores","nonMaxSuppression"),c=Uf(a,l,n,s,r,i);n=c.maxOutputSize,s=c.iouThreshold,r=c.scoreThreshold,i=c.softNmsSigma;const u={boxes:a,scores:l},d={maxOutputSize:n,iouThreshold:s,scoreThreshold:r,softNmsSigma:i},h=fe.runKernel(Nk,u,d);return{selectedIndices:h[0],selectedScores:h[1]}}const zhe=ue({nonMaxSuppressionWithScore_:Bhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Vhe(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY,i=0){const a=Z(t,"boxes","nonMaxSuppressionAsync"),l=Z(e,"scores","nonMaxSuppressionAsync"),c=Uf(a,l,n,s,r,i);n=c.maxOutputSize,s=c.iouThreshold,r=c.scoreThreshold,i=c.softNmsSigma;const u=await Promise.all([a.data(),l.data()]),d=u[0],h=u[1],{selectedIndices:p,selectedScores:g}=AC(d,h,n,s,r,i);return a!==t&&a.dispose(),l!==e&&l.dispose(),{selectedIndices:Ws(p,"int32"),selectedScores:Ws(g)}}const Uhe=Vhe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Whe(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY,i=!1){const a=Z(t,"boxes","nonMaxSuppression"),l=Z(e,"scores","nonMaxSuppression"),c=Uf(a,l,n,s,r,null),u=c.maxOutputSize,d=c.iouThreshold,h=c.scoreThreshold,p={boxes:a,scores:l},g={maxOutputSize:u,iouThreshold:d,scoreThreshold:h,padToMaxOutputSize:i},x=fe.runKernel(wk,p,g);return{selectedIndices:x[0],validOutputs:x[1]}}const Ghe=ue({nonMaxSuppressionPadded_:Whe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Hhe(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY,i=!1){const a=Z(t,"boxes","nonMaxSuppressionAsync"),l=Z(e,"scores","nonMaxSuppressionAsync"),c=Uf(a,l,n,s,r,null),u=c.maxOutputSize,d=c.iouThreshold,h=c.scoreThreshold,[p,g]=await Promise.all([a.data(),l.data()]),{selectedIndices:x,validOutputs:y}=$C(p,g,u,d,h,i);return a!==t&&a.dispose(),l!==e&&l.dispose(),{selectedIndices:Ws(x,"int32"),validOutputs:Lt(y,"int32")}}const Khe=Hhe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qhe(t,e,n=!1,s=!1){const r=Z(t,"images","resizeBilinear");K(r.rank===3||r.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${r.rank}.`),K(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),K(s===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=r,a=!1;r.rank===3&&(a=!0,i=ge(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={images:i},c={alignCorners:n,halfPixelCenters:s,size:e},u=fe.runKernel(j2,l,c);return a?ge(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const _8=ue({resizeBilinear_:qhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xhe(t,e,n=!1,s=!1){const r=Z(t,"images","resizeNearestNeighbor");K(r.rank===3||r.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${r.rank}.`),K(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),K(r.dtype==="float32"||r.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),K(s===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=r,a=!1;r.rank===3&&(a=!0,i=ge(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={images:i},c={alignCorners:n,halfPixelCenters:s,size:e},u=fe.runKernel(I2,l,c);return a?ge(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const O8=ue({resizeNearestNeighbor_:Xhe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yhe(t,e="binary",n=!1,s=.5){const r=Z(t,"image","threshold"),i=.2989,a=.587,l=.114,c=r.shape[0]*r.shape[1];let u=he(Ws([s]),255),d,h,p,g;if(K(r.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${r.rank}.`),K(r.shape[2]===3||r.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${r.shape[2]}.`),K(r.dtype==="int32"||r.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${r.dtype}.`),K(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),r.shape[2]===3){[d,h,p]=zi(r,[1,1,1],-1);const v=he(d,i),w=he(h,a),N=he(p,l);g=Ke(Ke(v,w),N)}else g=t;if(e==="otsu"){const v=WF(ht(pC(g),"int32"),ao([]),256);u=Zhe(v,c)}const x=n?Bd(g,u):Ki(g,u);return ht(he(x,255),"int32")}function Zhe(t,e){let n=Ws([-1]),s=Ws([0]),r=Ws([0]),i,a,l,c,u,d;for(let h=0;h<t.size-1;h++){i=Wt(t,0,h+1),a=Wt(t,h+1),u=yt(kt(i),e),d=yt(kt(a),e);const p=kt(he(i,bf(0,i.size)));l=yt(p,kt(i));const g=Bf(a.shape,i.size),x=Ke(bf(0,a.size),g),y=he(a,x);c=yt(kt(y),kt(a));const v=vt(l,c),w=vt(l,c),N=he(u,d);r=he(he(N,v),w);const k=Ki(r,s);s=Pr(k,r,s),n=Pr(k,Ws([h]),n)}return n}const Jhe=ue({threshold_:Yhe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qhe(t,e,n="nearest",s="constant",r=0,i){const a=Z(t,"image","transform","float32"),l=Z(e,"transforms","transform","float32");K(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),K(l.rank===2&&(l.shape[0]===a.shape[0]||l.shape[0]===1)&&l.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),K(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const c={image:a,transforms:l},u={interpolation:n,fillMode:s,fillValue:r,outputShape:i};return fe.runKernel(Wk,c,u)}const efe=ue({transform_:Qhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tfe(t,e,n){const s=Z(t,"a","bandPart");K(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const r=s.shape,[i,a]=s.shape.slice(-2);let l,c;typeof e=="number"?(K(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),K(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),l=Z(e<0?i:e,"numLower","bandPart")):(K(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),l=Pr(bm(e,0),i,Td(e,i))),typeof n=="number"?(K(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),K(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),c=Z(n<0?a:n,"numUpper","bandPart")):(K(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),c=Pr(bm(n,0),a,Td(n,a)));const u=ge(bf(0,i,1,"int32"),[-1,1]),d=bf(0,a,1,"int32"),h=vt(u,d),p=nl(Bd(h,l),mu(h,ls(c))),g=Js([i,a],s.dtype);return ge(Ui(Oa(ge(s,[-1,i,a])).map(x=>Pr(p,x,g))),r)}const nfe=ue({bandPart_:tfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sfe(t){let e;if(Array.isArray(t)){e=!1,K(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const r=t[0].shape[0];for(let i=1;i<t.length;++i)K(t[i].shape[0]===r,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${r})`)}else e=!0,t=zi(t,t.shape[0],0).map(r=>Ts(r,[0]));K(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],s=t;for(let r=0;r<t.length;++r)n.push(fe.tidy(()=>{let i=s[r];if(r>0)for(let a=0;a<r;++a){const l=he(kt(he(n[a],i)),n[a]);i=vt(i,l)}return yt(i,qg(i,"euclidean"))}));return e?Ui(n,0):n}const rfe=ue({gramSchmidt_:sfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ife(t,e=!1){if(K(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return N5(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((c,u)=>c*u),s=Oa(ge(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),r=[],i=[];s.forEach(c=>{const[u,d]=N5(c,e);r.push(u),i.push(d)});const a=ge(Ui(r,0),t.shape),l=ge(Ui(i,0),t.shape);return[a,l]}}function N5(t,e=!1){return fe.tidy(()=>{K(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],s=t.shape[1];let r=aC(n),i=Ol(t);const a=Fc([[1]],[1,1]);let l=Ol(a);const c=n>=s?s:n;for(let u=0;u<c;++u){const d=i,h=l,p=r;[l,i,r]=fe.tidy(()=>{const g=Wt(i,[u,u],[n-u,1]),x=qg(g),y=Wt(i,[u,u],[1,1]),v=Pr(Ki(y,0),Fc([[-1]]),Fc([[1]])),w=vt(y,he(v,x)),N=yt(g,w);N.shape[0]===1?l=Ol(a):l=Es([a,Wt(N,[1,0],[N.shape[0]-1,N.shape[1]])],0);const k=ls(yt(gn(v,w),x)),C=Wt(i,[u,0],[n-u,s]),j=he(k,l),R=wn(l);if(u===0)i=vt(C,gn(j,gn(R,C)));else{const O=vt(C,gn(j,gn(R,C)));i=Es([Wt(i,[0,0],[u,s]),O],0)}const _=wn(j),A=Wt(r,[0,u],[n,r.shape[1]-u]);if(u===0)r=vt(A,gn(gn(A,l),_));else{const O=vt(A,gn(gn(A,l),_));r=Es([Wt(r,[0,0],[n,u]),O],1)}return[l,i,r]}),Kt([d,h,p])}return!e&&n>s&&(r=Wt(r,[0,0],[n,s]),i=Wt(i,[0,0],[s,s])),[r,i]})}const afe=ue({qr_:ife});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var di;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(di||(di={}));function ofe(t,e,n=di.SUM_BY_NONZERO_WEIGHTS){const s=Z(t,"losses","computeWeightedLoss");let r=null;e!=null&&(r=Z(e,"weights","computeWeightedLoss"));const i=r==null?s:he(s,r);if(n===di.NONE)return i;if(n===di.SUM)return kt(i);if(n===di.MEAN){if(r==null)return js(i);{const a=s.size/r.size,l=yt(kt(i),kt(r));return a>1?yt(l,Lt(a)):l}}if(n===di.SUM_BY_NONZERO_WEIGHTS){if(r==null)return yt(kt(i),Lt(s.size));{const a=he(r,Bi(s.shape)),l=ht(kt(vf(a,Lt(0))),"float32");return yt(kt(i),l)}}throw Error(`Unknown reduction: ${n}`)}const Ql=ue({computeWeightedLoss_:ofe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lfe(t,e,n,s=di.SUM_BY_NONZERO_WEIGHTS){const r=Z(t,"labels","absoluteDifference"),i=Z(e,"predictions","absoluteDifference");let a=null;n!=null&&(a=Z(n,"weights","absoluteDifference")),Hi(r.shape,i.shape,"Error in absoluteDifference: ");const l=Ys(vt(r,i));return Ql(l,a,s)}const cfe=ue({absoluteDifference_:lfe});function ufe(t,e,n,s,r=di.SUM_BY_NONZERO_WEIGHTS){const i=Z(t,"labels","cosineDistance"),a=Z(e,"predictions","cosineDistance");let l=null;s!=null&&(l=Z(s,"weights","cosineDistance")),Hi(i.shape,a.shape,"Error in cosineDistance: ");const c=Lt(1),u=vt(c,kt(he(i,a),n,!0));return Ql(u,l,r)}const dfe=ue({cosineDistance_:ufe});function hfe(t,e,n,s=di.SUM_BY_NONZERO_WEIGHTS){let r=Z(t,"labels","hingeLoss");const i=Z(e,"predictions","hingeLoss");let a=null;n!=null&&(a=Z(n,"weights","hingeLoss")),Hi(r.shape,i.shape,"Error in hingeLoss: ");const l=Lt(1);r=vt(he(Lt(2),r),l);const c=al(vt(l,he(r,i)));return Ql(c,a,s)}const ffe=ue({hingeLoss_:hfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pfe(t,e,n,s=1,r=di.SUM_BY_NONZERO_WEIGHTS){const i=Z(t,"labels","huberLoss"),a=Z(e,"predictions","huberLoss");let l=null;n!=null&&(l=Z(n,"weights","huberLoss")),Hi(i.shape,a.shape,"Error in huberLoss: ");const c=Lt(s),u=Ys(vt(a,i)),d=Td(u,c),h=vt(u,d),p=Ke(he(Lt(.5),qn(d)),he(c,h));return Ql(p,l,r)}const mfe=ue({huberLoss_:pfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gfe(t,e,n,s=1e-7,r=di.SUM_BY_NONZERO_WEIGHTS){const i=Z(t,"labels","logLoss"),a=Z(e,"predictions","logLoss");let l=null;n!=null&&(l=Z(n,"weights","logLoss")),Hi(i.shape,a.shape,"Error in logLoss: ");const c=Lt(1),u=Lt(s),d=ls(he(i,ia(Ke(a,u)))),h=he(vt(c,i),ia(Ke(vt(c,a),u))),p=vt(d,h);return Ql(p,l,r)}const xfe=ue({logLoss_:gfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yfe(t,e,n,s=di.SUM_BY_NONZERO_WEIGHTS){const r=Z(t,"labels","meanSquaredError"),i=Z(e,"predictions","meanSquaredError");let a=null;n!=null&&(a=Z(n,"weights","meanSquaredError")),Hi(r.shape,i.shape,"Error in meanSquaredError: ");const l=NC(r,i);return Ql(l,a,s)}const vfe=ue({meanSquaredError_:yfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bfe(t,e){const n=Z(t,"labels","sigmoidCrossEntropyWithLogits"),s=Z(e,"logits","sigmoidCrossEntropyWithLogits");Hi(n.shape,s.shape,"Error in sigmoidCrossEntropyWithLogits: ");const r=al(s),i=he(s,n),a=H2(Jr(ls(Ys(s))));return Ke(vt(r,i),a)}function wfe(t,e,n,s=0,r=di.SUM_BY_NONZERO_WEIGHTS){let i=Z(t,"multiClassLabels","sigmoidCrossEntropy");const a=Z(e,"logits","sigmoidCrossEntropy");let l=null;if(n!=null&&(l=Z(n,"weights","sigmoidCrossEntropy")),Hi(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),s>0){const u=Lt(s),d=Lt(1),h=Lt(.5);i=Ke(he(i,vt(d,u)),he(h,u))}const c=bfe(i,a);return Ql(c,l,r)}const Nfe=ue({sigmoidCrossEntropy_:wfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sfe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Wl((r,i,a)=>{const c=K2(i,[n],!0),u=vt(ht(i,"float32"),c);a([r,u]);const d=ls(he(u,r));return{value:kt(d,[n]),gradFunc:(g,x)=>{const[y,v]=x,w=Os(g.shape,[n]);return[he(ge(g,w),vt(ht(y,"float32"),Jr(v))),he(ge(g,w),vt(Jr(v),ht(y,"float32")))]}}})(t,e)}function kfe(t,e,n,s=0,r=di.SUM_BY_NONZERO_WEIGHTS){let i=Z(t,"onehotLabels","softmaxCrossEntropy");const a=Z(e,"logits","softmaxCrossEntropy");let l=null;if(n!=null&&(l=Z(n,"weights","softmaxCrossEntropy")),Hi(i.shape,a.shape,"Error in softmaxCrossEntropy: "),s>0){const u=Lt(s),d=Lt(1),h=Lt(i.shape[1]);i=Ke(he(i,vt(d,u)),yt(u,h))}const c=Sfe(i,a);return Ql(c,l,r)}const Cfe=ue({softmaxCrossEntropy_:kfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tfe(t,e,n,s){const r=Z(t,"indices","sparseFillEmptyRows","int32"),i=Z(e,"values","sparseFillEmptyRows"),a=Z(n,"denseShape","sparseFillEmptyRows","int32"),l=Z(s,"defaultValue","sparseFillEmptyRows",i.dtype);if(r.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${r.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(l.rank!==0)throw new Error(`Default value should be a scalar but received shape ${l.shape}`);const c={indices:r,values:i,denseShape:a,defaultValue:l},u=fe.runKernel(Dk,c);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const Ife=ue({sparseFillEmptyRows_:Tfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jfe(t,e,n){const s=Z(t,"inputIndices","sparseReshape","int32"),r=Z(e,"inputShape","sparseReshape","int32"),i=Z(n,"newShape","sparseReshape","int32");if(s.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${s.shape}`);if(r.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${r.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const a={inputIndices:s,inputShape:r,newShape:i},l=fe.runKernel(Pk,a);return{outputIndices:l[0],outputShape:l[1]}}const Efe=ue({sparseReshape_:jfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $fe(t,e,n){const s=Z(t,"data","sparseSegmentMean"),r=Z(e,"indices","sparseSegmentMean","int32"),i=Z(n,"segmentIds","sparseSegmentMean","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${r.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const a={data:s,indices:r,segmentIds:i};return fe.runKernel(_k,a)}const Afe=ue({sparseSegmentMean_:$fe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rfe(t,e,n){const s=Z(t,"data","sparseSegmentSum"),r=Z(e,"indices","sparseSegmentSum","int32"),i=Z(n,"segmentIds","sparseSegmentSum","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${r.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const a={data:s,indices:r,segmentIds:i};return fe.runKernel(Ok,a)}const Dfe=ue({sparseSegmentSum_:Rfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pfe(t,e,n,s,r,i,a,l){const c=Z(t,"data","stringNGrams","string");if(c.dtype!=="string")throw new Error("Data must be of datatype string");if(c.shape.length!==1)throw new Error(`Data must be a vector, saw: ${c.shape}`);const u=Z(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const d={separator:n,nGramWidths:s,leftPad:r,rightPad:i,padWidth:a,preserveShortSequences:l},h={data:c,dataSplits:u},p=fe.runKernel(Bk,h,d);return{nGrams:p[0],nGramsSplits:p[1]}}const _fe=ue({stringNGrams_:Pfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ofe(t,e,n=!0){const s=Z(t,"input","stringSplit","string"),r=Z(e,"delimiter","stringSplit","string");if(s.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${s.shape}`);if(r.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${r.shape}`);const i={skipEmpty:n},a={input:s,delimiter:r},l=fe.runKernel(zk,a,i);return{indices:l[0],values:l[1],shape:l[2]}}const Ffe=ue({stringSplit_:Ofe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mfe(t,e){const n=Z(t,"input","stringToHashBucketFast","string"),s={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const r={input:n};return fe.runKernel(Vk,r,s)}const Lfe=ue({stringToHashBucketFast_:Mfe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bfe(t,e,n,s=!0){const r=Z(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:s};return fe.runKernel(O2,{x:r},i)}const zfe=ue({staticRegexReplace_:Bfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vfe={fft:sv,ifft:Sm,rfft:rv,irfft:wC},Ufe={hammingWindow:mhe,hannWindow:D8,frame:P8,stft:vhe},mi={flipLeftRight:She,grayscaleToRGB:Che,resizeNearestNeighbor:O8,resizeBilinear:_8,rgbToGrayscale:Ihe,rotateWithOffset:Ehe,cropAndResize:whe,nonMaxSuppression:Ahe,nonMaxSuppressionAsync:Lhe,nonMaxSuppressionWithScore:zhe,nonMaxSuppressionWithScoreAsync:Uhe,nonMaxSuppressionPadded:Ghe,nonMaxSuppressionPaddedAsync:Khe,threshold:Jhe,transform:efe},F8={bandPart:nfe,gramSchmidt:rfe,qr:afe},Wfe={absoluteDifference:cfe,computeWeightedLoss:Ql,cosineDistance:dfe,hingeLoss:ffe,huberLoss:mfe,logLoss:xfe,meanSquaredError:vfe,sigmoidCrossEntropy:Nfe,softmaxCrossEntropy:Cfe},Gfe={sparseFillEmptyRows:Ife,sparseReshape:Efe,sparseSegmentMean:Afe,sparseSegmentSum:Dfe},Hfe={stringNGrams:_fe,stringSplit:Ffe,stringToHashBucketFast:Lfe,staticRegexReplace:zfe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kfe=new Map,qfe=new Map;class Wf{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Na{constructor(){this.classNameMap={}}static getMap(){return Na.instance==null&&(Na.instance=new Na),Na.instance}static register(e){Na.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Je(t,e,n){K(t.className!=null,()=>"Class being registered does not have the static className property defined."),K(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),K(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const s=n,r=e+">"+s;return Na.register(t),Kfe.set(r,t),qfe.set(t,r),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xu extends Wf{minimize(e,n=!1,s){const{value:r,grads:i}=this.computeGradients(e,s);if(s!=null){const a=s.map(l=>({name:l.name,tensor:i[l.name]}));this.applyGradients(a)}else this.applyGradients(i);return Kt(i),n?r:(r.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return yce(e,n)}dispose(){this.iterations_!=null&&Kt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Lt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(xu,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M8 extends xu{static get className(){return"Adadelta"}constructor(e,n,s=null){super(),this.learningRate=e,this.rho=n,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=fe.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const i=fe.registeredVariables[s],a=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${s}/accum_grad`,variable:Ie(()=>Nn(i).variable(a))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${s}/accum_var`,variable:Ie(()=>Nn(i).variable(a))});const l=Array.isArray(e)?e[r].tensor:e[s];if(l==null)return;const c=this.accumulatedGrads[r].variable,u=this.accumulatedUpdates[r].variable;Ie(()=>{const d=Ke(he(c,this.rho),he(qn(l),1-this.rho)),h=he(yt(Tr(Ke(u,this.epsilon)),Tr(Ke(c,this.epsilon))),l),p=Ke(he(u,this.rho),he(qn(h),1-this.rho));c.assign(d),u.assign(p);const g=Ke(he(h,-this.learningRate),i);i.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Kt(this.accumulatedGrads.map(e=>e.variable)),Kt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,s=!1;this.accumulatedGrads=e.slice(0,n).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.accumulatedUpdates=e.slice(n,n*2).map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L8 extends xu{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const i=fe.registeredVariables[s];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${s}/accumulator`,variable:Ie(()=>Bf(i.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[r].tensor:e[s];if(a==null)return;const l=this.accumulatedGrads[r].variable;Ie(()=>{const c=Ke(l,qn(a));l.assign(c);const u=Ke(he(yt(a,Tr(Ke(c,fe.backend.epsilon()))),-this.learningRate),i);i.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Kt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B8 extends xu{static get className(){return"Adam"}constructor(e,n,s,r=null){super(),this.learningRate=e,this.beta1=n,this.beta2=s,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ie(()=>{this.accBeta1=Lt(n).variable(),this.accBeta2=Lt(s).variable()}),r==null&&(this.epsilon=fe.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);Ie(()=>{const s=vt(1,this.accBeta1),r=vt(1,this.accBeta2);n.forEach((i,a)=>{const l=fe.registeredVariables[i],c=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:Ie(()=>Nn(l).variable(c))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${i}/v`,variable:Ie(()=>Nn(l).variable(c))});const u=Array.isArray(e)?e[a].tensor:e[i];if(u==null)return;const d=this.accumulatedFirstMoment[a].variable,h=this.accumulatedSecondMoment[a].variable,p=Ke(he(d,this.beta1),he(u,1-this.beta1)),g=Ke(he(h,this.beta2),he(qn(u),1-this.beta2)),x=yt(p,s),y=yt(g,r);d.assign(p),h.assign(g);const v=Ke(he(yt(x,Ke(Tr(y),this.epsilon)),-this.learningRate),l);l.assign(v)}),this.accBeta1.assign(he(this.accBeta1,this.beta1)),this.accBeta2.assign(he(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Kt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Kt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Ie(()=>{this.accBeta1.assign(Ul(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ul(this.beta2,this.iterations_+1))});const n=e.length/2,s=!1;this.accumulatedFirstMoment=e.slice(0,n).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z8 extends xu{static get className(){return"Adamax"}constructor(e,n,s,r=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=s,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ie(()=>{this.iteration=Lt(0).variable(),this.accBeta1=Lt(n).variable()}),r==null&&(this.epsilon=fe.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);Ie(()=>{const s=vt(1,this.accBeta1),r=yt(-this.learningRate,Ke(he(this.iteration,this.decay),1));n.forEach((i,a)=>{const l=fe.registeredVariables[i],c=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:Nn(l).variable(c)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${i}/v`,variable:Nn(l).variable(c)});const u=Array.isArray(e)?e[a].tensor:e[i];if(u==null)return;const d=this.accumulatedFirstMoment[a].variable,h=this.accumulatedWeightedInfNorm[a].variable,p=Ke(he(d,this.beta1),he(u,1-this.beta1)),g=he(h,this.beta2),x=Ys(u),y=Jl(g,x);d.assign(p),h.assign(y);const v=Ke(he(yt(r,s),yt(p,Ke(y,this.epsilon))),l);l.assign(v)}),this.iteration.assign(Ke(this.iteration,1)),this.accBeta1.assign(he(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Kt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Kt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DC extends xu{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const i=Array.isArray(e)?e[r].tensor:e[s];if(i==null)return;const a=fe.registeredVariables[s];Ie(()=>{const l=Ke(he(this.c,i),a);a.assign(l)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=hr(Lt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V8 extends DC{static get className(){return"Momentum"}constructor(e,n,s=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=s,this.accumulations=[],this.m=Lt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const i=fe.registeredVariables[s];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${s}/momentum`,variable:Ie(()=>Nn(i).variable(!1))});const a=this.accumulations[r].variable,l=Array.isArray(e)?e[r].tensor:e[s];l!=null&&Ie(()=>{let c;const u=Ke(he(this.m,a),l);this.useNesterov?c=Ke(he(this.c,Ke(l,he(u,this.m))),i):c=Ke(he(this.c,u),i),a.assign(u),i.assign(c)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Kt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U8 extends xu{static get className(){return"RMSProp"}constructor(e,n=.9,s=0,r=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=s,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,r==null&&(this.epsilon=fe.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const i=fe.registeredVariables[s],a=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${s}/rms`,variable:Ie(()=>Nn(i).variable(a))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${s}/momentum`,variable:Ie(()=>Nn(i).variable(a))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${s}/mg`,variable:Ie(()=>Nn(i).variable(a))});const l=Array.isArray(e)?e[r].tensor:e[s];if(l==null)return;const c=this.accumulatedMeanSquares[r].variable,u=this.accumulatedMoments[r].variable;Ie(()=>{const d=Ke(he(c,this.decay),he(qn(l),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[r].variable,p=Ke(he(h,this.decay),he(l,1-this.decay)),g=yt(he(l,this.learningRate),Tr(vt(d,Ke(qn(p),this.epsilon)))),x=Ke(he(u,this.momentum),g);c.assign(d),h.assign(p),u.assign(x);const y=vt(i,x);i.assign(y)}else{const h=Ke(he(c,this.decay),he(qn(l),1-this.decay)),p=Ke(he(u,this.momentum),yt(he(l,this.learningRate),Tr(Ke(h,this.epsilon))));c.assign(h),u.assign(p);const g=vt(i,p);i.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Kt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Kt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Kt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,s=!1;this.accumulatedMeanSquares=e.slice(0,n).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.accumulatedMoments=e.slice(n,n*2).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xfe=[M8,L8,B8,z8,V8,U8,DC];function Yfe(){for(const t of Xfe)Je(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zfe="model",Jfe=".json",Qfe=".weights.bin";function S5(t){return new Promise(e=>setTimeout(e)).then(t)}class Id{constructor(e){if(!Pe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Id.URL_SCHEME)&&(e=e.slice(Id.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Zfe),this.modelJsonFileName=e+Jfe,this.weightDataFileName=e+Qfe}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=vo.join(e.weightData),s=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=wF(e,r),a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,await S5(()=>l.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=s,await S5(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Ug(e)}}}}Id.URL_SCHEME="downloads://";class epe{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const s=new FileReader;s.onload=r=>{const i=JSON.parse(r.target.result),a=i.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:a});return}const c=Xk(i,u=>this.loadWeights(u));e(c)},s.onerror=r=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),s.readAsText(this.jsonFile)})}loadWeights(e){const n=[],s=[];for(const a of e)n.push(...a.weights),s.push(...a.paths);const r=this.checkManifestAndWeightFiles(e),i=s.map(a=>this.loadWeightsFile(a,r[a]));return Promise.all(i).then(a=>[n,a])}loadWeightsFile(e,n){return new Promise((s,r)=>{const i=new FileReader;i.onload=a=>{const l=a.target.result;s(l)},i.onerror=a=>r(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],s=this.weightsFiles.map(i=>h5(i.name)),r={};for(const i of e)i.paths.forEach(a=>{const l=h5(a);if(n.indexOf(l)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${l}'`);if(n.push(l),s.indexOf(l)===-1)throw new Error(`Weight file with basename '${l}' is not provided.`);r[a]=this.weightsFiles[s.indexOf(l)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}const tpe=t=>Pe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Id.URL_SCHEME)?npe(t.slice(Id.URL_SCHEME.length)):null;vs.registerSaveRouter(tpe);function npe(t="model"){return new Id(t)}function spe(t){return new epe(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5(t,e,n,s){a(t),n=n??0,s=s??1,l(n,s);let r=0;const i=c=>(c.then(u=>{const d=n+ ++r/t.length*(s-n);return e(d),u}),c);function a(c){K(c!=null&&Array.isArray(c)&&c.length>0,()=>"promises must be a none empty array")}function l(c,u){K(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${c}`),K(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),K(u>=c,()=>`startFraction must be no more than endFraction, but got startFraction ${c} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function W8(t,e){e==null&&(e={});const n=e.fetchFunc==null?Pe().platform.fetch:e.fetchFunc,s=t.map(h=>n(h,e.requestInit,{isBinary:!0})),l=(e.onProgress==null?await Promise.all(s):await k5(s,e.onProgress,0,.5)).map(h=>h.arrayBuffer());return e.onProgress==null?await Promise.all(l):await k5(l,e.onProgress,.5,1)}function rpe(t,e){var n;const s=e.fetchFunc==null?Pe().platform.fetch:e.fetchFunc;let r=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async a=>{for(var l;r<t.length;){i||(i=(await s(t[r],e.requestInit,{isBinary:!0})).body.getReader());const{done:c,value:u}=await i.read();if(c){r++,i=void 0,(l=e.onProgress)===null||l===void 0||l.call(e,r/t.length);continue}a.enqueue(u);return}a.close()}})}async function ipe(t,e="",n,s){return G8(a=>W8(a,{requestInit:s}))(t,e,n)}function G8(t){return async(e,n="",s)=>{const r=e.map(()=>!1),i={},a=s!=null?s.map(()=>!1):[],l=[];if(e.forEach((g,x)=>{let y=0;g.weights.forEach(v=>{const w="quantization"in v?v.quantization.dtype:v.dtype,N=wd[w]*Le(v.shape),k=()=>{r[x]=!0,i[x]==null&&(i[x]=[]),i[x].push({manifestEntry:v,groupOffset:y,sizeBytes:N})};s!=null?s.forEach((C,j)=>{C===v.name&&(k(),a[j]=!0)}):k(),l.push(v.name),y+=N})}),!a.every(g=>g)){const g=s.filter((x,y)=>!a[y]);throw new Error(`Could not find weights in manifest with names: ${g.join(", ")}. 
Manifest JSON has weights with names: ${l.join(", ")}.`)}const c=r.reduce((g,x,y)=>(x&&g.push(y),g),[]),u=[];c.forEach(g=>{e[g].paths.forEach(x=>{const y=n+(n.endsWith("/")?"":"/")+x;u.push(y)})});const d=await t(u),h={};let p=0;return c.forEach(g=>{const x=e[g].paths.length,y=new vo(d.slice(p,p+x));i[g].forEach(w=>{const N=y.slice(w.groupOffset,w.groupOffset+w.sizeBytes),k=xF(N,[w.manifestEntry]);for(const C in k)h[C]=k[C]}),p+=x}),h}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ape="application/octet-stream",ope="application/json";class PC{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(K(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Pe().platform.fetch,K(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&K(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=wF(e,s);if(n.body.append("model.json",new Blob([JSON.stringify(r)],{type:ope}),"model.json"),e.weightData!=null){const a=vo.join(e.weightData);n.body.append("model.weights.bin",new Blob([a],{type:ape}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Ug(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const s=n.modelTopology,r=n.weightsManifest;if(s==null&&r==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return Xk(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),s=P3(e.weightsManifest),r=()=>rpe(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:s,getWeightStream:r})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[s,r]=lpe(n),i=this.weightPathPrefix||s,a=[],l=[];for(const c of e)for(const u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(i+u+r);return this.weightUrlConverter&&a.push(...await Promise.all(l)),a}async loadWeights(e){const n=await this.getWeightUrls(e),s=P3(e),r=await W8(n,this.loadOptions);return[s,r]}}PC.URL_SCHEME_REGEX=/^https?:\/\//;function lpe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),s=t.substring(0,e),r=n>e?t.substring(n):"";return[s+"/",r]}function z3(t){return t.match(PC.URL_SCHEME_REGEX)!=null}const H8=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(s=>z3(s)):n=z3(t),n)return _C(t,e)}return null};vs.registerSaveRouter(H8);vs.registerLoadRouter(H8);function _C(t,e){return new PC(t,e)}function cpe(t,e){return _C(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qw{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class K8{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class upe{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function dpe(t,e,n,s){const r=arguments;return new upe(q8(...r))}function q8(t,e,n,s){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new Qw(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Qw({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Qw({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:s}))}function hpe(t){return new K8(t)}function fpe(t){return new K8(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X8=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:vo,browserFiles:spe,browserHTTPRequest:cpe,concatenateArrayBuffers:bF,copyModel:foe,decodeWeights:xF,decodeWeightsStream:vF,encodeWeights:D3,fromMemory:dpe,fromMemorySync:q8,getLoadHandlers:Qae,getModelArtifactsForJSON:Xk,getModelArtifactsForJSONSync:NF,getModelArtifactsInfoForJSON:Ug,getSaveHandlers:SF,getWeightSpecs:P3,http:_C,isHTTPScheme:z3,listModels:doe,loadWeights:ipe,moveModel:poe,registerLoadRouter:Jae,registerSaveRouter:Zae,removeModel:hoe,weightsLoaderFactory:G8,withSaveHandler:hpe,withSaveHandlerSync:fpe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Gu;function ppe(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,s=!1,r=!1,i=!1,a=!1,l=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)s=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)r=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)l=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(I3(C3,fe.backendName)!=null){const x={pixels:t},y={numChannels:e};return fe.runKernel(C3,x,y)}const[u,d]=r?[t.videoWidth,t.videoHeight]:[t.width,t.height];let h;if(a)h=t.getContext("2d").getImageData(0,0,u,d).data;else if(s||n)h=t.data;else if(i||r||l){if(Gu==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Gu=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Gu=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Gu.canvas.width=u,Gu.canvas.height=d,Gu.drawImage(t,0,0,u,d),h=Gu.getImageData(0,0,u,d).data}let p;if(e===4)p=new Int32Array(h);else{const x=u*d;p=new Int32Array(x*e);for(let y=0;y<x;y++)for(let v=0;v<e;++v)p[y*e+v]=h[y*4+v]}return N8(p,[d,u,e],"int32")}function mpe(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}async function Y8(t,e){let n=Z(t,"img","toPixels");if(!(t instanceof zn)){const u=n;n=ht(u,"int32"),u.dispose()}mpe(n);const[s,r]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],a=await n.data(),l=n.dtype==="float32"?255:1,c=new Uint8ClampedArray(r*s*4);for(let u=0;u<s*r;++u){const d=[0,0,0,255];for(let p=0;p<i;p++){const g=a[u*i+p];if(n.dtype==="float32"){if(g<0||g>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${g}.`)}else if(n.dtype==="int32"&&(g<0||g>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${g}.`);i===1?(d[0]=g*l,d[1]=g*l,d[2]=g*l):d[p]=g*l}const h=u*4;c[h+0]=Math.round(d[0]),c[h+1]=Math.round(d[1]),c[h+2]=Math.round(d[2]),c[h+3]=Math.round(d[3])}return n!==t&&n.dispose(),c}const Z8=ue({fromPixels_:ppe});function OC(t,e){const n=t.shape.length,s=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[s-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[s-1]} vs. ${n}`);if(Le(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const r=e.shape,i=r[r.length-1];let a=1;for(let h=0;h<r.length-1;++h)a*=r[h];const l=t.shape,c=r.slice();c.pop();let u=1;for(let h=i;h<n;++h)u*=l[h],c.push(l[h]);const d=[...Mt(t.shape).map(h=>h/u),1].slice(0,i);return[c,a,u,d]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V3=-2,gpe=-1;function J8(t,e,n){const s=t.shape.length;K(s===e.length,()=>`Error in slice${s}D: Length of begin ${e} must match the rank of the array (${s}).`),K(s===n.length,()=>`Error in slice${s}D: Length of size ${n} must match the rank of the array (${s}).`);for(let r=0;r<s;++r)K(e[r]+n[r]<=t.shape[r],()=>`Error in slice${s}D: begin[${r}] + size[${r}] (${e[r]+n[r]}) would overflow input.shape[${r}] (${t.shape[r]})`)}function Q8(t,e,n){const s=[];for(let r=0;r<t.length;r++)s[r]=Math.ceil((e[r]-t[r])/n[r]);return s}function eM(t,e,n){let s=n.length;for(let r=0;r<n.length;r++)if(n[r]>1){s=r;break}for(let r=s+1;r<n.length;r++)if(e[r]>0||n[r]!==t[r])return!1;return!0}function tM(t,e){let n=t.length>0?t[t.length-1]:1;for(let s=0;s<t.length-1;s++)n+=t[s]*e[s];return n}function FC(t,e,n){let s;const r=t.shape.length;typeof e=="number"?s=[e,...new Array(r-1).fill(0)]:e.length<r?s=e.concat(new Array(r-e.length).fill(0)):s=e.slice(),s.forEach(a=>{K(a!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(r).fill(-1):typeof n=="number"?i=[n,...new Array(r-1).fill(-1)]:n.length<r?i=n.concat(new Array(r-n.length).fill(-1)):i=n,i=i.map((a,l)=>a>=0?a:(K(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${l}.`),t.shape[l]-s[l])),[s,i]}function nM(t,e,n,s,r,i,a,l,c){let u;if(s==null?(u=new Array(e.length),u.fill(1)):u=s,a!=null&&(a&a-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let d=!1;const h={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:r,endMask:i,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:c};for(let k=0;k<h.dims;k++)d&&(1<<k&l)!==0&&h.numAddAxisAfterEllipsis++,1<<k&a&&(d=!0);d||(h.ellipsisMask|=1<<h.dims,h.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};xpe(h,p);let g=!0,x=!0,y=!0;const v=[],w=[];for(let k=0;k<t.length;++k){if(p.strides[k]===0)throw Error(`strides[${k}] must be non-zero`);const C=!!(p.shrinkAxisMask&1<<k),j=t[k];if(j===-1){v.push(C?1:-1);continue}const R=[p.beginMask&1<<k,p.endMask&1<<k],_=[p.strides[k]>0?0:-1,p.strides[k]>0?j:j-1];if(C&&p.strides[k]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&p.strides[k]===1;const A=!!(p.beginMask&1<<k&&p.endMask&1<<k);if(p.beginValid&&p.endValid){if(C){const q=p.begin[k]<0?j+p.begin[k]:p.begin[k];if(p.begin[k]=q,p.end[k]=p.begin[k]+1,q<0||q>=j)throw Error(`slice index ${p.begin[k]} of dimension ${k} out of bounds.`)}else p.begin[k]=C5(p.begin[k],0,p.strides[k],j,R,_),p.end[k]=C5(p.end[k],1,p.strides[k],j,R,_);const D=p.strides[k]===1&&p.begin[k]===0&&p.end[k]===j;g=g&&D,x=x&&(k===0&&p.strides[k]===1||D)}else g=g&&p.strides[k]===1&&A,x=x&&(k===0&&p.strides[k]===1||A);let O,L=!1;if(p.beginValid&&p.endValid?(O=p.end[k]-p.begin[k],L=!0):C?(O=1,L=!0):A&&j>=0&&(p.strides[k]<0?O=-j:O=j,L=!0),L){let D;O===0||O<0!=p.strides[k]<0?D=0:D=Math.trunc(O/p.strides[k])+(O%p.strides[k]!==0?1:0),v.push(D)}else v.push(-1)}for(let k=0;k<p.finalShapeGatherIndices.length;++k){const C=p.finalShapeGatherIndices[k];C>=0?w.push(v[C]):C===V3&&w.push(1)}return{finalShapeSparse:w.filter((k,C)=>p.finalShapeGatherIndices[C]!==V3),finalShape:w,isIdentity:g,sliceDim0:x,isSimpleSlice:y,begin:p.begin,end:p.end,strides:p.strides}}function xpe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let s=0;s<t.dims;s++)if(1<<s&t.ellipsisMask){const r=Math.min(e.dims-(t.dims-s)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<r;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=s}else if(1<<s&t.newAxisMask)e.finalShapeGatherIndices.push(V3),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[s]),t.end!=null&&(e.end[n]=t.end[s]),e.strides[n]=t.strides[s],t.beginMask&1<<s&&(e.beginMask|=1<<n),t.endMask&1<<s&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<s?(e.finalShapeGatherIndices.push(gpe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(s)),e.inputShapeGatherIndicesSparse[n]=s,n++}}function C5(t,e,n,s,r,i){if(r[e])return n>0?i[e]:i[e+1&1];{const a=t<0?s+t:t;return a<i[0]?i[0]:a>i[1]?i[1]:a}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ype{static sgd(e){return new DC(e)}static momentum(e,n,s=!1){return new V8(e,n,s)}static rmsprop(e,n=.9,s=0,r=null,i=!1){return new U8(e,n,s,r,i)}static adam(e=.001,n=.9,s=.999,r=null){return new B8(e,n,s,r)}static adadelta(e=.001,n=.95,s=null){return new M8(e,n,s)}static adamax(e=.002,n=.9,s=.999,r=null,i=0){return new z8(e,n,s,r,i)}static adagrad(e,n=.1){return new L8(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ah=ype;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vpe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function sM(){return new Promise(t=>vpe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MC(t,e){const n=t[0].length;t.forEach((r,i)=>{K(r.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),K(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const s=t[0];t.forEach((r,i)=>{for(let a=0;a<n;a++)K(a===e||r[a]===s[a],()=>`Error in concat${n}D: Shape of tensors[${i}] (${r}) does not match the shape of the rest (${s}) along the non-concatenated axis ${i}.`)})}function Xo(t,e){const n=t[0].slice();for(let s=1;s<t.length;s++)n[e]+=t[s][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var no;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(no||(no={}));function rM(t,e,n){let s=new Array;if(n==null&&e==null)return s;if(e==null)for(;s.length<t+n.length;)s.push(-1);else s=e.slice();if(n==null)return s;if(t+n.length!==s.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${s.length}`);for(let r=1;r<n.length;++r){const i=n[r],a=s[s.length-n.length+r],l=s[a];if(i>=0)if(l>=0){if(l!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${r+t}] = ${i} but shape[${r+t}] = ${l}`)}else s[a]=i}return s}function iM(t){const e={FIRST_DIM_SIZE:no.FIRST_DIM_SIZE,VALUE_ROWIDS:no.VALUE_ROWIDS,ROW_LENGTHS:no.ROW_LENGTHS,ROW_SPLITS:no.ROW_SPLITS,ROW_LIMITS:no.ROW_LIMITS,ROW_STARTS:no.ROW_STARTS},n=[];for(const s of t)if(s in e)n.push(e[s]);else break;return n}function aM(t){return t.length===0?0:t[0]===no.FIRST_DIM_SIZE?t.length-1:t.length}function oM(t,e){if(t==null||e==null)return;const n=t.length,s=e.length;if(n>=s)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${s})`);for(let r=0;r<Math.min(n,s-1);++r){const i=t[r],a=e[r+1];if(i>=0&&a>=0&&i!==1&&i!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${r-t.length}] = ${i} but ragged tensor input.flatValues.shape[${r-t.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LC=30;function cv(t){return t<=LC?t:N3(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BC(t,e,n){const s=n*(typeof t=="number"?t:t[0]),r=e*(typeof t=="number"?t:t[1]);return[s,r]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zg(t,e,n,s=!0){let r=[];if(s)r=r.concat(e.slice(0)),r.push(t[0]/n),r=r.concat(t.slice(1));else{r=r.concat(t[0]);const i=e.length;for(let a=0;a<i;++a)r=r.concat([t[a+1]/e[a],e[a]]);r=r.concat(t.slice(i+1))}return r}function Jg(t,e,n=!0){const s=[];if(n){s.push(e);for(let r=e+1;r<t;++r)r<=2*e?(s.push(r),s.push(r-(e+1))):s.push(r)}else{const r=[],i=[];for(let a=1;a<t;++a)a>=e*2+1||a%2===1?i.push(a):r.push(a);s.push(...r),s.push(0),s.push(...i)}return s}function Qg(t,e,n,s=!0){const r=[];s?r.push(t[0]/n):r.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?s?r.push(e[i-1]*t[i]):r.push(t[i]/e[i-1]):r.push(t[i]);return r}function zC(t,e){const n=[0];for(let s=0;s<e;++s)n.push(t[s][0]);return n}function VC(t,e,n){const s=t.slice(0,1);for(let r=0;r<n;++r)s.push(t[r+1]-e[r][0]-e[r][1]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uv=1.7580993408473768,dv=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UC=.3275911,WC=.254829592,GC=-.284496736,HC=1.421413741,KC=-1.453152027,qC=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let s=0;s<n.length;s+=2)n[s]=t[s/2],n[s+1]=e[s/2];return n}function lM(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let s=0;s<t.length;s+=2)e[s/2]=t[s],n[s/2]=t[s+1];return{real:e,imag:n}}function cM(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),s=new Float32Array(e);for(let r=0;r<t.length;r+=4)n[Math.floor(r/4)]=t[r],s[Math.floor(r/4)]=t[r+1];return{real:n,imag:s}}function uM(t){const e=Math.floor(t.length/4),n=new Float32Array(e),s=new Float32Array(e);for(let r=2;r<t.length;r+=4)n[Math.floor(r/4)]=t[r],s[Math.floor(r/4)]=t[r+1];return{real:n,imag:s}}function XC(t,e){const n=t[e*2],s=t[e*2+1];return{real:n,imag:s}}function dM(t,e,n,s){t[s*2]=e,t[s*2+1]=n}function hM(t,e){const n=new Float32Array(t/2),s=new Float32Array(t/2);for(let r=0;r<Math.ceil(t/2);r++){const i=(e?2:-2)*Math.PI*(r/t);n[r]=Math.cos(i),s[r]=Math.sin(i)}return{real:n,imag:s}}function fM(t,e,n){const s=(n?2:-2)*Math.PI*(t/e),r=Math.cos(s),i=Math.sin(s);return{real:r,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eN="->",bpe=/->/g,T5=",",I5="...";function YC(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(bpe,"").length)/eN.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${eN}").`);const[s,r]=t.split(eN);K(s.indexOf(I5)===-1,()=>`The ellipsis notation ("${I5}") is not supported yet.`);const i=s.split(T5),a=i.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const l=[];for(let p=0;p<r.length;++p){const g=r[p];if(!i.some(x=>x.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);l.indexOf(g)===-1&&l.push(g)}for(let p=0;p<s.length;++p){const g=s[p];l.indexOf(g)===-1&&g!==T5&&l.push(g)}const c=new Array(i.length);for(let p=0;p<a;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);c[p]=[];for(let g=0;g<i[p].length;++g)c[p].push(l.indexOf(i[p][g]))}const u=l.length,d=r.length,h=[];for(let p=d;p<u;++p)h.push(p);return{allDims:l,summedDims:h,idDims:c}}function ZC(t,e){let n=new Array(t);n.fill(-1);for(let r=0;r<e.length;++r)n[e[r]]=r;const s=[];for(let r=0;r<t;++r)n[r]===-1&&s.push(r);return n=n.filter(r=>r!==-1),{permutationIndices:n,expandDims:s}}function JC(t,e,n){const s=new Array(t);for(let r=0;r<n.length;++r){const i=n[r].shape;for(let a=0;a<e[r].length;++a)s[e[r][a]]===void 0?s[e[r][a]]=i[a]:K(s[e[r][a]]===i[a],()=>`Expected dimension ${s[e[r][a]]} at axis ${a} of input shaped ${JSON.stringify(i)}, but got dimension ${i[a]}`)}}function QC(t,e){const n=t,s=[];let r=0;t.length===0&&n.push(-1),r=t.length+1;for(let a=0;a<r;++a)s.push([]);const i=[];for(let a=0;a<n.length;++a){const l=n[a],c=wpe(e,l);for(const u of c)i.indexOf(u)===-1&&(s[a].push(u),i.push(u))}return{path:n,steps:s}}function eT(t){return t.every((e,n)=>e===n)}function wpe(t,e){const n=[];for(let s=0;s<t.length;++s)(t[s].length===0||t[s].indexOf(e)!==-1||e===-1)&&n.push(s);return n}function tT(t,e,n=0){let s=[];if(typeof e=="number")K(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),s=new Array(e).fill(t.shape[n]/e);else{const r=e.reduce((a,l)=>(l===-1&&(a+=1),a),0);K(r<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const a=e.reduce((l,c)=>c>0?l+c:l);e[i]=t.shape[n]-a}K(t.shape[n]===e.reduce((a,l)=>a+l),()=>"The sum of sizes must match the size of the axis dimension."),s=e}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pM(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function mM(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function gM(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xM(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function yM(t,e){return`size ${t} must be non-negative, not ${e}`}function vM(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function bM(t,e){const n=Le(t),s=Le(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${s}. inputShape=${t} outputShape= ${e}`}function wM(t,e){const n=Le(t),s=Le(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${s}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U3(){return"segment ids must be >= 0"}function NM(){return"segment ids are not increasing"}function SM(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function kM(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Npe(t,e){let n=!1,s;for(t<=LC?(s=t,n=!0):s=N3(t,Math.floor(Math.sqrt(t)));!n;)s>e||s===t?n=!0:s=N3(t,s+1);return s}function Spe(t,e,n){const s=[],r=t.length;for(let i=0;i<r;i++)i!==e?s.push(t[i]):s.push(n);return s}function CM(t,e,n,s){const r=e.shape.length,i=t.shape.length;if(s!==0&&(s<-r||s>r))throw new Error(`Expect batchDims in the range of [-${r}, ${r}], but got ${s}`);if(s<0&&(s+=r),s>i)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${i}).`);if(n<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${n}).`);for(let h=0;h<s;++h)if(t.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${t.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const a=t.shape[n],l=[];let c=1,u=1,d=1;for(let h=0;h<s;++h)l.push(t.shape[h]),c*=t.shape[h];for(let h=s;h<n;h++)l.push(t.shape[h]),u*=t.shape[h];for(let h=s;h<r;h++)l.push(e.shape[h]);for(let h=n+1;h<i;h++)l.push(t.shape[h]),d*=t.shape[h];return{batchSize:c,sliceSize:d,outerSize:u,dimSize:a,outputShape:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hl(t){try{return t.map(e=>Xc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function TM(t){return t.map(e=>Oc(e))}const kpe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:WC,ERF_A2:GC,ERF_A3:HC,ERF_A4:KC,ERF_A5:qC,ERF_P:UC,PARALLELIZE_THRESHOLD:LC,get RowPartitionType(){return no},SELU_SCALE:dv,SELU_SCALEALPHA:uv,applyActivation:ov,assertAndGetBroadcastShape:rn,assertAxesAreInnerMostDims:jr,assertParamsConsistent:MC,assignToTypedArray:dM,axesAreInnerMostDims:iC,calculateShapes:Vd,checkEinsumDimSizes:JC,checkPadOnDimRoundingMode:ni,combineLocations:s8,combineRaggedTensorToTensorShapes:rM,complexWithEvenIndex:cM,complexWithOddIndex:uM,computeConv2DInfo:pr,computeConv3DInfo:fu,computeDefaultPad:Jk,computeDilation2DInfo:Wg,computeOptimalWindowSize:cv,computeOutAndReduceShapes:mr,computeOutShape:Xo,computePool2DInfo:Fa,computePool3DInfo:Yl,convertConv2DDataFormat:Zl,decodeEinsumEquation:YC,eitherStridesOrDilationsAreOne:Ir,expandShapeToKeepDim:Os,exponent:fM,exponents:hM,fromStringArrayToUint8:TM,fromUint8ToStringArray:Hl,getAxesPermutation:Ns,getBroadcastDims:yf,getComplexWithIndex:XC,getEinsumComputePath:QC,getEinsumPermutation:ZC,getFusedBiasGradient:av,getFusedDyActivation:iv,getImageCenter:BC,getInnerMostAxes:Fs,getPermuted:Jg,getRaggedRank:aM,getReductionAxes:rr,getReshaped:Zg,getReshapedPermuted:Qg,getRowPartitionTypesHelper:iM,getSliceBeginCoords:zC,getSliceSize:VC,getSparseFillEmptyRowsIndicesDenseShapeMismatch:pM,getSparseFillEmptyRowsNegativeIndexErrorMessage:mM,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:gM,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:vM,getSparseReshapeInputOutputMismatchErrorMessage:wM,getSparseReshapeInputOutputMultipleErrorMessage:bM,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:xM,getSparseReshapeNegativeOutputDimErrorMessage:yM,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:kM,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:U3,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:NM,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:SM,getUndoAxesPermutation:pu,isIdentityPermutation:eT,mergeRealAndImagArrays:Gl,prepareAndValidate:OC,prepareSplitSize:tT,shouldFuse:lv,splitRealAndImagArrays:lM,stridesOrDilationsArePositive:kd,tupleValuesAreOne:Jc,upcastType:Vi,validateDefaultValueShape:oM,validateInput:SC,validateUpdateShape:S8,warn:ta},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Yfe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IM={kernelName:Fy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(t,Vf(ht(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cpe={kernelName:qm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=qn(ht(n,"float32")),r=Tr(vt(Lt(1),s));return ls(yt(t,r))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tpe={kernelName:Xm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=Tr(vt(qn(ht(n,"float32")),1));return yt(t,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ipe={kernelName:Lf,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=rn(n.shape,s.shape);return{a:()=>{let l=t;const c=rr(n.shape,r);return c.length>0&&(l=kt(l,c)),ge(l,n.shape)},b:()=>{let l=t;const c=rr(s.shape,r);return c.length>0&&(l=kt(l,c)),ge(l,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jpe={kernelName:My,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((s,r)=>{n[r]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Epe={kernelName:Ly,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Nn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $pe={kernelName:By,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Nn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ape={kernelName:Ym,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,Tr(vt(Lt(1),qn(ht(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rpe={kernelName:Zm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=Tr(Ke(Lt(1),qn(ht(n,"float32"))));return yt(t,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dpe={kernelName:eg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=rn(n.shape,s.shape);return{a:()=>{const l=Ke(qn(n),qn(s));let c=he(t,yt(s,l));const u=rr(n.shape,r);return u.length>0&&(c=kt(c,u)),ge(c,n.shape)},b:()=>{const l=Ke(qn(n),qn(s));let c=ls(he(t,yt(n,l)));const u=rr(s.shape,r);return u.length>0&&(c=kt(c,u)),ge(c,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ppe={kernelName:Jm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,Ke(qn(ht(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _pe={kernelName:Qm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,vt(Lt(1),qn(ht(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ope(t,e,n,s,r,i){const a=Z(t,"dy","avgPool3dGrad"),l=Z(e,"input","avgPool3dGrad");let c=a,u=l,d=!1;l.rank===4&&(d=!0,c=ge(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),u=ge(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),K(c.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),K(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),ni("avgPool3dGrad",r,i);const h={dy:c,input:u},p={filterSize:n,strides:s,pad:r,dimRoundingMode:i},g=fe.runKernel(HS,h,p);return d?ge(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const Fpe=ue({avgPool3dGrad_:Ope});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mpe={kernelName:Vy,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>Fpe(t,s,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lpe(t,e,n,s,r){const i=Z(t,"dy","avgPoolGrad"),a=Z(e,"input","avgPoolGrad");K(a.rank===i.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${i.rank})`);let l=a,c=i,u=!1;a.rank===3&&(u=!0,l=ge(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=ge(i,[1,i.shape[0],i.shape[1],i.shape[2]])),K(c.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${c.rank}.`),K(l.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${l.rank}.`);const d={dy:c,input:l},h={filterSize:n,strides:s,pad:r},p=fe.runKernel(GS,d,h);return u?ge(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Bpe=ue({avgPoolGrad_:Lpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zpe={kernelName:zy,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{filterSize:r,strides:i,pad:a}=n;return{x:()=>Bpe(t,s,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vpe={kernelName:Uy,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[s,r]=e,{transposeA:i,transposeB:a}=n;return!i&&!a?{a:()=>gn(t,r,!1,!0),b:()=>gn(s,t,!0,!1)}:!i&&a?{a:()=>gn(t,r,!1,!1),b:()=>gn(t,s,!0,!1)}:i&&!a?{a:()=>gn(r,t,!1,!0),b:()=>gn(s,t,!1,!1)}:{a:()=>gn(r,t,!0,!0),b:()=>gn(t,s,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Upe={kernelName:Wy,gradFunc:(t,e,n)=>{const{blockShape:s,crops:r}=n;return{x:()=>Z2(t,s,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wpe={kernelName:fae,gradFunc:(t,e,n)=>{const s=n,r=s.inputShape,i=s.shape,a=Array.from(i);for(let c=r.length-1;c>=0;c--)if(r[c]===i[c])a[c]=1;else if(r[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${i}].`);const l=[];for(let c=0;c<a.length;c++)a[c]>1&&l.push(c);return{x:()=>kt(t,l,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gpe={kernelName:tg,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hpe={kernelName:ng,gradFunc:t=>({x:()=>Nn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kpe={kernelName:sg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{clipValueMin:r,clipValueMax:i}=n;return{x:()=>Pr(nl(mu(s,r),Bd(s,i)),t,Nn(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qpe={kernelName:Hy,inputsToSave:["x"],gradFunc:IM.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xpe={kernelName:Ky,saveAllInputs:!0,gradFunc:(t,e,n)=>{const s=e.map(c=>c.shape),{axis:r}=n,i=fn(r,e[0].shape)[0],a=s.map(c=>c[i]);return zi(t,a,i).map(c=>()=>c)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ype={kernelName:qy,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[s,r]=e,{dilations:i,strides:a,pad:l,dataFormat:c}=n;return K(Jc(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>eC(s.shape,t,r,a,l,c),filter:()=>jC(s,t,r.shape,a,l,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zpe={kernelName:Xy,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[s,r]=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c}=n;return{dy:()=>Qc(t,r,i,a,l,1,c),filter:()=>jC(t,s,r.shape,i,a,l,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jpe(t,e,n,s,r){let i=t;t.rank===4&&(i=ge(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=e;a.rank===4&&(a=ge(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),K(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),K(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),K(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),K(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),K(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const l={x:i,dy:a},c={strides:s,pad:r,filterShape:n};return fe.runKernel(ZS,l,c)}const Qpe=ue({conv3DBackpropFilter_:Jpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eme={kernelName:Yy,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:s,strides:r,pad:i}=n;K(Jc(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[a,l]=e;return{x:()=>ZF(a.shape,t,l,r,i),filter:()=>Qpe(a,t,l.shape,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tme={kernelName:rg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(ls(yC(ht(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nme={kernelName:ig,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(vC(ht(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sme={kernelName:Zy,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:r,exclusive:i,reverse:a}=n;return{x:()=>{const l=Ns([r],s.rank);let c=sC(t,r,i,!a);return l!=null&&(c=wn(c,l)),c}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rme={kernelName:Jy,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:s,strides:r,pad:i,dimRoundingMode:a}=n,l=s??[1,1];K(Jc(l),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${l}'`);const[c,u]=e;return K(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${c.rank}.`),K(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),K(c.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${c.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),K(Ir(r,l),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${r} and dilations '${l}'.`),ni("depthwiseConv2d",i,a),{x:()=>R8(c.shape,t,u,r,i,l,a),filter:()=>A8(c,t,u.shape,r,i,l,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ime={kernelName:Qy,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[s,r]=e,i={x:s,filter:r,dy:t},a={x:s,filter:r,dy:t};return{x:()=>fe.runKernel(S3,i,n),filter:()=>fe.runKernel(k3,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ame={kernelName:og,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,s={dy:t,y:n};return{x:()=>fe.runKernel(ok,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ome={kernelName:lg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,s=he(Jr(ls(qn(n))),2/Math.sqrt(Math.PI));return{x:()=>he(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lme={kernelName:cg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cme={kernelName:t2,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ge(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ume={kernelName:ug,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(t,Jr(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dme={kernelName:dg,gradFunc:t=>({x:()=>Nn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hme={kernelName:hg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=rn(n.shape,s.shape);return{a:()=>{const l=yt(t,ht(s,"float32")),c=rr(n.shape,r);return c.length>0?ge(kt(l,c),n.shape):l},b:()=>{let l=he(t,ht(n,"float32"));const c=rr(s.shape,r);c.length>0&&(l=ge(kt(l,c),s.shape));const u=qn(s);return ls(yt(l,ht(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fme={kernelName:n2,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:s}=n,[r,i,a,l]=e,c=l??Lt(1),u=rr(i.shape,r.shape),d=[];if(i.rank===1){for(let C=0;C<r.shape.length-1;++C)d.push(r.shape[C]);d.push(1)}const h=vt(r,i),p=he(t,c),g=mC(Ke(a,Lt(s))),x=he(he(he(g,g),g),Lt(-.5));return{x:()=>i.rank===1?ge(he(he(t,Ca(ge(g,[1,1,1,i.shape[0]]),d)),c),r.shape):ge(he(he(t,g),c),r.shape),mean:()=>{let C=he(he(g,Lt(-1)),p);return i.rank===1&&(C=kt(C,u)),ge(C,i.shape)},variance:()=>{let C=he(he(x,h),p);return i.rank===1&&(C=kt(C,u)),ge(C,i.shape)},scale:()=>{const C=he(h,g);let j=he(t,C);return i.rank===1&&(j=kt(j,u)),ge(j,i.shape)},offset:()=>{let C=t;return i.rank===1&&(C=kt(C,u)),ge(C,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pme={kernelName:s2,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[s,r]=e,{axis:i,batchDims:a}=n,l=fn(i,s.shape)[0],c=(u,d,h)=>()=>{const p=u.shape,g=d.size,x=p.slice(0,l),y=x.length,v=p.slice(i,p.length).slice(1),w=v.length,N=j5(0,y),k=j5(y+1,y+1+w),C=E5([x,[g],v]),j=ge(h,C),R=ge(d,[g]),_=E5([[y],N,k]),A=wn(j,_);let O=CC(A,R,u.shape[l]);const L=pu(_);return O=wn(O,L),O};if(a===1){const u=s.shape[0],d=s.split(u,0);return{x:()=>Ui(d.map((g,x)=>c(g,r.slice(x,1),t.slice(x,1))())).reshape(s.shape),indices:()=>r}}else return{x:c(s,r,t),indices:()=>r}}};function j5(t,e){const n=[];for(let s=t;s<e;++s)n.push(s);return n}function E5(t){const e=[];for(let n=0;n<t.length;++n)for(let s=0;s<t[n].length;++s)e.push(t[n][s]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mme={kernelName:fg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>Nn(n),b:()=>Nn(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gme={kernelName:pg,gradFunc:t=>({x:()=>ht(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xme={kernelName:mg,gradFunc:t=>({x:()=>Nn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yme={kernelName:gg,gradFunc:t=>({x:()=>Nn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vme={kernelName:xg,gradFunc:t=>({x:()=>Nn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bme={kernelName:i2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{alpha:r}=n,i=Ki(s,0);return{x:()=>Pr(i,t,he(t,r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wme={kernelName:vg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,Ke(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nme={kernelName:yg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,ht(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sme={kernelName:mae,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s]=e,{axis:r}=n;return{logits:()=>{const a=Jr(s);return vt(t,he(kt(t,r,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kme(t,e,n,s=5,r=1,i=1,a=.5){const l={x:t,y:e,dy:n},c={depthRadius:s,bias:r,alpha:i,beta:a};return fe.runKernel(mk,l,c)}const Cme=ue({localResponseNormalizationBackprop_:kme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tme={kernelName:d2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,r]=e,{depthRadius:i,bias:a,alpha:l,beta:c}=n;return{x:()=>Cme(s,r,t,i,a,l,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jM(t,e,n,s){return e.rank<n.rank&&(e=ge(e,Os(e.shape,s))),t.rank<n.rank&&(t=ge(t,Os(t.shape,s))),{x:()=>he(t,ht(mo(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5={kernelName:h2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const s=n,{reductionIndices:r}=s,i=e[0],a=e[1],l=fn(r,i.shape),c=jM(t,a,i,l);return{x:()=>c.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ime={kernelName:bg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>he(t,ht(mu(n,s),"float32")),b:()=>he(t,ht(bm(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jme(t,e,n,s,r,i,a){const l=Z(t,"dy","maxPool3dGrad"),c=Z(e,"input","maxPool3dGrad"),u=Z(n,"output","maxPool3dGrad");let d=l,h=c,p=u,g=!1;c.rank===4&&(g=!0,d=ge(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=ge(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),p=ge(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),K(d.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${d.rank}.`),K(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),K(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),ni("maxPool3dGrad",i,a);const x={dy:d,input:h,output:p},y={filterSize:s,strides:r,pad:i,dimRoundingMode:a},v=fe.runKernel(xk,x,y);return g?ge(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const Eme=ue({maxPool3dGrad_:jme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $me={kernelName:p2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,r]=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=n;return{x:()=>Eme(t,s,r,i,a,l,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ame(t,e,n,s,r,i,a){const l=Z(t,"dy","maxPoolGrad"),c=Z(e,"input","maxPoolGrad"),u=Z(n,"output","maxPoolGrad");K(c.rank===l.rank,()=>`Rank of input (${c.rank}) does not match rank of dy (${l.rank})`),K(l.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),K(c.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${c.rank}.`),ni("maxPoolGrad",i,a);const d={dy:l,input:c,output:u},h={filterSize:s,strides:r,pad:i,dimRoundingMode:a};return fe.runKernel(gk,d,h)}const Rme=ue({maxPoolGrad_:Ame});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dme={kernelName:f2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,r]=e,{filterSize:i,strides:a,pad:l}=n;return{x:()=>Rme(t,s,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pme={kernelName:m2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:r}=n,i=fn(r,s.shape),l=mr(s.shape,i)[1],c=Le(l);return{x:()=>{const d=s.shape.slice();i.forEach(g=>{d[g]=1});const h=ge(t,d);return yt(he(h,Bi(s.shape,"float32")),c)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _me={kernelName:g2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const s=n,{axis:r}=s,[i,a]=e,l=fn(r,i.shape),c=jM(t,a,i,l);return{x:()=>c.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ome={kernelName:wg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>he(t,ht(Bd(n,s),"float32")),b:()=>he(t,ht(Ki(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fme={kernelName:x2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const s=e[0],{paddings:r}=n,i=r.map(a=>a[0]);return{x:()=>Wt(t,i,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mme={kernelName:Ng,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=rn(n.shape,s.shape);return{a:()=>{const l=rr(n.shape,r);return l.length>0?ge(kt(t,l),n.shape):t},b:()=>{const l=he(t,ls(Xg(yt(n,s)))),c=rr(s.shape,r);return c.length>0?ge(kt(l,c),s.shape):l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lme={kernelName:Sg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=rn(n.shape,s.shape);return{a:()=>{const l=he(t,ht(s,"float32")),c=rr(n.shape,r);return c.length>0?ge(kt(l,c),n.shape):l},b:()=>{const l=he(t,ht(n,"float32")),c=rr(s.shape,r);return c.length>0?ge(kt(l,c),s.shape):l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bme={kernelName:y2,gradFunc:t=>({x:()=>ls(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zme={kernelName:w2,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Js(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vme={kernelName:b2,gradFunc:t=>({x:()=>Nn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ume={kernelName:N2,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:s}=n;return Oa(t,s).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A5={kernelName:S2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const s=e[0],{paddings:r}=n,i=r.map(a=>a[0]);return{x:()=>Wt(t,i,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wme={kernelName:kg,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,s,r]=e,i=n,a=s,l=rn(i.shape,a.shape);return{a:()=>{const d=ht(a,"float32");let h=he(t,he(d,Ul(i,vt(d,Lt(1)))));const p=rr(i.shape,l);return p.length>0&&(h=kt(h,p)),ge(h,i.shape)},b:()=>{const d=Ki(i,0),h=Pr(d,ia(i),Nn(i));let p=he(t,he(r,h));const g=rr(a.shape,l);return g.length>0&&(p=kt(p,g)),ge(p,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gme={kernelName:k2,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,s]=e,r=Ki(n,0);return{x:()=>Pr(r,t,he(t,s)),alpha:()=>{let i=Pr(r,Nn(t),he(t,n));const a=rr(s.shape,t.shape);return a.length>0&&(i=kt(i,a)),ge(i,s.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hme(t,e,n){const s=t.shape.slice();s[n]=1;const r=ge(e,s),i=F0(t,n,!0,!1),a=F0(t,n,!0,!0),l=he(i,a);return he(r,l)}function Kme(t,e,n){const s=t.shape.length,r=s-n.length,i=Ns(n,s);let a=t;i!=null&&(a=wn(t,i));const l=a.shape.slice(),u=l.splice(s-n.length,n.length).reduce((p,g)=>p*g,1);l.push(u);const d=a.reshape(l);let h=Hme(d,e,r);if(h=h.reshape(a.shape),i!=null){const p=pu(i);h=wn(h,p)}return h}const qme={kernelName:C2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:r}=n;let i=[];return r==null?i=s.shape.map((a,l)=>l):typeof r=="number"?i=[r]:i=r,{x:()=>Kme(s,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xme={kernelName:ag,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=rn(n.shape,s.shape);return{a:()=>{const l=yt(t,ht(s,"float32")),c=rr(n.shape,r);return c.length>0?ge(kt(l,c),n.shape):l},b:()=>{let l=he(t,ht(n,"float32"));const c=rr(s.shape,r);c.length>0&&(l=ge(kt(l,c),s.shape));const u=qn(s);return ls(yt(l,ht(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yme={kernelName:Cg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,ls(qn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zme={kernelName:Ig,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,s=he(Bd(n,6),Vf(n));return{x:()=>he(t,ht(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jme={kernelName:Tg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(t,ht(Vf(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qme={kernelName:T2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ege={kernelName:j2,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[s]=e,r={dy:t,images:s};return{images:()=>fe.runKernel(Ek,r,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tge={kernelName:I2,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[s]=e,r={dy:t,images:s};return{images:()=>fe.runKernel(jk,r,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nge={kernelName:E2,gradFunc:(t,e,n)=>{const{dims:s}=n,r=fn(s,t.shape);return{x:()=>_a(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sge={kernelName:jg,gradFunc:t=>({x:()=>Nn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rge={kernelName:Eg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ls(yt(t,he(Ul(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ige={kernelName:$2,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>ht(Nn(n),"float32"),t:()=>he(t,ht(n,t.dtype)),e:()=>he(t,ht(q2(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const age={kernelName:$g,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=Ki(n,Lt(0)),r=Lt(uv),i=Lt(dv),a=he(t,i),l=he(he(t,r),Jr(ht(n,"float32")));return Pr(s,a,l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oge={kernelName:Pg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(t,he(n,vt(Lt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lge={kernelName:Dg,gradFunc:t=>({x:()=>Nn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cge={kernelName:Ag,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(U2(ht(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uge={kernelName:Rg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(nC(ht(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dge={kernelName:A2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{begin:r,size:i}=n,a=s.shape,[l,c]=FC(s,r,i),u=[];for(let d=0;d<t.rank;d++)u.push([l[d],a[d]-l[d]-c[d]]);return{x:()=>gu(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hge={kernelName:_2,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s]=e,{dim:r}=n,i=!0,a=he(t,s);return{logits:()=>vt(a,he(kt(a,[r],i),s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fge={kernelName:_g,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(t,oo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5={kernelName:D2,gradFunc:(t,e,n)=>{const{blockShape:s,paddings:r}=n;return{x:()=>V2(t,s,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D5={kernelName:P2,gradFunc:(t,e,n)=>{const{axis:s}=n;return{x:()=>Es(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pge={kernelName:Og,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,he(Tr(ht(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mge={kernelName:Mk,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(t,he(ht(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gge={kernelName:Fg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=Lt(2);return{a:()=>he(t,he(r,vt(n,s))),b:()=>he(t,he(r,vt(s,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xge={kernelName:Vg,gradFunc:t=>({x:()=>Nn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yge={kernelName:Mg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=rn(n.shape,s.shape);return{a:()=>{let l=t;const c=rr(n.shape,r);return c.length>0&&(l=kt(l,c)),ge(l,n.shape)},b:()=>{let l=t;const c=rr(s.shape,r);return c.length>0&&(l=kt(l,c)),ge(ls(l),s.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vge={kernelName:R2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,r=s.shape.slice(),{axis:i}=n;fn(i,s.shape).forEach(u=>{r[u]=1});const l=ge(t,r),c=he(l,Bi(s.shape,"float32"));return{x:()=>c}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bge={kernelName:Lg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,qn(U2(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wge={kernelName:Bg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>he(vt(Lt(1),qn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nge={kernelName:zg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{reps:r}=n;return{x:()=>{let a=Nn(s);if(s.rank===1)for(let l=0;l<r[0];++l)a=Ke(a,Wt(t,[l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let l=0;l<r[0];++l)for(let c=0;c<r[1];++c)a=Ke(a,Wt(t,[l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let l=0;l<r[0];++l)for(let c=0;c<r[1];++c)for(let u=0;u<r[2];++u)a=Ke(a,Wt(t,[l*s.shape[0],c*s.shape[1],u*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let l=0;l<r[0];++l)for(let c=0;c<r[1];++c)for(let u=0;u<r[2];++u)for(let d=0;d<r[3];++d)a=Ke(a,Wt(t,[l*s.shape[0],c*s.shape[1],u*s.shape[2],d*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sge={kernelName:ef,gradFunc:(t,e,n)=>{const s=n,{perm:r}=s,i=pu(r);return{x:()=>wn(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kge={kernelName:F2,gradFunc:(t,e,n)=>{const s=n,{axis:r}=s;return{value:()=>Ui(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cge={kernelName:M2,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Tge(t,n)}}};function Tge(t,e){const n=Jl(e,Nn(e)),s=Yg(t,n);let r=mu(e,Lt(0,"int32"));const i=s.rank-r.rank;for(let l=0;l<i;++l)r=Zs(r,l+1);r=nl(r,Bi(s.shape,"bool"));const a=Nn(s);return Pr(r,s,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ige={kernelName:L2,gradFunc:t=>({x:()=>Nn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jge=[IM,Cpe,Tpe,Ipe,jpe,Epe,$pe,Ape,Rpe,Dpe,Ppe,_pe,Mpe,zpe,Vpe,Upe,Wpe,Gpe,Hpe,Kpe,qpe,Xpe,Zpe,Ype,eme,tme,nme,sme,rme,ime,Xme,ame,ome,lme,cme,ume,hme,dme,fme,pme,mme,gme,xme,yme,vme,bme,wme,Nme,Sme,Tme,$5,$5,Ime,$me,Dme,Pme,_me,Ome,Fme,Mme,Lme,Bme,zme,Vme,Ume,A5,A5,Wme,Gme,qme,Yme,Zme,Jme,Qme,ege,tge,nge,sge,rge,ige,age,oge,lge,cge,uge,dge,hge,fge,R5,R5,D5,D5,pge,gge,mge,xge,yge,vge,bge,wge,Nge,Sge,kge,Cge,Ige];for(const t of jge)gae(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.abs=function(){return this.throwIfDisposed(),Ys(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.acos=function(){return this.throwIfDisposed(),RF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.acosh=function(){return this.throwIfDisposed(),DF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.add=function(t){return this.throwIfDisposed(),Ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.all=function(t,e){return this.throwIfDisposed(),Zk(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.any=function(t,e){return this.throwIfDisposed(),O0(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.argMax=function(t){return this.throwIfDisposed(),xf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.argMin=function(t){return this.throwIfDisposed(),PF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asScalar=function(){return this.throwIfDisposed(),K(this.size===1,()=>"The array must have only 1 element."),ge(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asType=function(t){return this.throwIfDisposed(),ht(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as1D=function(){return this.throwIfDisposed(),ge(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as2D=function(t,e){return this.throwIfDisposed(),ge(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ge(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as4D=function(t,e,n,s){return this.throwIfDisposed(),ge(this,[t,e,n,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as5D=function(t,e,n,s,r){return this.throwIfDisposed(),ge(this,[t,e,n,s,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asin=function(){return this.throwIfDisposed(),_F(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asinh=function(){return this.throwIfDisposed(),OF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atan=function(){return this.throwIfDisposed(),FF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atan2=function(t){return this.throwIfDisposed(),MF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atanh=function(){return this.throwIfDisposed(),LF(this)};Be().prototype.avgPool=function(t,e,n,s){return this.throwIfDisposed(),z2(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),V2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.batchNorm=function(t,e,n,s,r){return this.throwIfDisposed(),Gg(this,t,e,n,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.broadcastTo=function(t){return this.throwIfDisposed(),sf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cast=function(t){return this.throwIfDisposed(),ht(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.ceil=function(){return this.throwIfDisposed(),GF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),wi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof zn&&(t=[t]),Es([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv1d=function(t,e,n,s,r,i){return this.throwIfDisposed(),Qk(this,t,e,n,s,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv2dTranspose=function(t,e,n,s,r){return this.throwIfDisposed(),tC(this,t,e,n,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv2d=function(t,e,n,s,r,i){return this.throwIfDisposed(),Qc(this,t,e,n,s,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cos=function(){return this.throwIfDisposed(),U2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cosh=function(){return this.throwIfDisposed(),nC(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),F0(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),sC(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),QF(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.depthwiseConv2d=function(t,e,n,s,r,i){return this.throwIfDisposed(),Hg(this,t,e,n,s,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.dilation2d=function(t,e,n,s,r){return this.throwIfDisposed(),e8(this,t,e,n,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.divNoNan=function(t){return this.throwIfDisposed(),t8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.div=function(t){return this.throwIfDisposed(),yt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.dot=function(t){return this.throwIfDisposed(),n8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.elu=function(){return this.throwIfDisposed(),Kg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.equal=function(t){return this.throwIfDisposed(),mo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.erf=function(){return this.throwIfDisposed(),rC(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),i8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.exp=function(){return this.throwIfDisposed(),Jr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.expandDims=function(t){return this.throwIfDisposed(),Zs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.expm1=function(){return this.throwIfDisposed(),a8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.fft=function(){return this.throwIfDisposed(),sv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.flatten=function(){return this.throwIfDisposed(),ge(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.floor=function(){return this.throwIfDisposed(),Xg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.floorDiv=function(t){return this.throwIfDisposed(),Yk(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.gather=function(t,e,n){return this.throwIfDisposed(),Yg(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.greaterEqual=function(t){return this.throwIfDisposed(),mu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.greater=function(t){return this.throwIfDisposed(),Ki(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.ifft=function(){return this.throwIfDisposed(),Sm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.irfft=function(){return this.throwIfDisposed(),wC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isFinite=function(){return this.throwIfDisposed(),o8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isInf=function(){return this.throwIfDisposed(),l8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isNaN=function(){return this.throwIfDisposed(),c8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.leakyRelu=function(t){return this.throwIfDisposed(),G2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.lessEqual=function(t){return this.throwIfDisposed(),Bd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.less=function(t){return this.throwIfDisposed(),bm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.localResponseNormalization=function(t,e,n,s){return this.throwIfDisposed(),u8(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSigmoid=function(){return this.throwIfDisposed(),d8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSoftmax=function(t){return this.throwIfDisposed(),oC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),K2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.log=function(){return this.throwIfDisposed(),ia(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.log1p=function(){return this.throwIfDisposed(),H2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalAnd=function(t){return this.throwIfDisposed(),nl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalNot=function(){return this.throwIfDisposed(),q2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalOr=function(t){return this.throwIfDisposed(),lC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalXor=function(t){return this.throwIfDisposed(),h8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),gn(this,t,e,n)};Be().prototype.maxPool=function(t,e,n,s){return this.throwIfDisposed(),X2(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.max=function(t,e){return this.throwIfDisposed(),Da(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.maximum=function(t){return this.throwIfDisposed(),Jl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mean=function(t,e){return this.throwIfDisposed(),js(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.min=function(t,e){return this.throwIfDisposed(),vm(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.minimum=function(t){return this.throwIfDisposed(),Td(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),p8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mod=function(t){return this.throwIfDisposed(),m8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mul=function(t){return this.throwIfDisposed(),he(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.neg=function(){return this.throwIfDisposed(),ls(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.norm=function(t,e,n){return this.throwIfDisposed(),qg(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.notEqual=function(t){return this.throwIfDisposed(),vf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),uC(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.onesLike=function(){return this.throwIfDisposed(),aa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.pad=function(t,e){return this.throwIfDisposed(),gu(this,t,e)};Be().prototype.pool=function(t,e,n,s,r,i){return this.throwIfDisposed(),g8(this,t,e,n,s,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.pow=function(t){return this.throwIfDisposed(),Ul(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.prelu=function(t){return this.throwIfDisposed(),J2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.prod=function(t,e){return this.throwIfDisposed(),x8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reciprocal=function(){return this.throwIfDisposed(),y8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.relu=function(){return this.throwIfDisposed(),al(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.relu6=function(){return this.throwIfDisposed(),fC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ge(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reshape=function(t){return this.throwIfDisposed(),ge(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),_8(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),O8(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reverse=function(t){return this.throwIfDisposed(),_a(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.rfft=function(){return this.throwIfDisposed(),rv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.round=function(){return this.throwIfDisposed(),pC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.rsqrt=function(){return this.throwIfDisposed(),mC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.selu=function(){return this.throwIfDisposed(),gC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.separableConv2d=function(t,e,n,s,r,i){return this.throwIfDisposed(),xC(this,t,e,n,s,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sigmoid=function(){return this.throwIfDisposed(),oo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sign=function(){return this.throwIfDisposed(),v8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sin=function(){return this.throwIfDisposed(),yC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sinh=function(){return this.throwIfDisposed(),vC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.slice=function(t,e){return this.throwIfDisposed(),Wt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.softmax=function(t){return this.throwIfDisposed(),nv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.softplus=function(){return this.throwIfDisposed(),zf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Z2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.split=function(t,e){return this.throwIfDisposed(),zi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sqrt=function(){return this.throwIfDisposed(),Tr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.square=function(){return this.throwIfDisposed(),qn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.squaredDifference=function(t){return this.throwIfDisposed(),NC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.squeeze=function(t){return this.throwIfDisposed(),Ts(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof zn?[this,t]:[this,...t];return Ui(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.step=function(t){return this.throwIfDisposed(),Vf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.stridedSlice=function(t,e,n,s,r,i,a,l){return this.throwIfDisposed(),b8(this,t,e,n,s,r,i,a,l)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sub=function(t){return this.throwIfDisposed(),vt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sum=function(t,e){return this.throwIfDisposed(),kt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tan=function(){return this.throwIfDisposed(),w8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tanh=function(){return this.throwIfDisposed(),Cd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tile=function(t){return this.throwIfDisposed(),Ca(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toBool=function(){return this.throwIfDisposed(),ht(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toFloat=function(){return this.throwIfDisposed(),ht(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toInt=function(){return this.throwIfDisposed(),ht(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.topk=function(t,e){return this.throwIfDisposed(),k8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.transpose=function(t){return this.throwIfDisposed(),wn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unique=function(t){return this.throwIfDisposed(),C8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),CC(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unstack=function(t){return this.throwIfDisposed(),Oa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.where=function(t,e){return this.throwIfDisposed(),Pr(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.zerosLike=function(){return this.throwIfDisposed(),Nn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Fo.prototype)}}class Ta extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ta.prototype)}}class ve extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ve.prototype)}}class cn extends Error{constructor(e){super(e),Object.setPrototypeOf(this,cn.prototype)}}class nT extends Error{constructor(e){super(e),Object.setPrototypeOf(this,nT.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class EM{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const s=this.cache.keys().next().value;this.cache.delete(s)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jd(t,e){if(Array.isArray(t)){let n=[];for(let s=0;s<e;s++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Mo(t,e){if(!t)throw new nT(e)}function P5(t,e){let n=0;for(const s of t)s===e&&n++;return n}function ui(t){return t.length===1?t[0]:t}function Vn(t){return Array.isArray(t)?t:[t]}function kl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Ju(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let xa={};function sT(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function W3(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>W3(e));else{const e=Object.keys(t);for(const n of e){const s=t[n];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?t[n]=s.value:W3(s))}}}function ex(t,e={},n={},s="object",r=!1){if(typeof t=="string"){const i=t;let a;if(i in n)a=n[i];else if(i in xa)a=xa[i];else if(a=e[i],a==null)throw new ve(`Unknown ${s}: ${t}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const i=t;if(i.className==null||i.config==null)throw new ve(`${s}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const a=i.className;let l,c;if(a in n?[l,c]=n[a]:a in xa?[l,c]=xa.className:a in e&&([l,c]=e[a]),l==null)throw new ve(`Unknown ${s}: ${a}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(c!=null){const u={};for(const g of Object.keys(xa))u[g]=xa[g];for(const g of Object.keys(n))u[g]=n[g];const d=i.config;d.customObjects=u;const h=Object.assign({},xa);for(const g of Object.keys(n))xa[g]=n[g];W3(i.config);const p=c(l,i.config,n,r);return xa=Object.assign({},h),p}else{const u=Object.assign({},xa);for(const h of Object.keys(n))xa[h]=n[h];const d=new l(i.config);return xa=Object.assign({},u),d}}}function Ege(t,e){return t<e?-1:t>e?1:0}function C1(t,e){return-1*Ege(t,e)}function Mc(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function $ge(t){if(t==null)throw new ve(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ud(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ve(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function rT(t,e,n=0,s=1/0){return Mo(n>=0),Mo(s>=n),Array.isArray(t)&&t.length>=n&&t.length<=s&&t.every(r=>typeof r===e)}function fr(t,e){Array.isArray(t)?(K(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,s)=>fr(n,`element ${s+1} of ${e}`))):K(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${$M(t)}.`)}function $M(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>$M(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function Age(t,e,n){let s=n!=null?n():ci(),r;return(...a)=>{const l=n!=null?n():ci();return l-s<e||(s=l,r=t(...a)),r}}function AM(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Rge=0;function RM(){return Rge++}const T1={};function hv(t=""){return t in T1||(T1[t]=0),T1[t]+=1,t+T1[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Dge=["channelsFirst","channelsLast"],Pge=["nearest","bilinear"],_ge=["valid","same","causal"],Oge=["max","avg"],Fge=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Rh=new Map;function Ms(t){Ud(Dge,"DataFormat",t)}function Mge(t){Ud(Pge,"InterpolationFormat",t)}function la(t){Ud(_ge,"PaddingMode",t)}function DM(t){Ud(Oge,"PoolMode",t)}const Qp=[],_5="/";function fd(t,e){Qp.push(t);try{const n=e();return Qp.pop(),n}catch(n){throw Qp.pop(),n}}function Lge(){return Qp.length===0?"":Qp.join(_5)+_5}function PM(t){if(!OM(t))throw new Error("Not a valid tensor name: '"+t+"'");return Lge()+t}function _M(t){if(!OM(t))throw new Error("Not a valid tensor name: '"+t+"'");Rh.has(t)||Rh.set(t,0);const e=Rh.get(t);if(Rh.set(t,Rh.get(t)+1),e>0){const n=`${t}_${e}`;return Rh.set(n,1),n}else return t}const Bge=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function OM(t){return!!t.match(Bge)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zge(t){return t===parseInt(t.toString(),10)}function Lc(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let s=1;for(let r=e;r<n;++r)s*=t[r];return s}function wf(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const s=t[n];s<e&&(e=s)}return e}function eu(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const s=t[n];s>e&&(e=s)}return e}function go(t,e){if(e<t)throw new ve(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let s=t;s<e;++s)n.push(s);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let tN;function Qs(){return tN==null&&(tN=gF().epsilon()),tN}function xo(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yo(t,e){return ht(t,e)}function tx(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ge(t,n)}function Vge(t,e){return Ie(()=>{if(t.shape.length!==2)throw new ve(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=tx(t,1);return G3(n,[1,e,1])})}function Uge(t){const e=[Lc(t.shape)];return ge(t,e)}function Wge(t){if(t.rank<=1)throw new ve(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Lc(t.shape,1)];return ge(t,e)}function pd(t,e,n){return Ie(()=>{switch(t.rank){case 1:return ev(t,e,n);case 2:return bC(t,[e,0],[n,t.shape[1]]);case 3:return tv(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Nm(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Wt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Wt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ve(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function nN(t,e,n){return Ie(()=>{switch(t.rank){case 1:return ev(t,e,n);case 2:return bC(t,[0,e],[t.shape[0],n]);case 3:return tv(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Nm(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ve(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function I1(t,e,n,s){return Ie(()=>{switch(t.rank){case 1:return ev(t,e,n);case 2:switch(s){case 1:return pd(t,e,n);case 2:return nN(t,e,n);default:throw new ve(`The axis is not within the rank of the tensor ${s}`)}case 3:switch(s){case 1:return pd(t,e,n);case 2:return tv(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return nN(t,e,n);default:throw new ve(`The axis is not within the rank of the tensor ${s}`)}case 4:switch(s){case 1:return pd(t,e,n);case 2:return Nm(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Nm(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return nN(t,e,n);default:throw new ve(`The axis is not within the rank of the tensor ${s}`)}default:throw new ve(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function iT(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Es(t,e)}function O5(t,e){switch(t.rank){case 1:return HF([t,e]);case 2:return KF([t,e],0);case 3:return qF([t,e],0);case 4:return XF([t,e],0);default:throw new ve(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function G3(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ve(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Ca(t,e)}function fv(t,e=0,n=1,s,r){return hC(t,e,n,s,r)}function Zo(t,e,n,s){if(t.rank<2||e.rank<2)throw new cn(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const r=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(r!==i)throw new cn(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return B3({a:t,b:e,transposeA:!1,transposeB:!1,bias:s?H3(t.rank,s,xo()):null,activation:n});{const r=t.shape.slice(),i=r.pop();t=ge(t,[-1,i]);const a=e.shape.slice(),l=a.pop(),c=a.pop(),u=[...a,l],d=Array.from({length:e.rank},(x,y)=>y===0?e.rank-2:y<=e.rank-2?y-1:y);e=ge(wn(e,d),[c,-1]);const h=[...r,...u];return ge(B3({a:t,b:e,transposeA:!1,transposeB:!1,bias:s?H3(t.rank,s,xo()):null,activation:n}),h)}}function FM(t,e,n){return Ie(()=>(Array.isArray(e)?e=Ws(e,"int32"):e=ht(e,"int32"),Yg(t,e,n)))}function nx(t){return he(t,t)}function H3(t,e,n){const s=e.shape;if(e.rank!==1&&e.rank!==t)throw new ve(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return s.length===1?ge(e,[1,s[0],1,1,1]):ge(e,[1,s[3],s[0],s[1],s[2]]);if(n==="channelsLast")return s.length===1?ge(e,[1,1,1,1,s[0]]):ge(e,[1].concat(s))}else if(t===4){if(n==="channelsFirst")return s.length===1?ge(e,[1,s[0],1,1]):ge(e,[1,s[2],s[0],s[1]]);if(n==="channelsLast")return s.length===1?ge(e,[1,1,1,s[0]]):ge(e,[1].concat(s))}else if(t===3){if(n==="channelsFirst")return s.length===1?ge(e,[1,s[0],1]):ge(e,[1,s[1],s[0]]);if(n==="channelsLast")return s.length===1?ge(e,[1,1,s[0]]):ge(e,[1].concat(s))}else if(t<3)return e;throw new ve(`Unsupported input rank by biasAdd: ${e.rank}`)}function bo(t,e,n){return Ie(()=>(n==null&&(n=xo()),Ms(n),Ke(t,H3(t.rank,e,n))))}function Gge(t,e=1){if(e!==1)throw new cn(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Kg(t)}function Hge(t){return Ie(()=>yt(t,Ke(Ys(t),1)))}function MM(t,e,n,s){return Ie(()=>j8(t,e,n,s))}function Kge(t){return Ie(()=>{const e=Ke(.5,he(.2,t));return wi(e,0,1)})}function sx(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const qge=["fanIn","fanOut","fanAvg"],Xge=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yge(t){Ud(qge,"FanMode",t)}function Zge(t){Ud(Xge,"Distribution",t)}class Ma extends Wf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class LM extends Ma{apply(e,n){return Js(e,n)}}LM.className="Zeros";Je(LM);class aT extends Ma{apply(e,n){return Bi(e,n)}}aT.className="Ones";Je(aT);class BM extends Ma{constructor(e){if(super(),typeof e!="object")throw new ve(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ve(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Ie(()=>he(Lt(this.value),Bi(e,n)))}getConfig(){return{value:this.value}}}BM.className="Constant";Je(BM);class zM extends Ma{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return zd(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}zM.className="RandomUniform";Je(zM);class VM extends Ma{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new cn(`randomNormal does not support dType ${n}.`);return fv(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}VM.className="RandomNormal";Je(VM);class UM extends Ma{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new cn(`truncatedNormal does not support dType ${n}.`);return kC(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}UM.className="TruncatedNormal";Je(UM);class WM extends Ma{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Ie(()=>{if(e.length!==2||e[0]!==e[1])throw new ve("Identity matrix initializer can only be used for 2D square matrices.");return he(this.gain,aC(e[0]))})}getConfig(){return{gain:this.gain}}}WM.className="Identity";Je(WM);function Jge(t,e="channelsLast"){let n,s;if(Ms(e),t.length===2)n=t[0],s=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const r=Lc(t,2);n=t[1]*r,s=t[0]*r}else if(e==="channelsLast"){const r=Lc(t,0,t.length-2);n=t[t.length-2]*r,s=t[t.length-1]*r}}else{const r=Lc(t);n=Math.sqrt(r),s=Math.sqrt(r)}return[n,s]}class Wi extends Ma{constructor(e){if(super(),e.scale<0)throw new ve(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Yge(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Zge(this.distribution),this.seed=e.seed}apply(e,n){const s=Jge(e),r=s[0],i=s[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,r):this.mode==="fanOut"?a/=Math.max(1,i):a/=Math.max(1,(r+i)/2),this.distribution==="normal"){const l=Math.sqrt(a);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new cn(`${this.getClassName()} does not support dType ${n}.`);return kC(e,0,l,n,this.seed)}else{const l=Math.sqrt(3*a);return zd(e,-l,l,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Wi.className="VarianceScaling";Je(Wi);class oT extends Wi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Wi.className}}oT.className="GlorotUniform";Je(oT);class lT extends Wi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Wi.className}}lT.className="GlorotNormal";Je(lT);class cT extends Wi{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Wi.className}}cT.className="HeNormal";Je(cT);class uT extends Wi{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Wi.className}}uT.className="HeUniform";Je(uT);class dT extends Wi{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Wi.className}}dT.className="LeCunNormal";Je(dT);class hT extends Wi{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Wi.className}}hT.className="LeCunUniform";Je(hT);class GM extends Ma{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Ie(()=>{if(e.length<2)throw new cn("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const s=Le(e.slice(0,-1)),r=e[e.length-1],i=s*r;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const a=[Math.max(r,s),Math.min(r,s)],l=fv(a,0,1,n,this.seed),c=F8.qr(l,!1);let u=c[0];const h=c[1].flatten().stridedSlice([0],[Math.min(r,s)*Math.min(r,s)],[Math.min(r,s)+1]);return u=he(u,h.sign()),s<r&&(u=u.transpose()),he(Lt(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}GM.className="Orthogonal";Je(GM);const F5={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function M5(t,e={}){return ex(t,Na.getMap().classNameMap,e,"initializer")}function ws(t){return sT(t)}function fs(t){if(typeof t=="string"){const e=t in F5?F5[t]:t;if(e==="GlorotNormal")return new lT;if(e==="GlorotUniform")return new oT;if(e==="HeNormal")return new cT;if(e==="HeUniform")return new uT;if(e==="LeCunNormal")return new dT;if(e==="LeCunUniform")return new hT;{const n={};return n.className=e,n.config={},M5(n)}}else return t instanceof Ma?t:M5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function K3(t){return Array.isArray(t)&&Array.isArray(t[0])}function M0(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Gt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ve(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Tn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ve(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function L0(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((s,r)=>s*r);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const L5="Variable";class Qge{constructor(e,n="float32",s=L5,r=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=RM(),s=s??L5,this.originalName=PM(s),this.name=_M(this.originalName),this.trainable_=r,this.constraint=i,this.val=T8(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),exe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function exe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function q3(t){return t.map(e=>e.read())}function fT(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class er{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class sl{constructor(e,n,s,r,i,a,l){this.dtype=e,this.shape=n,this.sourceLayer=s,this.inputs=r,this.callArgs=i,this.outputTensorIndex=l,this.id=RM(),a!=null&&(this.originalName=PM(a),this.name=_M(this.originalName)),this.rank=n.length}}let txe=0,pv=class{constructor(e,n){this.callArgs=n,this.id=txe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const s of e.inboundLayers)s?.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},nxe=0;class pn extends Wf{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=nxe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const s=this.getClassName();n=kl(s)+"_"+hv(s)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let s;if(e.batchInputShape!=null)s=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),s=[i].concat(e.inputShape)}this.batchInputShape=s;let r=e.dtype;r==null&&(r=e.inputDType),r==null&&(r="float32"),this.dtype=r}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Ta(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ve(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return ui(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return ui(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Fo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Fo(`Layer ${this.name} is not connected, no input to return.`);return ui(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Fo(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Fo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ui(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Vn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const s=Vn(this.inputSpec);if(n.length!==s.length)throw new ve(`Layer ${this.name} expects ${s.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let r=0;r<n.length;r++){const i=n[r],a=s[r];if(a==null)continue;const l=i.rank;if(a.ndim!=null&&l!==a.ndim)throw new ve(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${l}`);if(a.maxNDim!=null&&l>a.maxNDim)throw new ve(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${l}`);if(a.minNDim!=null&&l<a.minNDim)throw new ve(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${l}.`);if(a.dtype!=null&&i.dtype!==a.dtype)throw new ve(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${i.dtype}.`);if(a.axes){const c=i.shape;for(const u in a.axes){const d=Number(u),h=a.axes[u],p=d>=0?c[d]:c[c.length+d];if(h!=null&&[h,null].indexOf(p)===-1)throw new ve(`Input ${r} is incompatible with layer ${this.name}: expected axis ${d} of input shape to have value ${h} but got shape ${c}.`)}}if(a.shape!=null)for(let c=0;c<a.shape.length;++c){const u=a.shape[c],d=i.shape[c];if(u!=null&&d!=null&&u!==d)throw new ve(`Input ${r} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const s=Vn(e),r=ixe(e),i=axe(e);if(r===i)throw new ve("Arguments to apply() must be all SymbolicTensors or all Tensors");return fd(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const a=[];for(const l of Vn(e))a.push(l.shape);this.build(ui(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let a=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,a);const l=Vn(a),c=[];for(let u of l)s.indexOf(u)!==-1&&(u=u.clone()),c.push(u);if(a=ui(c),this.activityRegularizer!=null)throw new cn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=sxe(e),l=this.computeOutputShape(a);let c;const u=rxe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),l!=null&&l.length>0&&Array.isArray(l[0])?c=l.map((d,h)=>new sl(u,d,this,Vn(e),n,this.name,h)):c=new sl(u,l,this,Vn(e),n,this.name),this.addInboundNode(e,c,null,null,a,l,n),this._refCount++,this.activityRegularizer!=null)throw new cn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((s,r)=>{s!=null&&e[r]!=null&&e[r]!==s&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Fo(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const s=JSON.stringify(n.outputShapes);e.indexOf(s)===-1&&e.push(s)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Fo(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ta(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return L0(this.weights)}build(e){this.built=!0}getWeights(e=!1){return q3(e?this.trainableWeights:this.weights)}setWeights(e){Ie(()=>{const n=this.weights;if(n.length!==e.length)throw new ve(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const s=[],r=q3(n);for(let i=0;i<r.length;++i){const a=r[i],l=n[i],c=e[i];if(!bn(a.shape,c.shape))throw new ve(`Layer weight shape ${a.shape} not compatible with provided weight shape ${c.shape}`);s.push([l,c])}fT(s)})}addWeight(e,n,s,r,i,a,l,c){if(this._addedWeightNames.indexOf(e)!==-1)throw new ve(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),s==null&&(s="float32"),this.fastWeightInitDuringBuild&&(r=c!=null?c():fs("zeros"));const u=r.apply(n,s),d=new Qge(u,s,e,a,l);return u.dispose(),i!=null&&this.addLoss(()=>i.apply(d.read())),a==null&&(a=!0),a?this._trainableWeights.push(d):this._nonTrainableWeights.push(d),d}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Vn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(s=>{if(s!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,s){if(!this.supportsMasking)return;const r=this.computeMask(e,s),i=Vn(n),a=Vn(r);if(i.length!==a.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let l=0;l<i.length;l++)i[l].kerasMask=a[l]}addInboundNode(e,n,s,r,i,a,l=null){const c=Vn(e);n=Vn(n),s=Vn(s),r=Vn(r),i=M0(i),a=M0(a);const u=[],d=[],h=[];for(const p of c)u.push(p.sourceLayer),d.push(p.nodeIndex),h.push(p.tensorIndex);new pv({outboundLayer:this,inboundLayers:u,nodeIndices:d,tensorIndices:h,inputTensors:c,outputTensors:n,inputMasks:s,outputMasks:r,inputShapes:i,outputShapes:a},l);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function sxe(t){t=Vn(t);const e=[];for(const n of t)e.push(n.shape);return ui(e)}function rxe(t){return"float32"}function HM(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const s=e.inboundNodes[n];if(s.inboundLayers.length===0)return s.inputTensors;{const r=[];for(let i=0;i<s.inboundLayers.length;i++){const a=s.inputTensors[i],l=s.inboundLayers[i],c=s.nodeIndices[i],u=HM(a,l,c);for(const d of u)r.indexOf(d)===-1&&r.push(d)}return r}}}function ixe(t){let e=!0;for(const n of Vn(t))if(!(n instanceof sl)){e=!1;break}return e}function axe(t){let e=!0;for(const n of Vn(t))if(n instanceof sl){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rx extends pn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:hv("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ve("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ve("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ve("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=e.dtype||"float32";this.batchInputShape=n,this.dtype=s,this.inputSpec=[{shape:n}];const r=new sl(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new pv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ve(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}rx.className="InputLayer";Je(rx);function oxe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ve("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new rx({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lxe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return ht(e,t.dtype)}catch{throw new ve(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Rc{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Rc)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,s){if(this.id2Value[e.id]==null)this.id2Value[e.id]=lxe(e,n),this.name2Id[e.name]=e.id,s!=null&&(this.id2Mask[e.id]=s);else throw new ve(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof sl){if(this.id2Value[e.id]==null)throw new ve(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ve(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof sl){if(this.id2Value[e.id]==null)throw new ve(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ve(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Kt(this.id2Mask)}}const B0=new EM,z0=new EM;function cxe(t){B0?.setMaxEntries(t),z0?.setMaxEntries(t)}function Bp(t,e,n,s){const r=n==null?!1:n.training,i=Array.isArray(t),a=i?t:[t],l=a.map(x=>x.name),c=[],u=e.names();for(const x of l)u.indexOf(x)!==-1?c.push(e.getValue(x)):c.push(null);const d=l.join(",")+"|"+e.names().sort().join(",");let h=B0.get(d),p;if(h==null){const x=uxe(a,e);h=x.sorted,p=x.recipientCounts,B0.put(d,h),z0.put(d,p)}p={},r||Object.assign(p,z0.get(d));const g=new Rc(e);for(let x=0;x<h.length;++x){const y=h[x],v=y.sourceLayer;if(v instanceof rx)continue;const w=[],N=[],k=[];let C=!1;for(const O of y.inputs){const L=g.getValue(O),D=g.getMask(O);w.push(L),N.push(D),D!=null&&(C=!0),r||(p[O.name]--,p[O.name]===0&&!e.hasKey(O)&&l.indexOf(O.name)===-1&&!L.isDisposed&&O.sourceLayer.stateful!==!0&&k.push(L))}C&&(n=n||{},n.mask=N[0]);const j=Vn(v.apply(w,n));let R=null;v.supportsMasking&&(R=v.computeMask(w,N));const _=hxe(y),A=Array.isArray(_)?_:[_];for(let O=0;O<A.length;++O){g.hasKey(A[O])||g.add(A[O],j[O],Array.isArray(R)?R[0]:R);const L=l.indexOf(A[O].name);L!==-1&&(c[L]=j[O])}r||Kt(k)}return g.disposeMasks(),i?c:c[0]}function uxe(t,e){K(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],s={};if(t.length===1){const r=B5(t[0],e);n=r.sorted,s=r.recipientMap}else{const r=new Set;for(const i of t){const{sorted:a,recipientMap:l}=B5(i,e);for(const c of a)r.has(c.name)||(n.push(c),r.add(c.name));for(const c in l)s[c]==null&&(s[c]=new Set),l[c].forEach(u=>s[c].add(u))}}return{sorted:n,recipientCounts:dxe(s)}}function dxe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function B5(t,e){const n=new Set,s=[],r={};for(const l of e.names())n.add(l);const i=[],a=[];for(i.push(t);i.length>0;){const l=i[i.length-1];if(n.has(l.name)){i.pop();continue}const c=a[a.length-1]===i.length-1;if(l.inputs.length===0||c)i.pop(),s.push(l),n.add(l.name),c&&a.pop();else{a.push(i.length-1);for(const u of l.inputs)r[u.name]==null&&(r[u.name]=new Set),r[u.name].add(l.name),!n.has(u.name)&&i.push(u)}}return{sorted:s,recipientMap:r}}function hxe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let s=0;s<t.sourceLayer.inboundNodes.length;++s)for(const r of t.sourceLayer.inboundNodes[s].outputTensors)if(r.id===t.id){n=s;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fxe=Pe();fxe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,cxe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pT(t,e){return Ie(()=>Tr(kt(he(t,t),e,!0)))}class ix extends Wf{getConfig(){return{}}}class KM extends ix{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ie(()=>{const n=pT(e,this.axis),s=wi(n,0,this.maxValue);return he(e,yt(s,Ke(Qs(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}KM.className="MaxNorm";Je(KM);class qM extends ix{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ie(()=>yt(e,Ke(Qs(),pT(e,this.axis))))}getConfig(){return{axis:this.axis}}}qM.className="UnitNorm";Je(qM);class XM extends ix{apply(e){return al(e)}}XM.className="NonNeg";Je(XM);class YM extends ix{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ie(()=>{const n=pT(e,this.axis),s=Ke(he(this.rate,wi(n,this.minValue,this.maxValue)),he(1-this.rate,n));return he(e,yt(s,Ke(Qs(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}YM.className="MinMaxNorm";Je(YM);const z5={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function nr(t){return sT(t)}function V5(t,e={}){return ex(t,Na.getMap().classNameMap,e,"constraint")}function sr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in z5?z5[t]:t,config:{}};return V5(n)}else return t instanceof ix?t:V5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Hu(t){if(t==null)return;const e=[],n=[],s=[];for(const r in t){const i=t[r];if(typeof i!="number"){const a=i;e.push(a.data()),n.push(r),s.push(a)}}if(e.length>0){const r=await Promise.all(e);for(let i=0;i<r.length;++i)t[n[i]]=r[i][0];Kt(s)}}function ZM(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var U5;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(U5||(U5={}));const pxe=125;class km{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class mxe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class gxe extends km{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const s=n.size==null?0:n.size;this.seen+=s;for(const r in n){const i=n[r];if(typeof i=="number")this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+i*s;else{let a;r in this.totals?a=this.totals[r]:this.totals[r]=0;const l=Ie(()=>Ke(this.totals[r],he(i,s)));this.totals[r]=l,a?.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const s of this.params.metrics)this.totals[s]!=null&&(typeof this.totals[s]=="number"?n[s]=this.totals[s]/this.seen:Ie(()=>{const r=he(yt(1,this.seen),this.totals[s]);n[s]=r,this.totals[s].dispose(),hr(n[s])}))}}class xxe extends km{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const s in n)this.history[s]==null&&(this.history[s]=[]),this.history[s].push(n[s])}async syncData(){const e=[],n=[],s=[];for(const i in this.history){const a=this.history[i];for(let l=0;l<a.length;++l)if(typeof a[l]!="number"){const c=a[l];e.push(c.data()),n.push(i),s.push(l)}}const r=await Promise.all(e);for(let i=0;i<r.length;++i)this.history[n[i]][s[i]].dispose(),this.history[n[i]][s[i]]=r[i][0]}}class yxe extends km{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||sM,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=pxe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");b3(this.yieldEvery)&&(this.maybeWait=Age(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,s){const r=[];this.yield!=null&&(await Hu(s),r.push(this.yield(e,n,s))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Hu(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const s=[];this.epochEnd!=null&&(await Hu(n),s.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&s.push(this.nextFrameFunc()),await Promise.all(s)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Hu(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const s=[];this.batchEnd!=null&&(await Hu(n),s.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?s.push(this.nextFrameFunc()):b3(this.yieldEvery)&&s.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(s)}async onTrainBegin(e){this.trainBegin!=null&&(await Hu(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Hu(e),await this.trainEnd(e))}}function JM(t,e){return t==null&&(t={}),t instanceof km?[t]:Array.isArray(t)&&t[0]instanceof km?t:Vn(t).map(s=>new yxe(s,e))}class va{constructor(){}static registerCallbackConstructor(e,n){K(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),va.checkForDuplicate(n),va.constructors[e]==null&&(va.constructors[e]=[]),va.constructors[e].push(n)}static checkForDuplicate(e){for(const n in va.constructors)va.constructors[+n].forEach(r=>{if(r===e)throw new ve("Duplicate callback constructor.")})}static clear(){va.constructors={}}static createCallbacks(e){const n=[];for(const s in va.constructors){const r=+s;e>=r&&n.push(...va.constructors[r])}return n.map(s=>new s)}}va.constructors={};function QM(t,e,n,s,r,i,a,l,c){const u=new xxe,d=[new gxe,...va.createCallbacks(e)];t!=null&&d.push(...t),d.push(u);const h=new mxe(d);return h.setParams({epochs:n,initialEpoch:s,samples:r,steps:i,batchSize:a,verbose:e,doValidation:l,metrics:c}),{callbackList:h,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fl(t,e={},n=!1){return ex(t,Na.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function V0(t,e){return Ie(()=>{t.dtype!=="float32"&&(t=ht(t,"float32"));const n=kt(nx(t),e,!0),s=Bf(n.shape,Qs()),r=Tr(Jl(n,s));return yt(t,r)})}function mv(t,e){return Ie(()=>js(nx(vt(e,t)),-1))}function mT(t,e){return Ie(()=>js(Ys(vt(e,t)),-1))}function gT(t,e){return Ie(()=>{const n=vt(t,e),s=wi(Ys(t),Qs(),Number.MAX_VALUE),r=Ys(yt(n,s));return he(100,js(r,-1))})}function vxe(t,e){return Ie(()=>{const n=wi(e,Qs(),Number.MAX_VALUE),s=ia(Ke(1,n)),r=wi(t,Qs(),Number.MAX_VALUE),i=ia(Ke(1,r));return js(nx(vt(s,i)),-1)})}function bxe(t,e){return Ie(()=>{const n=Jl(0,vt(1,he(t,e)));return js(nx(n),-1)})}function wxe(t,e){return Ie(()=>{const n=Jl(0,vt(1,he(t,e)));return js(n,-1)})}function Nxe(t,e){return Ie(()=>{const n=kt(he(t,e),-1),s=Da(he(vt(1,t),e),-1);return Jl(0,Ke(1,vt(s,n)))})}function Sxe(t,e){return Ie(()=>{const n=Math.log(2),s=vt(e,t),r=vt(Ke(s,zf(he(-2,s))),n);return js(r,-1)})}function Cm(t,e,n=!1){return Ie(()=>{if(n)e=nv(e);else{const s=kt(e,e.shape.length-1,!0);e=yt(e,s)}return e=wi(e,Qs(),1-Qs()),ls(kt(he(ht(t,"float32"),ia(e)),e.shape.length-1))})}function U0(t,e,n=!1){return Ie(()=>{const s=ht(Xg(Uge(t)),"int32");e=wi(e,Qs(),1-Qs());const r=e.shape,i=ge(uC(s,r[r.length-1]),r);return Cm(i,e,n)})}function kxe(t,e){if(!bn(t.shape,e.shape))throw new ve(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Ie(()=>{const n=al(e),s=ls(Ys(e));return Ke(vt(n,he(e,t)),H2(Jr(s)))})}function gv(t,e){return Ie(()=>{let n;return n=wi(e,Qs(),1-Qs()),n=ia(yt(n,vt(1,n))),js(kxe(t,n),-1)})}function Cxe(t,e){return Ie(()=>{const n=wi(t,Qs(),1),s=wi(e,Qs(),1);return kt(he(t,ia(yt(n,s))),-1)})}function Txe(t,e){return Ie(()=>{const n=ia(Ke(Qs(),e));return js(vt(e,he(t,n)),-1)})}function eL(t,e){return Ie(()=>{const n=V0(t,-1),s=V0(e,-1),r=he(n,s);return ls(kt(r,-1))})}const W0={meanSquaredError:mv,meanAbsoluteError:mT,meanAbsolutePercentageError:gT,meanSquaredLogarithmicError:vxe,squaredHinge:bxe,hinge:wxe,categoricalHinge:Nxe,logcosh:Sxe,categoricalCrossentropy:Cm,sparseCategoricalCrossentropy:U0,binaryCrossentropy:gv,kullbackLeiblerDivergence:Cxe,poisson:Txe,cosineProximity:eL};function sN(t){if(typeof t=="string"){if(t in W0)return W0[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ve(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tL(t,e){return Ie(()=>{const n=he(.5,aa(e)),s=Yo(Ki(e,n),t.dtype);return js(mo(t,s),-1)})}function nL(t,e){return Ie(()=>Yo(mo(xf(t,-1),xf(e,-1)),"float32"))}function Ixe(t,e){return Ie(()=>ht(kt(nl(mo(t,1),mo(e,1))),"float32"))}function jxe(t,e){return Ie(()=>ht(kt(nl(mo(t,0),mo(e,1))),"float32"))}function Exe(t,e){return Ie(()=>{const n=Ixe(t,e),s=jxe(t,e),r=Ke(n,s);return ht(Pr(Ki(r,0),yt(n,r),0),"float32")})}function $xe(t,e){return gv(t,e)}function Axe(t,e){return t.rank===e.rank&&(t=Ts(t,[t.rank-1])),e=xf(e,-1),e.dtype!==t.dtype&&(e=ht(e,t.dtype)),ht(mo(t,e),"float32")}const Rxe=mv,Dxe=mv,Pxe=mT,_xe=mT,Oxe=gT,Fxe=gT,sL=Cm,Mxe=eL,rL=U0,G0={binaryAccuracy:tL,categoricalAccuracy:nL,precision:Exe,categoricalCrossentropy:sL,sparseCategoricalCrossentropy:rL,mse:Rxe,MSE:Dxe,mae:Pxe,MAE:_xe,mape:Oxe,MAPE:Fxe,cosine:Mxe};function Lxe(t){if(typeof t=="string"&&t in G0)return G0[t];if(typeof t!="string"&&t!=null)return t;throw new ve(`Unknown metric ${t}`)}function j1(t){if(Mo(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(W0))if(W0[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(G0))if(G0[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bxe(t){const e={Adagrad:()=>Ah.adagrad(.01),Adadelta:()=>Ah.adadelta(1,.95,Qs()),Adam:()=>Ah.adam(.001,.9,.999,Qs()),Adamax:()=>Ah.adamax(.002,.9,.999,Qs(),0),RMSProp:()=>Ah.rmsprop(.001,.9,0,Qs()),SGD:()=>Ah.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ve(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const W5=1*1024*1024;function G5(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!X3(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const s=JSON.stringify(t);s.length>W5&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${s.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${W5}.`)}}function X3(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!X3(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!X3(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zxe(t,e,n,s=console.log){const r=Uxe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];r?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(d=>Math.floor(e*d)));let a;if(!r){i.push("Receives inputs"),a=[];for(const d in t.nodesByDepth)a.push(...t.nodesByDepth[d])}s("_".repeat(e)),H0(i,n,s),s("=".repeat(e));const l=t.layers;for(let d=0;d<l.length;++d)r?Wxe(l[d],n,s):Gxe(l[d],n,a,s),s((d===l.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const c=Vxe(t),u=L0(t.nonTrainableWeights);s(`Total params: ${c+u}`),s(`Trainable params: ${c}`),s(`Non-trainable params: ${u}`),s("_".repeat(e))}function Vxe(t){let e;return t.collectedTrainableWeights!=null?e=L0(t.collectedTrainableWeights):e=L0(t.trainableWeights),e}function Uxe(t){let e=!0;const n=[],s=[];for(const r in t.nodesByDepth)n.push(t.nodesByDepth[r]);for(const r of n){if(r.length>1||r.length===1&&r[0].inboundLayers.length>1){e=!1;break}s.push(...r)}if(e)for(const r of t.layers){let i=!1;for(const a of r.inboundNodes)if(s.indexOf(a)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function H0(t,e,n=console.log){let s="";for(let r=0;r<t.length;++r)r>0&&(s=s.slice(0,s.length-1)+" "),s+=t[r],s=s.slice(0,e[r]),s+=" ".repeat(e[r]-s.length);n(s)}function Wxe(t,e,n){let s,r;try{r=t.inboundNodes.map(c=>JSON.stringify(c.inputShapes)).join(",")}catch{r="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const i=t.name,a=t.getClassName(),l=[`${i} (${a})`,r,s,t.countParams().toString()];H0(l,e,n)}function Gxe(t,e,n,s){let r,i;try{i=t.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const a=[];for(const h of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(h)===-1))for(let p=0;p<h.inboundLayers.length;++p){const g=h.inboundLayers[p].name,x=h.nodeIndices[p],y=h.tensorIndices[p];a.push(`${g}[${x}][${y}]`)}const l=t.name,c=t.getClassName(),u=a.length===0?"":a[0],d=[`${l} (${c})`,i,r,t.countParams().toString(),u];H0(d,e,s);for(let h=1;h<a.length;++h)H0(["","","","",a[h]],e,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iL(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function Y3(t,e){if(t===null)return null;if(typeof t=="string")return Ju(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],s=t.length;for(let r=0;r<s;++r){const i=t[r];iL(e,r,i)?n.push(i):n.push(Y3(i,e))}return n}else{const n={};for(const s of Object.keys(t)){const r=t[s];if(s==="name"&&typeof r=="string")n[s]=r;else{const i=Ju(s);n[i]=Y3(r,i)}}return n}}function Z3(t,e){if(t==null)return null;if(typeof t=="string")return kl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],s=t.length;for(let r=0;r<s;++r){const i=t[r];iL(e,r,i)?n.push(i):n.push(Z3(i,e))}return n}else{const n={};for(const s of Object.keys(t)){const r=t[s],i=kl(s);(s==="name"||s==="className")&&typeof r=="string"?n[i]=r:n[i]=Z3(r,s)}return n}}/** @license See the LICENSE file. */const aL="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Hxe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Qa extends pn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const N=this.getClassName().toLowerCase();this.name=hv(N)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Mc(this.inputs).length!==this.inputs.length)throw new ve(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(N=>N.name)}`);Mc(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(N=>N.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const N of this.outputs){const k=N.sourceLayer,C=N.nodeIndex,j=N.tensorIndex;this.outputLayers.push(k),this.outputLayersNodeIndices.push(C),this.outputLayersTensorIndices.push(j)}for(const N of this.inputs){const k=N.sourceLayer,C=N.nodeIndex,j=N.tensorIndex;Mo(C===0,"input layer has >1 nodes"),Mo(j===0,"input layer has >1 tensors"),this.inputLayers.push(k),this.inputLayersNodeIndices.push(C),this.inputLayersTensorIndices.push(j)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let N=0;N<this.inputLayers.length;N++){const k=this.inputLayers[N];if(!(k instanceof rx))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${N} (0-based) originates from layer type ${k.getClassName()}.`);this.inputNames.push(k.name),this.feedInputShapes.push(k.batchInputShape),this.feedInputNames.push(k.name)}for(const N of this.outputLayers)this.outputNames.push(N.name);this.internalInputShapes=this.inputs.map(N=>N.shape),this.internalOutputShapes=this.outputs.map(N=>N.shape);const n={},s={},r={},i={},a={},l=[],c=(N,k,C,j,R,_)=>{(j==null||R==null||_==null)&&(j=N.sourceLayer,R=N.nodeIndex,_=N.tensorIndex);const A=j.inboundNodes[R];if(C.indexOf(A)!==-1)throw new Ta(`The tensor ${N.name} at layer "${j.name}" is part of a cycle.`);if(k.indexOf(A)!==-1)return;this.containerNodes.add(Qa.nodeKey(j,R)),j.id in a||(a[j.id]=Object.keys(a).length),C.indexOf(A)===-1&&C.push(A);const O=A.inboundLayers.length;for(let L=0;L<O;L++){const D=A.inputTensors[L],q=A.inboundLayers[L],V=A.nodeIndices[L],ne=A.tensorIndices[L];c(D,k,C,q,V,ne)}for(k.push(A);C.indexOf(A)>=0;)C.splice(C.indexOf(A),1);l.push(A)},u=[],d=[];for(const N of this.outputs)c(N,u,d);const h=l.slice().reverse();for(const N of h){s[N.id]=N,N.id in n||(n[N.id]=0);let k=n[N.id];const C=r[N.outboundLayer.id]==null?0:r[N.outboundLayer.id];k=Math.max(k,C),r[N.outboundLayer.id]=k,i[N.outboundLayer.id]=N.outboundLayer,n[N.id]=k;for(let j=0;j<N.inboundLayers.length;j++){const R=N.inboundLayers[j],_=N.nodeIndices[j],A=R.inboundNodes[_],O=n[A.id]==null?0:n[A.id];n[A.id]=Math.max(k+1,O),s[A.id]=A}}const p={};for(const N in n){const k=n[N];k in p||(p[k]=[]),p[k].push(s[N])}const g={};for(const N in r){const k=r[N];k in g||(g[k]=[]),g[k].push(i[N])}let x=Object.keys(g).map(N=>parseInt(N,10)).sort(C1);this.layers=[];for(const N of x){const k=g[N];k.sort((C,j)=>{const R=a[C.id],_=a[j.id];return R<_?-1:R>_?1:0});for(const C of k)C instanceof Qa&&this.internalContainerRefs.push(C),this.layers.push(C)}this.layersByDepth=g,x=Object.keys(p).map(N=>parseInt(N,10)).sort(C1);const y=this.inputs.slice(),v=[];for(const N of x)for(const k of p[N]){const C=k.outboundLayer;if(C!=null){for(const j of k.inputTensors)if(y.indexOf(j)===-1)throw new Ta(`Graph disconnected: cannot obtain value for tensor ${j} at layer "${C.name}". The following previous layers were accessed without issue: ${v}`);for(const j of k.outputTensors)y.push(j);v.push(C.name)}}this.nodesByDepth=p;const w=this.layers.map(N=>N.name);for(const N of w){const k=w.filter(C=>C===N).length;if(k!==1)throw new Ta(`The name "${N}" is used ${k} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(w))}this.outboundNodes=[],this.inboundNodes=[],new pv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(N=>null),outputMasks:this.outputs.map(N=>null),inputShapes:this.inputs.map(N=>N.shape),outputShapes:this.outputs.map(N=>N.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(s=>s.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ve("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.layers)n.push(...s.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const s={};let r=0;const i=Hxe(e);i&&this.parseWeights(e);for(const l of this.layers)for(const[c,u]of l.weights.entries()){const d=i?`${u.name.split("/").slice(0,-1).join("/")+"/"}${c}`:u.originalName;if(s[d]!=null)throw new ve(`Duplicate weight name: ${d}`);s[d]=u,r++}const a=[];for(const l in e){let c=l;if(s[l]==null){const u=l.split("/");c=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(s[c]!=null)a.push([s[c],e[l]]);else if(n)throw new ve(`Provided weight data has no target variable: ${l}`);delete s[c]}if(n){const l=[];for(const c in s)l.push(c);if(l.length>0)throw new ve(`${l.length} of ${r} weights are not set: ${l}`)}fT(a)}parseWeights(e){for(const n in Object.keys(e)){const s=n.split("/"),r=["vars","layer_checkpoint_dependencies"],i=s.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!r.includes(a)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${aL}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const s=Z3(this.updatedConfig());return n?JSON.stringify(s):s}call(e,n){return Ie(()=>{e=Vn(e);const s=new Rc;for(let r=0;r<this.inputs.length;++r)s.add(this.inputs[r],e[r]);return Bp(this.outputs,s,n)})}computeMask(e,n){return Ie(()=>{e=Vn(e);let s;return n==null?s=jd(null,e.length):s=Vn(n),this.runInternalGraph(e,s)[1]})}computeOutputShape(e){const n=M0(e);if(n.length!==this.inputLayers.length)throw new ve(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const s={};for(let l=0;l<n.length;l++){const c=this.inputLayers[l],u=n[l],d=c.name+"_0_0";s[d]=u}const r=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(C1);if(r.length>1)for(const l of r){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer;if(this.inputLayers.map(y=>y.id).indexOf(d.id)!==-1)continue;const h=[];for(let y=0;y<u.inboundLayers.length;y++){const v=u.inboundLayers[y],w=u.nodeIndices[y],N=u.tensorIndices[y],k=`${v.name}_${w}_${N}`,C=s[k];h.push(C)}const p=d.computeOutputShape(ui(h)),g=M0(p),x=d.inboundNodes.indexOf(u);for(let y=0;y<g.length;y++){const v=`${d.name}_${x}_${y}`;s[v]=g[y]}}}const i=[],a=[];for(let l=0;l<this.outputLayers.length;l++){const c=this.outputLayers[l],u=this.outputLayersNodeIndices[l],d=this.outputLayersTensorIndices[l],h=`${c.name}_${u}_${d}`;a.push(h)}for(let l=0;l<a.length;l++){const c=a[l];Mo(c in s),i.push(s[c])}return ui(i)}runInternalGraph(e,n){n==null&&(n=jd(null,e.length));const s={};for(let c=0;c<this.inputs.length;++c){const u=this.inputs[c],d=e[c],h=n[c];s[u.id]=[d,h]}const r=Object.keys(this.nodesByDepth).map(c=>parseInt(c,10)).sort(C1);for(const c of r){const u=this.nodesByDepth[c];for(const d of u){const h=d.outboundLayer,p=d.inputTensors,g=d.outputTensors,x=new Array;for(const y of p)y.id in s&&x.push(s[y.id]);if(x.length===p.length){let y={},v,w,N,k;if(d.callArgs!=null&&(y=d.callArgs),x.length===1){const[C,j]=x[0];y.mask==null&&(y.mask=j),N=Vn(h.call(C,y)),k=Vn(h.computeMask(C,j)),v=[C],w=[j]}else v=x.map(C=>C[0]),w=x.map(C=>C[1]),y.mask==null&&(y.mask=w),N=Vn(h.call(v,y)),k=Vn(h.computeMask(v,w));if(h.activityRegularizer)throw new cn("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let C=0;C<g.length;++C){const j=g[C],R=N[C],_=k[C];s[j.id]=[R,_]}}}}const i=[],a=[],l=[];for(const c of this.outputs){Mo(c.id in s,`Could not compute output ${c.name} : ${c.id}`);const[u,d]=s[c.id];l.push(u.shape),i.push(u),a.push(d)}return[i,a,l]}buildNodeConversionMap(e){const n={};let s;for(const r of this.layers){s=r instanceof Qa?1:0;for(let i=0;i<r.inboundNodes.length;i++){const a=Qa.nodeKey(r,i);this.containerNodes.has(a)&&(n[a]=s,s+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ve("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const s of this.layers)if(s.name===e)return s;throw new ve(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ve(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Ie(()=>{const e=[];for(const n of this.layers)for(let s=0;s<n.inboundNodes.length;++s){const r=Qa.nodeKey(n,s);this.containerNodes.has(r)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),s=[];for(const a of this.layers){const l=a.getClassName(),c=a.getConfig(),u=[];for(let h=0;h<a.inboundNodes.length;h++){const p=a.inboundNodes[h],g=Qa.nodeKey(a,h);let x={};if(this.containerNodes.has(g)){if(p.callArgs)try{JSON.stringify(p.callArgs),x=p.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),x={}}if(p.inboundLayers.length>0){const y=[];for(let v=0;v<p.inboundLayers.length;v++){const w=p.inboundLayers[v],N=p.nodeIndices[v],k=p.tensorIndices[v],C=Qa.nodeKey(w,N);let j=n[C];j==null&&(j=0),y.push([w.name,j,k,x])}u.push(y)}}}const d={};d.name=a.name,d.className=l,d.config=c,d.inboundNodes=u,s.push(d)}e.layers=s;const r=[];for(let a=0;a<this.inputLayers.length;a++){const l=this.inputLayers[a],c=this.inputLayersNodeIndices[a],u=Qa.nodeKey(l,c);if(!this.containerNodes.has(u))continue;let d=n[u];d==null&&(d=0);const h=this.inputLayersTensorIndices[a];r.push([l.name,d,h])}e.inputLayers=r;const i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=Qa.nodeKey(l,c);if(!this.containerNodes.has(u))continue;let d=n[u];d==null&&(d=0);const h=this.outputLayersTensorIndices[a];i.push([l.name,d,h])}return e.outputLayers=i,e}static fromConfig(e,n,s={},r=!1){const i={},a={};function l(v,w){v.name in a?a[v.name].push(w):a[v.name]=[w]}function c(v,w){const N=[];let k;for(const C of w){const j=C[0],R=C[1],_=C[2];if(k=C[3]==null?{}:C[3],!(j in i)){l(v,w);return}const A=i[j];if(A.inboundNodes.length<=R){l(v,w);return}const O=A.inboundNodes[R];N.push(O.outputTensors[_])}N.length>0&&v.apply(ui(N),k)}function u(v){const w=v.name,N=Fl(v,n.customObjects!=null?n.customObjects:{});N.setFastWeightInitDuringBuild(r),i[w]=N,v.inboundNodes.forEach(C=>{if(!(C instanceof Array))throw new ve(`Corrupted configuration, expected array for nodeData: ${C}`);l(N,C)})}const d=n.name,h=n.layers;for(const v of h)u(v);for(;!$ge(a);)for(const v of h){const w=i[v.name];if(w.name in a){const N=a[w.name];delete a[w.name];for(const k of N)c(w,k)}}const p=[],g=[],x=n.inputLayers;for(const v of x){const w=v[0],N=v[1],k=v[2];Mo(w in i);const j=i[w].inboundNodes[N].outputTensors;p.push(j[k])}const y=n.outputLayers;for(const v of y){const w=v[0],N=v[1],k=v[2];Mo(w in i);const j=i[w].inboundNodes[N].outputTensors;g.push(j[k])}return new e({inputs:p,outputs:g,name:d})}get stateful(){if(this._stateful)throw new ve("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Ie(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Kxe(t,e,n){const s=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>null);if(s===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==s)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${s} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const r=[];return e.forEach(i=>{i in t?r.push(t[i]):r.push(null)}),r}else throw new Error(`The model has multiple (${s}) outputs, so ${n} must be either an array with ${s} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function oL(t,e){return Kxe(t,e,"classWeight")}async function lL(t,e,n,s){if(n!=null){const r=Ie(()=>{if(t.shape.length===1)return Ol(t);if(t.shape.length===2){if(t.shape[1]>1)return xf(t,1);if(t.shape[1]===1)return ge(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await r.data());Kt(r);const a=[];return i.forEach(l=>{if(n[l]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${l} exists in the data but not in classWeight`);a.push(n[l])}),Ws(a,"float32")}else return null}function qxe(t,e){return he(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Xxe=32;function cL(t,e){let n,s;const r=e;n=r.xs,s=r.ys,K(n!=null&&s!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=H5("input",t.inputNames,n),a=H5("output",t.outputNames,s),l=i[0].shape[0];K(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),K(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let c=0;c<i.length;c++)K(i[c].shape[0]===l,()=>`Batch size mismatch: input ${t.inputNames[c]} has ${i[c].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);for(let c=0;c<a.length;c++)K(a[c].shape[0]===l,()=>`Batch size mismatch: output ${t.outputNames[c]} has ${a[c].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);return{xs:i,ys:a}}function H5(t,e,n){if(n instanceof zn)return[n];if(Array.isArray(n))return K(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const s=[];for(const r of e){if(n[r]==null)throw new ve(`The feature data generated by the dataset lacks the required ${t} key '${r}'.`);s.push(n[r])}return s}}function Yxe(t){if(t.length===3)throw new cn("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Zxe(t,e,n){const s=n.batchesPerEpoch!=null;if(K(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),K(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),K(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),K(!s||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),K(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const r=n.validationData!=null;let i,a;if(r)if(K5(n.validationData))K(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const v=Yxe(n.validationData);i=v.xs,a=v.ys}const l=t.makeTrainFunction(),c=t.getDedupedMetricsNames();let u;r?u=c.slice().concat(c.map(v=>"val_"+v)):u=c.slice();const d=JM(n.callbacks,n.yieldEvery),h=n.verbose==null?1:n.verbose,{callbackList:p,history:g}=QM(d,h,n.epochs,null,null,Jxe(e,n),null,r,u);p.setModel(t),t.history=g,await p.onTrainBegin(),t.stopTraining_=!1;let x=n.initialEpoch==null?0:n.initialEpoch,y=await e.iterator();for(;x<n.epochs;){const v={};await p.onEpochBegin(x);let w=0,N=0;for(s||(y=await e.iterator());!s||w<n.batchesPerEpoch;){const k=await y.next();if(s&&k.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${w} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(k.value!=null){const{xs:C,ys:j}=cL(t,k.value),R={};R.batch=N,R.size=C[0].shape[0],await p.onBatchBegin(N,R);const _=[];if(n.classWeight!=null){const L=oL(n.classWeight,t.outputNames);for(let D=0;D<L.length;++D)_.push(await lL(j[D],null,L[D]))}const A=C.concat(j).concat(_),O=l(A);Kt(A);for(let L=0;L<c.length;++L){const D=c[L],q=O[L];R[D]=q,hr(q)}await p.onBatchEnd(N,R),ZM(R),N++,w++}if(s?w>=n.batchesPerEpoch:k.done){if(r){let C;K5(n.validationData)?C=Vn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):C=Vn(t.evaluate(i,a,{batchSize:n.validationBatchSize==null?Xxe:n.validationBatchSize,verbose:0}));for(let j=0;j<t.metricsNames.length;++j)v[`val_${t.metricsNames[j]}`]=C[j]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(x,v),x++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Jxe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function K5(t){return typeof t.iterator=="function"}function Qxe(t){return typeof t.next=="function"}async function e1e(t,e,n){n=n||{};const s=n.batches!=null,r=t.testFunction;let i=[];if(n.verbose>0)throw new cn("Verbose mode is not implemented yet.");K(!s||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a=Qxe(e)?e:await e.iterator();let l=0,c=0;for(;!s||c<n.batches;){const u=await a.next();if(i=Ie(()=>{if(u.value){const{xs:d,ys:h}=cL(t,u.value),p=d.concat(h),g=Ie(()=>r(p));if(Kt(p),c===0)for(let y=0;y<g.length;++y)i.push(Lt(0));const x=p[0].shape[0];for(let y=0;y<g.length;++y){const v=g[y],w=i[y];i[y]=Ie(()=>Ke(i[y],he(x,v))),c>0&&Kt(w)}Kt(g),l+=x,++c}return i}),u.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<i.length;++u){const d=i[u];i[u]=yt(i[u],l),Kt(d)}return ui(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rN(t){K(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Rp(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(s=>pd(s,e,n-e)):pd(t,e,n-e)}function J3(t,e){return Ie(()=>t==null?null:Array.isArray(t)?t.map(n=>J3(n,e)):FM(t,e.dtype==="int32"?e:ht(e,"int32")))}function iN(t,e){const n=[];let s=0,r=null;for(;s<t;)r=s+e,r>=t&&(r=t),n.push([s,r]),s=r;return n}function uL(t){const e=[];t instanceof zn&&(t=[t]);for(let n=0;n<t.length;++n){const s=t[n];if(s.rank===1)e.push(tx(s,1));else{if(s.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(s)}}return e}function Za(t,e){if(t==null)return;const n=[];if(e instanceof zn)n.push(e.id);else if(Array.isArray(e))e.forEach(r=>n.push(r.id));else if(e!=null)for(const r in e){const i=e[r];n.push(i.id)}const s=[];if(t instanceof zn)n.indexOf(t.id)===-1&&s.push(t);else if(Array.isArray(t))t.forEach(r=>{n.indexOf(r.id)===-1&&s.push(r)});else if(t!=null)for(const r in t){const i=t[r];n.indexOf(i.id)===-1&&s.push(i)}s.forEach(r=>{r.isDisposed||r.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t1e(t){return t instanceof zn}function Q3(t){return Array.isArray(t)}function q5(t){return!t1e(t)&&!Q3(t)}function X5(t,e,n,s=!0,r=""){if(e==null||e.length===0){if(t!=null){let a=!1;if(Q3(t)&&t.length>0)a=!0;else if(q5(t)){for(const l in t)if(t.hasOwnProperty(l)){a=!0;break}}else a=!0;if(a)throw new ve(`Error when checking model ${r} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(a=>null);let i;if(q5(t)){t=t,i=[];for(const a of e){if(t[a]==null)throw new ve(`No data provided for "${a}". Need data for each key in: ${e}`);i.push(t[a])}}else if(Q3(t)){if(t=t,t.length!==e.length)throw new ve(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new ve(`The model ${r} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=uL(i),n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const l=i[a];if(l.shape.length!==n[a].length)throw new ve(`Error when checking ${r}: expected ${e[a]} to have ${n[a].length} dimension(s). but got array with shape ${l.shape}`);for(let c=0;c<n[a].length;++c){if(c===0&&!s)continue;const u=l.shape[c],d=n[a][c];if(d!=null&&d>=0&&u!==d)throw new ve(`${r} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${r} received an input with ${l.shape[0]} examples, each with shape [${l.shape.slice(1,l.shape.length)}] (tensor shape [${l.shape}])`)}}return i}function n1e(t,e,n){const s=Mc(t.map(i=>i.shape[0]));s.sort();const r=Mc(e.map(i=>i.shape[0]));if(r.sort(),s.length>1)throw new ve(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(r.length>1)throw new ve(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(s.length>0&&r.length>0&&!bn(s,r))throw new ve(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${r[0]} target sample(s).`)}function s1e(t,e,n){const s=[mv,gv,Cm];for(let r=0;r<t.length;++r){const i=t[r],a=e[r],l=n[r];if(a!=null){if(a===Cm&&i.shape[i.shape.length-1]===1)throw new ve(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(s.indexOf(a)!==-1){const c=i.shape.slice(1),u=l.slice(1);for(let d=0;d<c.length;++d){const h=c[d],p=u[d];if(p!=null&&h!==p)throw new ve(`A target Tensor with shape ${i.shape} was passed for an output of shape ${l}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function Y5(t,e,n,s=!0,r=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new ve(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new ve(`The model expects ${e.length} ${r} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const l=i[a];if(l.shape.length!==n[a].length)throw new ve(`Error when checking ${r}: expected ${e[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(l.shape)}`);for(let c=0;c<n[a].length;++c){if(c===0&&!s)continue;const u=l.shape[c],d=n[a][c];if(d!=null&&d!==u)throw new ve(`Error when checking ${r}: expected ${e[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(l.shape)}.`)}}}function r1e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(s=>n);{const s=[];for(const r of e){let i=n.hasOwnProperty(r)?n[r]:[];Array.isArray(i)||(i=[i]),s.push(i)}return s}}const i1e="layers-model";class rf extends Qa{constructor(e){super(e),this.isTraining=!1}summary(e,n,s=console.log){if(!this.built)throw new ve("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");zxe(this,e,n,s)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Bxe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof xu))throw new ve("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new ve(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(sN(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ve(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(l=>sN(l))}else{const a=sN(e.loss);this.outputs.forEach(l=>{n.push(a)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const l=this.internalOutputShapes[a],c=this.outputNames[a];this.feedOutputNames.push(c),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[a])}const s=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],fd("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(s.indexOf(a)!==-1)continue;const l=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([l,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const r=r1e(e.metrics,this.outputNames),i=(a,l,c)=>{this.outputNames.length>1&&(l=this.outputNames[a]+"_"+l),this.metricsNames.push(l),this.metricsTensors.push([c,a])};fd("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(s.indexOf(a)!==-1)continue;const l=r[a];(u=>{let h,p,g;for(const x of u){if(typeof x=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(x)!==-1){const v=this.internalOutputShapes[a];v[v.length-1]===1||this.lossFunctions[a]===gv?["accuracy","acc"].indexOf(x)!==-1?p=tL:["crossentropy","ce"].indexOf(x)!==-1&&(p=$xe):this.lossFunctions[a]===U0?["accuracy","acc"].indexOf(x)!==-1?p=Axe:["crossentropy","ce"].indexOf(x)!==-1&&(p=rL):["accuracy","acc"].indexOf(x)!==-1?p=nL:["crossentropy","ce"].indexOf(x)!==-1&&(p=sL);let w;["accuracy","acc"].indexOf(x)!==-1?w="acc":["crossentropy","ce"].indexOf(x)!==-1&&(w="ce"),g=p,h=""+w}else g=Lxe(x),h=""+j1(x);let y;fd(h,()=>{y=g}),i(a,h,y)}})(l)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,s={}){const r=s.batchSize==null?32:s.batchSize;rN(r);const a=this.standardizeUserDataXY(e,n,!0,r);try{const l=a[0].concat(a[1]);this.makeTestFunction();const c=this.testFunction,u=this.testLoop(c,l,r,s.verbose,s.steps);return ui(u)}finally{Za(a[0],e),Za(a[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),e1e(this,e,n)}checkNumSamples(e,n,s,r="steps"){let i;if(s!=null){if(i=null,n!=null)throw new ve(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new ve(`Either the input data should have a defined shape, or ${r} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ve("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(n),r=s?n:[n],i=this.retrieveSymbolicTensors(r),a=new Rc;if(e instanceof zn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ve(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)a.add(this.inputs[c],e[c])}else for(const c of this.inputs){const u=e[c.name];if(u==null)throw new ve(`No value is provided for the model's input ${c.name}`);a.add(c,u)}const l=Bp(i,a);return s?l:l[0]}retrieveSymbolicTensors(e){const n=jd(null,e.length);let s=e.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],a=i.map(l=>l.name);for(let l=0;l<e.length;++l){const c=a.indexOf(e[l]);if(c!==-1&&(n[l]=i[c],s--),s===0)break}if(s===0)break}if(s>0){const r=[];throw n.forEach((i,a)=>{i==null&&r.push(e[a])}),new ve(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(r)}`)}return n}predictLoop(e,n=32,s=!1){return Ie(()=>{const r=this.checkNumSamples(e);if(s)throw new cn("Verbose predictLoop() is not implemented yet.");const i=iN(r,n),a=this.outputs.map(l=>[]);for(let l=0;l<i.length;++l)Ie(()=>{const u=i[l][0],d=i[l][1],h=Rp(e,u,d),p=[];if(Array.isArray(h))for(let x=0;x<h.length;++x)p.push({key:this.inputs[x],value:h[x]});else p.push({key:this.inputs[0],value:h});const g=new Rc(p);return Bp(this.outputs,g)}).forEach((u,d)=>a[d].push(u));return ui(a.map(l=>Es(l,0)))})}predict(e,n={}){const s=uL(e);Y5(s,this.inputNames,this.feedInputShapes,!1);try{const r=n.batchSize==null?32:n.batchSize;return rN(r),this.predictLoop(s,r)}finally{Za(s,e)}}predictOnBatch(e){Y5(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,s=!0,r){if(this.optimizer_==null)throw new Ta("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let a=0;a<this.feedOutputShapes.length;++a){const l=this.feedOutputShapes[a];this.feedLossFns[a]===U0?i.push(l.slice(0,l.length-1).concat([1])):i.push(l)}if(e=X5(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=X5(n,this.feedOutputNames,i,!1,"target"),n1e(e,n),s1e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&r!=null&&r>0&&e[0].shape[0]%r!==0)throw new ve(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,s,r,i=!0,a){const[l,c]=this.standardizeUserDataXY(e,n,i,a);if(s!=null)throw new Error("sample weight is not supported yet.");let u=null;if(r!=null){const d=oL(r,this.outputNames);u=[];for(let h=0;h<d.length;++h)u.push(await lL(c[h],null,d[h]))}return[l,c,u]}testLoop(e,n,s,r=0,i){return Ie(()=>{const a=this.checkNumSamples(n,s,i,"steps"),l=[];if(r>0)throw new cn("Verbose mode is not implemented yet.");if(i!=null)throw new cn("steps mode in testLoop() is not implemented yet");{const c=iN(a,s),u=Ws(go(0,a));for(let d=0;d<c.length;++d){const h=c[d][0],p=c[d][1],g=pd(u,h,p-h),x=J3(n,g),y=e(x);if(d===0)for(let v=0;v<y.length;++v)l.push(Lt(0));for(let v=0;v<y.length;++v){const w=y[v];l[v]=Ke(l[v],he(p-h,w))}}for(let d=0;d<l.length;++d)l[d]=yt(l[d],a)}return l})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let s=0;s<e.length;++s){const r=e[s];let i=r;if(P5(e,r)>1){const a=P5(e.slice(0,s),r);i+=`_${a}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],s=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],l=()=>{const h=[];for(let y=0;y<this.inputs.length;++y)h.push({key:this.inputs[y],value:s[y]});const p=new Rc(h),g=Bp(this.outputs,p,{training:!0});let x;for(let y=0;y<this.lossFunctions.length;++y){const v=this.lossFunctions[y];let w=v(r[y],g[y]);i[y]!=null&&(w=qxe(w,i[y]));const N=js(w);n.push(N),y===0?x=w:x=Ke(x,w)}for(let y=0;y<this.metricsTensors.length;++y){let v;if(this.outputs.length>1&&y<this.outputs.length)v=n[y];else{const w=this.metricsTensors[y][0],N=this.metricsTensors[y][1];v=js(w(r[N],g[N]))}hr(v),a.push(v)}return x=js(x),this.calculateLosses().forEach(y=>{x=Ke(x,y)}),x},c=this.collectedTrainableWeights.map(h=>h.read());return[this.optimizer_.minimize(l,!0,c)].concat(a)}}makeTestFunction(){this.testFunction=e=>Ie(()=>{const n=[];let s;const r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:r[u]});const l=new Rc(a),c=Bp(this.outputs,l);for(let u=0;u<this.lossFunctions.length;++u){const d=this.lossFunctions[u],h=js(d(i[u],c[u]));u===0?s=h:s=Ke(s,h),n.push(s)}for(let u=0;u<this.metricsTensors.length;++u){const d=this.metricsTensors[u][0],h=this.metricsTensors[u][1],p=js(d(i[h],c[h]));n.push(p)}return n})}async fit(e,n,s={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let r,i,a,l,c,u,d,h,p;try{const g=s.batchSize==null?32:s.batchSize;rN(g);const y=await this.standardizeUserData(e,n,s.sampleWeight,s.classWeight,!1,g);r=y[0],i=y[1],p=y[2];let v=!1,w;if(s.validationData!=null&&s.validationData.length>0){if(v=!0,s.validationData.length===2)c=s.validationData[0],u=s.validationData[1];else throw s.validationData.length===3?new cn("validationData including sample weights is not supported yet."):new ve(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);const L=await this.standardizeUserData(c,u,null,null,!0,g);d=L[0],h=L[1],w=d.concat(h)}else if(s.validationSplit!=null&&s.validationSplit>0&&s.validationSplit<1){v=!0;const O=Math.floor(r[0].shape[0]*(1-s.validationSplit)),L=r[0].shape[0];d=Rp(r,O,L),a=r,r=Rp(r,0,O),h=Rp(i,O,L),l=i,i=Rp(i,0,O),w=d.concat(h)}else s.validationSteps!=null&&(v=!0);const N=r.concat(i).concat(p);this.checkTrainableWeightsConsistency();const k=this.makeTrainFunction(),C=this.getDedupedMetricsNames();let j,R;v?(this.makeTestFunction(),j=this.testFunction,R=C.slice().concat(C.map(O=>"val_"+O))):(j=null,w=[],R=C.slice());const _=JM(s.callbacks,s.yieldEvery);return await this.fitLoop(k,N,C,g,s.epochs,s.verbose,_,j,w,s.shuffle,R,s.initialEpoch,null,null)}finally{this.isTraining=!1,Za(r,e),Za(i,n),Za(a,e),Za(l,n),Za(d,c),Za(h,u),p!=null&&Kt(p)}}async fitLoop(e,n,s,r,i,a,l,c,u,d,h,p,g,x){r==null&&(r=32),i==null&&(i=1),d==null&&(d=!0),p==null&&(p=0);let y=!1;if(c!=null&&u!=null&&(y=!0),x!=null&&(y=!0,g==null))throw new ve("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const v=this.checkNumSamples(n,r,g,"steps_per_epoch");let w;v!=null&&(w=go(0,v)),a==null&&(a=1);const{callbackList:N,history:k}=QM(l,a,i,p,v,g,r,y,h);N.setModel(this),this.history=k,await N.onTrainBegin(),this.stopTraining_=!1;for(let C=p;C<i;++C){await N.onEpochBegin(C);const j={};if(g!=null)throw new cn("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new cn("batch shuffling is not implemneted yet");d&&Qie(w);const R=Ws(w),_=iN(v,r);for(let A=0;A<_.length;++A){const O={};if(await N.onBatchBegin(A,O),Ie(()=>{const L=_[A][0],D=_[A][1],q=pd(R,L,D-L);O.batch=A,O.size=D-L;const V=J3(n,q),ne=e(V);for(let J=0;J<s.length;++J){const ee=s[J],te=ne[J];O[ee]=te,hr(te)}if(A===_.length-1&&y){const J=this.testLoop(c,u,r);for(let ee=0;ee<s.length;++ee){const te=s[ee],X=J[ee];hr(X),j["val_"+te]=X}}}),await N.onBatchEnd(A,O),ZM(O),this.stopTraining_)break}R.dispose()}if(await N.onEpochEnd(C,j),this.stopTraining_)break}return await N.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Zxe(this,e,n)}async trainOnBatch(e,n){const s=await this.standardizeUserData(e,n),r=s[0],i=s[1],l=this.makeTrainFunction()(r.concat(i)),c=[];for(const u of l){const d=await u.data();c.push(d[0])}return Kt(l),Za(s[0],e),Za(s[1],n),ui(c)}getNamedWeights(e){const n=[],s=e!=null&&e.trainableOnly,r=s?this.trainableWeights:this.weights,i=this.getWeights(s);for(let a=0;a<r.length;++a)s&&!r[a].trainable||n.push({name:r[a].originalName,tensor:i[a]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=o5().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-o5().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=kl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>kl(n))}else{const n=Object.keys(this.loss);e={};const s=this.loss;for(const r of n)if(typeof s[r]=="string")e[r]=kl(s[r]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[kl(j1(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>kl(j1(e)));{const e={};for(const n in this.metrics)e[n]=kl(j1(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=Y3(e.optimizer_config),s=Fl(n);let r;if(typeof e.loss=="string")r=Ju(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(a=>Ju(a));else if(e.loss!=null){r={};for(const a in e.loss)r[a]=Ju(e.loss[a])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(a=>Ju(a));else if(e.metrics!=null){i={};for(const a in e.metrics)i[a]=Ju(e.metrics[a])}this.compile({loss:r,metrics:i,optimizer:s})}async save(e,n){if(typeof e=="string"){const u=SF(e);if(u.length===0)throw new ve(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new ve(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new ve("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const s=await D3(this.getNamedWeights(n)),l={modelTopology:this.toJSON(null,!1),format:i1e,generatedBy:`TensorFlow.js tfjs-layers v${aL}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){l.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:d,specs:h}=await D3(await this.optimizer.getWeights(),u);s.specs.push(...h),s.data=bF([s.data,d])}return this.userDefinedMetadata!=null&&(G5(this.userDefinedMetadata,this.name,!0),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=s.data,l.weightSpecs=s.specs,e.save(l)}setUserDefinedMetadata(e){G5(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}rf.className="Model";Je(rf);class dL extends rf{}dL.className="Functional";Je(dL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Tm extends rf{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:hv("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new ve(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Tm||e instanceof rf;let s;if(n){if(s=e,s.outputs.length!==1)throw new ve("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(s.inputs.length!==1)throw new ve("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ve("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const r=oxe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(n)this.outputs=s.outputs,this.inputs=s.inputs;else{if(e.inboundNodes.length!==1)throw new ve(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ve("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=HM(this.outputs[0])}this.inboundNodes=[],new pv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:jd(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(r=>r.shape),outputShapes:this.outputs[0].shape})}else{const r=e.apply(this.outputs[0]);if(Array.isArray(r))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[r],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Tn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new rf({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,s=console.log){this.built||this.build(),super.summary(e,n,s)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,s={}){if(!this.built)throw new Ta("The model needs to be compiled before being used.");return this.model.evaluate(e,n,s)}async evaluateDataset(e,n){if(!this.built)throw new Ta("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,s={}){if(!this.built)throw new Ta("The model needs to be compiled before being used.");return this.model.fit(e,n,s)}async fitDataset(e,n){if(!this.built)throw new Ta("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,s={},r=!1){let i,a={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ve("Legacy serialization format not supported yet.");i=n}else K(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,a=n;const l=new e(a);if(!(l instanceof Tm))throw new cn(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(const c of i){const d=Fl(c,void 0,r);r&&d.setFastWeightInitDuringBuild(!0),l.add(d)}return l}set stopTraining(e){if(this.model==null)throw new ve("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ve("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const s={};s.className=n.getClassName(),s.config=n.getConfig(),e.push(s)}return{name:this.name,layers:e}}}Tm.className="Sequential";Je(Tm);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Fr=class extends Wf{getConfig(){return{}}};class hL extends Fr{apply(e,n=1){return Gge(e,n)}}hL.className="elu";Je(hL);class fL extends Fr{apply(e){return gC(e)}}fL.className="selu";Je(fL);class pL extends Fr{apply(e){return al(e)}}pL.className="relu";Je(pL);class mL extends Fr{apply(e){return Ie(()=>Td(6,al(e)))}}mL.className="relu6";Je(mL);class gL extends Fr{apply(e){return e}}gL.className="linear";Je(gL);class xL extends Fr{apply(e){return oo(e)}}xL.className="sigmoid";Je(xL);class yL extends Fr{apply(e){return Kge(e)}}yL.className="hardSigmoid";Je(yL);class vL extends Fr{apply(e){return zf(e)}}vL.className="softplus";Je(vL);class bL extends Fr{apply(e){return Hge(e)}}bL.className="softsign";Je(bL);class wL extends Fr{apply(e){return Cd(e)}}wL.className="tanh";Je(wL);let xT=class extends Fr{apply(e,n=-1){return nv(e,n)}};xT.className="softmax";Je(xT);class NL extends Fr{apply(e,n=-1){return oC(e,n)}}NL.className="logSoftmax";Je(NL);class SL extends Fr{apply(e){return Ie(()=>Ie(()=>{const n=Math.sqrt(2),s=he(.5,Ke(1,rC(yt(e,n))));return he(e,s)}))}}SL.className="gelu";Je(SL);class kL extends Fr{apply(e){return Ie(()=>he(.5,he(e,Ke(1,Cd(he(Tr(yt(2,Math.PI)),Ke(e,he(.044715,Ul(e,3)))))))))}}kL.className="gelu_new";Je(kL);class CL extends Fr{apply(e){return Ie(()=>he(e,Cd(zf(e))))}}CL.className="mish";Je(CL);class TL extends Fr{apply(e,n=1){return Ie(()=>he(oo(he(e,n)),e))}}TL.className="swish";Je(TL);function tu(t){return t.getClassName()}function aN(t,e={}){return ex(t,Na.getMap().classNameMap,e,"activation")}function nu(t){if(t==null){const e={};return e.className="linear",e.config={},aN(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},aN(e)}else return t instanceof Fr?t:aN(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a1e(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class IL extends Wf{}class jL extends IL{constructor(e){super(),a1e(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Ie(()=>{let n=Js([1]);return this.hasL1&&(n=Ke(n,kt(he(this.l1,Ys(e))))),this.hasL2&&(n=Ke(n,kt(he(this.l2,nx(e))))),ge(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}jL.className="L1L2";Je(jL);const Z5={l1l2:"L1L2"};function Xn(t){return sT(t)}function J5(t,e={}){return ex(t,Na.getMap().classNameMap,e,"regularizer")}function ps(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in Z5?Z5[t]:t,config:{}};return J5(n)}else return t instanceof IL?t:J5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class EL extends pn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Gt(e);let s=al(e);return this.maxValue!=null&&(s=wi(s,0,this.maxValue)),s}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}EL.className="ReLU";Je(EL);class $L extends pn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const s=Gt(e);return G2(s,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}$L.className="LeakyReLU";Je($L);class AL extends pn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=fs(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ps(e.alphaRegularizer),this.alphaConstraint=sr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ve(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Tn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const r of this.sharedAxes)n[r-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(this.sharedAxes!=null)for(let r=1;r<e.length;++r)s[r]=e[r];this.inputSpec=[new er({ndim:e.length,axes:s})],this.built=!0}call(e,n){return e=Gt(e),J2(e,this.alpha.read())}getConfig(){const e={alphaInitializer:ws(this.alphaInitializer),alphaRegularizer:Xn(this.alphaRegularizer),alphaConstraint:nr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}AL.className="PReLU";Je(AL);let RL=class extends pn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new cn(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const s=Gt(e);return Kg(s)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};RL.className="ELU";Je(RL);class DL extends pn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const s=Gt(e);return he(s,ht(Ki(s,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}DL.className="ThresholdedReLU";Je(DL);class PL extends pn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new xT().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Ie(()=>{let s=Gt(e);const r=n.mask;if(r!=null){const i=he(vt(Bi(s.shape),ht(r,s.dtype)),Lt(-1e9));s=Ke(s,i)}return this.axis instanceof Array?this.axis.length>1?Jr(vt(s,K2(s,this.axis,!0))):this.softmax(s,this.axis[0]):this.softmax(s,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}PL.className="Softmax";Je(PL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function af(t,e,n){if(typeof t=="number")return jd(t,e);if(t.length!==e)throw new ve(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let s=0;s<e;++s){const r=t[s];if(!zge(r))throw new ve(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${r}`)}return t}function lo(t,e,n,s,r=1){if(t==null)return t;const i=e+(e-1)*(r-1);let a;return n==="same"?a=t:a=t-i+1,Math.floor((a+s-1)/s)}function Lo(t,e,n,s){if(t==null)return null;if(s==="valid")t=t*e+eu([n-e,0]);else if(s==="same")t=t*e;else throw new ve(`Unsupport padding mode: ${s}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yT(t,e){return Ie(()=>(Ms(e),e==="channelsFirst"?wn(t,[0,2,3,1]):t))}function _L(t,e){return Ie(()=>(Ms(e),e==="channelsFirst"?wn(t,[0,2,3,4,1]):t))}function o1e(t,e,n,s=1,r="valid",i,a=1){return Ie(()=>{if(i==null&&(i=xo()),Ms(i),t.shape.length!==3)throw new ve(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ve(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ve(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=wn(t,[0,2,1])),r==="causal")throw new cn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let l=Qk(t,e,s,r==="same"?"same":"valid","NWC",a);return n!=null&&(l=bo(l,n)),l})}function Q5(t,e,n,s=[1,1],r="valid",i,a,l=null){return Ie(()=>{if(i==null&&(i=xo()),Ms(i),t.rank!==3&&t.rank!==4)throw new ve(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ve(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let c=yT(t,i);if(r==="causal")throw new cn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=$8({x:c,filter:e,strides:s,pad:r==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:l}),i==="channelsFirst"&&(c=wn(c,[0,3,1,2])),c})}function l1e(t,e,n,s=[1,1,1],r="valid",i,a){return Ie(()=>{if(i==null&&(i=xo()),Ms(i),t.rank!==4&&t.rank!==5)throw new ve(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ve(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let l=_L(t,i);if(r==="causal")throw new cn("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return l=YF(l,e,s,r==="same"?"same":"valid","NDHWC",a),n!=null&&(l=bo(l,n)),i==="channelsFirst"&&(l=wn(l,[0,4,1,2,3])),l})}class xv extends pn{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",xv.verifyArgs(n),this.rank=e,fr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new cn(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=af(n.kernelSize,e,"kernelSize"),this.strides=af(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,la(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ms(this.dataFormat),this.activation=nu(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=fs(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=sr(n.biasConstraint),this.biasRegularizer=ps(n.biasRegularizer),this.activityRegularizer=ps(n.activityRegularizer),this.dilationRate=af(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ve(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ve(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ve(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Mo("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!rT(e.kernelSize,"number",1,3))throw new ve(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:tu(this.activation),useBias:this.useBias,biasInitializer:ws(this.biasInitializer),biasRegularizer:Xn(this.biasRegularizer),activityRegularizer:Xn(this.activityRegularizer),biasConstraint:nr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Gf extends xv{constructor(e,n){super(e,n),this.kernel=null,Gf.verifyArgs(n),this.filters=n.filters,fr(this.filters,"filters"),this.kernelInitializer=fs(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=sr(n.kernelConstraint),this.kernelRegularizer=ps(n.kernelRegularizer)}build(e){e=Tn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ve(`The channel dimension of the input should be defined. Found ${e[n]}`);const s=e[n],r=this.kernelSize.concat([s,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:s}}],this.built=!0}call(e,n){return Ie(()=>{e=Gt(e);let s;const r=this.bias==null?null:this.bias.read(),i=AM(this.activation.getClassName());if(i!=null&&this.rank===2)s=Q5(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)s=o1e(e,this.kernel.read(),r,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)s=Q5(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)s=l1e(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new cn("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(s=this.activation.apply(s))}return s})}computeOutputShape(e){e=Tn(e);const n=[],s=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<s.length;++i){const a=lo(s[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(a)}let r=[e[0]];return this.dataFormat==="channelsLast"?(r=r.concat(n),r.push(this.filters)):(r.push(this.filters),r=r.concat(n)),r}getConfig(){const e={filters:this.filters,kernelInitializer:ws(this.kernelInitializer),kernelRegularizer:Xn(this.kernelRegularizer),kernelConstraint:nr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ve(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class ax extends Gf{constructor(e){super(2,e),ax.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!rT(e.kernelSize,"number",1,2))throw new ve(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}ax.className="Conv2D";Je(ax);class ox extends Gf{constructor(e){super(3,e),ox.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ve(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}ox.className="Conv3D";Je(ox);class OL extends ax{constructor(e){if(super(e),this.inputSpec=[new er({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ve(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Tn(e),e.length!==4)throw new ve("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ve("The channel dimension of the inputs should be defined. Found `None`.");const s=e[n],r=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new er({ndim:4,axes:{[n]:s}})],this.built=!0}call(e,n){return Ie(()=>{let s=Gt(e);if(s.shape.length!==4)throw new ve(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const r=s.shape,i=r[0];let a,l;this.dataFormat==="channelsFirst"?(a=2,l=3):(a=1,l=2);const c=r[a],u=r[l],d=this.kernelSize[0],h=this.kernelSize[1],p=this.strides[0],g=this.strides[1],x=Lo(c,p,d,this.padding),y=Lo(u,g,h,this.padding),v=[i,x,y,this.filters];this.dataFormat!=="channelsLast"&&(s=wn(s,[0,2,3,1]));let w=tC(s,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=wn(w,[0,3,1,2])),this.bias!=null&&(w=bo(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=Tn(e);const n=e.slice();let s,r,i;this.dataFormat==="channelsFirst"?(s=1,r=2,i=3):(s=3,r=1,i=2);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],u=this.strides[1];return n[s]=this.filters,n[r]=Lo(n[r],c,a,this.padding),n[i]=Lo(n[i],u,l,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}OL.className="Conv2DTranspose";Je(OL);class FL extends ox{constructor(e){if(super(e),this.inputSpec=[new er({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ve(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Tn(e),e.length!==5)throw new ve("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ve("The channel dimension of the inputs should be defined. Found `None`.");const s=e[n],r=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new er({ndim:5,axes:{[n]:s}})],this.built=!0}call(e,n){return Ie(()=>{let s=Gt(e);if(s.shape.length!==5)throw new ve(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const r=s.shape,i=r[0];let a,l,c;this.dataFormat==="channelsFirst"?(c=2,a=3,l=4):(c=1,a=2,l=3);const u=r[c],d=r[a],h=r[l],p=this.kernelSize[0],g=this.kernelSize[1],x=this.kernelSize[2],y=this.strides[0],v=this.strides[1],w=this.strides[2],N=Lo(u,y,p,this.padding),k=Lo(d,v,g,this.padding),C=Lo(h,w,x,this.padding),j=[i,N,k,C,this.filters];this.dataFormat!=="channelsLast"&&(s=wn(s,[0,2,3,4,1]));let R=JF(s,this.kernel.read(),j,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(R=wn(R,[0,4,1,2,3])),this.bias!==null&&(R=bo(R,this.bias.read(),this.dataFormat)),this.activation!==null&&(R=this.activation.apply(R)),R})}computeOutputShape(e){e=Tn(e);const n=e.slice();let s,r,i,a;this.dataFormat==="channelsFirst"?(s=1,r=2,i=3,a=4):(s=4,r=1,i=2,a=3);const l=this.kernelSize[0],c=this.kernelSize[1],u=this.kernelSize[2],d=this.strides[0],h=this.strides[1],p=this.strides[2];return n[s]=this.filters,n[r]=Lo(n[r],d,l,this.padding),n[i]=Lo(n[i],h,c,this.padding),n[a]=Lo(n[a],p,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}FL.className="Conv3DTranspose";Je(FL);class ML extends Gf{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ve("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ve("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ve(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=fs(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ps(n.depthwiseRegularizer),this.depthwiseConstraint=sr(n.depthwiseConstraint),this.pointwiseInitializer=fs(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ps(n.pointwiseRegularizer),this.pointwiseConstraint=sr(n.pointwiseConstraint)}build(e){if(e=Tn(e),e.length<this.rank+2)throw new ve(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ve(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const s=e[n],r=this.kernelSize.concat([s,this.depthMultiplier]),i=[];for(let l=0;l<this.rank;++l)i.push(1);i.push(s*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new er({ndim:this.rank+2,axes:{[n]:s}})],this.built=!0}call(e,n){return Ie(()=>{e=Gt(e);let s;if(this.rank===1)throw new cn("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=wn(e,[0,2,3,1])),s=xC(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=bo(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),this.dataFormat==="channelsFirst"&&(s=wn(s,[0,3,1,2])),s})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=ws(this.depthwiseInitializer),e.pointwiseInitializer=ws(this.pointwiseInitializer),e.depthwiseRegularizer=Xn(this.depthwiseRegularizer),e.pointwiseRegularizer=Xn(this.pointwiseRegularizer),e.depthwiseConstraint=nr(this.depthwiseConstraint),e.pointwiseConstraint=nr(this.pointwiseConstraint),e}}ML.className="SeparableConv";class LL extends ML{constructor(e){super(2,e)}}LL.className="SeparableConv2D";Je(LL);class yv extends Gf{constructor(e){super(1,e),yv.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!rT(e.kernelSize,"number",1,1))throw new ve(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}yv.className="Conv1D";Je(yv);class BL extends pn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Ie(()=>{if(e=Gt(e),this.dataFormat==="channelsLast"){const s=I1(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return I1(s,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const s=I1(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return I1(s,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}BL.className="Cropping2D";Je(BL);class zL extends pn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ms(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Mge(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],s=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,s]}else{const n=e[1]==null?null:this.size[0]*e[1],s=e[2]==null?null:this.size[1]*e[2];return[e[0],n,s,e[3]]}}call(e,n){return Ie(()=>{let s=Gt(e);const r=s.shape;if(this.dataFormat==="channelsFirst"){s=wn(s,[0,2,3,1]);const i=this.size[0]*r[2],a=this.size[1]*r[3],l=this.interpolation==="nearest"?mi.resizeNearestNeighbor(s,[i,a]):mi.resizeBilinear(s,[i,a]);return wn(l,[0,3,1,2])}else{const i=this.size[0]*r[1],a=this.size[1]*r[2];return this.interpolation==="nearest"?mi.resizeNearestNeighbor(s,[i,a]):mi.resizeBilinear(s,[i,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}zL.className="UpSampling2D";Je(zL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function c1e(t,e,n=[1,1],s="valid",r,i){return Ie(()=>{r==null&&(r=xo()),Ms(r);let a=yT(t,r);if(t.rank!==4)throw new ve(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ve(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=Hg(a,e,n,s==="same"?"same":"valid","NHWC",i),r==="channelsFirst"&&(a=wn(a,[0,3,1,2])),a})}class VL extends xv{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=fs(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=sr(e.depthwiseConstraint),this.depthwiseRegularizer=ps(e.depthwiseRegularizer)}build(e){if(e=Tn(e),e.length<4)throw new ve(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ve(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const s=e[n],r=[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ie(()=>{e=Gt(e);let s=c1e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=bo(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),s})}computeOutputShape(e){e=Tn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=lo(n,this.kernelSize[0],this.padding,this.strides[0]),a=lo(s,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],r,i,a]:[e[0],i,a,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=ws(this.depthwiseInitializer),e.depthwiseRegularizer=Xn(this.depthwiseRegularizer),e.depthwiseConstraint=nr(this.depthwiseRegularizer),e}}VL.className="DepthwiseConv2D";Je(VL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function UL(t,e,n,s){if(Array.isArray(t)){if(e!=null||n!=null)throw new ve("When inputs is an array, neither initialState or constants should be provided");s!=null&&(n=t.slice(t.length-s,t.length),t=t.slice(0,t.length-s)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function r(i){return i==null||Array.isArray(i)?i:[i]}return e=r(e),n=r(n),{inputs:t,initialState:e,constants:n}}function WL(t,e,n,s=!1,r,i,a=!1,l=!1){return Ie(()=>{const c=e.shape.length;if(c<3)throw new ve(`Input should be at least 3D, but is ${c}D.`);const u=[1,0].concat(go(2,c));e=wn(e,u),a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r!=null&&(r=ht(ht(r,"bool"),"float32"),r.rank===c-1&&(r=Zs(r,-1)),r=wn(r,u)),s&&(e=_a(e,0),r!=null&&(r=_a(r,0)));const d=[];let h,p=n;const g=e.shape[0],x=Oa(e);let y;r!=null&&(y=Oa(r));for(let w=0;w<g;++w){const N=x[w],k=Ie(()=>t(N,p));if(r==null)h=k[0],p=k[1];else{const C=Ie(()=>{const j=y[w],R=vt(aa(j),j),_=Ke(he(k[0],j),he(p[0],R)),A=p.map((O,L)=>Ke(he(k[1][L],j),he(O,R)));return{output:_,newStates:A}});h=C.output,p=C.newStates}l&&d.push(h)}let v;return l&&(v=Ui(d,1)),[h,v,p]})}class yu extends pn{constructor(e){super(e);let n;if(e.cell==null)throw new ve("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new wT({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ve("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new er({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return go(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){K3(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const s=n[0];let r;if(this.returnSequences?r=[e[0],e[1],s]:r=[e[0],s],this.returnState){const i=[];for(const a of n)i.push([e[0],a]);return[r].concat(i)}else return r}computeMask(e,n){return Ie(()=>{Array.isArray(n)&&(n=n[0]);const s=this.returnSequences?n:null;if(this.returnState){const r=this.states.map(i=>null);return[s].concat(r)}else return s})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let s=0;s<e;++s)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new cn("Constants support is not implemented in RNN yet.");K3(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,s=e.slice(2);this.inputSpec[0]=new er({shape:[n,null,...s]});const r=[e[0]].concat(e.slice(2));this.cell.build(r);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!bn(this.stateSpec.map(a=>a.shape[a.shape.length-1]),i))throw new ve(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(a=>new er({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Ie(()=>{if(!this.stateful)throw new Fo("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(s==null)throw new ve("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>Js([s,r])):this.states_=[Js([s,this.cell.stateSize])];else if(e==null)Kt(this.states_),this.keptStates!=null&&(Kt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>Js([s,r])):this.states_[0]=Js([s,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ve(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Kt(this.states_);for(let r=0;r<this.states_.length;++r){const i=e[r],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[r]:this.cell.stateSize,l=[s,a];if(!bn(i.shape,l))throw new ve(`State ${r} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${i.shape}`);this.states_[r]=i}}this.states_=this.states_.map(r=>hr(r.clone()))})}apply(e,n){let s=n==null?null:n.initialState,r=n==null?null:n.constants;n==null&&(n={});const i=UL(e,s,r,this.numConstants);e=i.inputs,s=i.initialState,r=i.constants;let a=[],l=[];if(s!=null){n.initialState=s,a=a.concat(s),this.stateSpec=[];for(const u of s)this.stateSpec.push(new er({shape:u.shape}));l=l.concat(this.stateSpec)}if(r!=null&&(n.constants=r,a=a.concat(r),this.numConstants=r.length),a[0]instanceof sl){const u=[e].concat(a),d=this.inputSpec.concat(l),h=this.inputSpec;this.inputSpec=d;const p=super.apply(u,n);return this.inputSpec=h,p}else return super.apply(e,n)}call(e,n){return Ie(()=>{const s=n==null?null:n.mask,r=n==null?null:n.training;let i=n==null?null:n.initialState;e=Gt(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==a)throw new ve(`RNN Layer has ${a} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const l={training:r},u=WL((x,y)=>{const v=this.cell.call([x].concat(y),l);return[v[0],v.slice(1)]},e,i,this.goBackwards,s,null,this.unroll,this.returnSequences),d=u[0],h=u[1],p=u[2];this.stateful&&this.resetStates(p,r);const g=this.returnSequences?h:d;return this.returnState?[g].concat(p):g})}getInitialState(e){return Ie(()=>{let n=Js(e.shape);return n=kt(n,[1,2]),n=tx(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?G3(n,[1,s]):n):this.cell.stateSize>1?[G3(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===yu.className&&(n.cell={className:this.cell.getClassName(),config:s}),Object.assign(Object.assign(Object.assign({},s),e),n)}static fromConfig(e,n,s={}){const r=n.cell,i=Fl(r,s);return new e(Object.assign(n,{cell:i}))}}yu.className="RNN";Je(yu);class vv extends pn{}class vT extends vv{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,fr(this.units,"units"),this.activation=nu(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=fs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=fs(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=fs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ps(e.kernelRegularizer),this.recurrentRegularizer=ps(e.recurrentRegularizer),this.biasRegularizer=ps(e.biasRegularizer),this.kernelConstraint=sr(e.kernelConstraint),this.recurrentConstraint=sr(e.recurrentConstraint),this.biasConstraint=sr(e.biasConstraint),this.dropout=wf([1,eu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=wf([1,eu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Tn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ie(()=>{if(e=e,e.length!==2)throw new ve(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let s=e[1];e=e[0];const r=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=su({ones:()=>aa(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=su({ones:()=>aa(s),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));let i;const a=this.dropoutMask,l=this.recurrentDropoutMask;a!=null?i=Zo(he(e,a),this.kernel.read()):i=Zo(e,this.kernel.read()),this.bias!=null&&(i=bo(i,this.bias.read())),l!=null&&(s=he(s,l));let c=Ke(i,Zo(s,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:tu(this.activation),useBias:this.useBias,kernelInitializer:ws(this.kernelInitializer),recurrentInitializer:ws(this.recurrentInitializer),biasInitializer:ws(this.biasInitializer),kernelRegularizer:Xn(this.kernelRegularizer),recurrentRegularizer:Xn(this.recurrentRegularizer),biasRegularizer:Xn(this.biasRegularizer),activityRegularizer:Xn(this.activityRegularizer),kernelConstraint:nr(this.kernelConstraint),recurrentConstraint:nr(this.recurrentConstraint),biasConstraint:nr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}vT.className="SimpleRNNCell";Je(vT);class GL extends yu{constructor(e){e.cell=new vT(e),super(e)}call(e,n){return Ie(()=>{this.cell.dropoutMask!=null&&(Kt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Kt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,r=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:s,training:r,initialState:i})})}static fromConfig(e,n){return new e(n)}}GL.className="SimpleRNN";Je(GL);class bT extends vv{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ve("GRUCell does not support reset_after parameter set to true.");this.units=e.units,fr(this.units,"units"),this.activation=nu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=nu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=fs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=fs(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=fs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ps(e.kernelRegularizer),this.recurrentRegularizer=ps(e.recurrentRegularizer),this.biasRegularizer=ps(e.biasRegularizer),this.kernelConstraint=sr(e.kernelConstraint),this.recurrentConstraint=sr(e.recurrentConstraint),this.biasConstraint=sr(e.biasConstraint),this.dropout=wf([1,eu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=wf([1,eu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Tn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ie(()=>{if(e=e,e.length!==2)throw new ve(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const s=n.training==null?!1:n.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=su({ones:()=>aa(e),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=su({ones:()=>aa(r),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u;0<this.dropout&&this.dropout<1&&(e=he(e,i[0]));let d=Zo(e,this.kernel.read());this.useBias&&(d=bo(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=he(r,a[0]));const h=this.recurrentKernel.read(),[p,g]=zi(h,[2*this.units,this.units],h.rank-1),x=Zo(r,p),[y,v,w]=zi(d,3,d.rank-1),[N,k]=zi(x,2,x.rank-1);l=this.recurrentActivation.apply(Ke(y,N)),c=this.recurrentActivation.apply(Ke(v,k));const C=Zo(he(c,r),g);u=this.activation.apply(Ke(w,C));const j=Ke(he(l,r),he(Ke(1,ls(l)),u));return[j,j]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:tu(this.activation),recurrentActivation:tu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ws(this.kernelInitializer),recurrentInitializer:ws(this.recurrentInitializer),biasInitializer:ws(this.biasInitializer),kernelRegularizer:Xn(this.kernelRegularizer),recurrentRegularizer:Xn(this.recurrentRegularizer),biasRegularizer:Xn(this.biasRegularizer),activityRegularizer:Xn(this.activityRegularizer),kernelConstraint:nr(this.kernelConstraint),recurrentConstraint:nr(this.recurrentConstraint),biasConstraint:nr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}bT.className="GRUCell";Je(bT);class HL extends yu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new bT(e),super(e)}call(e,n){return Ie(()=>{this.cell.dropoutMask!=null&&(Kt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Kt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,r=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:s,training:r,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}HL.className="GRU";Je(HL);class bv extends vv{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,fr(this.units,"units"),this.activation=nu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=nu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=fs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=fs(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=fs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=ps(e.kernelRegularizer),this.recurrentRegularizer=ps(e.recurrentRegularizer),this.biasRegularizer=ps(e.biasRegularizer),this.kernelConstraint=sr(e.kernelConstraint),this.recurrentConstraint=sr(e.recurrentConstraint),this.biasConstraint=sr(e.biasConstraint),this.dropout=wf([1,eu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=wf([1,eu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Tn(e);const s=e[e.length-1];this.kernel=this.addWeight("kernel",[s,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let r;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,a=this.units;r=new(n=class extends Ma{apply(c,u){const d=i.apply([a]),h=new aT().apply([a]),p=i.apply([a*2]);return O5(O5(d,h),p)}},n.className="CustomInit",n)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Ie(()=>{const s=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ve(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=su({ones:()=>aa(e),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=su({ones:()=>aa(r),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,l=this.recurrentDropoutMask;let c,u,d,h;0<this.dropout&&this.dropout<1&&(e=he(e,a[0]));let p=Zo(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=he(r,l[0])),p=Ke(p,Zo(r,this.recurrentKernel.read())),this.useBias&&(p=bo(p,this.bias.read()));const[g,x,y,v]=zi(p,4,p.rank-1);c=this.recurrentActivation.apply(g),u=this.recurrentActivation.apply(x),d=Ke(he(u,i),he(c,this.activation.apply(y))),h=this.recurrentActivation.apply(v);const w=he(h,this.activation.apply(d));return[w,w,d]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:tu(this.activation),recurrentActivation:tu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ws(this.kernelInitializer),recurrentInitializer:ws(this.recurrentInitializer),biasInitializer:ws(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Xn(this.kernelRegularizer),recurrentRegularizer:Xn(this.recurrentRegularizer),biasRegularizer:Xn(this.biasRegularizer),activityRegularizer:Xn(this.activityRegularizer),kernelConstraint:nr(this.kernelConstraint),recurrentConstraint:nr(this.recurrentConstraint),biasConstraint:nr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}bv.className="LSTMCell";Je(bv);class KL extends yu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new bv(e),super(e)}call(e,n){return Ie(()=>{this.cell.dropoutMask!=null&&(Kt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Kt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,r=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:s,training:r,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}KL.className="LSTM";Je(KL);class wT extends vv{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Ie(()=>{e=e;let s=e.slice(1);const r=[];for(const l of this.cells.slice().reverse())Array.isArray(l.stateSize)?r.push(s.splice(0,l.stateSize.length)):r.push(s.splice(0,1));r.reverse();const i=[];let a;for(let l=0;l<this.cells.length;++l){const c=this.cells[l];s=r[l],l===0?a=[e[0]].concat(s):a=[a[0]].concat(s),a=c.call(a,n),i.push(a.slice(1))}s=[];for(const l of i.slice().reverse())s.push(...l);return[a[0]].concat(s)})}build(e){K3(e)&&(e=e[0]),e=e;let n;this.cells.forEach((s,r)=>{fd(`RNNCell_${r}`,()=>{s.build(e),Array.isArray(s.stateSize)?n=s.stateSize[0]:n=s.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),r={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),r)}static fromConfig(e,n,s={}){const r=[];for(const i of n.cells)r.push(Fl(i,s));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.cells)n.push(...s.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return q3(e)}setWeights(e){const n=[];for(const s of this.cells){const r=s.weights.length,i=e.splice(r);for(let a=0;a<s.weights.length;++a)n.push([s.weights[a],i[a]])}fT(n)}}wT.className="StackedRNNCells";Je(wT);function su(t){const{ones:e,rate:n,training:s=!1,count:r=1,dropoutFunc:i}=t,a=()=>i!=null?i(e(),n):MM(e(),n),l=()=>sx(a,e,s);return!r||r<=1?hr(l().clone()):Array(r).fill(void 0).map(l).map(u=>hr(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var u1e=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};class qL extends yu{constructor(e){if(e.unroll)throw new cn("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new cn("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new er({ndim:5})]}call(e,n){return Ie(()=>{if(this.cell.dropoutMask!=null&&(Kt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Kt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ve("ConvRNN2D cell does not support constants");const s=n==null?null:n.mask,r=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:s,training:r,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Ie(()=>{const{stateSize:n}=this.cell,s=e.shape,r=this.computeSingleOutputShape(s),i=[r[0],...r.slice(2)],a=Js(i);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(e,n=!1){Ie(()=>{if(!this.stateful)throw new Fo("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,r=this.computeSingleOutputShape(s),i=[r[0],...r.slice(2)];if(s[0]==null)throw new ve("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Js(i)):this.states_=[Js(i)];else if(e==null)Kt(this.states_),this.keptStates!=null&&(Kt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Js(i)):this.states_[0]=Js(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ve(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Kt(this.states_);for(let l=0;l<this.states_.length;++l){const c=e[l],u=i;if(!bn(c.shape,u))throw new ve(`State ${l} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${c.shape}`);this.states_[l]=c}}this.states_=this.states_.map(l=>hr(l.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:s,kernelSize:r,padding:i,strides:a,dilationRate:l}=this.cell,c=n==="channelsFirst",u=e[c?3:2],d=e[c?4:3],h=lo(u,r[0],i,a[0],l[0]),p=lo(d,r[1],i,a[1],l[1]);return[...e.slice(0,2),...c?[s,h,p]:[h,p,s]]}}qL.className="ConvRNN2D";class NT extends bv{constructor(e){const{filters:n,kernelSize:s,strides:r,padding:i,dataFormat:a,dilationRate:l}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,fr(this.filters,"filters"),this.kernelSize=af(s,2,"kernelSize"),this.kernelSize.forEach(c=>fr(c,"kernelSize")),this.strides=af(r||1,2,"strides"),this.strides.forEach(c=>fr(c,"strides")),this.padding=i||"valid",la(this.padding),this.dataFormat=a||"channelsLast",Ms(this.dataFormat),this.dilationRate=af(l||1,2,"dilationRate"),this.dilationRate.forEach(c=>fr(c,"dilationRate"))}build(e){var n;e=Tn(e);const s=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[s]==null)throw new ve(`The channel dimension of the input should be defined. Found ${e[s]}`);const r=e[s],i=4,a=this.kernelSize.concat([r,this.filters*i]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const l=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){const u=this.biasInitializer,d=this.filters;c=new(n=class extends Ma{apply(p,g){const x=u.apply([d]),y=Bi([d]),v=u.apply([d*2]);return iT([x,y,v])}},n.className="CustomInit",n)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Ie(()=>{if(e.length!==3)throw new ve(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const s=n.training||!1,r=e[0],i=e[1],a=e[2],l=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=su({ones:()=>aa(r),rate:this.dropout,training:s,count:l,dropoutFunc:this.dropoutFunc}));const c=this.dropoutMask,u=(G,H,ie)=>!H||!H[ie]?G:he(H[ie],G);let d=u(r,c,0),h=u(r,c,1),p=u(r,c,2),g=u(r,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=su({ones:()=>aa(i),rate:this.recurrentDropout,training:s,count:l,dropoutFunc:this.dropoutFunc}));const x=this.recurrentDropoutMask;let y=u(i,x,0),v=u(i,x,1),w=u(i,x,2),N=u(i,x,3);const k=3,[C,j,R,_]=zi(this.kernel.read(),l,k),[A,O,L,D]=this.useBias?zi(this.bias.read(),l):[null,null,null,null];d=this.inputConv(d,C,A,this.padding),h=this.inputConv(h,j,O,this.padding),p=this.inputConv(p,R,L,this.padding),g=this.inputConv(g,_,D,this.padding);const[q,V,ne,J]=zi(this.recurrentKernel.read(),l,k);y=this.recurrentConv(y,q),v=this.recurrentConv(v,V),w=this.recurrentConv(w,ne),N=this.recurrentConv(N,J);const ee=this.recurrentActivation.apply(Ke(d,y)),te=this.recurrentActivation.apply(Ke(h,v)),X=Ke(he(te,a),he(ee,this.activation.apply(Ke(p,w)))),Q=he(this.recurrentActivation.apply(Ke(g,N)),this.activation.apply(X));return[Q,Q,X]})}getConfig(){const e=super.getConfig(),{units:n}=e,s=u1e(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},s),r)}inputConv(e,n,s,r){const i=Qc(e,n,this.strides,r||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return s?bo(i,s,this.dataFormat):i}recurrentConv(e,n){return Qc(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}NT.className="ConvLSTM2DCell";Je(NT);class XL extends qL{constructor(e){const n=new NT(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}XL.className="ConvLSTM2D";Je(XL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ST extends pn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,s=[];for(let r=0;r<this.noiseShape.length;++r)s.push(this.noiseShape[r]==null?n[r]:this.noiseShape[r]);return s}call(e,n){return Ie(()=>{this.invokeCallHook(e,n);const s=Gt(e);if(0<this.rate&&this.rate<1){const r=n.training==null?!1:n.training,i=this.getNoiseShape(s);return sx(()=>MM(s,this.rate,i,this.seed),()=>s,r)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}ST.className="Dropout";Je(ST);class YL extends ST{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}YL.className="SpatialDropout1D";Je(YL);class ZL extends pn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,fr(this.units,"units"),this.activation=nu(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=fs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=fs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=sr(e.kernelConstraint),this.biasConstraint=sr(e.biasConstraint),this.kernelRegularizer=ps(e.kernelRegularizer),this.biasRegularizer=ps(e.biasRegularizer),this.activityRegularizer=ps(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Tn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Tn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Ie(()=>{this.invokeCallHook(e,n);const s=Gt(e),r=AM(this.activation.getClassName());let i;return r!=null?i=Zo(s,this.kernel.read(),r,this.bias?this.bias.read():null):(i=Zo(s,this.kernel.read()),this.bias!=null&&(i=bo(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:tu(this.activation),useBias:this.useBias,kernelInitializer:ws(this.kernelInitializer),biasInitializer:ws(this.biasInitializer),kernelRegularizer:Xn(this.kernelRegularizer),biasRegularizer:Xn(this.biasRegularizer),activityRegularizer:Xn(this.activityRegularizer),kernelConstraint:nr(this.kernelConstraint),biasConstraint:nr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}ZL.className="Dense";Je(ZL);class JL extends pn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Tn(e);for(const n of e.slice(1))if(n==null)throw new ve(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Lc(e,1)]}call(e,n){return Ie(()=>{this.invokeCallHook(e,n);let s=Gt(e);if(this.dataFormat==="channelsFirst"&&s.rank>1){const r=[0];for(let i=2;i<s.rank;++i)r.push(i);r.push(1),s=wn(s,r)}return Wge(s)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}JL.className="Flatten";Je(JL);class QL extends pn{constructor(e){super(e),this.supportsMasking=!0,this.activation=nu(e.activation)}call(e,n){return Ie(()=>{this.invokeCallHook(e,n);const s=Gt(e);return this.activation.apply(s)})}getConfig(){const e={activation:tu(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}QL.className="Activation";Je(QL);class e7 extends pn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Ie(()=>(e=Gt(e),Vge(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}e7.className="RepeatVector";Je(e7);class t7 extends pn{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const s="Total size of new array must be unchanged.",r=n.slice();let i=1,a=null;for(let c=0;c<r.length;++c){const u=r[c];if(this.isUnknown(u))if(a===null)a=c;else throw new ve("Can only specifiy one unknown dimension.");else i*=u}const l=Lc(e);if(a!==null){if(i===0||l%i!==0)throw new ve(s);r[a]=l/i}else if(l!==i)throw new ve(s);return r}computeOutputShape(e){let n=!1;for(let s=0;s<e.length;++s)if(this.isUnknown(e[s])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Ie(()=>{this.invokeCallHook(e,n);const s=Gt(e),r=s.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return ge(s,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}t7.className="Reshape";Je(t7);class n7 extends pn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=go(1,e.dims.length+1);if(!bn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new er({ndim:this.dims.length+1})]}computeOutputShape(e){e=Tn(e);const n=e.slice();return this.dims.forEach((s,r)=>{n[r+1]=e[s]}),n}call(e,n){return wn(Gt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}n7.className="Permute";Je(n7);class s7 extends pn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const s=Gt(e);return O0(vf(s,this.maskValue),-1)}call(e,n){return Ie(()=>{this.invokeCallHook(e,n);const s=Gt(e),a=O0(vf(s,this.maskValue),-1,!0);return he(s,ht(a,s.dtype))})}}s7.className="Masking";Je(s7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class r7 extends pn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Vn(e.inputLength))}this.inputDim=e.inputDim,fr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,fr(this.outputDim,"outputDim"),this.embeddingsInitializer=fs(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ps(e.embeddingsRegularizer),this.activityRegularizer=ps(e.activityRegularizer),this.embeddingsConstraint=sr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Ie(()=>this.maskZero?(e=Gt(e),vf(e,Nn(e))):null)}computeOutputShape(e){if(e=Tn(e),this.inputLength==null)return[...e,this.outputDim];const n=Vn(this.inputLength);if(n.length!==e.length-1)throw new ve(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let s=0;for(let r=0;r<n.length;++r){const i=n[r],a=e[r+1];if(i!=null&&a!=null&&i!==a)throw new ve(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[s]=a),s++}}return[e[0],...n,this.outputDim]}call(e,n){return Ie(()=>{this.invokeCallHook(e,n);let s=Gt(e);s.dtype!=="int32"&&(s=Yo(s,"int32"));const r=FM(this.embeddings.read(),ge(s,[s.size]));return ge(r,Tn(this.computeOutputShape(s.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:ws(this.embeddingsInitializer),embeddingsRegularizer:Xn(this.embeddingsRegularizer),activityRegularizer:Xn(this.activityRegularizer),embeddingsConstraint:nr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}r7.className="Embedding";Je(r7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wd extends pn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new cn}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const s=e.slice(0,e.length-n.length);for(let r=0;r<n.length;++r){const i=e[e.length-n.length+r],a=n[r];if(i==null||a==null||i<0||a<0)s.push(null);else if(i===1)s.push(a);else if(a===1)s.push(i);else{if(i!==a)throw new ve("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));s.push(i)}}return s}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Tn(e)]),e=e,e.length<2)throw new ve(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=Mc(n),n.length>1)throw new ve(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let s=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const a=e[i]==null?null:e[i].slice(1);s=this.computeElementwiseOpOutputShape(s,a)}const r=e.map(i=>i.length);e.indexOf(null)===-1&&Mc(r).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Ie(()=>{if(e=e,this.reshapeRequired){const s=[],r=e.map(i=>i.rank);if(r.indexOf(null)===-1){const i=eu(r);for(let a of e){const l=a.rank;for(let c=0;c<i-l;++c)a=tx(a,1);s.push(a)}return this.mergeFunction(s)}else{let i=!1;for(const c of e){const u=c.rank;if(u==null){const d=c.shape,h=d[0],p=d.slice(1).concat([h]);let g=ge(c,[h].concat(Lc(d.slice(1))));g=wn(g,[1,0]),g=ge(g,p),s.push(g),i=!0}else if(u>1){const d=go(1,u).concat([0]);s.push(wn(c,d)),i=!0}else s.push(c)}let a=this.mergeFunction(s);const l=a.rank;if(i){if(l==null){const c=a.shape,u=c.length,d=c[u-1],h=[d].concat(c.slice(0,c.length-1));a=ge(wn(ge(a,[-1,d]),[1,0]),h)}else if(l>1){const c=[l-1].concat(go(0,l-1));a=wn(a,c)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let r=1;r<e.length;++r){const i=e[r]==null?null:e[r].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let s=[];for(const r of e)r!=null&&r[0]!==null&&s.push(r[0]);return s=Mc(s),s.length===1?n=s.concat(n):n=[null].concat(n),n}computeMask(e,n){return Ie(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ve("`mask` should be an Array");if(!Array.isArray(e))throw new ve("`inputs` should be an Array");if(n.length!==e.length)throw new ve(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(r=>r==null))return null;n=n.map(r=>r==null?r:Zs(r,0));let s=n[0];for(let r=1;r<n.length-1;++r)s=nl(s,n[r]);return s})}}class i7 extends Wd{constructor(e){super(e)}mergeFunction(e){return Ie(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=Ke(n,e[s]);return n})}}i7.className="Add";Je(i7);class a7 extends Wd{constructor(e){super(e)}mergeFunction(e){return Ie(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=he(n,e[s]);return n})}}a7.className="Multiply";Je(a7);class o7 extends Wd{constructor(e){super(e)}mergeFunction(e){return Ie(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=Ke(n,e[s]);return he(1/e.length,n)})}}o7.className="Average";Je(o7);class l7 extends Wd{constructor(e){super(e)}mergeFunction(e){return Ie(()=>{let n=e[0];for(let s=1;s<e.length;++s)n=Jl(n,e[s]);return n})}}l7.className="Maximum";Je(l7);class c7 extends Wd{constructor(e){super(e)}mergeFunction(e){return Ie(()=>{let n=e[0];for(let s=1;s<e.length;++s)n=Td(n,e[s]);return n})}}c7.className="Minimum";Je(c7);class u7 extends Wd{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ve("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const r of e)if(r!=null){n=!1;break}if(n)return;const s=[];for(let r=0;r<e.length;++r){const i=e[r].slice();i.splice(this.axis,1);let a=!1;for(const l of s)if(bn(l,i)){a=!0;break}a||s.push(i)}if(s.length>1)throw new ve("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Ie(()=>iT(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ve("A `Concatenate` layer should be called on a list of inputs.");const n=e,s=n[0].slice(),r=this.axis<0?s.length+this.axis:this.axis;for(const i of n.slice(1)){if(s[r]==null||i[r]==null){s[r]=null;break}s[r]+=i[r]}return s}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ve("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ve("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ve(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Ie(()=>{let s=!0;if(n.forEach(a=>{if(a!=null){s=!1;return}}),s)return null;const r=[];for(let a=0;a<e.length;++a)n[a]==null?r.push(ht(aa(e[a]),"bool")):n[a].rank<e[a].rank?r.push(Zs(n[a],-1)):r.push(n[a]);const i=Es(r,this.axis);return Zk(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}u7.className="Concatenate";Je(u7);function Dp(t,e){for(;t<0;)t+=e;return t}function d1e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new cn("batchDot is not implemented for tensors of 4D or higher rank yet");if(K(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),K(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new cn("batchDot is not implemented for complex64-type Tensors yet.");const s=t.shape.length,r=e.shape.length;n==null&&(n=[s-1,r-2]);const i=n;return Ie(()=>{let a;if(s>r){a=s-r;const c=[];for(let u=0;u<a;++u)c.push(1);e=ge(e,e.shape.concat(c))}else if(r>s){a=r-s;const c=[];for(let u=0;u<a;++u)c.push(1);t=ge(t,t.shape.concat(c))}else a=0;let l;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?l=kt(he(t,e),i[0]):l=kt(he(wn(t,[1,0]),e),i[1]);else{const c=i[0]!==t.shape.length-1,u=i[1]===e.shape.length-1;l=gn(t,e,c,u)}if(a>0){let c;s>r?c=s+r-3:c=s-1;const u=[];for(let d=c;d<c+a;++d)u.push(d);l=Ts(l,u)}return l.shape.length===1&&(l=Zs(l,1)),l})}class d7 extends Wd{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){K(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],s=e[1];if(n.length>3||s.length>3)throw new cn("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(n,s);if(n[r[0]]!==s[r[1]])throw new ve(`Dimension incompatibility: ${n[r[0]]} !== ${s[r[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ve(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],s=e[1],r;return Array.isArray(this.axes)?r=this.axes.map((i,a)=>Dp(i,e[a].shape.length)):r=[Dp(this.axes,n.shape.length),Dp(this.axes,s.shape.length)],this.normalize&&(n=V0(n,r[0]),s=V0(s,r[1])),d1e(n,s,r)}interpretAxes(e,n){let s;return Array.isArray(this.axes)?s=this.axes:s=[Dp(this.axes,e.length),Dp(this.axes,n.length)],s}computeOutputShape(e){K(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),s=e[1].slice();if(n.length>3||s.length>3)throw new cn("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(n,s);n.splice(r[0],1),s.splice(r[1],1),s.splice(0,1);const i=n.concat(s);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}d7.className="Dot";Je(d7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class h7 extends pn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Ie(()=>{this.invokeCallHook(e,n);const s=Gt(e);return sx(()=>Ke(fv(s.shape,0,this.stddev),s),()=>s,n.training||!1)})}}h7.className="GaussianNoise";Je(h7);class f7 extends pn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Ie(()=>{this.invokeCallHook(e,n);const s=Gt(e);return this.rate>0&&this.rate<1?sx(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return he(s,fv(s.shape,1,i))},()=>s,n.training||!1):s})}}f7.className="GaussianDropout";Je(f7);class p7 extends pn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Gt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Ie(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(e);return sx(()=>{const i=Gt(e),l=-1.6732632423543772*1.0507009873554805;let c=mu(zd(s),this.rate);c=Yo(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,h=Ke(he(i,c),he(Ke(c,-1),l));return Ke(he(h,u),d)},()=>Gt(e),n.training||!1)}return e})}}p7.className="AlphaDropout";Je(p7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Im(t,e,n,s,r,i=.001){let a;if(t.rank===2)a=zF(t,e,n,s,r,i);else if(t.rank===3)a=VF(t,e,n,s,r,i);else if(t.rank===4)a=UF(t,e,n,s,r,i);else throw new cn(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function h1e(t,e,n,s,r=.001){return Ie(()=>{const i=Y2(t,s),a=i.mean,l=i.variance;return[Im(t,a,l,n,e,r),a,l]})}function f1e(t,e,n,s,r=.001){return Ie(()=>{const i=Y2(t,s),a=i.mean,l=i.variance,c=[];for(const x of go(0,t.rank))s.indexOf(x)!==-1?c.push(1):c.push(t.shape[x]);const u=ge(a,c),d=ge(l,c),h=e==null?null:ge(e,c),p=n==null?null:ge(n,c);return[Im(t,u,d,p,h,r),a,l]})}function p1e(t,e,n,s,r=.001){return bn(s.slice().sort(),go(0,t.rank-1))?h1e(t,e,n,s,r):f1e(t,e,n,s,r)}class m7 extends pn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=fs(e.betaInitializer||"zeros"),this.gammaInitializer=fs(e.gammaInitializer||"ones"),this.movingMeanInitializer=fs(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=fs(e.movingVarianceInitializer||"ones"),this.betaConstraint=sr(e.betaConstraint),this.gammaConstraint=sr(e.gammaConstraint),this.betaRegularizer=ps(e.betaRegularizer),this.gammaRegularizer=ps(e.gammaRegularizer)}build(e){e=Tn(e);const n=this.axis>=0?this.axis:this.axis+e.length,s=e[n];if(s==null)throw new ve(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new er({ndim:e.length,axes:{[n]:s}})];const r=[s];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Ie(()=>{const s=n.training==null?!1:n.training,r=Gt(e),i=r.shape,a=i.length,l=go(0,a),c=this.axis>=0?this.axis:this.axis+a;l.splice(c,1);const u=jd(1,a);u[c]=i[c];const d=l.slice();d.sort();const h=!bn(d,go(0,a).slice(0,a-1)),p=()=>{if(h){const N=ge(this.movingMean.read(),u),k=ge(this.movingVariance.read(),u),C=this.center?ge(this.beta.read(),u):null,j=this.scale?ge(this.gamma.read(),u):null;return Im(r,N,k,C,j,this.epsilon)}else return Im(r,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!s)return p();const[g,x,y]=p1e(r,this.gamma.read(),this.beta.read(),l,this.epsilon),v=(N,k,C)=>{Ie(()=>{const j=1-C,R=N.read(),_=he(vt(R,k),j);N.write(vt(R,_))})};return(()=>{v(this.movingMean,x,this.momentum),v(this.movingVariance,y,this.momentum)})(),g})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:ws(this.betaInitializer),gammaInitializer:ws(this.gammaInitializer),movingMeanInitializer:ws(this.movingMeanInitializer),movingVarianceInitializer:ws(this.movingVarianceInitializer),betaRegularizer:Xn(this.betaRegularizer),gammaRegularizer:Xn(this.gammaRegularizer),betaConstraint:nr(this.betaConstraint),gammaConstraint:nr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}m7.className="BatchNormalization";Je(m7);class g7 extends pn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=fs(e.betaInitializer||"zeros"),this.gammaInitializer=fs(e.gammaInitializer||"ones"),this.betaRegularizer=ps(e.betaRegularizer),this.gammaRegularizer=ps(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Tn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Mc(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(i=>e[i]),r=!0;this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,n){const s=Gt(e),r=s.shape,i=r.length;return Ie(()=>{let{mean:l,variance:c}=Y2(s,this.axis,!0);const u=jd(1,i);for(const y of this.axis)u[y]=r[y];const d=y=>y!=null&&y.shape.length!==i?ge(y,u):y;let h=this.scale?d(this.gamma.read()):null,p=this.center?d(this.beta.read()):null;const g=[],x=[];for(let y=0;y<i;++y)this.axis.indexOf(y)!==-1?(g.push(r[y]),x.push(1)):(g.push(1),x.push(r[y]));return l=Ca(l,g),c=Ca(c,g),h!=null&&(h=Ca(h,x)),p!=null&&(p=Ca(p,x)),Im(s,l,c,p,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:ws(this.betaInitializer),gammaInitializer:ws(this.gammaInitializer),betaRegularizer:Xn(this.betaRegularizer),gammaRegularizer:Xn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}g7.className="LayerNormalization";Je(g7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function m1e(t,e,n){return Ie(()=>{if(t.rank!==4)throw new ve(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ve("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=xo()),n!=="channelsLast"&&n!=="channelsFirst")throw new ve(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let s;return n==="channelsFirst"?s=[[0,0],[0,0],e[0],e[1]]:s=[[0,0],e[0],e[1],[0,0]],gu(t,s)})}class x7 extends pn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?xo():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ve(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,s;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],s=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ve(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ve(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);s=e.padding[1]}this.padding=[n,s]}this.inputSpec=[new er({ndim:4})]}computeOutputShape(e){e=Tn(e);let n,s;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?s=e[3]+this.padding[1][0]+this.padding[1][1]:s=null,[e[0],e[1],n,s]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?s=e[2]+this.padding[1][0]+this.padding[1][1]:s=null,[e[0],n,s,e[3]])}call(e,n){return Ie(()=>m1e(Gt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}x7.className="ZeroPadding2D";Je(x7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wv(t,e,n,s,r,i){return Ie(()=>{Ms(r),DM(i),la(s),n==null&&(n=[1,1]),s==null&&(s="valid"),r==null&&(r=xo()),i==null&&(i="max"),t=yT(t,r);let a;const l=s==="same"?"same":"valid";return i==="max"?a=X2(t,e,n,l):a=z2(t,e,n,l),r==="channelsFirst"&&(a=wn(a,[0,3,1,2])),a})}function y7(t,e,n,s,r,i){return Ie(()=>{Ms(r),DM(i),la(s),n==null&&(n=[1,1,1]),s==null&&(s="valid"),r==null&&(r=xo()),i==null&&(i="max"),t=_L(t,r);let a;const l=s==="same"?"same":"valid";return i==="max"?a=f8(t,e,n,l):a=BF(t,e,n,l),r==="channelsFirst"&&(a=wn(a,[0,4,1,2,3])),a})}class v7 extends pn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ve(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(fr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ve(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);fr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,la(this.padding),this.inputSpec=[new er({ndim:3})]}computeOutputShape(e){e=Tn(e);const n=lo(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Ie(()=>{this.invokeCallHook(e,n),e=tx(Gt(e),2);const s=this.poolingFunction(Gt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Ts(s,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class b7 extends v7{constructor(e){super(e)}poolingFunction(e,n,s,r,i){return Ms(i),la(r),wv(e,n,s,r,i,"max")}}b7.className="MaxPooling1D";Je(b7);class w7 extends v7{constructor(e){super(e)}poolingFunction(e,n,s,r,i){return Ms(i),la(r),wv(e,n,s,r,i,"avg")}}w7.className="AveragePooling1D";Je(w7);class N7 extends pn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ve(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];fr(this.poolSize,"poolSize"),fr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ms(this.dataFormat),la(this.padding),this.inputSpec=[new er({ndim:4})]}computeOutputShape(e){e=Tn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=lo(n,this.poolSize[0],this.padding,this.strides[0]),s=lo(s,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,s]:[e[0],n,s,e[3]]}call(e,n){return Ie(()=>(this.invokeCallHook(e,n),this.poolingFunction(Gt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class S7 extends N7{constructor(e){super(e)}poolingFunction(e,n,s,r,i){return Ms(i),la(r),wv(e,n,s,r,i,"max")}}S7.className="MaxPooling2D";Je(S7);class k7 extends N7{constructor(e){super(e)}poolingFunction(e,n,s,r,i){return Ms(i),la(r),wv(e,n,s,r,i,"avg")}}k7.className="AveragePooling2D";Je(k7);class C7 extends pn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ve(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];fr(this.poolSize,"poolSize"),fr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ms(this.dataFormat),la(this.padding),this.inputSpec=[new er({ndim:5})]}computeOutputShape(e){e=Tn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=lo(n,this.poolSize[0],this.padding,this.strides[0]),s=lo(s,this.poolSize[1],this.padding,this.strides[1]),r=lo(r,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,s,r]:[e[0],n,s,r,e[4]]}call(e,n){return Ie(()=>(this.invokeCallHook(e,n),this.poolingFunction(Gt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class T7 extends C7{constructor(e){super(e)}poolingFunction(e,n,s,r,i){return Ms(i),la(r),y7(e,n,s,r,i,"max")}}T7.className="MaxPooling3D";Je(T7);class I7 extends C7{constructor(e){super(e)}poolingFunction(e,n,s,r,i){return Ms(i),la(r),y7(e,n,s,r,i,"avg")}}I7.className="AveragePooling3D";Je(I7);class j7 extends pn{constructor(e){super(e),this.inputSpec=[new er({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new cn}}class E7 extends j7{constructor(e){super(e||{})}call(e,n){return Ie(()=>{const s=Gt(e);return js(s,1)})}}E7.className="GlobalAveragePooling1D";Je(E7);class $7 extends j7{constructor(e){super(e||{})}call(e,n){return Ie(()=>{const s=Gt(e);return Da(s,1)})}}$7.className="GlobalMaxPooling1D";Je($7);class A7 extends pn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ms(this.dataFormat),this.inputSpec=[new er({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new cn}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class R7 extends A7{call(e,n){return Ie(()=>{const s=Gt(e);return this.dataFormat==="channelsLast"?js(s,[1,2]):js(s,[2,3])})}}R7.className="GlobalAveragePooling2D";Je(R7);class D7 extends A7{call(e,n){return Ie(()=>{const s=Gt(e);return this.dataFormat==="channelsLast"?Da(s,[1,2]):Da(s,[2,3])})}}D7.className="GlobalMaxPooling2D";Je(D7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class P7 extends pn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,s={}){const r=n.layer,i=Fl(r,s);delete n.layer;const a={layer:i};return Object.assign(a,n),new e(a)}}class _7 extends P7{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Tn(e),e.length<3)throw new ve(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Tn(e);const n=[e[0]].concat(e.slice(2)),s=this.layer.computeOutputShape(n),r=e[1];return[s[0],r].concat(s.slice(1))}call(e,n){return Ie(()=>(e=Gt(e),WL((a,l)=>[Gt(this.layer.call(a,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}_7.className="TimeDistributed";Je(_7);function g1e(t){Ud(Fge,"BidirectionalMergeMode",t)}const x1e="concat";class O7 extends P7{constructor(e){super(e);const n=e.layer.getConfig(),s={};s.className=e.layer.getClassName(),s.config=n,this.forwardLayer=Fl(s),n.goBackwards=n.goBackwards!==!0;const r={};if(r.className=e.layer.getClassName(),r.config=n,this.backwardLayer=Fl(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?x1e:e.mergeMode,g1e(this.mergeMode),e.weights)throw new cn("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,s=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,s)),this.backwardLayer.setWeights(e.slice(s))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let s,r,i;return this.returnState&&(i=n.slice(1)),s=n[0],s=s,this.mergeMode==="concat"?(s[s.length-1]*=2,r=[s]):this.mergeMode==null?r=[s,s.slice()]:r=[s],this.returnState?this.mergeMode==null?r.concat(i).concat(i.slice()):[s].concat(i).concat(i.slice()):ui(r)}apply(e,n){let s=n==null?null:n.initialState,r=n==null?null:n.constants;n==null&&(n={});const i=UL(e,s,r,this.numConstants);if(e=i.inputs,s=i.initialState,r=i.constants,Array.isArray(e)&&(s=e.slice(1),e=e[0]),(s==null||s.length===0)&&r==null)return super.apply(e,n);const a=[],l=[];if(s!=null){const u=s.length;if(u%2>0)throw new ve("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=s,a.push(...s);const d=s.map(h=>new er({shape:h.shape}));this.forwardLayer.stateSpec=d.slice(0,u/2),this.backwardLayer.stateSpec=d.slice(u/2),l.push(...d)}if(r!=null)throw new cn("Support for constants in Bidirectional layers is not implemented yet.");const c=a[0]instanceof sl;for(const u of a)if(u instanceof sl!==c)throw new ve("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){const u=[e].concat(a),d=this.inputSpec.concat(l),h=this.inputSpec;this.inputSpec=d;const p=super.apply(u,n);return this.inputSpec=h,p}else return super.apply(e,n)}call(e,n){return Ie(()=>{const s=n.initialState;let r,i;if(s==null)r=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const c=s.slice(0,s.length/2),u=s.slice(s.length/2);r=this.forwardLayer.call(e,Object.assign(n,{initialState:c})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let a;this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=_a(i,1));let l;return this.mergeMode==="concat"?l=iT([r,i]):this.mergeMode==="sum"?l=Ke(r,i):this.mergeMode==="ave"?l=he(.5,Ke(r,i)):this.mergeMode==="mul"?l=he(r,i):this.mergeMode==null&&(l=[r,i]),this.returnState?this.mergeMode==null?l.concat(a):[l].concat(a):l})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){fd(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),fd(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let s;if(this.returnSequences?this.mergeMode==null?s=[n,n]:s=n:this.mergeMode==null?s=[null,null]:s=null,this.returnState){const i=this.forwardLayer.states.map(a=>null);return Array.isArray(s)?s.concat(i).concat(i):[s].concat(i).concat(i)}else return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const s=Fl(n.layer);if(delete n.layer,n.numConstants!=null)throw new cn("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=n;return r.layer=s,new e(r)}}O7.className="Bidirectional";Je(O7);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class F7 extends pn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Ie(()=>(e=Gt(e),e.dtype!=="float32"&&(e=Yo(e,"float32")),Ke(he(e,this.scale),this.offset)))}}F7.className="Rescaling";Je(F7);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:y1e,cropAndResize:v1e}=mi;class M7 extends pn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,s,r,i,a,l,c){return Ie(()=>{let u,d=!1;const h=n/a,p=s/l,g=(r+n)/a,x=(i+s)/l,y=[h,p,g,x],v=[];e.rank===3?(d=!0,u=Ui([e])):u=e;for(let j=0;j<u.shape[0];j++)v.push(y);const w=ao(v,[v.length,4]),N=bf(0,v.length,1,"int32"),C=v1e(u,w,N,[r,i],"nearest");return Yo(d?Gt(Oa(C)):C,c)})}upsize(e,n,s,r){return Ie(()=>{const i=y1e(e,[n,s]);return Yo(i,r)})}call(e,n){return Ie(()=>{const s=Gt(e),r=s.dtype,i=s.shape,a=i[i.length-3],l=i[i.length-2];let c=0;a!==this.height&&(c=Math.floor((a-this.height)/2));let u=0;return l!==this.width&&(u=Math.floor((l-this.width)/2),u===0&&(u=1)),c>=0&&u>=0?this.centerCrop(s,c,u,this.height,this.width,a,l,r):this.upsize(e,this.height,this.width,r)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Tn(e);const n=e.length-3,s=e.length-2;return e[n]=this.height,e[s]=this.width,e}}M7.className="CenterCrop";Je(M7);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function b1e(t,e,n,s){let r=Gt(t);if(r.dtype!=="int32"&&(r=Yo(r,"int32")),e==="int")return r;const i=r.shape;if(r.rank===0&&(r=Zs(r,-1)),e==="oneHot"&&r.shape[r.shape.length-1]!==1&&(r=Zs(r,-1)),r.rank>2)throw new ve(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${r.rank}.`);const a=["multiHot","oneHot"].includes(e),l=r;let c;if(typeof s<"u"&&e==="count"?c=L3(l,s,n,a):c=L3(l,[],n,a),e!=="tfIdf")return c;if(s)return he(c,s);throw new ve("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class L7 extends pn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Tn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Ie(()=>{e=Gt(e),e.dtype!=="int32"&&(e=Yo(e,"int32"));let s;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ve(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);s=Gt(n.countWeights)}const r=Da(e),i=vm(e),a=Ki(this.numTokens,r).bufferSync().get(0),l=mu(i,0).bufferSync().get(0);if(!(a&&l))throw new ve(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return b1e(e,this.outputMode,this.numTokens,s)})}}L7.className="CategoryEncoding";Je(L7);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const w1e=["bilinear","nearest"],eR=new Set(w1e);class B7 extends pn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(eR.has(e.interpolation))this.interpolation=e.interpolation;else throw new ve(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Tn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Ie(()=>{const s=[this.height,this.width];if(this.interpolation==="bilinear")return mi.resizeBilinear(e,s,!this.cropToAspectRatio);if(this.interpolation==="nearest")return mi.resizeNearestNeighbor(e,s,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...eR]} are supported`)})}}B7.className="Resizing";Je(B7);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class z7{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}z7.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class V7 extends pn{constructor(e){super(e),this.randomGenerator=new z7(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}V7.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const N1e=["bilinear","nearest"],tR=new Set(N1e);class U7 extends V7{constructor(e){super(e);const{factor:n,interpolation:s="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ve(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ve(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ve(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(s)if(tR.has(s))this.interpolation=s;else throw new ve(`Invalid interpolation parameter: ${s} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Tn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Ie(()=>{const s=Gt(e);this.imgHeight=s.shape[s.shape.length-3];const r=s.shape[s.shape.length-2];this.widthFactor=zd([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*r;i=Math.round(i);const a=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return mi.resizeBilinear(e,a);case"nearest":return mi.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...tR]} are supported`)}})}}U7.className="RandomWidth";Je(U7);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S1e=Pe();S1e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Pi;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Pi||(Pi={}));var nR;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(nR||(nR={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k1e={};function W7(t){return k1e[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F(t,e,n,s,r){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const l=i.inputIndexStart,c=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?l+1:i.inputIndexEnd,u=l<0?e.inputNames.length+l:l;if(i.type==="tensor")return wr(e.inputNames[u],n,s,r);if(i.type==="tensors"){const p=e.inputs.slice(l,c);return e.inputNames.slice(l,c).filter((x,y)=>{var v;return((v=p[y])===null||v===void 0?void 0:v.op)!=="NoOp"}).map(x=>wr(x,n,s,r))}const d=wr(e.inputNames[u],n,s,r),h=d.dataSync();return i.type==="number"?h[0]:Ra(d.shape,h)}const a=e.attrParams[t];return a&&a.value}function wr(t,e,n,s){const[r,i]=Fi(t,n);if(s!=null){const l=s.getHashTableHandleByName(r);if(l!=null)return l}const a=n.currentContextIds.find(l=>!!e[K0(r,l)]);return a!==void 0?e[K0(r,a)][i]:void 0}function sR(t,e,n){return e[K0(t,n.currentContextId)]}function Cl(t,e){const[n,s,r]=Fi(t,e);return[K0(n,e&&e.currentContextId),s,r]}function K0(t,e){return e?`${t}-${e}`:t}function Fi(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const s=t.split(":");let r;if(s.length===1)r=[t,0,void 0];else{const i=s[0],a=s.length===3?s[1]:void 0,l=Number(s[s.length-1]);r=[i,l,a]}return n&&e.parseNodeNameCache.set(t,r),r}function r0(t,e,n){let s=F("pad",t,e,n);if(s==="explicit"){s=F("explicitPaddings",t,e,n);const r=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)r[i][0]=s[i*2],r[i][1]=s[i*2+1];return r}return s}function Tl(t){return t.kept?t:Ol(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C1e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],T1e=Object.freeze(Object.defineProperty({__proto__:null,json:C1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I1e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],j1e=Object.freeze(Object.defineProperty({__proto__:null,json:I1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E1e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],$1e=Object.freeze(Object.defineProperty({__proto__:null,json:E1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A1e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],R1e=Object.freeze(Object.defineProperty({__proto__:null,json:A1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D1e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],P1e=Object.freeze(Object.defineProperty({__proto__:null,json:D1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _1e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],O1e=Object.freeze(Object.defineProperty({__proto__:null,json:_1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F1e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],M1e=Object.freeze(Object.defineProperty({__proto__:null,json:F1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L1e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],B1e=Object.freeze(Object.defineProperty({__proto__:null,json:L1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z1e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],V1e=Object.freeze(Object.defineProperty({__proto__:null,json:z1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U1e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],W1e=Object.freeze(Object.defineProperty({__proto__:null,json:U1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G1e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],H1e=Object.freeze(Object.defineProperty({__proto__:null,json:G1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K1e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],q1e=Object.freeze(Object.defineProperty({__proto__:null,json:K1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X1e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Y1e=Object.freeze(Object.defineProperty({__proto__:null,json:X1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z1e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],J1e=Object.freeze(Object.defineProperty({__proto__:null,json:Z1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q1e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],e0e=Object.freeze(Object.defineProperty({__proto__:null,json:Q1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],n0e=Object.freeze(Object.defineProperty({__proto__:null,json:t0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s0e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],r0e=Object.freeze(Object.defineProperty({__proto__:null,json:s0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i0e=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],a0e=Object.freeze(Object.defineProperty({__proto__:null,json:i0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o0e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],l0e=Object.freeze(Object.defineProperty({__proto__:null,json:o0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rR{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[T1e,j1e,$1e,R1e,P1e,O1e,M1e,B1e,V1e,W1e,H1e,q1e,Y1e,J1e,e0e,n0e,r0e,a0e,l0e],n=[].concat(...e.map(s=>s.json));this.opMappers=n.reduce((s,r)=>(s[r.tfOpName]=r,s),{})}transformGraph(e,n={}){const s=e.node,r=[],i=[],a=[],l=s.reduce((y,v)=>(y[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?r.push(y[v.name]):v.op==="Const"?i.push(y[v.name]):(v.input==null||v.input.length===0)&&a.push(y[v.name]),y),{});let c=[];const u=[];let d={},h={};n!=null&&(d=this.mapSignatureEntries(n.inputs),h=this.mapSignatureEntries(n.outputs));const p=Object.keys(l);p.forEach(y=>{const v=l[y];v.inputNames.forEach((w,N)=>{const[k,,C]=Cl(w),j=l[k];if(j.outputs!=null){const R=j.outputs.indexOf(C);if(R!==-1){const _=`${k}:${R}`;v.inputNames[N]=_}}v.inputs.push(j),j.children.push(v)})}),Object.keys(h).length===0?p.forEach(y=>{const v=l[y];v.children.length===0&&u.push(v)}):Object.keys(h).forEach(y=>{const[v]=Cl(y),w=l[v];w!=null&&(w.signatureKey=h[y],u.push(w))}),Object.keys(d).length>0?Object.keys(d).forEach(y=>{const[v]=Cl(y),w=l[v];w&&(w.signatureKey=d[y],c.push(w))}):c=r;let g={};e.library!=null&&e.library.function!=null&&(g=e.library.function.reduce((y,v)=>(y[v.signature.name]=this.mapFunction(v),y),{}));const x={nodes:l,inputs:c,outputs:u,weights:i,placeholders:r,signature:n,functions:g};return a.length>0&&(x.initNodes=a),x}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,s)=>(n[e[s].name]=s,n),{})}mapNode(e){const n=W7(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const s={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(r=>r.startsWith("^")?r.slice(1):r),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(s.inputParams=n.inputs.reduce((r,i)=>(r[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},r),{})),n.attrs!=null&&(s.attrParams=n.attrs.reduce((r,i)=>{const a=i.type;let l;switch(i.type){case"string":l=e4(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=e4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":l=o4(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=o4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":l=n4(e.attr,i.tfName,i.defaultValue||0),l===void 0&&i.tfDeprecatedName&&(l=n4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":l=a4(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=a4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":l=t4(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=t4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":l=c4(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=c4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":l=i4(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=i4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":l=l4(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=l4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":l=s4(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=s4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":l=r4(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=r4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":l=iR(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=iR(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return r[i.name]={value:l,type:a},r},{})),s}mapFunction(e){const n=e.nodeDef,s=[],r=[];let i={};n!=null&&(i=n.reduce((h,p)=>(h[p.name]=this.mapNode(p),p.op==="Const"&&r.push(h[p.name]),h),{}));const a=[],l=[];e.signature.inputArg.forEach(h=>{const[p]=Cl(h.name),g={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:kT(h.type),type:"dtype"}},children:[]};g.signatureKey=h.name,a.push(g),i[p]=g}),Object.keys(i).forEach(h=>{const p=i[h];p.inputNames.forEach((g,x)=>{const[y,,v]=Cl(g),w=i[y];if(w.outputs!=null){const N=w.outputs.indexOf(v);if(N!==-1){const k=`${y}:${N}`;p.inputNames[x]=k}}p.inputs.push(w),w.children.push(p)})});const u=e.ret;e.signature.outputArg.forEach(h=>{const[p,g]=Cl(u[h.name]),x=i[p];x!=null&&(x.defaultOutput=g,l.push(x))});const d=this.mapArgsToSignature(e);return{nodes:i,inputs:a,outputs:l,weights:r,placeholders:s,signature:d}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,s)=>(n[s.name]=this.mapArgToTensorInfo(s),n),{}),outputs:e.signature.outputArg.reduce((n,s)=>(n[s.name]=this.mapArgToTensorInfo(s,e.ret),n),{})}}mapArgToTensorInfo(e,n){let s=e.name;return n!=null&&(s=n[s]),{name:s,dtype:e.type}}}function c0e(t){const e=Pe().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function G7(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):c0e(t);return e?n:n.toLowerCase()}function e4(t,e,n,s=!1){const r=t[e];return r!=null?G7(r.s,s):n}function t4(t,e,n){const s=t[e];return s?s.b:n}function n4(t,e,n){const s=t[e]||{},r=s.i!=null?s.i:s.f!=null?s.f:n;return typeof r=="number"?r:parseInt(r,10)}function kT(t){switch(typeof t=="string"&&(t=Pi[t]),t){case Pi.DT_FLOAT:case Pi.DT_HALF:return"float32";case Pi.DT_INT32:case Pi.DT_INT64:case Pi.DT_INT8:case Pi.DT_UINT8:return"int32";case Pi.DT_BOOL:return"bool";case Pi.DT_DOUBLE:return"float32";case Pi.DT_STRING:return"string";case Pi.DT_COMPLEX64:case Pi.DT_COMPLEX128:return"complex64";default:return null}}function iR(t,e,n){const s=t[e];return s&&s.func?s.func.name:n}function s4(t,e,n){const s=t[e];return s&&s.type?kT(s.type):n}function r4(t,e,n){const s=t[e];return s&&s.list&&s.list.type?s.list.type.map(r=>kT(r)):n}function H7(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function i4(t,e,n){const s=t[e];return s&&s.shape?H7(s.shape):n}function a4(t,e,n){const s=t[e];return s?((s.list.f&&s.list.f.length?s.list.f:s.list.i)||[]).map(r=>typeof r=="number"?r:parseInt(r,10)):n}function o4(t,e,n,s=!1){const r=t[e];return r&&r.list&&r.list.s?r.list.s.map(i=>G7(i,s)):n}function l4(t,e,n){const s=t[e];return s&&s.list&&s.list.shape?s.list.shape.map(r=>H7(r)):n}function c4(t,e,n){const s=t[e];return s&&s.list&&s.list.b?s.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u0e{constructor(e,n,s){this.node=e,this.tensorMap=n,this.context=s,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(r=>this.getInput(r)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((r,i)=>(r[i]=this.getAttr(i),r),{}))}getInput(e){return wr(e,this.tensorMap,this.context)}getAttr(e,n){const s=this.node.rawAttrs[e];if(s.tensor!=null)return wr(e,this.tensorMap,this.context);if(s.i!=null||s.f!=null)return n4(this.node.rawAttrs,e,n);if(s.s!=null)return e4(this.node.rawAttrs,e,n);if(s.b!=null)return t4(this.node.rawAttrs,e,n);if(s.shape!=null)return i4(this.node.rawAttrs,e,n);if(s.type!=null)return s4(this.node.rawAttrs,e,n);if(s.list!=null){if(s.list.i!=null||s.list.f!=null)return a4(this.node.rawAttrs,e,n);if(s.list.s!=null)return o4(this.node.rawAttrs,e,n);if(s.list.shape!=null)return l4(this.node.rawAttrs,e,n);if(s.list.b!=null)return c4(this.node.rawAttrs,e,n);if(s.list.type!=null)return r4(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Er=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:fF,abs:Ys,acos:RF,acosh:DF,add:Ke,addN:Eoe,all:Zk,any:O0,argMax:xf,argMin:PF,asin:_F,asinh:OF,atan:FF,atan2:MF,atanh:LF,avgPool:z2,avgPool3d:BF,basicLSTMCell:Joe,batchNorm:Gg,batchNorm2d:zF,batchNorm3d:VF,batchNorm4d:UF,batchToSpaceND:V2,bincount:WF,bitwiseAnd:ole,booleanMaskAsync:Gde,broadcastArgs:cle,broadcastTo:sf,buffer:un,cast:ht,ceil:GF,clipByValue:wi,clone:Ol,complex:Yc,concat:Es,concat1d:HF,concat2d:KF,concat3d:qF,concat4d:XF,conv1d:Qk,conv2d:Qc,conv2dTranspose:tC,conv3d:YF,conv3dTranspose:JF,cos:U2,cosh:nC,cosineWindow:IC,cumprod:F0,cumsum:sC,denseBincount:L3,depthToSpace:QF,depthwiseConv2d:Hg,diag:Rle,dilation2d:e8,div:yt,divNoNan:t8,dot:n8,dropout:j8,einsum:zh,elu:Kg,enclosingPowerOfTwo:E8,ensureShape:Vle,equal:mo,erf:rC,euclideanNorm:i8,exp:Jr,expandDims:Zs,expm1:a8,eye:aC,fft:sv,fill:Bf,floor:Xg,floorDiv:Yk,fused:fhe,gather:Yg,gatherND:the,greater:Ki,greaterEqual:mu,ifft:Sm,imag:W2,image:mi,inTopKAsync:ihe,irfft:wC,isFinite:o8,isInf:l8,isNaN:c8,leakyRelu:G2,less:bm,lessEqual:Bd,linalg:F8,linspace:pce,localResponseNormalization:u8,log:ia,log1p:H2,logSigmoid:d8,logSoftmax:oC,logSumExp:K2,logicalAnd:nl,logicalNot:q2,logicalOr:lC,logicalXor:h8,losses:Wfe,lowerBound:$ce,matMul:gn,max:Da,maxPool:X2,maxPool3d:f8,maxPoolWithArgmax:Pce,maximum:Jl,mean:js,meshgrid:Fce,min:vm,minimum:Td,mirrorPad:p8,mod:m8,moments:Y2,movingAverage:qde,mul:he,multiRNNCell:Uce,multinomial:Gce,neg:ls,norm:qg,notEqual:vf,oneHot:uC,ones:Bi,onesLike:aa,op:ue,outerProduct:Yce,pad:gu,pad1d:Qce,pad2d:tue,pad3d:sue,pad4d:iue,pool:g8,pow:Ul,prelu:J2,print:AF,prod:x8,raggedGather:fue,raggedRange:mue,raggedTensorToTensor:xue,rand:vue,randomGamma:zue,randomNormal:hC,randomStandardNormal:Wue,randomUniform:zd,randomUniformInt:Kue,range:bf,real:wm,reciprocal:y8,relu:al,relu6:fC,reshape:ge,reverse:_a,reverse1d:ede,reverse2d:nde,reverse3d:rde,reverse4d:ade,rfft:rv,round:pC,rsqrt:mC,scalar:Lt,scatterND:Yde,searchSorted:cC,selu:gC,separableConv2d:xC,setdiff1dAsync:hde,sigmoid:oo,sign:v8,signal:Ufe,sin:yC,sinh:vC,slice:Wt,slice1d:ev,slice2d:bC,slice3d:tv,slice4d:Nm,softmax:nv,softplus:zf,spaceToBatchND:Z2,sparse:Gfe,sparseToDense:Qde,spectral:Vfe,split:zi,sqrt:Tr,square:qn,squaredDifference:NC,squeeze:Ts,stack:Ui,step:Vf,stridedSlice:b8,string:Hfe,sub:vt,sum:kt,tan:w8,tanh:Cd,tensor:ao,tensor1d:Ws,tensor2d:Fc,tensor3d:N8,tensor4d:Rde,tensor5d:Dde,tensor6d:Pde,tensorScatterUpdate:Ode,tile:Ca,topk:k8,transpose:wn,truncatedNormal:kC,unique:C8,unsortedSegmentSum:CC,unstack:Oa,upperBound:Vde,variable:T8,where:Pr,whereAsync:I8,zeros:Js,zerosLike:Nn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d0e=(t,e,n,s=Er)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[s.add(F("a",t,e,n),F("b",t,e,n))];case"AddN":return[s.addN(F("tensors",t,e,n))];case"FloorMod":case"Mod":return[s.mod(F("a",t,e,n),F("b",t,e,n))];case"Mul":return[s.mul(F("a",t,e,n),F("b",t,e,n))];case"RealDiv":case"Div":return[s.div(F("a",t,e,n),F("b",t,e,n))];case"DivNoNan":return[s.divNoNan(F("a",t,e,n),F("b",t,e,n))];case"FloorDiv":return[s.floorDiv(F("a",t,e,n),F("b",t,e,n))];case"Sub":return[s.sub(F("a",t,e,n),F("b",t,e,n))];case"Minimum":return[s.minimum(F("a",t,e,n),F("b",t,e,n))];case"Maximum":return[s.maximum(F("a",t,e,n),F("b",t,e,n))];case"Pow":return[s.pow(F("a",t,e,n),F("b",t,e,n))];case"SquaredDifference":return[s.squaredDifference(F("a",t,e,n),F("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h0e=(t,e,n,s=Er)=>{switch(t.op){case"Abs":case"ComplexAbs":return[s.abs(F("x",t,e,n))];case"Acos":return[s.acos(F("x",t,e,n))];case"Acosh":return[s.acosh(F("x",t,e,n))];case"Asin":return[s.asin(F("x",t,e,n))];case"Asinh":return[s.asinh(F("x",t,e,n))];case"Atan":return[s.atan(F("x",t,e,n))];case"Atan2":return[s.atan2(F("x",t,e,n),F("y",t,e,n))];case"Atanh":return[s.atanh(F("x",t,e,n))];case"Ceil":return[s.ceil(F("x",t,e,n))];case"Complex":return[s.complex(F("real",t,e,n),F("imag",t,e,n))];case"Cos":return[s.cos(F("x",t,e,n))];case"Cosh":return[s.cosh(F("x",t,e,n))];case"Elu":return[s.elu(F("x",t,e,n))];case"Erf":return[s.erf(F("x",t,e,n))];case"Exp":return[s.exp(F("x",t,e,n))];case"Expm1":return[s.expm1(F("x",t,e,n))];case"Floor":return[s.floor(F("x",t,e,n))];case"Log":return[s.log(F("x",t,e,n))];case"Log1p":return[s.log1p(F("x",t,e,n))];case"Imag":return[s.imag(F("x",t,e,n))];case"Neg":return[s.neg(F("x",t,e,n))];case"Reciprocal":return[s.reciprocal(F("x",t,e,n))];case"Real":return[s.real(F("x",t,e,n))];case"Relu":return[s.relu(F("x",t,e,n))];case"Round":return[s.round(F("x",t,e,n))];case"Selu":return[s.selu(F("x",t,e,n))];case"Sigmoid":return[s.sigmoid(F("x",t,e,n))];case"Sin":return[s.sin(F("x",t,e,n))];case"Sign":return[s.sign(F("x",t,e,n))];case"Sinh":return[s.sinh(F("x",t,e,n))];case"Softplus":return[s.softplus(F("x",t,e,n))];case"Sqrt":return[s.sqrt(F("x",t,e,n))];case"Square":return[s.square(F("x",t,e,n))];case"Tanh":return[s.tanh(F("x",t,e,n))];case"Tan":return[s.tan(F("x",t,e,n))];case"ClipByValue":return[s.clipByValue(F("x",t,e,n),F("clipValueMin",t,e,n),F("clipValueMax",t,e,n))];case"Relu6":return[s.relu6(F("x",t,e,n))];case"Rsqrt":return[s.rsqrt(wr(t.inputNames[0],e,n))];case"LeakyRelu":return[s.leakyRelu(F("x",t,e,n),F("alpha",t,e,n))];case"Prelu":return[s.prelu(F("x",t,e,n),F("alpha",t,e,n))];case"IsNan":return[s.isNaN(wr(t.inputNames[0],e,n))];case"IsInf":return[s.isInf(wr(t.inputNames[0],e,n))];case"IsFinite":return[s.isFinite(wr(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ba(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){K(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let s=0;s<t.length;s++){const r=t[s],i=e[s];K(r<0||i<0||r===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function aR(t){return!(typeof t=="number"||t.some(e=>e<0))}function Pp(t,e,n){let s=u4(t,n);const r=!aR(s);if(r&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${s}`);if(r&&e.forEach(i=>{s=u4(i.shape,s)}),!aR(s))throw new Error(`Non-fully-defined elementShape: ${s}`);return s}function u4(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let s=0;s<t.length;++s){const r=t[s],i=e[s];if(r>=0&&i>=0&&r!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[s]=r>=0?r:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f0e{constructor(e,n,s,r,i,a,l){this.name=e,this.dtype=n,this.maxSize=s,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=l,this.tensors=[],this.closed_=!1,this.idTensor=Lt(0),hr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const s=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),ba(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),s.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(s.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);s.tensor=n,hr(n),s.written=!0,this.tensors[e]=s}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((s,r)=>this.write(s,n[r]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let r=0;r<this.size();r++)e.push(r)}if(e.length===0)return ao([],[0].concat(this.elementShape));const s=this.readMany(e);return ba(this.elementShape,s[0].shape,"TensorArray shape mismatch: "),Ui(s,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return ao([],[0].concat(this.elementShape));const n=[];for(let r=0;r<this.size();r++)n.push(r);const s=this.readMany(n);return ba(this.elementShape,s[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${s[0].shape})`),Es(s,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const s=Math.max(...e);if(!this.dynamicSize&&s>=this.maxSize)throw new Error(`Max index must be < array size (${s}  vs. ${this.maxSize})`);this.writeMany(e,Oa(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let s=0;const r=e.map(c=>(s+=c,s));if(s!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${s}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=s===0?0:n.size/s,a=[];Ie(()=>{n=ge(n,[1,s,i]);for(let c=0;c<e.length;++c){const d=[0,c===0?0:r[c-1],0],h=[1,e[c],i];a[c]=ge(Wt(n,d,h),this.elementShape)}return a});const l=[];for(let c=0;c<e.length;c++)l[c]=c;this.writeMany(l,a)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ed{get id(){return this.idTensor.id}constructor(e,n,s,r=-1){this.tensors=e,this.elementShape=n,this.elementDtype=s,e?.forEach(i=>{if(s!==i.dtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${i.dtype}`);ba(n,i.shape,"TensorList shape mismatch: "),hr(i)}),this.idTensor=Lt(0),this.maxNumElements=r,hr(this.idTensor)}copy(){return new Ed([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,s=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(s!==-1&&this.tensors.length!==s)throw new Error(`Operation expected a list with ${s} elements but got a list with ${this.tensors.length} elements.`);ba(e,this.elementShape,"TensorList shape mismatch: ");const r=Pp(this.elementShape,this.tensors,e);return Ie(()=>{const i=this.tensors.map(a=>ge(a,r));return Ui(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const s=Pp(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,ba(r.shape,e,"TensorList shape mismatch: "),ge(r,s)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(ba(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");hr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Ed([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let s=0;s<Math.min(this.tensors.length,e);++s)n.tensors[s]=this.tensors[s];return n}getItem(e,n,s){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);ba(this.tensors[e].shape,n,"TensorList shape mismatch: ");const r=Pp(this.elementShape,this.tensors,n);return ge(this.tensors[e],r)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);ba(this.elementShape,n.shape,"TensorList shape mismatch: "),hr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,s){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);ba(this.elementShape,s,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=Pp(this.elementShape,this.tensors,s);return e.length===0?ao([],[0].concat(r)):Ie(()=>{const i=e.map(a=>ge(this.tensors[a],r));return Ui(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);ba(this.elementShape,n,"TensorList shape mismatch: ");const s=Pp(this.elementShape,this.tensors,n);return this.size()===0?ao([],[0].concat(s)):Ie(()=>{const r=this.tensors.map(i=>ge(i,s));return Es(r,0)})}}function p0e(t,e,n){const s=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const r=t.shape.slice(1);ba(r,e,"TensorList shape mismatch: ");const i=Oa(t);return new Ed(i,e,s)}function m0e(t,e,n,s){return new Ed([],t,e,s)}function g0e(t,e,n,s){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const r=Math.max(...e);if(s!=null&&s!==-1&&r>=s)throw new Error(`Max index must be < array size (${r}  vs. ${s})`);const i=new Ed([],n,t.dtype,s),a=Oa(t,0);return e.forEach((l,c)=>{i.setItem(l,a[c])}),i}function x0e(t,e,n){let s=0;const r=e.map(d=>(s+=d,s));if(s!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${s}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),a=u4(i,n),l=s===0?0:t.size/s,c=Ie(()=>{const d=[];t=ge(t,[1,s,l]);for(let h=0;h<e.length;++h){const g=[0,h===0?0:r[h-1],0],x=[1,e[h],l];d[h]=ge(Wt(t,g,x),a)}return t.dispose(),d}),u=new Ed([],n,t.dtype,e.length);for(let d=0;d<c.length;d++)u.setItem(d,c[d]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0e=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const s=F("thenBranch",t,e,n),r=F("elseBranch",t,e,n),i=F("cond",t,e,n),a=F("args",t,e,n);return(await i.data())[0]?n.functionMap[s].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const s=F("body",t,e,n),r=F("cond",t,e,n),i=F("args",t,e,n),a=await n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),l=i.map(d=>d.id);let c=await a[0].data();a.forEach(d=>{!d.kept&&l.indexOf(d.id)===-1&&d.dispose()});let u=i;for(;c[0];){const d=u;u=await n.functionMap[s].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const h=u.map(g=>g.id);d.forEach(g=>{!g.kept&&l.indexOf(g.id)===-1&&h.indexOf(g.id)===-1&&g.dispose()});const p=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);c=await p[0].data(),p.forEach(g=>{!g.kept&&l.indexOf(g.id)===-1&&h.indexOf(g.id)===-1&&g.dispose()})}return u}case"LoopCond":{const s=F("pred",t,e,n);return[Tl(s)]}case"Switch":{const s=F("pred",t,e,n);let r=F("data",t,e,n);return r.kept||(r=Tl(r)),(await s.data())[0]?[void 0,r]:[r,void 0]}case"Merge":{const s=t.inputNames.find(r=>wr(r,e,n)!==void 0);if(s){const r=wr(s,e,n);return[Tl(r)]}return}case"Enter":{const s=F("frameName",t,e,n),r=F("tensor",t,e,n);return n.enterFrame(s),[Tl(r)]}case"Exit":{const s=F("tensor",t,e,n);return n.exitFrame(),[Tl(s)]}case"NextIteration":{const s=F("tensor",t,e,n);return n.nextIteration(),[Tl(s)]}case"TensorArrayV3":{const s=F("size",t,e,n),r=F("dtype",t,e,n),i=F("elementShape",t,e,n),a=F("dynamicSize",t,e,n),l=F("clearAfterRead",t,e,n),c=F("identicalElementShapes",t,e,n),u=F("name",t,e,n),d=new f0e(u,r,s,i,c,a,l);return n.addTensorArray(d),[d.idTensor,Lt(1)]}case"TensorArrayWriteV3":{const s=F("tensorArrayId",t,e,n),r=F("index",t,e,n),i=F("tensor",t,e,n),a=n.getTensorArray(s.id);return a.write(r,i),[a.idTensor]}case"TensorArrayReadV3":{const s=F("tensorArrayId",t,e,n),r=F("index",t,e,n);return[n.getTensorArray(s.id).read(r)]}case"TensorArrayGatherV3":{const s=F("tensorArrayId",t,e,n),r=F("indices",t,e,n),i=F("dtype",t,e,n);return[n.getTensorArray(s.id).gather(r,i)]}case"TensorArrayScatterV3":{const s=F("tensorArrayId",t,e,n),r=F("indices",t,e,n),i=F("tensor",t,e,n),a=n.getTensorArray(s.id);return a.scatter(r,i),[a.idTensor]}case"TensorArrayConcatV3":{const s=F("tensorArrayId",t,e,n),r=n.getTensorArray(s.id),i=F("dtype",t,e,n);return[r.concat(i)]}case"TensorArraySplitV3":{const s=F("tensorArrayId",t,e,n),r=F("tensor",t,e,n),i=F("lengths",t,e,n),a=n.getTensorArray(s.id);return a.split(i,r),[a.idTensor]}case"TensorArraySizeV3":{const s=F("tensorArrayId",t,e,n),r=n.getTensorArray(s.id);return[Lt(r.size(),"int32")]}case"TensorArrayCloseV3":{const s=F("tensorArrayId",t,e,n),r=n.getTensorArray(s.id);return r.clearAndClose(),[r.idTensor]}case"TensorListSetItem":{const s=F("tensorListId",t,e,n),r=F("index",t,e,n),i=F("tensor",t,e,n),a=n.getTensorList(s.id);return a.setItem(r,i),[a.idTensor]}case"TensorListGetItem":{const s=F("tensorListId",t,e,n),r=F("index",t,e,n),i=F("elementShape",t,e,n),a=F("elementDType",t,e,n);return[n.getTensorList(s.id).getItem(r,i,a)]}case"TensorListScatterV2":case"TensorListScatter":{const s=F("indices",t,e,n),r=F("tensor",t,e,n),i=F("elementShape",t,e,n),a=F("numElements",t,e,n),l=g0e(r,s,i,a);return n.addTensorList(l),[l.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const s=F("elementShape",t,e,n),r=F("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const a=F(i,t,e,n),l=t.op==="TensorListReserve"?-1:a,c=m0e(s,r,a,l);return n.addTensorList(c),[c.idTensor]}case"TensorListGather":{const s=F("tensorListId",t,e,n),r=F("indices",t,e,n),i=F("elementShape",t,e,n),a=F("elementDType",t,e,n);return[n.getTensorList(s.id).gather(r,a,i)]}case"TensorListStack":{const s=F("tensorListId",t,e,n),r=F("elementShape",t,e,n),i=F("elementDType",t,e,n),a=F("numElements",t,e,n);return[n.getTensorList(s.id).stack(r,i,a)]}case"TensorListFromTensor":{const s=F("tensor",t,e,n),r=F("elementShape",t,e,n),i=F("elementDType",t,e,n),a=p0e(s,r,i);return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const s=F("tensorListId",t,e,n),r=n.getTensorList(s.id),i=F("dtype",t,e,n),a=F("elementShape",t,e,n);return[r.concat(i,a)]}case"TensorListPushBack":{const s=F("tensorListId",t,e,n),r=F("tensor",t,e,n),i=n.getTensorList(s.id);return i.pushBack(r),[i.idTensor]}case"TensorListPopBack":{const s=F("tensorListId",t,e,n),r=F("elementShape",t,e,n),i=F("elementDType",t,e,n);return[n.getTensorList(s.id).popBack(r,i)]}case"TensorListSplit":{const s=F("tensor",t,e,n),r=F("elementShape",t,e,n),i=F("lengths",t,e,n),a=x0e(s,i,r);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const s=F("tensorListId",t,e,n),r=n.getTensorList(s.id);return[Lt(r.size(),"int32")]}case"TensorListResize":{const s=F("tensorListId",t,e,n),r=F("size",t,e,n),a=n.getTensorList(s.id).resize(r);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oR(t,e,n){const[s,r]=F("fusedOps",t,e,n),i=s==="biasadd",a=!i,l=r==="prelu",c=s==="fusedbatchnorm",u=F("numArgs",t,e,n);if(i){if(l&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const d=F("strides",t,e,n),h=r0(t,e,n),p=F("dataFormat",t,e,n).toUpperCase(),g=F("dilations",t,e,n);let[x,y]=F("args",t,e,n);a&&(y=x,x=void 0);const v=F("leakyreluAlpha",t,e,n);return{stride:d,pad:h,dataFormat:p,dilations:g,biasArg:x,preluArg:y,activationFunc:r,leakyreluAlpha:v}}const v0e=(t,e,n,s=Er)=>{switch(t.op){case"Conv1D":{const r=F("stride",t,e,n),i=F("pad",t,e,n),a=F("dataFormat",t,e,n).toUpperCase(),l=F("dilation",t,e,n);return[s.conv1d(F("x",t,e,n),F("filter",t,e,n),r,i,a,l)]}case"Conv2D":{const r=F("strides",t,e,n),i=r0(t,e,n),a=F("dataFormat",t,e,n).toUpperCase(),l=F("dilations",t,e,n);return[s.conv2d(F("x",t,e,n),F("filter",t,e,n),[r[1],r[2]],i,a,[l[1],l[2]])]}case"_FusedConv2D":{const{stride:r,pad:i,dataFormat:a,dilations:l,biasArg:c,preluArg:u,activationFunc:d,leakyreluAlpha:h}=oR(t,e,n);return[s.fused.conv2d({x:F("x",t,e,n),filter:F("filter",t,e,n),strides:[r[1],r[2]],pad:i,dataFormat:a,dilations:[l[1],l[2]],bias:c,activation:d,preluActivationWeights:u,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:i,dataFormat:a,dilations:l,biasArg:c,preluArg:u,activationFunc:d,leakyreluAlpha:h}=oR(t,e,n);return[s.fused.depthwiseConv2d({x:F("x",t,e,n),filter:F("filter",t,e,n),strides:[r[1],r[2]],pad:i,dataFormat:a,dilations:[l[1],l[2]],bias:c,activation:d,preluActivationWeights:u,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=F("outputShape",t,e,n),i=F("strides",t,e,n),a=r0(t,e,n);return[s.conv2dTranspose(F("x",t,e,n),F("filter",t,e,n),r,[i[1],i[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=F("strides",t,e,n),i=r0(t,e,n),a=F("dilations",t,e,n),l=F("dataFormat",t,e,n).toUpperCase();return[s.depthwiseConv2d(F("input",t,e,n),F("filter",t,e,n),[r[1],r[2]],i,l,[a[1],a[2]])]}case"Conv3D":{const r=F("strides",t,e,n),i=F("pad",t,e,n),a=F("dataFormat",t,e,n).toUpperCase(),l=F("dilations",t,e,n);return[s.conv3d(F("x",t,e,n),F("filter",t,e,n),[r[1],r[2],r[3]],i,a,[l[1],l[2],l[3]])]}case"AvgPool":{const r=F("strides",t,e,n),i=F("pad",t,e,n),a=F("kernelSize",t,e,n);return[s.avgPool(F("x",t,e,n),[a[1],a[2]],[r[1],r[2]],i)]}case"MaxPool":{const r=F("strides",t,e,n),i=F("pad",t,e,n),a=F("kernelSize",t,e,n);return[s.maxPool(F("x",t,e,n),[a[1],a[2]],[r[1],r[2]],i)]}case"MaxPoolWithArgmax":{const r=F("strides",t,e,n),i=F("pad",t,e,n),a=F("kernelSize",t,e,n),l=F("includeBatchInIndex",t,e,n),{result:c,indexes:u}=s.maxPoolWithArgmax(F("x",t,e,n),[a[1],a[2]],[r[1],r[2]],i,l);return[c,u]}case"AvgPool3D":{const r=F("strides",t,e,n),i=F("pad",t,e,n),a=F("kernelSize",t,e,n);return[s.avgPool3d(F("x",t,e,n),[a[1],a[2],a[3]],[r[1],r[2],r[3]],i)]}case"MaxPool3D":{const r=F("strides",t,e,n),i=F("pad",t,e,n),a=F("kernelSize",t,e,n);return[s.maxPool3d(F("x",t,e,n),[a[1],a[2],a[3]],[r[1],r[2],r[3]],i)]}case"Dilation2D":{const r=F("strides",t,e,n),i=F("pad",t,e,n),a=F("dilations",t,e,n),l=r[1],c=r[2],u=a[1],d=a[2];return[s.dilation2d(F("x",t,e,n),F("filter",t,e,n),[l,c],i,[u,d],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b0e=(t,e,n,s=Er)=>{switch(t.op){case"Fill":{const r=F("shape",t,e,n),i=F("dtype",t,e,n),a=F("value",t,e,n);return[s.fill(r,a,i)]}case"LinSpace":{const r=F("start",t,e,n),i=F("stop",t,e,n),a=F("num",t,e,n);return[s.linspace(r,i,a)]}case"Multinomial":{const r=F("logits",t,e,n),i=F("numSamples",t,e,n),a=F("seed",t,e,n);return[s.multinomial(r,i,a)]}case"OneHot":{const r=F("indices",t,e,n),i=F("depth",t,e,n),a=F("onValue",t,e,n),l=F("offValue",t,e,n),c=F("dtype",t,e,n);return[s.oneHot(r,i,a,l,c)]}case"Ones":return[s.ones(F("shape",t,e,n),F("dtype",t,e,n))];case"OnesLike":return[s.onesLike(F("x",t,e,n))];case"RandomStandardNormal":return[s.randomStandardNormal(F("shape",t,e,n),F("dtype",t,e,n),F("seed",t,e,n))];case"RandomUniform":return[s.randomUniform(F("shape",t,e,n),F("minval",t,e,n),F("maxval",t,e,n),F("dtype",t,e,n))];case"RandomUniformInt":return[s.randomUniformInt(F("shape",t,e,n),F("minval",t,e,n),F("maxval",t,e,n),F("seed",t,e,n))];case"Range":{const r=F("start",t,e,n),i=F("stop",t,e,n),a=F("step",t,e,n);return[s.range(r,i,a,F("dtype",t,e,n))]}case"TruncatedNormal":{const r=F("shape",t,e,n),i=F("mean",t,e,n),a=F("stdDev",t,e,n),l=F("seed",t,e,n);return[s.truncatedNormal(r,i,a,F("dtype",t,e,n),l)]}case"Zeros":return[s.zeros(F("shape",t,e,n),F("dtype",t,e,n))];case"ZerosLike":return[s.zerosLike(F("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oN(t,e,n){const s=F("boxes",t,e,n),r=F("scores",t,e,n),i=F("maxOutputSize",t,e,n),a=F("iouThreshold",t,e,n),l=F("scoreThreshold",t,e,n),c=F("softNmsSigma",t,e,n);return{boxes:s,scores:r,maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}}const w0e=async(t,e,n,s,r=Er)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u,softNmsSigma:d}=oN(t,e,n),h=await r.image.nonMaxSuppressionWithScoreAsync(i,a,l,c,u,d);return[h.selectedIndices,h.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u}=oN(t,e,n),d=F("padToMaxOutputSize",t,e,n),h=await r.image.nonMaxSuppressionPaddedAsync(i,a,l,c,u,d);return[h.selectedIndices,h.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u}=oN(t,e,n);return[await r.image.nonMaxSuppressionAsync(i,a,l,c,u)]}case"Where":{const i=r.cast(F("condition",t,e,n),"bool"),a=[await r.whereAsync(i)];return i.dispose(),a}case"ListDiff":return r.setdiff1dAsync(F("x",t,e,n),F("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N0e=(t,e,n,s=Er)=>{switch(t.op){case"LowerBound":{const r=F("sortedSequence",t,e,n),i=F("values",t,e,n);return[s.lowerBound(r,i)]}case"TopKV2":{const r=F("x",t,e,n),i=F("k",t,e,n),a=F("sorted",t,e,n),l=s.topk(r,i,a);return[l.values,l.indices]}case"UpperBound":{const r=F("sortedSequence",t,e,n),i=F("values",t,e,n);return[s.upperBound(r,i)]}case"Unique":{const r=F("x",t,e,n),i=s.unique(r);return[i.values,i.indices]}case"UniqueV2":{const r=F("x",t,e,n),i=F("axis",t,e,n),a=s.unique(r,i);return[a.values,a.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S0e=(t,e,n,s=Er)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const r=F("default",t,e,n);return[wr(t.name,e,n)||r];case"Placeholder":return[wr(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const d=F("x",t,e,n);return[Tl(d)]}case"IdentityN":return F("x",t,e,n).map(d=>Tl(d));case"Snapshot":const i=F("x",t,e,n);return[Tl(i)];case"Shape":return[s.tensor1d(F("x",t,e,n).shape,"int32")];case"ShapeN":return F("x",t,e,n).map(d=>s.tensor1d(d.shape));case"Size":return[s.scalar(F("x",t,e,n).size,"int32")];case"Rank":return[s.scalar(F("x",t,e,n).rank,"int32")];case"NoOp":return[s.scalar(1)];case"Print":const a=F("x",t,e,n),l=F("data",t,e,n),c=F("message",t,e,n),u=F("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(let d=0;d<l.length;d++)console.log(Array.prototype.slice.call(l[d].dataSync()).slice(0,u));return[a];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k0e{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Lt(0),this.tensorMap=new Map,hr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Lt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const s=await e.data();return this.tensorMap.forEach(r=>r.dispose()),this.tensorMap.clear(),Ie(()=>{const r=Oa(n),i=s.length,a=r.length;K(i===a,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${a} elements.`);for(let l=0;l<i;l++){const c=s[l],u=r[l];hr(u),this.tensorMap.set(c,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const s=await e.data();return Ie(()=>{const r=[];for(let i=0;i<s.length;i++){const a=s[i],l=this.findWithDefault(a,n);r.push(l)}return Ui(r)})}findWithDefault(e,n){const s=this.tensorMap.get(e);return s??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C0e=async(t,e,n,s)=>{switch(t.op){case"HashTable":case"HashTableV2":{const r=s.getHashTableHandleByName(t.name);if(r!=null)return[r];{const i=F("keyDType",t,e,n),a=F("valueDType",t,e,n),l=new k0e(i,a);return s.addHashTable(t.name,l),[l.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const r=F("tableHandle",t,e,n,s),i=F("keys",t,e,n),a=F("values",t,e,n);return[await s.getHashTableById(r.id).import(i,a)]}case"LookupTableFind":case"LookupTableFindV2":{const r=F("tableHandle",t,e,n,s),i=F("keys",t,e,n),a=F("defaultValue",t,e,n);return[await s.getHashTableById(r.id).find(i,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const r=F("tableHandle",t,e,n,s);return[s.getHashTableById(r.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T0e=(t,e,n,s=Er)=>{switch(t.op){case"ResizeBilinear":{const r=F("images",t,e,n),i=F("size",t,e,n),a=F("alignCorners",t,e,n),l=F("halfPixelCenters",t,e,n);return[s.image.resizeBilinear(r,[i[0],i[1]],a,l)]}case"ResizeNearestNeighbor":{const r=F("images",t,e,n),i=F("size",t,e,n),a=F("alignCorners",t,e,n),l=F("halfPixelCenters",t,e,n);return[s.image.resizeNearestNeighbor(r,[i[0],i[1]],a,l)]}case"CropAndResize":{const r=F("image",t,e,n),i=F("boxes",t,e,n),a=F("boxInd",t,e,n),l=F("cropSize",t,e,n),c=F("method",t,e,n),u=F("extrapolationValue",t,e,n);return[s.image.cropAndResize(r,i,a,l,c,u)]}case"ImageProjectiveTransformV3":{const r=F("images",t,e,n),i=F("transforms",t,e,n),a=F("outputShape",t,e,n),l=F("fillValue",t,e,n),c=F("interpolation",t,e,n),u=F("fillMode",t,e,n);return[s.image.transform(r,i,c.toLowerCase(),u.toLowerCase(),l,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I0e=(t,e,n,s=Er)=>{switch(t.op){case"Equal":return[s.equal(F("a",t,e,n),F("b",t,e,n))];case"NotEqual":return[s.notEqual(F("a",t,e,n),F("b",t,e,n))];case"Greater":return[s.greater(F("a",t,e,n),F("b",t,e,n))];case"GreaterEqual":return[s.greaterEqual(F("a",t,e,n),F("b",t,e,n))];case"Less":return[s.less(F("a",t,e,n),F("b",t,e,n))];case"LessEqual":return[s.lessEqual(F("a",t,e,n),F("b",t,e,n))];case"LogicalAnd":return[s.logicalAnd(F("a",t,e,n),F("b",t,e,n))];case"LogicalNot":return[s.logicalNot(F("a",t,e,n))];case"LogicalOr":return[s.logicalOr(F("a",t,e,n),F("b",t,e,n))];case"Select":case"SelectV2":return[s.where(F("condition",t,e,n),F("a",t,e,n),F("b",t,e,n))];case"BitwiseAnd":return[s.bitwiseAnd(F("a",t,e,n),F("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j0e=(t,e,n,s=Er)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[s.matMul(F("a",t,e,n),F("b",t,e,n),F("transposeA",t,e,n),F("transposeB",t,e,n))];case"Einsum":return[s.einsum(F("equation",t,e,n),...F("tensors",t,e,n))];case"Transpose":return[s.transpose(F("x",t,e,n),F("perm",t,e,n))];case"_FusedMatMul":const[r,i]=F("fusedOps",t,e,n),a=r==="biasadd",l=i==="prelu",c=F("numArgs",t,e,n),u=F("leakyreluAlpha",t,e,n);if(a){if(l&&c!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&c!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[d,h]=F("args",t,e,n);return[s.fused.matMul({a:F("a",t,e,n),b:F("b",t,e,n),transposeA:F("transposeA",t,e,n),transposeB:F("transposeB",t,e,n),bias:d,activation:i,preluActivationWeights:h,leakyreluAlpha:u})];case"MatrixBandPart":return[s.linalg.bandPart(F("a",t,e,n),F("numLower",t,e,n),F("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E0e=(t,e,n,s=Er)=>{switch(t.op){case"EuclideanNorm":return[s.euclideanNorm(F("x",t,e,n),F("axis",t,e,n),F("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[s.batchNorm(F("x",t,e,n),F("mean",t,e,n),F("variance",t,e,n),F("offset",t,e,n),F("scale",t,e,n),F("epsilon",t,e,n))];case"FusedBatchNormV3":return[s.batchNorm(F("x",t,e,n),F("mean",t,e,n),F("variance",t,e,n),F("offset",t,e,n),F("scale",t,e,n),F("epsilon",t,e,n))];case"LRN":return[s.localResponseNormalization(F("x",t,e,n),F("radius",t,e,n),F("bias",t,e,n),F("alpha",t,e,n),F("beta",t,e,n))];case"Softmax":return[s.softmax(F("x",t,e,n))];case"LogSoftmax":return[s.logSoftmax(F("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $0e=(t,e,n,s=Er)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:r,outputDenseValues:i}=s.raggedGather(F("paramsNestedSplits",t,e,n),F("paramsDenseValues",t,e,n),F("indices",t,e,n),F("outputRaggedRank",t,e,n));return r.concat(i)}case"RaggedRange":{const{rtNestedSplits:r,rtDenseValues:i}=s.raggedRange(F("starts",t,e,n),F("limits",t,e,n),F("splits",t,e,n));return[r,i]}case"RaggedTensorToTensor":return[s.raggedTensorToTensor(F("shape",t,e,n),F("values",t,e,n),F("defaultValue",t,e,n),F("rowPartitionTensors",t,e,n),F("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A0e=(t,e,n,s=Er)=>{switch(t.op){case"Max":{const l=F("axis",t,e,n),c=F("keepDims",t,e,n);return[s.max(F("x",t,e,n),l,c)]}case"Mean":{const l=F("axis",t,e,n),c=F("keepDims",t,e,n);return[s.mean(F("x",t,e,n),l,c)]}case"Min":{const l=F("axis",t,e,n),c=F("keepDims",t,e,n);return[s.min(F("x",t,e,n),l,c)]}case"Sum":{const l=F("axis",t,e,n),c=F("keepDims",t,e,n);return[s.sum(F("x",t,e,n),l,c)]}case"All":{const l=F("axis",t,e,n),c=F("keepDims",t,e,n);return[s.all(F("x",t,e,n),l,c)]}case"Any":{const l=F("axis",t,e,n),c=F("keepDims",t,e,n);return[s.any(F("x",t,e,n),l,c)]}case"ArgMax":{const l=F("axis",t,e,n);return[s.argMax(F("x",t,e,n),l)]}case"ArgMin":{const l=F("axis",t,e,n);return[s.argMin(F("x",t,e,n),l)]}case"Prod":{const l=F("axis",t,e,n),c=F("keepDims",t,e,n);return[s.prod(F("x",t,e,n),l,c)]}case"Cumprod":{const l=F("axis",t,e,n),c=F("exclusive",t,e,n),u=F("reverse",t,e,n);return[s.cumprod(F("x",t,e,n),l,c,u)]}case"Cumsum":{const l=F("axis",t,e,n),c=F("exclusive",t,e,n),u=F("reverse",t,e,n);return[s.cumsum(F("x",t,e,n),l,c,u)]}case"Bincount":const r=F("x",t,e,n),i=F("weights",t,e,n),a=F("size",t,e,n);return[s.bincount(r,i,a)];case"DenseBincount":{const l=F("x",t,e,n),c=F("weights",t,e,n),u=F("size",t,e,n),d=F("binaryOutput",t,e,n);return[s.denseBincount(l,c,u,d)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R0e=(t,e,n,s=Er)=>{switch(t.op){case"ConcatV2":case"Concat":{const r=F("n",t,e,n),i=F("axis",t,e,n);let a=F("tensors",t,e,n);return a=a.slice(0,r),[s.concat(a,i)]}case"Gather":{const r=F("x",t,e,n),i=F("indices",t,e,n);return[s.gather(r,s.cast(i,"int32"),0)]}case"GatherV2":{const r=F("axis",t,e,n),i=F("batchDims",t,e,n),a=F("x",t,e,n),l=F("indices",t,e,n);return[s.gather(a,s.cast(l,"int32"),r,i)]}case"Reverse":{const r=F("dims",t,e,n),i=[];for(let l=0;l<r.length;l++)r[l]&&i.push(l);const a=F("x",t,e,n);return[s.reverse(a,i)]}case"ReverseV2":{const r=F("axis",t,e,n),i=F("x",t,e,n);return[s.reverse(i,r)]}case"Slice":{const r=F("begin",t,e,n),i=F("size",t,e,n);return[s.slice(F("x",t,e,n),r,i)]}case"StridedSlice":{const r=F("begin",t,e,n),i=F("end",t,e,n),a=F("strides",t,e,n),l=F("beginMask",t,e,n),c=F("endMask",t,e,n),u=F("ellipsisMask",t,e,n),d=F("newAxisMask",t,e,n),h=F("shrinkAxisMask",t,e,n),p=F("x",t,e,n);return[s.stridedSlice(p,r,i,a,l,c,u,d,h)]}case"Pack":return Ie(()=>{const r=F("axis",t,e,n),i=F("tensors",t,e,n),a=i[0].shape,l=s.squeeze(i[0]).shape,c=i.map(u=>{const d=bn(u.shape,a);if(!d&&!bn(s.squeeze(u).shape,l))throw new Error("the input tensors shape does not match");return d?u:s.reshape(u,a)});return[s.stack(c,r)]});case"Unpack":{const r=F("axis",t,e,n),i=F("tensor",t,e,n);return s.unstack(i,r)}case"Tile":{const r=F("reps",t,e,n);return[s.tile(F("x",t,e,n),r)]}case"Split":case"SplitV":{const r=F("axis",t,e,n),i=F("numOrSizeSplits",t,e,n),a=F("x",t,e,n);return s.split(a,i,r)}case"ScatterNd":{const r=F("indices",t,e,n),i=F("values",t,e,n),a=F("shape",t,e,n);return[s.scatterND(r,i,a)]}case"GatherNd":{const r=F("x",t,e,n),i=F("indices",t,e,n);return[s.gatherND(r,i)]}case"SparseToDense":{const r=F("sparseIndices",t,e,n),i=F("outputShape",t,e,n),a=F("sparseValues",t,e,n),l=F("defaultValue",t,e,n);return[s.sparseToDense(r,a,i,a.dtype===l.dtype?l:s.cast(l,a.dtype))]}case"TensorScatterUpdate":{const r=F("indices",t,e,n),i=F("values",t,e,n),a=F("tensor",t,e,n);return[s.tensorScatterUpdate(a,r,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D0e=(t,e,n,s=Er)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:i,emptyRowIndicator:a,reverseIndexMap:l}=s.sparse.sparseFillEmptyRows(F("indices",t,e,n),F("values",t,e,n),F("denseShape",t,e,n),F("defaultValue",t,e,n));return[r,i,a,l]}case"SparseReshape":{const{outputIndices:r,outputShape:i}=s.sparse.sparseReshape(F("inputIndices",t,e,n),F("inputShape",t,e,n),F("newShape",t,e,n));return[r,i]}case"SparseSegmentMean":return[s.sparse.sparseSegmentMean(F("data",t,e,n),F("indices",t,e,n),F("segmentIds",t,e,n))];case"SparseSegmentSum":return[s.sparse.sparseSegmentSum(F("data",t,e,n),F("indices",t,e,n),F("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P0e=(t,e,n,s=Er)=>{switch(t.op){case"FFT":return[s.fft(F("x",t,e,n))];case"IFFT":return[s.ifft(F("x",t,e,n))];case"RFFT":return[s.rfft(F("x",t,e,n))];case"IRFFT":return[s.irfft(F("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _0e=(t,e,n,s=Er)=>{switch(t.op){case"StaticRegexReplace":return[s.string.staticRegexReplace(F("input",t,e,n),F("pattern",t,e,n),F("rewrite",t,e,n),F("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:r,nGramsSplits:i}=s.string.stringNGrams(F("data",t,e,n),F("dataSplits",t,e,n),F("separator",t,e,n),F("nGramWidths",t,e,n),F("leftPad",t,e,n),F("rightPad",t,e,n),F("padWidth",t,e,n),F("preserveShortSequences",t,e,n));return[r,i]}case"StringSplit":{const{indices:r,values:i,shape:a}=s.string.stringSplit(F("input",t,e,n),F("delimiter",t,e,n),F("skipEmpty",t,e,n));return[r,i,a]}case"StringToHashBucketFast":return[s.string.stringToHashBucketFast(F("input",t,e,n),F("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O0e=(t,e,n,s=Er)=>{switch(t.op){case"Cast":return[s.cast(F("x",t,e,n),F("dtype",t,e,n))];case"ExpandDims":{const r=F("axis",t,e,n);return[s.expandDims(F("x",t,e,n),r)]}case"Squeeze":{const r=F("axis",t,e,n);return[s.squeeze(F("x",t,e,n),r)]}case"Reshape":return[s.reshape(F("x",t,e,n),F("shape",t,e,n))];case"EnsureShape":return[s.ensureShape(F("x",t,e,n),F("shape",t,e,n))];case"MirrorPad":return[s.mirrorPad(F("x",t,e,n),F("padding",t,e,n),F("mode",t,e,n))];case"PadV2":case"Pad":return[s.pad(F("x",t,e,n),F("padding",t,e,n),F("constantValue",t,e,n))];case"SpaceToBatchND":{const r=F("blockShape",t,e,n),i=F("paddings",t,e,n);return[s.spaceToBatchND(F("x",t,e,n),r,i)]}case"BatchToSpaceND":{const r=F("blockShape",t,e,n),i=F("crops",t,e,n);return[s.batchToSpaceND(F("x",t,e,n),r,i)]}case"DepthToSpace":{const r=F("blockSize",t,e,n),i=F("dataFormat",t,e,n).toUpperCase();return[s.depthToSpace(F("x",t,e,n),r,i)]}case"BroadcastTo":return[s.broadcastTo(F("x",t,e,n),F("shape",t,e,n))];case"BroadcastArgs":return[s.broadcastArgs(F("s0",t,e,n),F("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lR(t,e,n,s,r=Ie){const i=((a,l,c)=>{switch(a.category){case"arithmetic":return r(()=>d0e(a,l,c));case"basic_math":return r(()=>h0e(a,l,c));case"control":return y0e(a,l,c);case"convolution":return r(()=>v0e(a,l,c));case"creation":return r(()=>b0e(a,l,c));case"dynamic":return w0e(a,l,c);case"evaluation":return r(()=>N0e(a,l,c));case"image":return r(()=>T0e(a,l,c));case"graph":return r(()=>S0e(a,l,c));case"logical":return r(()=>I0e(a,l,c));case"matrices":return r(()=>j0e(a,l,c));case"normalization":return r(()=>E0e(a,l,c));case"ragged":return r(()=>$0e(a,l,c));case"reduction":return r(()=>A0e(a,l,c));case"slice_join":return r(()=>R0e(a,l,c));case"sparse":return r(()=>D0e(a,l,c));case"spectral":return r(()=>P0e(a,l,c));case"string":return r(()=>_0e(a,l,c));case"transformation":return r(()=>O0e(a,l,c));case"hash_table":return C0e(a,l,c,s);case"custom":const u=W7(a.op);if(u&&u.customExecutor)return u.customExecutor(new u0e(a,l,c));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return vd(i)?i.then(a=>[].concat(a)):[].concat(i)}class cR{constructor(e={},n={},s={},r={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=s,this.functionMap=r,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const s=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(s))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uR(t,e,n,s){const r=new Set,i=[];let a=null,l=null;const c=new Set,u=new Set(Object.keys(t).map(p=>Fi(p)[0]));s=s||[];const d=new Set(s.map(p=>Fi(p.name)[0])),h=[...e];for(;h.length>0;){const p=h.pop();if((Qu(p)||W0e(p)||G0e(p))&&a==null&&(a=p,l=a.children.map(g=>g.name).filter(g=>r.has(g))),r.add(p.name),n[p.name]==null&&!u.has(p.name)&&!d.has(p.name)){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(g=>{c.has(g.name)||(c.add(g.name),h.push(g))})}}return{inputs:t,outputs:e,usedNodes:r,missingInputs:i,dynamicNode:a,syncInputs:l}}function F0e(t,e){const{usedNodes:n,inputs:s}=e,r=Object.keys(s).map(v=>Fi(v)[0]).map(v=>t.nodes[v]),i=t.initNodes||[],a=v=>n.has(typeof v=="string"?v:v.name);function l(v){return[...new Map(v.map(w=>[w.name,w])).values()]}const c=l([...r,...t.weights,...i]).filter(a),u=l([...c,...Object.values(t.nodes)]).filter(a),d=new Map(u.map(v=>[v.name,v])),h={};for(const v of u){h[v.name]=h[v.name]||0;for(const w of v.children)a(w)||(h[w.name]=Number.POSITIVE_INFINITY),h[w.name]=(h[w.name]||0)+1}const p=Object.entries(h).filter(([,v])=>v===0).map(([v])=>v),g=[...p];for(;p.length>0;){const v=p.pop(),w=d.get(v);for(const N of w.children.filter(a))--h[N.name]===0&&(g.push(N.name),p.push(N.name))}const x=g.map(v=>d.get(v)),y=M0e(x,c);return L0e(y,c),y}function M0e(t,e){const n=new Map(t.map(a=>[a.name,a])),s=e.map(a=>a.name),r=new Set(s);for(;s.length>0;){const a=s.pop(),l=n.get(a);for(const c of l.children)!n.has(c.name)||r.has(c.name)||(r.add(c.name),s.push(c.name))}return t.filter(a=>r.has(a.name))}class E1 extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function L0e(t,e){const n=new Map(t.map((l,c)=>[l.name,c])),s=new Set(e.map(l=>l.name)),r=l=>s.has(typeof l=="string"?l:l.name),i=new Set(t.map(l=>l.name)),a=l=>i.has(typeof l=="string"?l:l.name);for(const l of t){for(const c of l.children.filter(a)){if(!n.has(c.name))throw new E1(`Child ${c.name} of node ${l.name} is unreachable.`);if(n.get(l.name)>n.get(c.name))throw new E1(`Node ${l.name} is scheduled to run after its child ${c.name}.`)}if(!r(l))for(const c of l.inputs){if(!n.has(c.name))throw new E1(`Input ${c.name} of node ${l.name} is unreachable.`);if(n.get(c.name)>n.get(l.name))throw new E1(`Node ${l.name} is scheduled to run before its input ${c.name}.`)}}}function B0e(t){const e=new Map(t.map((l,c)=>[l.name,c])),n=Number.MAX_SAFE_INTEGER,s=t.map((l,c)=>Qu(l)?n:c),r=l=>{const c=s[e.get(l.name)];return c??-1},i=t.map((l,c)=>l.children.map(r).reduce((u,d)=>Math.max(u,d),s[c])),a=new Map;for(let l=0;l<t.length;++l){const c=i[l];if(c===n)continue;const u=t[l],d=t[c];a.has(d.name)||a.set(d.name,[]),a.get(d.name).push(u)}return a}const z0e=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),V0e=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),U0e=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Qu(t){return z0e.has(t.op)}function W0e(t){return V0e.has(t.op)}function G0e(t){return U0e.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q0{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(s=>e[s].map(r=>r.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(s=>{this._functionExecutorMap[s]=new q0(e.functions[s],this)})}getCompilationKey(e,n){const s=e.map(i=>i.name).sort(),r=n.map(i=>i.name).sort();return s.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,n){const s=uR(e,n,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:i,syncInputs:a}=s;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(r.length>0){const u=n.map(h=>h.name),d=Object.keys(e);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${d}]. Missing the following inputs: [${r}]`)}const l=F0e(this.graph,s),c=B0e(l);return{orderedNodes:l,nodeLiveUntilMap:c}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return hr(n),n}cloneTensorList(e){return e?e.map(s=>this.cloneAndKeepTensor(s)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,s])=>[n,this.cloneTensorList(s)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const s=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const r=s.map(p=>this.graph.nodes[Fi(p)[0]]),i=n.map(p=>Fi(p)[0]),a=new Set(i);let l=i.map(p=>this.graph.nodes[p]);l.length===0&&(l=this._outputs);const c=this.getCompilationKey(r,l);let u=this.compiledMap.get(c);u==null&&(u=this.compile(e,l),this.compiledMap.set(c,u));try{this.keepIntermediateTensors=Pe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}const d={},h={};return Ie(()=>{const p=new cR(this.weightMap,d,h,this.functionExecutorMap,this.parseNodeNameCache),g=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(w=>{const[N,k]=Fi(w,p),C=[];C[k]=e[w],g[N]=C,this.keepIntermediateTensors&&(this.clonedTensorsMap[N]=this.cloneTensorList(C))});const x=this.getFrozenTensorIds(g),{orderedNodes:y,nodeLiveUntilMap:v}=u;for(const w of y){if(g[w.name])continue;const N=lR(w,g,p,this._resourceManager);if(vd(N))throw new Error(`The execution of the op '${w.op}' returned a promise. Please use model.executeAsync() instead.`);g[w.name]=N,this.keepIntermediateTensors&&(this.clonedTensorsMap[w.name]=this.cloneTensorList(N)),this.checkTensorForDisposalWithNodeLiveUntilInfo(w,g,p,x,a,v.get(w.name))}return this.parent==null&&p.dispose(x),n.map(w=>wr(w,g,p))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(s=>e[s]).map(s=>s.map(r=>r.id)));return new Set(n)}checkTensorForDisposal(e,n,s,r,i,a,l){if(!(Qu(n)||a.has(e))){for(const c of s[e])c!=null&&(l[c.id]=(l[c.id]||0)+n.children.length);for(const c of n.inputs){if(Qu(c))continue;const u=sR(c.name,s,r);if(u!=null)for(const d of u){if(!d||d.kept||i.has(d.id))continue;const h=l[d.id];h===1?(d.dispose(),delete l[d.id]):h!=null&&l[d.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,s,r,i,a){function l(c){return Qu(c)||i.has(c.name)}if(!(Qu(e)||a==null))for(const c of a){if(l(c))continue;const u=sR(c.name,n,s);for(const d of u)!d||d.kept||r.has(d.id)||d.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,s=!1,r={},i={}){this.disposeIntermediateTensors(),s||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=Pe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}const a=new cR(this.weightMap,r,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const l=await this.executeWithControlFlow(e,a,n,s),c=n.map(p=>wr(p,l,a)),u=c.map(p=>p.id),d=Object.keys(e).map(p=>e[p].id),h=new Set([...u,...d,...this.weightIds]);return Object.values(l).forEach(p=>{p.forEach(g=>{g&&!g.isDisposed&&!h.has(g.id)&&g.dispose()})}),this.parent==null&&a.dispose(h),c}async executeFunctionAsync(e,n,s){const r=e.reduce((i,a,l)=>(i[this.inputs[l].name]=a,i),{});return this._executeAsync(r,this.outputNodes,!0,n,s)}async executeWithControlFlow(e,n,s,r){const i=Object.keys(e),a=i.map(C=>this.graph.nodes[Fi(C)[0]]),l=s.map(C=>Fi(C)[0]),c=new Set(l);let u=l.map(C=>this.graph.nodes[C]);u.length===0&&(u=this._outputs);const{usedNodes:d,missingInputs:h,dynamicNode:p,syncInputs:g}=uR(e,u,this.weightMap,this._initNodes),x=[...a,...this.graph.weights,...this._initNodes||[]].map(C=>({node:C,contexts:n.currentContext})),y=Object.assign({},this.weightMap);Object.keys(e).forEach(C=>{const[j,R]=Fi(C),_=[];_[R]=e[C],y[j]=_});const v={},w=this.getFrozenTensorIds(y),N={};for(;x.length>0;){const C=this.processStack(a,x,n,y,N,w,c,v,d);await Promise.all(C)}p==null&&!r&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const k=u.filter(C=>!Qu(C)&&!wr(C.name,y,n)).map(C=>C.name);if(k.length>0){let C="";throw p!=null&&(C=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${g}]`),new Error(`Cannot compute the outputs [${k}] from the provided inputs [${i}]. Consider providing the following inputs: [${h}]. ${C}`)}return y}processStack(e,n,s,r,i,a,l,c,u){const d=[];for(;n.length>0;){const h=n.pop();s.currentContext=h.contexts;let p="";if(h.node.op==="Enter"&&F("isConstant",h.node,r,s)&&([p]=Cl(h.node.name,s)),r[h.node.name]==null){const g=lR(h.node,r,s,this._resourceManager);p||([p]=Cl(h.node.name,s));const x=s.currentContext;vd(g)?d.push(g.then(y=>(r[p]=y,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(y)),s.currentContext=x,this.checkTensorForDisposal(p,h.node,r,s,a,l,c),this.processChildNodes(h.node,n,s,r,i,u),y))):(r[p]=g,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(g)),this.checkTensorForDisposal(p,h.node,r,s,a,l,c),this.processChildNodes(h.node,n,s,r,i,u))}else this.processChildNodes(h.node,n,s,r,i,u)}return d}processChildNodes(e,n,s,r,i,a){e.children.forEach(l=>{const[c]=Cl(l.name,s);i[c]||!a.has(l.name)||(l.op==="Merge"?l.inputNames.some(u=>!!wr(u,r,s))&&(i[c]=!0,n.push({contexts:s.currentContext,node:l})):l.inputNames.every(u=>!!wr(u,r,s))&&(i[c]=!0,n.push({contexts:s.currentContext,node:l})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const s=e[n],[r]=Fi(n),i=this.graph.nodes[r];if(i.attrParams.shape&&i.attrParams.shape.value){const a=i.attrParams.shape.value,l=a.length===s.shape.length&&s.shape.every((c,u)=>a[u]===-1||a[u]===c);K(l,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${a}], but was [${s.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&K(s.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${s.dtype}`)})}mapInputs(e){var n,s;const r={};for(const i in e){const a=(s=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||s===void 0?void 0:s[i];a!=null?r[a.name]=e[i]:r[i]=e[i]}return r}checkInputs(e){const n=Object.keys(e).filter(s=>{const[r]=Fi(s);return this.graph.nodes[r]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var s,r;const i=(r=(s=this._signature)===null||s===void 0?void 0:s.outputs)===null||r===void 0?void 0:r[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[s]=Fi(n);if(!this.graph.nodes[s])throw new Error(`The output '${n}' is not found in the graph`)})}}class H0e{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K0e="?tfjs-format=file",q0e="model.json";class X0e{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},s=X8){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=s,n==null&&(this.loadOptions={}),this.resourceManager=new H0e}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return vd(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await vF(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const s=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(r=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=r,this.version=`${s.versions.producer}.${s.versions.minConsumer}`,this.executor=new q0(rR.Instance.transformGraph(s,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=rR.Instance.transformGraph(e.modelInitializer);this.initializer=new q0(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const s=this.io.getSaveHandlers(e);if(s.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(s.length>1)throw new Error(`Found more than one (${s.length}) save handlers for URL '${e}'`);e=s[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof zn?[e]:e,s={};return n.forEach((r,i)=>s[this.structuredOutputKeys[i]]=r),s}return e}predict(e,n){const s=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(s)}async predictAsync(e,n){const s=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(s)}normalizeInputs(e){var n;if(!(e instanceof zn)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const a in i){const l=i[a];l.resourceId!=null&&(e[a]=this.resourceIdToCapturedInput[l.resourceId])}return e}e=Array.isArray(e)?e:[e];const s=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+s!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-s} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce((i,a)=>{var l,c,u;const d=(u=(c=(l=this.signature)===null||l===void 0?void 0:l.inputs)===null||c===void 0?void 0:c[a])===null||u===void 0?void 0:u.resourceId;return d!=null?i[a]=this.resourceIdToCapturedInput[d]:i[a]=e[r++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,s=Object.keys(n);for(let r=0;r<s.length;r++){const i=s[r],a=n[i];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const s=this.executor.execute(e,n);return s.length>1?s:s[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const s=await this.executor.executeAsync(e,n);return s.length>1?s:s[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,s)=>(n[s]=[e[s]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Kt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function K7(t,e={},n=X8){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=Y0e(t));const s=new X0e(t,e,n);return await s.load(),s}function Y0e(t){return t.endsWith("/")||(t=t+"/"),`${t}${q0e}${K0e}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var dR;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(dR||(dR={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ct(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&K(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z0e=TC;class Nv extends MS{nextDataId(){return Nv.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new WO(this,_o())}write(e,n,s){this.firstUse&&(this.firstUse=!1,Pe().get("IS_NODE")&&ta(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:s,refCount:1}),r}makeTensorInfo(e,n,s){let r;if(n==="string"&&s!=null&&s.length>0&&Km(s[0])){const i=s.map(a=>Oc(a));r=this.write(i,e,n)}else r=this.write(s,e,n);return{dataId:r,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,s,r,i){this.data.set(e,{values:n,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:s}=this.data.get(e);if(n==="complex64"){const r=this.readSync(s.real.dataId),i=this.readSync(s.imag.dataId);return Gl(r,i)}return aae(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const s=n.map(r=>Xc(r));return un(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return un(e.shape,e.dtype,n)}makeOutput(e,n,s){return _o().makeTensorFromTensorInfo(this.makeTensorInfo(n,s,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(e);s!=null&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=ci();return e(),{kernelMs:ci()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ct([e],"where");const n=this.readSync(e.dataId);return Z0e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Nv.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q7(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const J0e=t=>{const{x:e}=t.inputs,n=t.backend;Ct(e,"abs");let s=new Float32Array(Le(e.shape));const r=n.data.get(e.dataId).values;return s=q7(r),n.makeOutput(s,e.shape,e.dtype)},Q0e={kernelName:Fy,backendName:"cpu",kernelFunc:J0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ls(t){return(e,n,s,r,i)=>{const a=rn(e,n),l=a.length,c=Mt(a),u=Le(a),d=Cr(i,u),h=e.length,p=n.length,g=Mt(e),x=Mt(n),y=yf(e,a),v=yf(n,a);if(y.length+v.length===0)for(let w=0;w<d.length;++w)d[w]=t(s[w%s.length],r[w%r.length]);else for(let w=0;w<d.length;++w){const N=Mf(w,l,c),k=N.slice(-h);y.forEach(_=>k[_]=0);const C=qo(k,h,g),j=N.slice(-p);v.forEach(_=>j[_]=0);const R=qo(j,p,x);d[w]=t(s[C],r[R])}return[d,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Li(t){const{inputs:e,backend:n}=t,{real:s,imag:r}=e,i=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values,l=n.makeTensorInfo(s.shape,"complex64"),c=n.data.get(l.dataId);return c.complexTensorInfos={real:n.makeTensorInfo(s.shape,"float32",i),imag:n.makeTensorInfo(r.shape,"float32",a)},l}const eye={kernelName:XS,backendName:"cpu",kernelFunc:Li};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X0(t,e,n="float32"){if(n==="complex64"){const r=X0(t,e,"float32"),i=X0(t,e,"float32");return Li({inputs:{real:r,imag:i},backend:t})}const s=Or(Le(e),n);return t.makeTensorInfo(e,n,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rl(t){const{inputs:e,backend:n}=t,{x:s}=e;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const tye={kernelName:pg,backendName:"cpu",kernelFunc:rl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $d(t){const{inputs:e,backend:n}=t,{input:s}=e,r=n.data.get(s.dataId).complexTensorInfos.real,i=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,i)}const nye={kernelName:Ik,backendName:"cpu",kernelFunc:$d};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7(t,e,n,s){if(s==="int32"){const r=Int32Array.from(t);return[e,"int32",r]}if(s==="bool"){const r=Ld([0],n),[i,a]=Ls((l,c)=>l!==c?1:0)(e,[],t,r,"bool");return[a,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${s}`)}function ru(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{dtype:i}=s;if(i==="complex64"){if(r.dtype==="complex64")return rl({inputs:{x:r},backend:n});const d=X0(n,r.shape,r.dtype),h=ru({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),p=Li({inputs:{real:h,imag:d},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}if(r.dtype==="complex64"){const d=$d({inputs:{input:r},backend:n}),h=ru({inputs:{x:d},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(d),h}if(!HO(r.dtype,i)){const d=rl({inputs:{x:r},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}const a=n.data.get(r.dataId).values,[l,c,u]=X7(a,r.shape,r.dtype,i);return n.makeTensorInfo(l,c,u)}const sye={kernelName:tg,backendName:"cpu",kernelFunc:ru};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ir(t,e,n,s){return n==null?({inputs:r,backend:i})=>{const{a,b:l}=r,c=i;Ct([a,l],t);const u=c.data.get(a.dataId).values,d=c.data.get(l.dataId).values,h=a.dtype==="string"?Hl(u):u,p=a.dtype==="string"?Hl(d):d,g=s||a.dtype,[x,y]=e(a.shape,l.shape,h,p,g);return c.makeTensorInfo(y,g,x)}:({inputs:r,backend:i})=>{const{a,b:l}=r,c=i;if(a.dtype==="complex64"||l.dtype==="complex64"){const u=ru({inputs:{x:a},backend:c,attrs:{dtype:"complex64"}}),d=c.data.get(u.dataId),h=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,g=c.data.get(h.dataId).values,x=c.data.get(p.dataId).values,y=ru({inputs:{x:l},backend:c,attrs:{dtype:"complex64"}}),v=c.data.get(y.dataId),w=v.complexTensorInfos.real,N=v.complexTensorInfos.imag,k=c.data.get(w.dataId).values,C=c.data.get(N.dataId).values,[j,R,_]=n(a.shape,l.shape,g,x,k,C),A=c.makeTensorInfo(_,"float32",j),O=c.makeTensorInfo(_,"float32",R),L=Li({inputs:{real:A,imag:O},backend:c});return c.disposeIntermediateTensorInfo(u),c.disposeIntermediateTensorInfo(y),c.disposeIntermediateTensorInfo(A),c.disposeIntermediateTensorInfo(O),L}else{const u=c.data.get(a.dataId).values,d=c.data.get(l.dataId).values,h=s||a.dtype,[p,g]=e(a.shape,l.shape,u,d,h);return c.makeTensorInfo(g,h,p)}}}function CT(t){return(e,n,s,r,i,a)=>{const l=rn(e,n),c=Le(l),u=l.length,d=Mt(l),h=Cr("float32",c),p=Cr("float32",c),g=yf(e,l),x=yf(n,l),y=Gl(s,r),v=Gl(i,a),w=e.length,N=Mt(e),k=n.length,C=Mt(n);if(g.length+x.length===0)for(let j=0;j<h.length;j++){const R=j%y.length,_=j%v.length,A=t(y[R*2],y[R*2+1],v[_*2],v[_*2+1]);h[j]=A.real,p[j]=A.imag}else for(let j=0;j<h.length;j++){const R=Mf(j,u,d),_=R.slice(-w);g.forEach(q=>_[q]=0);const A=qo(_,w,N),O=R.slice(-k);x.forEach(q=>O[q]=0);const L=qo(O,k,C),D=t(y[A*2],y[A*2+1],v[L*2],v[L*2+1]);h[j]=D.real,p[j]=D.imag}return[h,p,l]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y7=Ls(((t,e)=>t+e)),rye=CT(((t,e,n,s)=>({real:t+n,imag:e+s}))),Nf=ir(Lf,Y7,rye),iye={kernelName:Lf,backendName:"cpu",kernelFunc:Nf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TT(t,e,n,s,r){const i=Le(s),a=Or(r,n);for(let l=0;l<t.length;l++){const c=t[l];if(c<0)throw new Error("Input x must be non-negative!");c>=r||(i>0?a[c]+=e[l]:a[c]+=1)}return a}function Z7(t,e,n,s=!1){const r=t.shape[0],i=t.shape[1],a=un([r,n],e.dtype);for(let l=0;l<r;l++)for(let c=0;c<i;c++){const u=t.get(l,c);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(s?a.set(1,l,u):e.size>0?a.set(a.get(l,u)+e.get(l,c),l,u):a.set(a.get(l,u)+1,l,u))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J7=Ls(((t,e)=>t&e)),aye=ir(Gy,J7),oye={kernelName:Gy,backendName:"cpu",kernelFunc:aye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ol(t){return(e,n,s)=>{const r=_s(n,e.length);for(let i=0;i<e.length;++i)r[i]=t(e[i],s);return r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Un(t,e,n){const s=ol(e);return vu(t,s,n)}function vu(t,e,n){return({inputs:s,attrs:r,backend:i})=>{const{x:a}=s;Ct(a,t);const l=i,c=l.data.get(a.dataId).values;let u;if(a.dtype==="string"){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");u=Hl(c)}else u=c;const d=n||a.dtype,h=e(u,d,r);return l.makeTensorInfo(a.shape,d,h)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q7=ol(t=>Math.ceil(t)),lye=vu(ng,Q7),cye={kernelName:ng,backendName:"cpu",kernelFunc:lye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9(t,e,n,s){const r=_s(n,Le(e));if(s&&n!=="string"){let i=0;t.forEach(a=>{const l=Le(a.shape);r.set(a.vals,i),i+=l})}else{let i=0;t.forEach(a=>{const l=n==="string"?Hl(a.vals):a.vals;let c=0;for(let u=0;u<a.shape[0];++u){const d=u*e[1]+i;for(let h=0;h<a.shape[1];++h)r[d+h]=l[c++]}i+=a.shape[1]})}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t9=Ls((t,e)=>t===e?1:0),n9=ir(e2,t9,null,"bool"),uye={kernelName:e2,backendName:"cpu",kernelFunc:n9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s9=ol(t=>Math.exp(t)),r9=vu(cg,s9,"float32"),dye={kernelName:cg,backendName:"cpu",kernelFunc:r9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i9=ol(t=>Math.expm1(t)),hye=vu(ug,i9),fye={kernelName:ug,backendName:"cpu",kernelFunc:hye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a9=ol(t=>Math.floor(t)),pye=vu(dg,a9),mye={kernelName:dg,backendName:"cpu",kernelFunc:pye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o9=Ls((t,e)=>Math.floor(t/e)),gye=ir(hg,o9,null,"int32"),xye={kernelName:hg,backendName:"cpu",kernelFunc:gye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l9(t,e,n,s,r,i,a,l,c){const u=un([s,i],n);for(let d=0;d<s;d++){const h=[];let p=0;for(let g=0;g<r;g++){const x=t[d*r+g];p+=x*a[g],h.push(x)}if(p<0||p>=c/i)throw new Error(`Invalid indices: ${h} does not index into ${l}`);for(let g=0;g<i;g++)u.values[d*i+g]=e.get(...e.indexToLoc(p*i+g))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c9(t,e,n){const s=un(n,t.dtype);for(let r=0;r<s.size;++r){const a=s.indexToLoc(r).slice(),l=a[0],c=a[2],u=e.locToIndex([l,c]);a[2]=e.values[u];const d=t.locToIndex(a);0<=d&&d<t.values.length&&(s.values[r]=t.values[d])}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u9=Ls((t,e)=>t>e?1:0),yye=ir(r2,u9,null,"bool"),vye={kernelName:r2,backendName:"cpu",kernelFunc:yye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9=Ls((t,e)=>t>=e?1:0),bye=ir(fg,d9,null,"bool"),wye={kernelName:fg,backendName:"cpu",kernelFunc:bye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h9=Ls((t,e)=>t<e?1:0),Nye=ir(a2,h9,null,"bool"),Sye={kernelName:a2,backendName:"cpu",kernelFunc:Nye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f9=Ls((t,e)=>t<=e?1:0),kye=ir(o2,f9,null,"bool"),Cye={kernelName:o2,backendName:"cpu",kernelFunc:kye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p9(t,e,n){const s=(e-t)/(n-1),r=Or(n,"float32");r[0]=t;for(let i=1;i<r.length;i++)r[i]=r[i-1]+s;return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m9=ol(t=>Math.log(t)),Tye=vu(yg,m9),Iye={kernelName:yg,backendName:"cpu",kernelFunc:Tye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g9(t,e,n,s){const r=Cr(s,Le(n));for(let i=0;i<r.length;++i){const a=i*e;let l=t[a];for(let c=0;c<e;++c){const u=t[a+c];(Number.isNaN(u)||u>l)&&(l=u)}r[i]=l}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x9=Ls(((t,e)=>Math.max(t,e))),jye=ir(bg,x9),Eye={kernelName:bg,backendName:"cpu",kernelFunc:jye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y9=Ls(((t,e)=>Math.min(t,e))),$ye=ir(wg,y9),Aye={kernelName:wg,backendName:"cpu",kernelFunc:$ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IT=Ls(((t,e)=>t*e)),Rye=CT(((t,e,n,s)=>({real:t*n-e*s,imag:t*s+e*n}))),Sv=ir(Sg,IT,Rye),Dye={kernelName:Sg,backendName:"cpu",kernelFunc:Sv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v9(t,e,n){const s=uu(-1,n);return IT([],e,s,t,n)}function Pye(t){const{inputs:e,backend:n}=t,{x:s}=e;Ct(s,"neg");const r=n.data.get(s.dataId).values,[i,a]=v9(r,s.shape,s.dtype);return n.makeTensorInfo(a,s.dtype,i)}const _ye={kernelName:y2,backendName:"cpu",kernelFunc:Pye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b9=Ls(((t,e)=>t!==e?1:0)),Oye=ir(v2,b9,null,"bool"),Fye={kernelName:v2,backendName:"cpu",kernelFunc:Oye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jT(t,e,n,s,r){const i=e.length,a=Le(e),l=Mt(e),c=Mt(r),u=Cr(n,Le(r));for(let d=0;d<a;++d){const h=Mf(d,i,l),p=new Array(h.length);for(let x=0;x<p.length;x++)p[x]=h[s[x]];const g=qo(p,i,c);u[g]=t[d]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ni(t){const{inputs:e,attrs:n,backend:s}=t,{x:r}=e,{perm:i}=n;Ct(r,"transpose");const a=r.shape.length,l=new Array(a);for(let h=0;h<l.length;h++)l[h]=r.shape[i[h]];const c=s.data.get(r.dataId).values,u=jT(c,r.shape,r.dtype,i,l);return{dataId:s.write(u,l,r.dtype),shape:l,dtype:r.dtype}}const Mye={kernelName:ef,backendName:"cpu",kernelFunc:Ni};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w9(t,e,n,s){const[r,i]=mr(t,s),a=Vi(e,"int32"),l=Or(Le(r),a),c=Le(i);for(let u=0;u<l.length;++u){const d=u*c;let h=1;for(let p=0;p<c;++p)h*=n[d+p];l[u]=h}return{outVals:l,outShape:r,outDtype:a}}function Lye(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s;Ct(r,"prod");const l=r.shape.length,c=fn(i,r.shape),u=Ns(c,l);let d=c,h=r;const p=[];u!=null&&(h=Ni({inputs:{x:r},backend:n,attrs:{perm:u}}),p.push(h),d=Fs(d.length,l));const g=n.data.get(h.dataId).values,{outVals:x,outShape:y,outDtype:v}=w9(h.shape,h.dtype,g,d);let w=y;return a&&(w=Os(y,c)),p.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.makeTensorInfo(w,v,x)}const Bye={kernelName:C2,backendName:"cpu",kernelFunc:Lye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zye(t,e,n){t.forEach((s,r)=>{if(s<0||s>=n){const i=Mf(r,e.length,Mt(e)).join(",");throw new Error(`indices[${i}] = ${s} is not in [0, ${n})`)}})}function Vye(t,e){for(let n=0;n<t.length;++n){const s=t[n],r=n===t.length-1?e:t[n+1].length;if(s.length===0)throw new Error("Ragged splits may not be empty");if(s[0]<0)throw new Error("Ragged splits must be non-negative");if(s[s.length-1]>r)throw new Error("Ragged splits must not point past values");for(let i=1;i<s.length;++i)if(s[i-1]>s[i])throw new Error("Ragged splits must be sorted in ascending order")}}function Uye(t,e,n,s){const r=[];let i=0;const a=e.length-1+n.length,l=new Array(a).fill(null).map(()=>[0]);Vye(n,s);let c=1;for(let u=0;u<e.length-1;++u){c*=e[u];const d=e[u+1];for(let h=1;h<c+1;++h)l[u].push(h*d)}for(let u=0;u<t.length;++u){let d=t[u],h=t[u]+1;for(let p=0;p<n.length;++p){const g=n[p],x=p+e.length-1;if(x>=0){const y=l[x],v=y[y.length-1]-g[d];for(let w=d;w<h;++w)l[x].push(g[w+1]+v)}d=g[d],h=g[h]}h!==d&&(r.push([d,h]),i+=h-d)}return{outSplits:l,valueSlices:r,numValues:i}}function Wye(t){const e=[];for(let n=0;n<t.length;++n){const s=t[n].length,r=_s("int32",s);e.push(r),t[n].forEach((i,a)=>r[a]=i)}return e}function hR(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let s=e;s<t.length;s++)n[e-1]*=t[s];return n}function Gye(t,e,n,s,r,i){const a=hR(e,2)[1],l=hR(i,2)[1];let c=0;for(const u of n)for(let d=u[0];d<u[1];++d){for(let h=0;h<s;++h)r[c*l+h]=t[d*a+h];++c}}function Hye(t,e,n,s,r){const i=e.slice();i[0]=r;const a=_s(n,Le(i)),l=t.length,c=l===0?0:l/e[0];return Gye(t,e,s,c,a,i),[a,i]}function N9(t,e,n,s,r,i,a,l){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const c=e[0][0]-1;if(zye(i,a,c),s.length===0)throw new Error("params.rank must be nonzero");const u=s[0],{outSplits:d,valueSlices:h,numValues:p}=Uye(i,a,t,u),g=Wye(d),x=Hye(n,s,r,h,p);return[g,x[0],x[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fR=2147483647;function S9(t,e,n,s,r,i,a){if(e.length>1)throw new Error("starts must be a scalar or vector");if(r.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const l=e.length===0,c=r.length===0,u=a.length===0,d=[];l||d.push(e[0]),c||d.push(r[0]),u||d.push(a[0]);for(let v=1;v<d.length;++v)if(d[v]!==d[v-1])throw new Error("starts, limits, and deltas must have the same shape");const h=d.length===0?1:d[0],p=_s("int32",h+1);p[0]=0;for(let v=0;v<h;++v){const w=l?t[0]:t[v],N=c?s[0]:s[v],k=u?i[0]:i[v];if(k===0)throw new Error("Requires delta != 0");let C;if(k>0&&N<w||k<0&&N>w)C=0;else if(C=Math.ceil(Math.abs((N-w)/k)),C>fR)throw new Error(`Requires ((limit - start) / delta) <= ${fR}`);p[v+1]=p[v]+C}const g=p[h],x=_s(n,g);let y=0;for(let v=0;v<h;++v){const w=p[v+1]-p[v];let N=l?t[0]:t[v];const k=u?i[0]:i[v];for(let C=0;C<w;++C)x[y++]=N,N+=k}return[p,x]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ya=no;class Y0{constructor(e,n,s,r,i,a,l,c,u,d){this.shape=e,this.shapeShape=n,this.values=s,this.valuesShape=r,this.valuesDType=i,this.defaultValue=a,this.defaultValueShape=l,this.rowPartitionValues=c,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=iM(d),this.raggedRank=aM(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===ya.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===ya.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case ya.VALUE_ROWIDS:return Y0.getMaxWidthValueRowID(n);case ya.ROW_SPLITS:return Y0.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ya[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let s=0;for(let r=0;r<n-1;++r){const i=e[r+1]-e[r];i>s&&(s=i)}return s}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let s=0,r=e[0],i=0;for(let a=1;a<n;++a){const l=e[a];l!==r&&(r=l,i=Math.max(a-s,i),s=a)}return Math.max(n-s,i)}tensorShapeFromTensor(e,n,s=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return mR(e,s)}calculateOutputSize(e){const n=this.valuesShape,s=this.defaultValueShape;oM(s,n);const r=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=rM(this.raggedRank,r,n);a[0]<0&&(a[0]=e);for(let l=1;l<=this.raggedRank;++l)a[l]<0&&(a[l]=this.getMaxWidth(l));return a}calculateFirstParentOutputIndex(e,n,s){const r=Math.min(e,s),i=[];let a=0;for(let l=0;l<r;++l,a+=n)i.push(a);for(let l=r;l<e;++l)i.push(-1);return K(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,s,r){const i=e.length,a=[];for(let l=0;l<i-1;++l){const c=e[l+1]-e[l];let u=Math.min(r,c),d=n[l];d===-1&&(u=0);for(let h=0;h<u;++h)a.push(d),d+=s;for(let h=0;h<c-u;++h)a.push(-1)}if(i>0&&a.length!==e[i-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,n,s,r){const i=e.length,a=[];if(i===0)return[];let l=0,c=e[0];if(c>=n.length)throw new Error(`Got currentValueRowId=${c}, which is not less than ${n.length}`);let u=n[c];a.push(u);for(let d=1;d<i;++d){const h=e[d];if(h===c)u>=0&&(++l,l<r?u+=s:u=-1);else{if(l=0,c=h,h>=n.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${n.length}`);u=n[h]}a.push(u)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,n,s,r){const i=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case ya.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,s,r);case ya.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,s,r);default:throw new Error(`Unsupported partition type: ${ya[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ya.FIRST_DIM_SIZE:return e[0];case ya.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ya.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ya[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),s=this.calculateOutputSize(n),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let c=r.length-2;c>=0;--c)r[c]=r[c+1]*s[c+1];const i=mR(s,!1),a=_s(this.valuesDType,Le(i));if(r[0]*s[0]>0){let c=this.calculateFirstParentOutputIndex(n,r[0],s[0]);for(let u=1;u<=this.raggedRank;++u)c=this.calculateOutputIndex(u-1,c,r[u],s[u]);this.setOutput(this.raggedRank,c,a,i)}return[i,a]}setOutput(e,n,s,r){if(s.length===0)return;const i=this.values,a=s;let l=r.slice();l=l.slice(e+1);const c=Le(l),u=n.length;let d=this.defaultValue;if(d.length!==c&&d.length!==1){const x=this.defaultValueShape;Ie(()=>{const y=ge(d,x);d=sf(y,l).dataSync()})}let h=0,p=0,g=0;for(let x=0;x<=u;++x){let y=x<u?n[x]:-1;if(y===g){++g;continue}if(p<g){const v=i.subarray(h*c),w=a.subarray(p*c),N=(g-p)*c;pR(w,v,N)}if(x>=u){const v=s.length;y=Math.floor(v/c)}if(y>g)if(this.defaultValue.length===1)a.subarray(g*c,y*c).fill(this.defaultValue[0]),g=y;else for(;y>g;){const v=a.slice(g*c);pR(v,d,c),++g}y<0?(h=x+1,p=g):(h=x,p=g,g=p+1)}}}function pR(t,e,n){for(let s=0;s<n;s++)t[s]=e[s]}function mR(t,e){const n=[];for(let s of t){if(s<0){if(!e)throw new Error(`Dimension ${s} must be >= 0`);if(s<-1)throw new Error(`Dimension ${s} must be >= -1`);s=-1}n.push(s)}return n}function k9(t,e,n,s,r,i,a,l,c,u){return new Y0(t,e,n,s,r,i,a,l,c,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C9(t,e,n,s){const r=t===e,i=t<e&&n<0,a=e<t&&n>1;if(r||i||a)return Or(0,s);const l=Math.abs(Math.ceil((e-t)/n)),c=Or(l,s);e<t&&n===1&&(n=-1),c[0]=t;for(let u=1;u<c.length;u++)c[u]=c[u-1]+n;return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T9=ol(t=>1/Math.sqrt(t)),Kye=vu(Eg,T9),qye={kernelName:Eg,backendName:"cpu",kernelFunc:Kye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function id(t,e,n,s,r,i,a,l,c,u){const d=[s/r,r],h=t.values,p=e.values;if(s===0)return un(n,e.dtype);const g=c instanceof tr?c:un(d,e.dtype);typeof c=="string"||typeof c=="number"?g.values.fill(c):typeof c=="boolean"&&g.values.fill(+c);for(let x=0;x<i;x++){const y=[];let v=0;for(let w=0;w<a;w++){const N=h[x*a+w];y.push(N),v+=N*l[w]}if(v<0||v>=s/r)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let w=0;w<r;w++)u?g.values[v*r+w]+=p[x*r+w]:g.values[v*r+w]=e.rank===0?p[0]:p[x*r+w]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xye=ol(t=>1/(1+Math.exp(-t))),I9=Un(Pg,t=>1/(1+Math.exp(-t))),Yye={kernelName:Pg,backendName:"cpu",kernelFunc:I9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j9(t,e,n,s,r){const i=eM(s,e,n),a=Le(n),l=Mt(s);if(i){const h=tM(e,l);return r==="string"?t.slice(h,h+a):t.subarray(h,h+a)}const c=r==="string"?Hl(t):t,u=un(s,r,c),d=un(n,r);for(let h=0;h<d.size;++h){const p=d.indexToLoc(h),g=p.map((x,y)=>x+e[y]);d.set(u.get(...g),...p)}return r==="string"?TM(d.values):d.values}function Ad(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{begin:i,size:a}=s;Ct(r,"slice");const[l,c]=FC(r,i,a);J8(r,l,c);const u=n.data.get(r.dataId).values,d=j9(u,l,c,r.shape,r.dtype);return n.makeTensorInfo(c,r.dtype,d)}const Zye={kernelName:A2,backendName:"cpu",kernelFunc:Ad};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9(t,e,n,s,r,i,a){const l=e[0],c=i[0],u=new Array(c),d=new Array(l),h=e[1];if(c===0){if(l!==0)throw new Error(pM(l));const v=_s(n,0),w=_s(r,0);return[v,[0,h],w,u,d]}let p=!0,g=0;const x=new Array(c).fill(0);for(let v=0;v<l;++v){const w=t[v*h];if(w<0)throw new Error(mM(v,w));if(w>=c)throw new Error(gM(v,w,c));++x[w],p=p&&w>=g,g=w}let y=!0;for(let v=0;v<c;++v){const w=x[v]===0;u[v]=w,y=y&&!w,x[v]=Math.max(x[v],1),v>0&&(x[v]+=x[v-1])}if(y&&p){const v=t,w=s;for(let N=0;N<l;++N)d[N]=N;return[v,[l,h],w,u,d]}else{const v=x[c-1],w=_s(n,v*h),N=_s(r,v),k=new Array(c).fill(0);for(let C=0;C<l;++C){const j=t[C*h],R=k[j],_=(j===0?0:x[j-1])+R;k[j]++;for(let A=0;A<h;++A)w[_*h+A]=t[C*h+A];N[_]=s[C],d[C]=_}for(let C=0;C<c;++C)if(k[C]===0){const R=C===0?0:x[C-1];w[R*h+0]=C;for(let _=1;_<h;++_)w[R*h+_]=0;N[R]=a}return[w,[v,h],N,u,d]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $9(t,e,n,s,r){const i=Le(s),a=e[0],l=r.length,c=[];let u=1,d=-1;for(let v=0;v<l;++v){const w=r[v];if(w===-1){if(d!==-1)throw new Error(xM(d,v));d=v,c.push(1)}else{if(w<0)throw new Error(yM(v,w));u*=w,c.push(w)}}if(d!==-1){if(u<=0)throw new Error(vM());const v=Math.trunc(i/u);if(u*v!==i)throw new Error(bM(s,c));c[d]=v}if(Le(c)!==i)throw new Error(wM(s,c));const p=s.length,g=[];if(p>0){g[p-1]=1;for(let v=p-2;v>=0;--v)g[v]=g[v+1]*s[v+1]}const x=[];if(l>0){x[l-1]=1;for(let v=l-2;v>=0;--v)x[v]=x[v+1]*c[v+1]}const y=_s(n,a*l);for(let v=0;v<a;++v){let w=0;for(let N=0;N<p;++N)w+=t[v*p+N]*g[N];for(let N=0;N<l;++N)y[v*l+N]=Math.trunc(w/x[N]),w%=x[N]}return[y,[a,l],c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ET(t,e,n,s,r,i=!1,a=0){const l=s.length,c=[e[0],t.length/e[0]],u=c[1],h=l>0?r[l-1]+1:0;if(h<0)throw new Error(U3());const p=e.slice();p[0]=h;const g=p.reduce((k,C)=>k*C,1),x=_s(n,g);if(l===0)return h>0&&x.fill(a),[x,p];if(h<=0)throw new Error(U3());let y=0,v=1,w=0,N=r[y];for(;;){let k=0;if(v<l){if(k=r[v],N===k){++v;continue}if(N>=k)throw new Error(NM())}if(N<0||N>=h)throw new Error(SM(N,h));N>w&&x.fill(a,w*u,N*u);for(let C=y;C<v;++C){const j=s[C];if(j<0||j>=c[0])throw new Error(kM(C,s[C],c[0]));for(let R=0;R<u;R++)x[N*u+R]+=t[j*u+R]}if(i)for(let C=0;C<u;C++)x[N*u+C]/=v-y;if(y=v,++v,w=N+1,N=k,v>l)break}return w<h&&x.fill(a,w*u,h*u),[x,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jye=ol(t=>Math.sqrt(t)),Qye=Un(Og,t=>Math.sqrt(t)),e2e={kernelName:Og,backendName:"cpu",kernelFunc:Qye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A9=Ls(((t,e)=>{const n=t-e;return n*n})),t2e=ir(Fg,A9),n2e={kernelName:Fg,backendName:"cpu",kernelFunc:t2e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R9=ol((t,e)=>{const{pattern:n,replaceGlobal:s,rewrite:r}=e;return t.replace(new RegExp(n,s?"g":""),r)}),s2e=vu(O2,R9),r2e={kernelName:O2,backendName:"cpu",kernelFunc:s2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9(t,e,n,s){const r=un(t,e.dtype);for(let i=0;i<r.size;i++){const a=r.indexToLoc(i),l=new Array(a.length);for(let c=0;c<l.length;c++)l[c]=a[c]*n[c]+s[c];r.set(e.get(...l),...a)}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i2e{constructor(e,n,s,r,i,a){this.separator=Oc(e),this.nGramWidths=n,this.leftPad=Oc(s),this.rightPad=Oc(r),this.padWidth=i,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const s=this.getPadWidth(n);return Math.max(0,e+2*s-n+1)}createNGrams(e,n,s,r,i,a){for(let l=0;l<i;++l){const c=this.getPadWidth(a),u=Math.max(0,c-l),d=Math.max(0,c-(i-(l+1))),h=a-(u+d),p=n+(u>0?0:l-c);let g=0;g+=u*this.leftPad.length;for(let N=0;N<h;++N)g+=e[p+N].length;g+=d*this.rightPad.length;const x=u+d+h-1;g+=x*this.separator.length,s[r+l]=new Uint8Array(g);const y=s[r+l];let v=0;const w=N=>N.forEach(k=>y[v++]=k);for(let N=0;N<u;++N)w(this.leftPad),w(this.separator);for(let N=0;N<h-1;++N)w(e[p+N]),w(this.separator);if(h>0){w(e[p+h-1]);for(let N=0;N<d;++N)w(this.separator),w(this.rightPad)}else{for(let N=0;N<d-1;++N)w(this.rightPad),w(this.separator);w(this.rightPad)}}}compute(e,n){const s=e.length,r=n.length;if(r>0){let c=n[0];if(c!==0)throw new Error(`First split value must be 0, got ${c}`);for(let u=1;u<r;++u){let d=n[u]>=c;if(d=d&&n[u]<=s,!d)throw new Error(`Invalid split value ${n[u]}, must be in [${c}, ${s}]`);c=n[u]}if(c!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${c}`)}const i=r-1,a=_s("int32",r);if(s===0||r===0){const c=new Array(s);for(let u=0;u<=i;++u)a[u]=0;return[c,a]}a[0]=0;for(let c=1;c<=i;++c){const u=n[c]-n[c-1];let d=0;this.nGramWidths.forEach(h=>{d+=this.getNumNGrams(u,h)}),this.preserveShort&&u>0&&d===0&&(d=1),a[c]=a[c-1]+d}const l=new Array(a[i]);for(let c=0;c<i;++c){const u=n[c];let d=a[c];if(this.nGramWidths.forEach(h=>{const p=n[c+1]-n[c],g=this.getNumNGrams(p,h);this.createNGrams(e,u,l,d,g,h),d+=g}),this.preserveShort&&d===a[c]){const h=n[c+1]-n[c];if(h===0)continue;const p=h+2*this.padWidth;this.createNGrams(e,u,l,d,1,p)}}return[l,a]}}function P9(t,e,n,s,r,i,a,l){return new i2e(n,s,r,i,a,l).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2e(t,e,n,s){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)s.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let a=t.indexOf(i);for(;a!==-1;){const l=t.subarray(0,a);(!n||l.length!==0)&&s.push(l),t=t.subarray(a+1),a=t.indexOf(i)}(!n||t.length!==0)&&s.push(t);return}let r=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const a=t.subarray(r,i);(!n||a.length!==0)&&s.push(a),r=i+1}}function _9(t,e,n){const s=t.length,r=[];let i=0,a=0;const l=new Array(s);for(let p=0;p<s;++p){const g=r.length;a2e(t[p],e,n,r);const x=r.length-g;l[p]=x,i+=x,a=Math.max(a,x)}const c=_s("int32",i*2),u=new Array(i),d=[s,a];let h=0;for(let p=0;p<s;++p)for(let g=0;g<l[p];++g)c[h*2]=p,c[h*2+1]=g,u[h]=r[h],++h;return[c,u,d]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O9(t,e){const n=_s("int32",t.length);for(let s=0;s<t.length;++s)n[s]=Sae(t[s]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F9=Ls(((t,e)=>t-e)),o2e=CT(((t,e,n,s)=>({real:t-n,imag:e-s}))),$T=ir(Mg,F9,o2e),l2e={kernelName:Mg,backendName:"cpu",kernelFunc:$T};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M9(t,e){const n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];const s=un(n,t.dtype);for(let r=0;r<s.values.length;++r){const i=s.indexToLoc(r),a=new Array(t.rank);for(let c=0;c<a.length;c++)a[c]=i[c]%t.shape[c];const l=t.locToIndex(a);s.values[r]=t.values[l]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zp=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function L9(t,e,n=0,s=t.length-1){for(;s>n;){if(s-n>600){const l=s-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*Math.sign(c-l/2),p=Math.max(n,Math.floor(e-c*d/l+h)),g=Math.min(s,Math.floor(e+(l-c)*d/l+h));L9(t,e,p,g)}const r=t[e];let i=n,a=s;for(Mh(t,n,e),zp(t[s],r)>0&&Mh(t,n,s);i<a;){for(Mh(t,i,a),i++,a--;zp(t[i],r)<0;)i=i+1;for(;zp(t[a],r)>0;)a=a-1}zp(t[n],r)===0?Mh(t,n,a):(a=a+1,Mh(t,a,s)),a<=e&&(n=a+1),e<=a&&(s=a-1)}}function B9(t,e,n,s,r){const i=e[e.length-1],[a,l]=[t.length/i,i],c=Cr(n,a*s),u=Cr("int32",a*s);for(let h=0;h<a;h++){const p=h*l,g=t.subarray(p,p+l);let x=new Array(g.length);g.forEach((N,k)=>x[k]={value:N,index:k}),s<x.length&&(L9(x,s),x=x.slice(0,s)),r&&x.sort(zp);const y=h*s,v=c.subarray(y,y+s),w=u.subarray(y,y+s);for(let N=0;N<s;N++)v[N]=x[N].value,w[N]=x[N].index}const d=e.slice();return d[d.length-1]=s,[un(d,n,c),un(d,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z9(t,e,n,s){const r=fn(e,n)[0],i=[1,n[0],1];for(let x=0;x<r;x++)i[0]*=n[x];i[1]=n[r];for(let x=r+1;x<n.length;x++)i[2]*=n[x];const a=new Map,l=new Int32Array(n[r]),c=new tr(i,s,t),u=[],d=i[0]===1&&i[2]===1;for(let x=0;x<n[r];x++){let y;if(d)y=t[x].toString();else{const w=[];for(let N=0;N<i[0];N++)for(let k=0;k<i[2];k++)w.push(c.get(N,x,k));y=w.join(",")}const v=a.get(y);if(v!=null)l[x]=v;else{const w=a.size;a.set(y,w),l[x]=w,u.push(x)}}const h=i.slice();h[1]=a.size;const p=new tr(h,s);u.forEach((x,y)=>{for(let v=0;v<i[0];v++)for(let w=0;w<i[2];w++)p.set(c.get(v,x,w),v,y,w)});const g=n.slice();return g[r]=h[1],{outputValues:p.values,outputShape:g,indices:l}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c2e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Y7,bincountImpl:TT,bincountReduceImpl:Z7,bitwiseAndImpl:J7,castImpl:X7,ceilImpl:Q7,concatImpl:e9,equalImpl:t9,expImpl:s9,expm1Impl:i9,floorDivImpl:o9,floorImpl:a9,gatherNdImpl:l9,gatherV2Impl:c9,greaterEqualImpl:d9,greaterImpl:u9,lessEqualImpl:f9,lessImpl:h9,linSpaceImpl:p9,logImpl:m9,maxImpl:g9,maximumImpl:x9,minimumImpl:y9,multiplyImpl:IT,negImpl:v9,notEqualImpl:b9,prodImpl:w9,raggedGatherImpl:N9,raggedRangeImpl:S9,raggedTensorToTensorImpl:k9,rangeImpl:C9,rsqrtImpl:T9,scatterImpl:id,sigmoidImpl:Xye,simpleAbsImpl:q7,sliceImpl:j9,sparseFillEmptyRowsImpl:E9,sparseReshapeImpl:$9,sparseSegmentReductionImpl:ET,sqrtImpl:Jye,squaredDifferenceImpl:A9,staticRegexReplaceImpl:R9,stridedSliceImpl:D9,stringNGramsImpl:P9,stringSplitImpl:_9,stringToHashBucketFastImpl:O9,subImpl:F9,tileImpl:M9,topKImpl:B9,transposeImpl:jT,uniqueImpl:z9},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */mF("cpu",()=>new Nv,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V9=Un(og,t=>t>=0?t:Math.exp(t)-1),u2e={kernelName:og,backendName:"cpu",kernelFunc:V9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U9(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{alpha:i}=s;Ct([r],"leakyRelu");const a=Le(r.shape),l=n.data.get(r.dataId).values,c=Cr("float32",a);for(let u=0;u<l.length;u++)c[u]=l[u]<0?i*l[u]:l[u];return n.makeTensorInfo(r.shape,"float32",c)}const d2e={kernelName:i2,backendName:"cpu",kernelFunc:U9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2e=Ls((t,e)=>t<0?e*t:t);function W9(t){const{inputs:e,backend:n}=t,{x:s,alpha:r}=e;Ct([s,r],"prelu");const i=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values,[l,c]=h2e(s.shape,r.shape,i,a,"float32");return n.makeTensorInfo(c,"float32",l)}const f2e={kernelName:k2,backendName:"cpu",kernelFunc:W9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G9=Un(Tg,t=>Math.max(0,t)),p2e={kernelName:Tg,backendName:"cpu",kernelFunc:G9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H9=Un(Ig,t=>Math.min(Math.max(0,t),6)),m2e={kernelName:Ig,backendName:"cpu",kernelFunc:H9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0(t,e,n,s,r){if(n==="linear")return rl({inputs:{x:e},backend:t});if(n==="relu")return G9({inputs:{x:e},backend:t});if(n==="elu")return V9({inputs:{x:e},backend:t});if(n==="relu6")return H9({inputs:{x:e},backend:t});if(n==="prelu")return W9({inputs:{x:e,alpha:s},backend:t});if(n==="leakyrelu")return U9({inputs:{x:e},backend:t,attrs:{alpha:r}});if(n==="sigmoid")return I9({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ts(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{shape:i}=s,a=Le(r.shape),l=GO(i,a),c=Le(l);K(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${r.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(r.dataId);const u=n.data.get(r.dataId);if(u.complexTensorInfos!=null){const d=u.complexTensorInfos.real,h=u.complexTensorInfos.imag;d.shape=l,h.shape=l}return{dataId:r.dataId,shape:l,dtype:r.dtype}}const g2e={kernelName:T2,backendName:"cpu",kernelFunc:ts};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K9(t){const{inputs:e,backend:n,attrs:s}=t,{a:r,b:i}=e,{transposeA:a,transposeB:l}=s;Ct([r,i],"matMul");const c=r.shape.length,u=i.shape.length,d=a?r.shape[c-2]:r.shape[c-1],h=l?i.shape[u-1]:i.shape[u-2],p=a?r.shape[c-1]:r.shape[c-2],g=l?i.shape[u-2]:i.shape[u-1],x=r.shape.slice(0,-2),y=i.shape.slice(0,-2),v=Le(x),w=Le(y),k=rn(r.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,g]);K(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${r.shape} and ${i.shape} and transposeA=${a} and transposeB=${l} must match.`);const C=a?[v,d,p]:[v,p,d],j=l?[w,g,h]:[w,h,g],R=ts({inputs:{x:r},backend:n,attrs:{shape:C}}),_=ts({inputs:{x:i},backend:n,attrs:{shape:j}}),A=a?R.shape[1]:R.shape[2],O=a?R.shape[2]:R.shape[1],L=l?_.shape[1]:_.shape[2],D=Math.max(v,w),q=n.data.get(R.dataId).values,V=n.data.get(_.dataId).values,ne=Mt(R.shape),J=Mt(_.shape),[ee,te,X]=a?[ne[0],1,ne[1]]:[ne[0],ne[1],1],[Q,G,H]=l?[1,J[1],J[0]]:[J[1],1,J[0]],ie=O*L,de=un([D,O,L],R.dtype),ke=de.values,we=n.blockSize;for(let Ee=0;Ee<D;Ee++){const Ce=Ee%v,Re=Ee%w;for(let se=0;se<O;se+=we){const Te=Math.min(se+we,O);for(let Me=0;Me<L;Me+=we){const Ye=Math.min(Me+we,L);for(let me=0;me<A;me+=we){const xe=Math.min(me+we,A);for(let $e=se;$e<Te;$e++)for(let Ze=Me;Ze<Ye;Ze++){let bt=0;for(let $t=me;$t<xe;$t++){const at=q[Ce*ee+$e*te+$t*X],nt=V[$t*Q+Ze*G+Re*H];bt+=at*nt}ke[Ee*ie+($e*L+Ze)]+=bt}}}}}return n.disposeIntermediateTensorInfo(R),n.disposeIntermediateTensorInfo(_),n.makeTensorInfo(k,de.dtype,de.values)}const x2e={kernelName:Uy,backendName:"cpu",kernelFunc:K9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2e(t){const{inputs:e,backend:n,attrs:s}=t,{a:r,b:i,bias:a,preluActivationWeights:l}=e,{transposeA:c,transposeB:u,activation:d,leakyreluAlpha:h}=s;let p,g,x;const y=[];p=K9({inputs:{a:r,b:i},attrs:{transposeA:c,transposeB:u},backend:n}),a&&(g=Nf({inputs:{a:p,b:a},backend:n}),y.push(p),p=g),d&&(x=Z0(n,p,d,l,h),y.push(p),p=x);for(const w of y)n.disposeIntermediateTensorInfo(w);return p}const v2e={kernelName:$0,backendName:"cpu",kernelFunc:y2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b2e=Un(qm,t=>Math.acos(t)),w2e={kernelName:qm,backendName:"cpu",kernelFunc:b2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N2e=Un(Xm,t=>Math.acosh(t)),S2e={kernelName:Xm,backendName:"cpu",kernelFunc:N2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t){const{inputs:e,backend:n}=t,s=e;Ct(e,"addN");const r=s.map(l=>n.data.get(l.dataId).values),i=un(s[0].shape,s[0].dtype),a=i.values;for(let l=0;l<s.length;l++){const c=r[l];for(let u=0;u<a.length;u++)a[u]+=c[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const C2e={kernelName:My,backendName:"cpu",kernelFunc:k2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s;Ct(r,"all");const l=fn(i,r.shape);let c=l;const u=Ns(c,r.shape.length);let d=r;u!=null&&(d=Ni({inputs:{x:r},backend:n,attrs:{perm:u}}),c=Fs(c.length,r.shape.length)),jr("all",c,d.shape.length);const[h,p]=mr(d.shape,c),g=Le(p),x=Or(Le(h),d.dtype),y=n.data.get(d.dataId).values;for(let w=0;w<x.length;++w){const N=w*g;let k=y[N];for(let C=0;C<g;++C){const j=y[N+C];k=k&&j}x[w]=k}u!=null&&n.disposeIntermediateTensorInfo(d);const v=n.makeTensorInfo(h,d.dtype,x);if(a){const w=Os(h,l),N=ts({inputs:{x:v},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(v),N}return v}const I2e={kernelName:US,backendName:"cpu",kernelFunc:T2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s;Ct(r,"any");const l=fn(i,r.shape);let c=l;const u=Ns(c,r.shape.length);let d=r;u!=null&&(d=Ni({inputs:{x:r},backend:n,attrs:{perm:u}}),c=Fs(c.length,r.shape.length)),jr("any",c,d.shape.length);const[h,p]=mr(d.shape,c),g=Le(p),x=Or(Le(h),d.dtype),y=n.data.get(d.dataId).values;for(let w=0;w<x.length;++w){const N=w*g;let k=y[N];for(let C=0;C<g;++C){const j=y[N+C];k=k||j}x[w]=k}u!=null&&n.disposeIntermediateTensorInfo(d);const v=n.makeTensorInfo(h,d.dtype,x);if(a){const w=Os(h,l),N=ts({inputs:{x:v},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(v),N}return v}const E2e={kernelName:WS,backendName:"cpu",kernelFunc:j2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i}=s;Ct(r,"argMax");let a=fn(i,r.shape);const l=Ns(a,r.shape.length);let c=r;const u=[];l!=null&&(c=Ni({inputs:{x:r},backend:n,attrs:{perm:l}}),u.push(c),a=Fs(a.length,c.shape.length)),a=[a[0]],jr("argMax",a,c.shape.length);const[d,h]=mr(c.shape,a),p=Le(d),g=Or(p,"int32"),x=Le(h),y=n.data.get(c.dataId).values;for(let v=0;v<g.length;++v){const w=v*x;let N=y[w],k=0;for(let C=0;C<x;++C){const j=y[w+C];j>N&&(N=j,k=C)}g[v]=k}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(d,"int32",g)}const A2e={kernelName:Ly,backendName:"cpu",kernelFunc:$2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i}=s;Ct(r,"argMin");let a=fn(i,r.shape);const l=Ns(a,r.shape.length);let c=r;const u=[];l!=null&&(c=Ni({inputs:{x:r},backend:n,attrs:{perm:l}}),u.push(c),a=Fs(a.length,c.shape.length)),a=[a[0]],jr("argMin",a,c.shape.length);const[d,h]=mr(c.shape,a),p=Le(d),g=Or(p,"int32"),x=Le(h),y=n.data.get(c.dataId).values;for(let v=0;v<g.length;++v){const w=v*x;let N=y[w],k=0;for(let C=0;C<x;++C){const j=y[w+C];j<N&&(N=j,k=C)}g[v]=k}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(d,"int32",g)}const D2e={kernelName:By,backendName:"cpu",kernelFunc:R2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P2e=Un(Ym,t=>Math.asin(t)),_2e={kernelName:Ym,backendName:"cpu",kernelFunc:P2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O2e=Un(Zm,t=>Math.asinh(t)),F2e={kernelName:Zm,backendName:"cpu",kernelFunc:O2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e=Un(Jm,t=>Math.atan(t)),L2e={kernelName:Jm,backendName:"cpu",kernelFunc:M2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B2e=Ls((t,e)=>Math.atan2(t,e)),z2e=ir(eg,B2e),V2e={kernelName:eg,backendName:"cpu",kernelFunc:z2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U2e=Un(Qm,t=>Math.atanh(t)),W2e={kernelName:Qm,backendName:"cpu",kernelFunc:U2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AT(t,e,n,s,r,i){const a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,g=r.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=un(r.outShape,n),v=y.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3],N=r.outShape[2]*r.outShape[3],k=r.outShape[3];for(let C=0;C<r.batchSize;++C){const j=C*w,R=C*s[0];for(let _=0;_<r.inChannels;++_)for(let A=0;A<r.outHeight;++A){const O=A*a-p,L=Math.max(0,O),D=Math.min(r.inHeight,d+O),q=j+A*N;for(let V=0;V<r.outWidth;++V){const ne=V*l-g,J=Math.max(0,ne),ee=Math.min(r.inWidth,h+ne);let te=x,X=0,Q=0;for(let H=L;H<D;H+=c){const ie=R+H*s[1];for(let de=J;de<ee;de+=u){const ke=ie+de*s[2],we=t[ke+_];i==="max"&&we>te?te=we:i==="avg"&&(X+=we,Q++)}if(isNaN(te))break}const G=q+V*k+_;v[G]=i==="avg"?X/Q:te}}}return y}function q9(t,e,n,s,r=!1,i=!1){const a=un(s.outShape,"int32"),l=s.strideHeight,c=s.strideWidth,u=s.dilationHeight,d=s.dilationWidth,h=s.effectiveFilterHeight,p=s.effectiveFilterWidth,g=s.padInfo.top,x=s.padInfo.left,y=un(e,n,t);for(let v=0;v<s.batchSize;++v)for(let w=0;w<s.inChannels;++w)for(let N=0;N<s.outHeight;++N){const k=N*l-g;let C=k;for(;C<0;)C+=u;const j=Math.min(s.inHeight,h+k);for(let R=0;R<s.outWidth;++R){const _=R*c-x;let A=_;for(;A<0;)A+=d;const O=Math.min(s.inWidth,p+_);let L=Number.NEGATIVE_INFINITY,D=-1;for(let q=C;q<j;q+=u){const V=q-k;for(let ne=A;ne<O;ne+=d){const J=ne-_,ee=y.get(v,q,ne,w);ee>L&&(L=ee,r?D=i?((v*s.inHeight+q)*s.inWidth+ne)*s.inChannels+w:(q*s.inWidth+ne)*s.inChannels+w:D=V*p+J)}}a.set(D,v,N,R,w)}}return a}function X9(t,e,n,s,r,i){const a=r.strideDepth,l=r.strideHeight,c=r.strideWidth,u=r.dilationDepth,d=r.dilationHeight,h=r.dilationWidth,p=r.effectiveFilterDepth,g=r.effectiveFilterHeight,x=r.effectiveFilterWidth,y=r.padInfo.front,v=r.padInfo.top,w=r.padInfo.left,N=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,k=un(r.outShape,n),C=k.values,j=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],R=r.outShape[2]*r.outShape[3]*r.outShape[4],_=r.outShape[3]*r.outShape[4],A=r.outShape[4];for(let O=0;O<r.batchSize;++O){const L=O*j,D=O*s[0];for(let q=0;q<r.inChannels;++q)for(let V=0;V<r.outDepth;++V){const ne=V*a-y;let J=ne;for(;J<0;)J+=u;const ee=Math.min(r.inDepth,p+ne),te=L+V*R;for(let X=0;X<r.outHeight;++X){const Q=X*l-v;let G=Q;for(;G<0;)G+=d;const H=Math.min(r.inHeight,g+Q),ie=te+X*_;for(let de=0;de<r.outWidth;++de){const ke=de*c-w;let we=ke;for(;we<0;)we+=h;const Ee=Math.min(r.inWidth,x+ke),Ce=ie+de*A;let Re=N,se=0,Te=0;for(let Ye=J;Ye<ee;Ye+=u){const me=D+Ye*s[1];for(let xe=G;xe<H;xe+=d){const $e=me+xe*s[2];for(let Ze=we;Ze<Ee;Ze+=h){const bt=$e+Ze*s[3],$t=t[bt+q];if(i==="max"&&$t>Re?Re=$t:i==="avg"&&(se+=$t,Te++),isNaN(Re))break}if(isNaN(Re))break}if(isNaN(Re))break}const Me=Ce+q;C[Me]=i==="avg"?se/Math.max(Te,1):Re}}}}return k}function G2e(t,e){const n=un(e.outShape,"int32"),s=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.front,g=e.padInfo.top,x=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let v=0;v<e.inChannels;++v)for(let w=0;w<e.outDepth;++w){const N=w*s-p;let k=N;for(;k<0;)k+=a;const C=Math.min(e.inDepth,u+N);for(let j=0;j<e.outHeight;++j){const R=j*r-g;let _=R;for(;_<0;)_+=l;const A=Math.min(e.inHeight,d+R);for(let O=0;O<e.outWidth;++O){const L=O*i-x;let D=L;for(;D<0;)D+=c;const q=Math.min(e.inWidth,h+L);let V=Number.NEGATIVE_INFINITY,ne=-1;for(let J=k;J<C;J+=a){const ee=J-N;for(let te=_;te<A;te+=l){const X=te-R;for(let Q=D;Q<q;Q+=c){const G=Q-L,H=t.get(y,J,te,Q,v);H>=V&&(V=H,ne=ee*d*h+X*d+G)}}}n.set(ne,y,w,j,O,v)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H2e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e;Ct(r,"avgPool");const{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=s,u=1;K(Ir(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=Fa(r.shape,i,a,u,l,c);let h;if(d.filterWidth===1&&d.filterHeight===1&&bn(d.inShape,d.outShape))h=rl({inputs:{x:r},backend:n});else{const p=n.data.get(r.dataId).values,g=Mt(r.shape),x=AT(p,r.shape,r.dtype,g,d,"avg");h=n.makeTensorInfo(d.outShape,r.dtype,x.values)}return h}const K2e={kernelName:zy,backendName:"cpu",kernelFunc:H2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c,dataFormat:u}=s;Ct(r,"avgPool3d");const d=Yl(r.shape,i,a,1,l,c,u),h=n.data.get(r.dataId).values,p=X9(h,r.shape,r.dtype,Mt(r.shape),d,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const X2e={kernelName:Vy,backendName:"cpu",kernelFunc:q2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:i}=e,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=s;Ct([r,i],"avgPool3DGrad");const d=Yl(i.shape,a,l,1,c,u),h=d.strideDepth,p=d.strideHeight,g=d.strideWidth,x=d.filterDepth,y=d.filterHeight,v=d.filterWidth,w=d.dilationDepth,N=d.dilationHeight,k=d.dilationWidth,C=d.effectiveFilterDepth,j=d.effectiveFilterHeight,R=d.effectiveFilterWidth,_=C-1-d.padInfo.front,A=R-1-d.padInfo.left,O=j-1-d.padInfo.top,L=un(i.shape,"float32"),D=1/(x*y*v),q=n.bufferSync(r);for(let V=0;V<d.batchSize;++V)for(let ne=0;ne<d.inChannels;++ne)for(let J=0;J<d.inDepth;++J)for(let ee=0;ee<d.inHeight;++ee)for(let te=0;te<d.inWidth;++te){const X=J-_,Q=ee-O,G=te-A;let H=0;for(let ie=0;ie<C;ie+=w){const de=(X+ie)/h;if(!(de<0||de>=d.outDepth||Math.floor(de)!==de))for(let ke=0;ke<j;ke+=N){const we=(Q+ke)/p;if(!(we<0||we>=d.outHeight||Math.floor(we)!==we))for(let Ee=0;Ee<R;Ee+=k){const Ce=(G+Ee)/g;if(Ce<0||Ce>=d.outWidth||Math.floor(Ce)!==Ce)continue;const Re=q.get(V,de,we,Ce,ne);H+=Re}}}L.set(H*D,V,J,ee,te,ne)}return n.makeTensorInfo(L.shape,L.dtype,L.values)}const Z2e={kernelName:HS,backendName:"cpu",kernelFunc:Y2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:i}=e,a=i;Ct([r,i],"avgPoolGrad");const{filterSize:l,strides:c,pad:u}=s,d=Fa(a.shape,l,c,1,u),h=d.strideHeight,p=d.strideWidth,g=d.filterHeight,x=d.filterWidth,y=d.dilationHeight,v=d.dilationWidth,w=d.effectiveFilterHeight,N=d.effectiveFilterWidth,k=N-1-d.padInfo.left,C=w-1-d.padInfo.top,j=un(a.shape,"float32"),R=1/(g*x),_=n.data.get(r.dataId).values,A=un(r.shape,"float32",_);for(let O=0;O<d.batchSize;++O)for(let L=0;L<d.inChannels;++L)for(let D=0;D<d.inHeight;++D)for(let q=0;q<d.inWidth;++q){const V=D-C,ne=q-k;let J=0;for(let ee=0;ee<w;ee+=y){const te=(V+ee)/h;if(!(te<0||te>=d.outHeight||Math.floor(te)!==te))for(let X=0;X<N;X+=v){const Q=(ne+X)/p;if(Q<0||Q>=d.outWidth||Math.floor(Q)!==Q)continue;const G=A.get(O,te,Q,L);J+=G}}j.set(J*R,O,D,q,L)}return n.makeTensorInfo(j.shape,j.dtype,j.values)}const Q2e={kernelName:GS,backendName:"cpu",kernelFunc:J2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eve(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,scale:i,offset:a,mean:l,variance:c}=e;K(l.shape.length===c.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),K(a==null||l.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),K(i==null||l.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ct([r,l,c,i,a],"batchNorm");let{varianceEpsilon:u}=s;u==null&&(u=.001);const d=n.data.get(r.dataId).values,h=n.data.get(l.dataId).values,p=n.data.get(c.dataId).values,g=i?n.data.get(i.dataId).values:new Float32Array([1]),x=a?n.data.get(a.dataId).values:new Float32Array([0]),y=new Float32Array(d.length),v=x.length,w=g.length,N=p.length,k=h.length;let C=0,j=0,R=0,_=0;for(let A=0;A<d.length;++A)y[A]=x[C++]+(d[A]-h[j++])*g[R++]/Math.sqrt(p[_++]+u),C>=v&&(C=0),j>=k&&(j=0),R>=w&&(R=0),_>=N&&(_=0);return n.makeTensorInfo(r.shape,r.dtype,y)}const tve={kernelName:n2,backendName:"cpu",kernelFunc:eve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nve(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockShape:i,crops:a}=s;Ct([r],"batchToSpaceND");const l=i.reduce((w,N)=>w*N),c=Zg(r.shape,i,l),u=Jg(c.length,i.length),d=Qg(r.shape,i,l),h=zC(a,i.length),p=VC(d,a,i.length),g=ts({inputs:{x:r},backend:n,attrs:{shape:c}}),x=Ni({inputs:{x:g},backend:n,attrs:{perm:u}}),y=ts({inputs:{x},backend:n,attrs:{shape:d}}),v=Ad({inputs:{x:y},backend:n,attrs:{begin:h,size:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(y),v}const sve={kernelName:Wy,backendName:"cpu",kernelFunc:nve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rve(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,weights:i}=e,{size:a}=s,l=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,u=TT(l,c,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,u)}const ive={kernelName:KS,backendName:"cpu",kernelFunc:rve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ave(t){const{inputs:e,backend:n}=t,{s0:s,s1:r}=e,i=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values,l=rn(Array.from(i),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}const ove={kernelName:qS,backendName:"cpu",kernelFunc:ave};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lve=Un(sg,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),cve={kernelName:sg,backendName:"cpu",kernelFunc:lve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uve=t=>{const{x:e}=t.inputs,n=t.backend,s=new Float32Array(Le(e.shape)),r=n.data.get(e.dataId),i=r.complexTensorInfos.real,a=r.complexTensorInfos.imag,l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values;for(let u=0;u<l.length;u++){const d=l[u],h=c[u];s[u]=Math.hypot(d,h)}return n.makeOutput(s,e.shape,"float32")},dve={kernelName:Hy,backendName:"cpu",kernelFunc:uve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sf(t){const{inputs:e,backend:n}=t,{input:s}=e,r=n.data.get(s.dataId).complexTensorInfos.imag,i=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,i)}const hve={kernelName:fk,backendName:"cpu",kernelFunc:Sf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kf(t){const{inputs:e,backend:n,attrs:s}=t,{axis:r}=s,i=fn(r,e[0].shape)[0],a=e.map(y=>y.shape);MC(a,i);let l=Xo(e.map(y=>y.shape),i);if(Le(l)===0)return n.makeTensorInfo(l,e[0].dtype,[]);const c=e.filter(y=>Le(y.shape)>0);if(c.length===1)return rl({inputs:{x:c[0]},backend:n});if(c[0].dtype==="complex64"){const y=c.map(C=>$d({inputs:{input:C},backend:n})),v=c.map(C=>Sf({inputs:{input:C},backend:n})),w=kf({inputs:y,backend:n,attrs:{axis:i}}),N=kf({inputs:v,backend:n,attrs:{axis:i}}),k=Li({inputs:{real:w,imag:N},backend:n});return y.forEach(C=>n.disposeIntermediateTensorInfo(C)),v.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(N),k}const u=c.map(y=>{const w=[-1,Le(y.shape.slice(i))];return ts({inputs:{x:y},backend:n,attrs:{shape:w}})}),d=u.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));l=Xo(u.map(y=>y.shape),1);const h=u[0].shape[0]===1,p=e9(d,l,e[0].dtype,h),g=Xo(c.map(y=>y.shape),i),x=n.makeTensorInfo(g,e[0].dtype,p);return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),x}const fve={kernelName:Ky,backendName:"cpu",kernelFunc:kf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y9(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i}=e,{strides:a,pad:l,dataFormat:c,dilations:u,dimRoundingMode:d}=s;Ct([r,i],"conv2d");const h=Zl(c),p=pr(r.shape,i.shape,a,u,l,d,!1,h),g=p.filterHeight,x=p.filterWidth,y=p.dilationHeight,v=p.dilationWidth,w=p.padInfo.left,N=p.padInfo.top,k=p.dataFormat==="channelsLast",C=new tr(p.outShape,r.dtype),j=Mt(r.shape),R=Mt(i.shape),_=j[0],A=k?j[1]:j[2],O=k?j[2]:1,L=k?1:j[1],D=C.strides[0],q=k?C.strides[1]:C.strides[2],V=k?C.strides[2]:1,ne=k?1:C.strides[1],J=n.data.get(r.dataId).values,ee=n.data.get(i.dataId).values,te=C.values;for(let X=0;X<p.batchSize;++X){const Q=X*_,G=X*D;for(let H=0;H<p.outHeight;++H){const ie=G+H*q,de=H*p.strideHeight-N;for(let ke=0;ke<g;++ke){const we=de+ke*y;if(we<0||we>=p.inHeight)continue;const Ee=ke*R[0],Ce=Q+we*A;for(let Re=0;Re<p.outWidth;++Re){const se=ie+Re*V,Te=Re*p.strideWidth-w;for(let Me=0;Me<x;++Me){const Ye=Te+Me*v;if(Ye<0||Ye>=p.inWidth)continue;const me=Ee+Me*R[1],xe=Ce+Ye*O;let $e=me;for(let Ze=0;Ze<p.inChannels;++Ze){const bt=J[xe+Ze*L];for(let $t=0;$t<p.outChannels;++$t)te[se+$t*ne]+=bt*ee[$e+$t];$e+=p.outChannels}}}}}}return n.makeTensorInfo(C.shape,C.dtype,te)}const pve={kernelName:qy,backendName:"cpu",kernelFunc:Y9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mve(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:i}=e,{strides:a,pad:l,dataFormat:c,dimRoundingMode:u,filterShape:d}=s;Ct([r,i],"conv2dBackpropFilter");const h=Zl(c),p=pr(r.shape,d,a,1,l,u,!1,h),{strideHeight:g,strideWidth:x,filterHeight:y,filterWidth:v}=p,w=p.dataFormat==="channelsLast",N=new tr(p.filterShape,"float32"),k=p.padInfo.left,C=p.padInfo.top,j=n.data.get(r.dataId).values,R=n.data.get(i.dataId).values,_=new tr(r.shape,r.dtype,j),A=new tr(i.shape,i.dtype,R);for(let O=0;O<y;++O){const L=Math.max(0,Math.ceil((C-O)/g)),D=Math.min(p.outHeight,(p.inHeight+C-O)/g);for(let q=0;q<v;++q){const V=Math.max(0,Math.ceil((k-q)/x)),ne=Math.min(p.outWidth,(p.inWidth+k-q)/x);for(let J=0;J<p.inChannels;++J)for(let ee=0;ee<p.outChannels;++ee){let te=0;for(let X=0;X<p.batchSize;++X)for(let Q=L;Q<D;++Q){const G=O+Q*g-C;for(let H=V;H<ne;++H){const ie=q+H*x-k;w?te+=_.get(X,G,ie,J)*A.get(X,Q,H,ee):te+=_.get(X,J,G,ie)*A.get(X,ee,Q,H)}}N.set(te,O,q,J,ee)}}}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const gve={kernelName:YS,backendName:"cpu",kernelFunc:mve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xve(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:i}=e,{inputShape:a,strides:l,pad:c,dataFormat:u,dimRoundingMode:d}=s;Ct([r,i],"conv2dBackpropInput");const h=Mt(i.shape),p=Mt(r.shape);let g=Zl(u);const x=pr(a,i.shape,l,1,c,d,!1,g),y=new tr(x.inShape,"float32"),v=y.values,w=n.data.get(r.dataId).values,N=n.data.get(i.dataId).values,[k,C,j]=h,{batchSize:R,filterHeight:_,filterWidth:A,inChannels:O,inHeight:L,inWidth:D,outChannels:q,outHeight:V,outWidth:ne,strideHeight:J,strideWidth:ee}=x;g=x.dataFormat;const te=_-1-x.padInfo.top,X=A-1-x.padInfo.left,Q=g==="channelsLast",G=y.strides[0],H=Q?y.strides[1]:y.strides[2],ie=Q?y.strides[2]:1,de=Q?1:y.strides[1],ke=p[0],we=Q?p[1]:p[2],Ee=Q?p[2]:1,Ce=Q?1:p[1];for(let Re=0;Re<R;++Re)for(let se=0;se<O;++se)for(let Te=0;Te<L;++Te){const Me=Te-te,Ye=Math.max(0,Math.ceil(Me/J)),me=Math.min(V,(_+Me)/J);for(let xe=0;xe<D;++xe){const $e=xe-X,Ze=Math.max(0,Math.ceil($e/ee)),bt=Math.min(ne,(A+$e)/ee);let $t=0;for(let nt=Ye;nt<me;++nt){const Xt=nt*J-Me;for(let dn=Ze;dn<bt;++dn){const Zn=dn*ee-$e,Gn=ke*Re+we*nt+Ee*dn,Jn=k*(_-1-Xt)+C*(A-1-Zn)+j*se;for(let $n=0;$n<q;++$n){const ms=w[Gn+Ce*$n],In=N[Jn+$n];$t+=ms*In}}}const at=G*Re+H*Te+ie*xe+de*se;v[at]=$t}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const yve={kernelName:Xy,backendName:"cpu",kernelFunc:xve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vve(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i}=e,{strides:a,pad:l,dilations:c}=s;Ct([r,i],"conv3d");const u=fu(r.shape,i.shape,a,c,l),{filterDepth:d,filterHeight:h,filterWidth:p,dilationDepth:g,dilationHeight:x,dilationWidth:y,padInfo:v}=u,w=v.front,N=v.left,k=v.top,C=new tr(u.outShape,r.dtype),j=n.data.get(r.dataId).values,R=n.data.get(i.dataId).values,_=C.values,A=Mt(r.shape),O=Mt(i.shape);for(let L=0;L<u.batchSize;++L){const D=L*A[0],q=L*C.strides[0];for(let V=0;V<u.outDepth;++V){const ne=q+V*C.strides[1],J=V*u.strideDepth-w;for(let ee=0;ee<d;++ee){const te=J+ee*g;if(te<0||te>=u.inDepth)continue;const X=ee*O[0],Q=D+te*A[1];for(let G=0;G<u.outHeight;++G){const H=ne+G*C.strides[2],ie=G*u.strideHeight-k;for(let de=0;de<h;++de){const ke=ie+de*x;if(ke<0||ke>=u.inHeight)continue;const we=X+de*O[1],Ee=Q+ke*A[2];for(let Ce=0;Ce<u.outWidth;++Ce){const Re=H+Ce*u.outChannels,se=Ce*u.strideWidth-N;for(let Te=0;Te<p;++Te){const Me=se+Te*y;if(Me<0||Me>=u.inWidth)continue;const Ye=we+Te*O[2],me=Ee+Me*u.inChannels;let xe=Ye;for(let $e=0;$e<u.inChannels;++$e){const Ze=j[me+$e];for(let bt=0;bt<u.outChannels;++bt)_[Re+bt]+=Ze*R[xe+bt];xe+=u.outChannels}}}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const bve={kernelName:Yy,backendName:"cpu",kernelFunc:vve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wve(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:i}=e,{strides:a,pad:l,filterShape:c}=s;Ct([r,i],"conv3dBackpropFilterV2");const u=Mt(r.shape),d=Mt(i.shape),h=fu(r.shape,c,a,1,l),p=h.strideDepth,g=h.strideHeight,x=h.strideWidth,y=h.filterDepth,v=h.filterHeight,w=h.filterWidth,N=new tr(h.filterShape,"float32"),k=N.values,[C,j,R,_]=N.strides,A=n.data.get(i.dataId).values,[O,L,D,q]=d,V=n.data.get(r.dataId).values,[ne,J,ee,te]=u,X=h.padInfo.front,Q=h.padInfo.left,G=h.padInfo.top;for(let H=0;H<y;++H){const ie=Math.max(0,Math.ceil((X-H)/p)),de=Math.min(h.outDepth,(h.inDepth+X-H)/p),ke=H*C;for(let we=0;we<v;++we){const Ee=Math.max(0,Math.ceil((G-we)/g)),Ce=Math.min(h.outHeight,(h.inHeight+G-we)/g),Re=we*j+ke;for(let se=0;se<w;++se){const Te=Math.max(0,Math.ceil((Q-se)/x)),Me=Math.min(h.outWidth,(h.inWidth+Q-se)/x),Ye=se*R+Re;for(let me=0;me<h.inChannels;++me){const xe=me*_+Ye;for(let $e=0;$e<h.outChannels;++$e){let Ze=0;for(let bt=0;bt<h.batchSize;++bt){const $t=bt*ne,at=bt*O;for(let nt=ie;nt<de;++nt){const dn=(H+nt*p-X)*J+$t,Zn=nt*L+at;for(let Gn=Ee;Gn<Ce;++Gn){const $n=(we+Gn*g-G)*ee+dn,ms=Gn*D+Zn;for(let In=Te;In<Me;++In){const gs=(se+In*x-Q)*te+$n,Ne=In*q+ms;Ze+=V[gs+me]*A[Ne+$e]}}}}k[xe+$e]=Ze}}}}}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const Nve={kernelName:ZS,backendName:"cpu",kernelFunc:wve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sve(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:i}=e,{pad:a,strides:l,inputShape:c}=s;Ct([r],"conv3dBackpropInputV2");const u=Mt(r.shape),d=Mt(i.shape),h=fu(c,i.shape,l,1,a),p=new tr(h.inShape,"float32"),g=p.values,[x,y,v,w]=p.strides,N=n.data.get(r.dataId).values,[k,C,j,R]=u,_=n.data.get(i.dataId).values,[A,O,L,D]=d,{batchSize:q,filterDepth:V,filterHeight:ne,filterWidth:J,inChannels:ee,inDepth:te,inHeight:X,inWidth:Q,outChannels:G,outDepth:H,outHeight:ie,outWidth:de,strideDepth:ke,strideHeight:we,strideWidth:Ee}=h,Ce=V-1-h.padInfo.front,Re=ne-1-h.padInfo.top,se=J-1-h.padInfo.left;for(let Te=0;Te<q;++Te)for(let Me=0;Me<ee;++Me)for(let Ye=0;Ye<te;++Ye){const me=Ye-Ce,xe=Math.max(0,Math.ceil(me/ke)),$e=Math.min(H,(V+me)/ke);for(let Ze=0;Ze<X;++Ze){const bt=Ze-Re,$t=Math.max(0,Math.ceil(bt/we)),at=Math.min(ie,(ne+bt)/we);for(let nt=0;nt<Q;++nt){const Xt=nt-se,dn=Math.max(0,Math.ceil(Xt/Ee)),Zn=Math.min(de,(J+Xt)/Ee);let Gn=0;for(let Jn=xe;Jn<$e;++Jn){const $n=Jn*ke-me;for(let ms=$t;ms<at;++ms){const In=ms*we-bt;for(let As=dn;As<Zn;++As){const gs=As*Ee-Xt,Ne=k*Te+C*Jn+j*ms+R*As,ft=A*(V-1-$n)+O*(ne-1-In)+L*(J-1-gs)+D*Me;for(let on=0;on<G;++on){const Sn=N[Ne+on],An=_[ft+on];Gn+=Sn*An}}}}g[x*Te+y*Ye+v*Ze+w*nt+Me]=Gn}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const kve={kernelName:JS,backendName:"cpu",kernelFunc:Sve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cve=Un(rg,t=>Math.cos(t)),Tve={kernelName:rg,backendName:"cpu",kernelFunc:Cve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ive=Un(ig,t=>Math.cosh(t)),jve={kernelName:ig,backendName:"cpu",kernelFunc:Ive};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eve(t){const{inputs:e,backend:n,attrs:s}=t,{image:r,boxes:i,boxInd:a}=e,{cropSize:l,method:c,extrapolationValue:u}=s,[d,h,p,g]=r.shape,x=i.shape[0],[y,v]=l,w=un([x,y,v,g],"float32"),N=n.data.get(i.dataId).values,k=n.data.get(a.dataId).values,C=n.data.get(r.dataId).values,j=Mt(r.shape),R=Mt(w.shape);for(let _=0;_<x;_++){const A=_*4,O=N[A],L=N[A+1],D=N[A+2],q=N[A+3],V=k[_];if(V>=d)continue;const ne=y>1?(D-O)*(h-1)/(y-1):0,J=v>1?(q-L)*(p-1)/(v-1):0;for(let ee=0;ee<y;ee++){const te=y>1?O*(h-1)+ee*ne:.5*(O+D)*(h-1);if(te<0||te>h-1){for(let X=0;X<v;X++)for(let Q=0;Q<g;Q++){const G=Q+X*R[2]+ee*R[1]+_*R[0];w.values[G]=u}continue}if(c==="bilinear"){const X=Math.floor(te),Q=Math.ceil(te),G=te-X;for(let H=0;H<v;H++){const ie=v>1?L*(p-1)+H*J:.5*(L+q)*(p-1);if(ie<0||ie>p-1){for(let Ee=0;Ee<g;Ee++){const Ce=Ee+H*R[2]+ee*R[1]+_*R[0];w.values[Ce]=u}continue}const de=Math.floor(ie),ke=Math.ceil(ie),we=ie-de;for(let Ee=0;Ee<g;Ee++){let Ce=Ee+de*j[2]+X*j[1]+V*j[0];const Re=C[Ce];Ce=Ee+ke*j[2]+X*j[1]+V*j[0];const se=C[Ce];Ce=Ee+de*j[2]+Q*j[1]+V*j[0];const Te=C[Ce];Ce=Ee+ke*j[2]+Q*j[1]+V*j[0];const Me=C[Ce],Ye=Re+(se-Re)*we,me=Te+(Me-Te)*we;Ce=Ee+H*R[2]+ee*R[1]+_*R[0],w.values[Ce]=Ye+(me-Ye)*G}}}else for(let X=0;X<v;++X){const Q=v>1?L*(p-1)+X*J:.5*(L+q)*(p-1);if(Q<0||Q>p-1){for(let ie=0;ie<g;ie++){const de=ie+X*R[2]+ee*R[1]+_*R[0];w.values[de]=u}continue}const G=Math.round(Q),H=Math.round(te);for(let ie=0;ie<g;ie++){const de=ie+G*j[2]+H*j[1]+V*j[0],ke=ie+X*R[2]+ee*R[1]+_*R[0];w.values[ke]=C[de]}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const $ve={kernelName:ek,backendName:"cpu",kernelFunc:Eve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ave(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,exclusive:a,reverse:l}=s;Ct(r,"cumprod");const c=Ns([i],r.shape.length);let u=r;c!=null&&(u=Ni({inputs:{x:r},backend:n,attrs:{perm:c}}));const d=Fs(1,r.shape.length)[0];if(d!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${d}`);const h=Vi(u.dtype,"int32"),p=zS(Le(u.shape),h),g=n.data.get(u.dataId).values,x=u.shape[u.shape.length-1],y=l?(w,N)=>w+x-N-1:(w,N)=>w+N;for(let w=0;w<g.length;w+=x)for(let N=0;N<x;N++){const k=y(w,N);if(N===0)p[k]=a?1:g[k];else{const C=y(w,N-1);p[k]=a?g[C]*p[C]:g[k]*p[C]}}const v=n.makeTensorInfo(u.shape,h,p);if(c!=null){const w=pu(c),N=Ni({inputs:{x:v},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),N}return v}const Rve={kernelName:QS,backendName:"cpu",kernelFunc:Ave};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dve(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,exclusive:a,reverse:l}=s;Ct(r,"cumsum");const c=Ns([i],r.shape.length);let u=r;c!=null&&(u=Ni({inputs:{x:r},backend:n,attrs:{perm:c}}));const d=Fs(1,r.shape.length)[0];if(d!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${d}`);const h=Vi(u.dtype,"int32"),p=Or(Le(u.shape),h),g=n.data.get(u.dataId).values,x=u.shape[u.shape.length-1],y=l?(w,N)=>w+x-N-1:(w,N)=>w+N;for(let w=0;w<g.length;w+=x)for(let N=0;N<x;N++){const k=y(w,N);if(N===0)p[k]=a?0:g[k];else{const C=y(w,N-1);p[k]=a?g[C]+p[C]:g[k]+p[C]}}const v=n.makeTensorInfo(u.shape,h,p);if(c!=null){const w=pu(c),N=Ni({inputs:{x:v},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),N}return v}const Pve={kernelName:Zy,backendName:"cpu",kernelFunc:Dve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ve(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,weights:i}=e,{size:a,binaryOutput:l}=s;if(r.shape.length===1){const c=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,d=TT(c,u,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,d)}else if(r.shape.length===2){const c=n.bufferSync(r),u=n.bufferSync(i),d=Z7(c,u,a,l);return n.makeTensorInfo(d.shape,i.dtype,d.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}const Ove={kernelName:tk,backendName:"cpu",kernelFunc:_ve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fve(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockSize:i,dataFormat:a}=s;K(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const l=r.shape[0],c=r.shape[1],u=r.shape[2],d=r.shape[3],h=c*i,p=u*i,g=d/(i*i),x=n.data.get(r.dataId).values,y=new Float32Array(l*h*p*g);let v=0;for(let w=0;w<l;++w)for(let N=0;N<h;++N){const k=Math.floor(N/i),C=N%i;for(let j=0;j<p;++j){const R=Math.floor(j/i),_=j%i,A=(C*i+_)*g;for(let O=0;O<g;++O){const D=O+A+d*(R+u*(k+c*w));y[v++]=x[D]}}}return n.makeTensorInfo([l,h,p,g],r.dtype,y)}const Mve={kernelName:nk,backendName:"cpu",kernelFunc:Fve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z9(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i}=e,{strides:a,pad:l,dilations:c,dimRoundingMode:u}=s;Ct([r,i],"depthwiseConv2DNative");const d=Mt(r.shape),h=Mt(i.shape);let p=c;p==null&&(p=[1,1]),K(Ir(a,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${p}'`);const g=pr(r.shape,i.shape,a,p,l,u,!0),{filterHeight:x,filterWidth:y,dilationHeight:v,dilationWidth:w,padInfo:N}=g,k=N.left,C=N.top,j=g.outChannels/g.inChannels,R=new tr(g.outShape,r.dtype),_=n.data.get(r.dataId).values,A=n.data.get(i.dataId).values,O=R.values;for(let L=0;L<g.batchSize;++L){const D=L*d[0],q=L*R.strides[0];for(let V=0;V<g.outHeight;++V){const ne=q+V*R.strides[1],J=V*g.strideHeight-C;for(let ee=0;ee<x;++ee){const te=J+ee*v;if(te<0||te>=g.inHeight)continue;const X=ee*h[0],Q=D+te*d[1];for(let G=0;G<g.outWidth;++G){const H=ne+G*R.strides[2],ie=G*g.strideWidth-k;for(let de=0;de<y;++de){const ke=ie+de*w;if(ke<0||ke>=g.inWidth)continue;const we=X+de*h[1],Ee=Q+ke*g.inChannels;let Ce=H,Re=we;for(let se=0;se<g.inChannels;++se){const Te=_[Ee+se];for(let Me=0;Me<j;++Me)O[Ce+Me]+=Te*A[Re+Me];Ce+=j,Re+=j}}}}}}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const Lve={kernelName:Jy,backendName:"cpu",kernelFunc:Z9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bve(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:i}=e,{strides:a,dilations:l,pad:c,dimRoundingMode:u,filterShape:d}=s;Ct([r,i],"depthwiseConv2dNativeBackpropFilter");const h=pr(r.shape,d,a,l,c,u,!0),{strideHeight:p,strideWidth:g,filterHeight:x,filterWidth:y}=h,v=new tr(h.filterShape,"float32"),w=h.padInfo.left,N=h.padInfo.top,k=h.outChannels/h.inChannels,C=n.data.get(r.dataId).values,j=new tr(r.shape,r.dtype,C),R=n.data.get(i.dataId).values,_=new tr(i.shape,i.dtype,R);for(let A=0;A<x;++A){const O=Math.max(0,Math.ceil((N-A)/p)),L=Math.min(h.outHeight,(h.inHeight+N-A)/p);for(let D=0;D<y;++D){const q=Math.max(0,Math.ceil((w-D)/g)),V=Math.min(h.outWidth,(h.inWidth+w-D)/g);for(let ne=0;ne<h.outChannels;++ne){const J=Math.trunc(ne/k),ee=ne%k;let te=0;for(let X=0;X<h.batchSize;++X)for(let Q=O;Q<L;++Q){const G=A+Q*p-N;for(let H=q;H<V;++H){const ie=D+H*g-w;te+=j.get(X,G,ie,J)*_.get(X,Q,H,ne)}}v.set(te,A,D,J,ee)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const zve={kernelName:sk,backendName:"cpu",kernelFunc:Bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vve(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:i}=e,{strides:a,dilations:l,pad:c,dimRoundingMode:u,inputShape:d}=s;Ct([r,i],"depthwiseConv2DNativeBackpropInput");const h=Mt(r.shape),p=Mt(i.shape),g=pr(d,i.shape,a,l,c,u,!0),x=new tr(g.inShape,"float32"),y=x.values,[v,w,N]=x.strides,k=n.data.get(r.dataId).values,[C,j,R]=h,_=n.data.get(i.dataId).values,[A,O,L]=p,{batchSize:D,filterHeight:q,filterWidth:V,inChannels:ne,inHeight:J,inWidth:ee,outChannels:te,outHeight:X,outWidth:Q,strideHeight:G,strideWidth:H}=g,ie=q-1-g.padInfo.top,de=V-1-g.padInfo.left,ke=te/ne;for(let we=0;we<D;++we)for(let Ee=0;Ee<ne;++Ee)for(let Ce=0;Ce<J;++Ce){const Re=Ce-ie,se=Math.max(0,Math.ceil(Re/G)),Te=Math.min(X,(q+Re)/G);for(let Me=0;Me<ee;++Me){const Ye=Me-de,me=Math.max(0,Math.ceil(Ye/H)),xe=Math.min(Q,(V+Ye)/H);let $e=0;for(let Ze=se;Ze<Te;++Ze){const bt=Ze*G-Re;for(let $t=me;$t<xe;++$t){const at=$t*H-Ye,nt=C*we+j*Ze+R*$t,Xt=A*(q-1-bt)+O*(V-1-at)+L*Ee;for(let dn=0;dn<ke;++dn){const Zn=Ee*ke+dn,Gn=k[nt+Zn],Jn=_[Xt+dn];$e+=Gn*Jn}}}y[v*we+w*Ce+N*Me+Ee]=$e}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const Uve={kernelName:rk,backendName:"cpu",kernelFunc:Vve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wve(t){const{inputs:e,backend:n}=t,{x:s}=e,r=Le(s.shape),i=n.data.get(s.dataId).values,a=un([r,r],s.dtype),l=a.values;for(let u=0;u<i.length;u++)l[u*r+u]=i[u];const c=[...s.shape,...s.shape];return n.makeTensorInfo(c,a.dtype,a.values)}const Gve={kernelName:ik,backendName:"cpu",kernelFunc:Wve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hve={kernelName:Qy,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:r}=t,{strides:i,pad:a,dilations:l}=n,c=e,u=c.data.get(s.dataId).values,d=s.shape.length,h=c.data.get(r.dataId).values,p=r.shape.length,{batchSize:g,inHeight:x,inWidth:y,inChannels:v,outHeight:w,outWidth:N,padInfo:k,strideHeight:C,strideWidth:j,filterHeight:R,filterWidth:_,dilationHeight:A,dilationWidth:O,outShape:L}=Wg(s.shape,r.shape,i,a,"NHWC",l),D=Le(L),q=L.length,V=_s(s.dtype,D);for(let J=0;J<g;++J)for(let ee=0;ee<w;++ee){const te=ee*C-k.top;for(let X=0;X<N;++X){const Q=X*j-k.left;for(let G=0;G<v;++G){let H=Number.MIN_SAFE_INTEGER;for(let de=0;de<R;++de){const ke=te+de*A;if(ke>=0&&ke<x)for(let we=0;we<_;++we){const Ee=Q+we*O;if(Ee>=0&&Ee<y){const Ce=qo([J,ke,Ee,G],d,Mt(s.shape)),Re=qo([de,we,G],p,Mt(r.shape)),se=u[Ce]+h[Re];se>H&&(H=se)}}}const ie=qo([J,ee,X,G],q,Mt(L));V[ie]=H}}}return{dataId:c.write(Ld(V,s.dtype),L,s.dtype),shape:L,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kve={kernelName:k3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:r,dy:i}=t,{strides:a,pad:l,dilations:c}=n,u=e,d=Ra(s.shape,u.data.get(s.dataId).values),h=Ra(r.shape,u.data.get(r.dataId).values),{batchSize:p,inHeight:g,inWidth:x,inChannels:y,outHeight:v,outWidth:w,padInfo:N,strideHeight:k,strideWidth:C,filterHeight:j,filterWidth:R,dilationHeight:_,dilationWidth:A,outShape:O}=Wg(s.shape,r.shape,a,l,"NHWC",c);K(i.rank===O.length,()=>`Error in ${k3}, dy must have the same rank as output ${O.length}, but got ${i.rank}`);const L=Ra(O,u.data.get(i.dataId).values),D=qO(r.shape,r.dtype);for(let V=0;V<p;++V)for(let ne=0;ne<v;++ne){const J=ne*k-N.top;for(let ee=0;ee<w;++ee){const te=ee*C-N.left;for(let X=0;X<y;++X){let Q=Number.MIN_SAFE_INTEGER,G=0,H=0;for(let ie=0;ie<j;++ie){const de=J+ie*_;if(de>=0&&de<g)for(let ke=0;ke<R;++ke){const we=te+ke*A;if(we>=0&&we<x){const Ee=d[V][de][we][X]+h[ie][ke][X];Ee>Q&&(Q=Ee,G=ie,H=ke)}}}D[G][H][X]+=L[V][ne][ee][X]}}}return{dataId:u.write(Ld(D,s.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qve={kernelName:S3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:r,dy:i}=t,{strides:a,pad:l,dilations:c}=n,u=e,d=Ra(s.shape,u.data.get(s.dataId).values),h=Ra(r.shape,u.data.get(r.dataId).values),{batchSize:p,inHeight:g,inWidth:x,inChannels:y,outHeight:v,outWidth:w,padInfo:N,strideHeight:k,strideWidth:C,filterHeight:j,filterWidth:R,dilationHeight:_,dilationWidth:A,outShape:O}=Wg(s.shape,r.shape,a,l,"NHWC",c);K(i.rank===O.length,()=>`Error in ${S3}, dy must have the same rank as output ${O.length}, but got ${i.rank}`);const L=Ra(O,u.data.get(i.dataId).values),D=qO(s.shape,s.dtype);for(let V=0;V<p;++V)for(let ne=0;ne<v;++ne){const J=ne*k-N.top;for(let ee=0;ee<w;++ee){const te=ee*C-N.left;for(let X=0;X<y;++X){let Q=Number.MIN_SAFE_INTEGER,G=J<0?0:J,H=te<0?0:te;for(let ie=0;ie<j;++ie){const de=J+ie*_;if(de>=0&&de<g)for(let ke=0;ke<R;++ke){const we=te+ke*A;if(we>=0&&we<x){const Ee=d[V][de][we][X]+h[ie][ke][X];Ee>Q&&(Q=Ee,G=de,H=we)}}}D[V][G][H][X]+=L[V][ne][ee][X]}}}return{dataId:u.write(Ld(D,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xve(t){const{inputs:e,backend:n,attrs:s}=t,{image:r}=e,{canvas:i,options:a}=s,{contextOptions:l,imageOptions:c}=a||{},u=c?.alpha||1,d=l?.contextType||"2d";if(d!=="2d")throw new Error(`Context type ${l.contextType} is not supported by the CPU backend.`);const h=i.getContext(d,l?.contextAttributes||{});if(h==null)throw new Error(`Could not get the context with ${d} type.`);const[p,g]=r.shape.slice(0,2),x=r.shape.length===2?1:r.shape[2],y=n.data.get(r.dataId).values,v=r.dtype==="float32"?255:1,w=new Uint8ClampedArray(g*p*4);for(let k=0;k<p*g;++k){const C=[0,0,0,255*u];for(let R=0;R<x;R++){const _=y[k*x+R];if(r.dtype==="float32"){if(_<0||_>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${_}.`)}else if(r.dtype==="int32"&&(_<0||_>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${_}.`);x===1?(C[0]=_*v,C[1]=_*v,C[2]=_*v):C[R]=_*v}const j=k*4;w[j+0]=Math.round(C[0]),w[j+1]=Math.round(C[1]),w[j+2]=Math.round(C[2]),w[j+3]=Math.round(C[3])}i.width=g,i.height=p;const N=new ImageData(w,g,p);return h.putImageData(N,0,0),r}const Yve={kernelName:pae,backendName:"cpu",kernelFunc:Xve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lx(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s;Ct(r,"sum");let l;r.dtype==="bool"?l=ru({inputs:{x:r},backend:n,attrs:{dtype:"int32"}}):l=rl({inputs:{x:r},backend:n});const c=l.shape.length,u=fn(i,l.shape),d=Ns(u,c);let h=u,p=l;d!=null&&(p=Ni({inputs:{x:l},backend:n,attrs:{perm:d}}),h=Fs(h.length,c)),jr("sum",h,p.shape.length);const[g,x]=mr(p.shape,h),y=Vi(p.dtype,"int32");let v=X0(n,g,y);const w=Le(x),N=n.data.get(v.dataId).values,k=n.data.get(p.dataId).values;for(let C=0;C<N.length;++C){const j=C*w;let R=0;for(let _=0;_<w;++_)R+=k[j+_];N[C]=R}if(a){const C=Os(v.shape,u),j=v;v=ts({inputs:{x:v},backend:n,attrs:{shape:C}}),n.disposeIntermediateTensorInfo(j)}return n.disposeIntermediateTensorInfo(l),d!=null&&n.disposeIntermediateTensorInfo(p),v}const Zve={kernelName:R2,backendName:"cpu",kernelFunc:lx};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jve(t){const{inputs:e,backend:n,attrs:s}=t,{equation:r}=s,i=e,{allDims:a,summedDims:l,idDims:c}=YC(r,i.length);JC(a.length,c,i);const{path:u,steps:d}=QC(l,c),h=d.length;let p=null,g=a.length;const x=[];for(let y=0;y<h;++y){for(const v of d[y]){const{permutationIndices:w,expandDims:N}=ZC(g,c[v]);let k;eT(w)?k=i[v]:(k=Ni({inputs:{x:i[v]},backend:n,attrs:{perm:w}}),x.push(k));const C=k.shape.slice();for(let j=0;j<N.length;++j)C.splice(N[j],0,1);bn(k.shape,C)||(k=ts({inputs:{x:k},backend:n,attrs:{shape:C}}),x.push(k)),p===null?p=k:(p=Sv({inputs:{a:k,b:p},backend:n}),x.push(p))}y<h-1&&(u[y]>=0&&(p=lx({inputs:{x:p},backend:n,attrs:{axis:u[y]-(a.length-g),keepDims:!1}}),x.push(p)),g--)}for(const y of x)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const Qve={kernelName:ak,backendName:"cpu",kernelFunc:Jve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ebe(t){const{inputs:e,backend:n}=t,{dy:s,y:r}=e;Ct([s,r],"eluGrad");const i=new Float32Array(Le(r.shape)),a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values;for(let c=0;c<a.length;++c){const u=a[c];u>=0?i[c]=l[c]:i[c]=l[c]*(u+1)}return n.makeTensorInfo(r.shape,"float32",i)}const tbe={kernelName:ok,backendName:"cpu",kernelFunc:ebe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nbe=UC,sbe=WC,rbe=GC,ibe=HC,abe=KC,obe=qC,lbe=Un(lg,t=>{const e=Math.sign(t),n=Math.abs(t),s=1/(1+nbe*n);return e*(1-((((obe*s+abe)*s+ibe)*s+rbe)*s+sbe)*s*Math.exp(-n*n))}),cbe={kernelName:lg,backendName:"cpu",kernelFunc:lbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J0(t){const{inputs:e,backend:n,attrs:s}=t,{input:r}=e,{dim:i}=s,a=r.shape.length,l=r.shape.slice();let c=i;return i<0&&(K(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),c=a+i+1),l.splice(c,0,1),ts({inputs:{x:r},backend:n,attrs:{shape:l}})}const ube={kernelName:t2,backendName:"cpu",kernelFunc:J0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dbe=Ls((t,e)=>t/e),RT=ir(ag,dbe),d4={kernelName:ag,backendName:"cpu",kernelFunc:RT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9(t,e,n){const s=t.shape,r=s[0],i=s[1],a=n.data.get(t.dataId),l=a.complexTensorInfos.real,c=a.complexTensorInfos.imag,u=[r,i],d=Le(u),h=Cr("float32",d),p=Cr("float32",d);for(let v=0;v<r;v++){const w=Ad({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,i]}}),N=Ad({inputs:{x:c},backend:n,attrs:{begin:[v,0],size:[1,i]}}),k=Li({inputs:{real:w,imag:N},backend:n}),{real:C,imag:j}=hbe(k,e,n),R=Gl(C,j);for(let _=0;_<i;_++){const A=XC(R,_);h[v*i+_]=A.real,p[v*i+_]=A.imag}n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(N),n.disposeIntermediateTensorInfo(k)}const g=n.makeTensorInfo(u,"float32",h),x=n.makeTensorInfo(u,"float32",p),y=Li({inputs:{real:g,imag:x},backend:n});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),y}function hbe(t,e,n){const s=Le(t.shape),r=n.data.get(t.dataId),i=n.data.get(r.complexTensorInfos.real.dataId).values,a=n.data.get(r.complexTensorInfos.imag.dataId).values;if(fbe(s)){const l=h4(i,a,s,e,n),c=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(c,"float32",l.real),d=n.makeTensorInfo(c,"float32",l.imag),h=n.makeTensorInfo([],"float32",uu(s,"float32")),p=rl({inputs:{x:h},backend:n}),g=d4.kernelFunc({inputs:{a:u,b:h},backend:n}),x=d4.kernelFunc({inputs:{a:d,b:p},backend:n}),y=n.data.get(g.dataId).values,v=n.data.get(x.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),{real:y,imag:v}}return l}else{const l=Gl(i,a),c=pbe(l,s,e);return lM(c)}}function fbe(t){return(t&t-1)===0}function h4(t,e,n,s,r){if(n===1)return{real:t,imag:e};const i=Gl(t,e),a=n/2,l=cM(i),c=l.real,u=l.imag,d=[c.length],h=r.makeTensorInfo(d,"float32",c),p=r.makeTensorInfo(d,"float32",u),g=Li({inputs:{real:h,imag:p},backend:r}),x=uM(i),y=x.real,v=x.imag,w=[y.length],N=r.makeTensorInfo(w,"float32",y),k=r.makeTensorInfo(w,"float32",v),C=Li({inputs:{real:N,imag:k},backend:r}),j=h4(c,u,a,s,r),R=j.real,_=j.imag,A=[R.length],O=r.makeTensorInfo(A,"float32",R),L=r.makeTensorInfo(A,"float32",_),D=Li({inputs:{real:O,imag:L},backend:r}),q=h4(y,v,a,s,r),V=q.real,ne=q.imag,J=[V.length],ee=r.makeTensorInfo(J,"float32",V),te=r.makeTensorInfo(J,"float32",ne),X=Li({inputs:{real:ee,imag:te},backend:r}),Q=hM(n,s),G=[Q.real.length],H=r.makeTensorInfo(G,"float32",Q.real),ie=r.makeTensorInfo(G,"float32",Q.imag),de=Li({inputs:{real:H,imag:ie},backend:r}),ke=Sv({inputs:{a:de,b:X},backend:r}),we=Nf({inputs:{a:D,b:ke},backend:r}),Ee=$T({inputs:{a:D,b:ke},backend:r}),Ce=$d({inputs:{input:we},backend:r}),Re=$d({inputs:{input:Ee},backend:r}),se=Sf({inputs:{input:we},backend:r}),Te=Sf({inputs:{input:Ee},backend:r}),Me=kf({inputs:[Ce,Re],backend:r,attrs:{axis:0}}),Ye=kf({inputs:[se,Te],backend:r,attrs:{axis:0}}),me=r.data.get(Me.dataId).values,xe=r.data.get(Ye.dataId).values;return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(N),r.disposeIntermediateTensorInfo(k),r.disposeIntermediateTensorInfo(C),r.disposeIntermediateTensorInfo(O),r.disposeIntermediateTensorInfo(L),r.disposeIntermediateTensorInfo(D),r.disposeIntermediateTensorInfo(ee),r.disposeIntermediateTensorInfo(te),r.disposeIntermediateTensorInfo(X),r.disposeIntermediateTensorInfo(H),r.disposeIntermediateTensorInfo(ie),r.disposeIntermediateTensorInfo(de),r.disposeIntermediateTensorInfo(ke),r.disposeIntermediateTensorInfo(we),r.disposeIntermediateTensorInfo(Ee),r.disposeIntermediateTensorInfo(Ce),r.disposeIntermediateTensorInfo(se),r.disposeIntermediateTensorInfo(Re),r.disposeIntermediateTensorInfo(Te),r.disposeIntermediateTensorInfo(Me),r.disposeIntermediateTensorInfo(Ye),{real:me,imag:xe}}function pbe(t,e,n){const s=new Float32Array(e*2);for(let r=0;r<e;r++){let i=0,a=0;for(let l=0;l<e;l++){const c=fM(r*l,e,n),u=XC(t,l);i+=u.real*c.real-u.imag*c.imag,a+=u.real*c.imag+u.imag*c.real}n&&(i/=e,a/=e),dM(s,i,a,r)}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mbe(t){const{inputs:e,backend:n}=t,{input:s}=e,r=Le(s.shape),i=s.shape[s.shape.length-1],a=r/i,l=ts({inputs:{x:s},backend:n,attrs:{shape:[a,i]}}),c=J9(l,!1,n),u=ts({inputs:{x:c},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}const gbe={kernelName:lk,backendName:"cpu",kernelFunc:mbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DT(t){const{backend:e,attrs:n}=t,{shape:s,value:r,dtype:i}=n,a=i||Ff(r),l=_s(a,Le(s));return ybe(l,r,a),e.makeTensorInfo(s,a,l)}const xbe={kernelName:ck,backendName:"cpu",kernelFunc:DT};function ybe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vbe={kernelName:uk,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,r=n,i=Cr(s.dtype,Le(s.shape)),[a,l,c,u]=s.shape,d=r.data.get(s.dataId).values;for(let p=0;p<a;p++){const g=p*c*l*u;for(let x=0;x<l;x++){const y=x*(c*u);for(let v=0;v<c;v++){const w=v*u;for(let N=0;N<u;N++){const k=Math.round(c-v-1),C=g+y+w+N;let j=d[C];if(k>=0&&k<c){const R=k*u,_=g+y+R+N;j=d[_]}i[C]=j}}}}return{dataId:r.write(i,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i,bias:a,preluActivationWeights:l}=e,{strides:c,pad:u,dataFormat:d,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:x}=s;let y=Y9({inputs:{x:r,filter:i},backend:n,attrs:{strides:c,pad:u,dataFormat:d,dilations:h,dimRoundingMode:p}});if(a){const v=y;if(d==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const w=ts({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});y=Nf({inputs:{a:y,b:w},backend:n}),n.disposeIntermediateTensorInfo(w)}else y=Nf({inputs:{a:y,b:a},backend:n});n.disposeIntermediateTensorInfo(v)}if(g){const v=y;if(d==="NCHW"&&g==="prelu"&&l.shape.length===1&&l.shape[0]!==1){const w=ts({inputs:{x:l},backend:n,attrs:{shape:[l.shape[0],1,1]}});y=Z0(n,y,g,w,x),n.disposeIntermediateTensorInfo(w)}else y=Z0(n,y,g,l,x);n.disposeIntermediateTensorInfo(v)}return y}const wbe={kernelName:A0,backendName:"cpu",kernelFunc:bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i,bias:a,preluActivationWeights:l}=e,{strides:c,pad:u,dataFormat:d,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:x}=s;let y=Z9({inputs:{x:r,filter:i},backend:n,attrs:{strides:c,pad:u,dataFormat:d,dilations:h,dimRoundingMode:p}});if(a){const v=y;y=Nf({inputs:{a:y,b:a},backend:n}),n.disposeIntermediateTensorInfo(v)}if(g){const v=y;y=Z0(n,y,g,l,x),n.disposeIntermediateTensorInfo(v)}return y}const Sbe={kernelName:R0,backendName:"cpu",kernelFunc:Nbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(t){const{inputs:e,backend:n}=t,{params:s,indices:r}=e,i=Le(s.shape),a=r.shape,l=a[a.length-1],[c,u,d,h]=OC(s,r);if(u===0)return n.makeTensorInfo(c,s.dtype,[]);const p=n.data.get(r.dataId).values,g=n.bufferSync(s),x=l9(p,g,s.dtype,u,l,d,h,s.shape,i);return n.makeTensorInfo(c,s.dtype,x.values)}const Cbe={kernelName:dk,backendName:"cpu",kernelFunc:kbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,indices:i}=e,{axis:a,batchDims:l}=s;Ct([r,i],"gatherV2");const c=fn(a,r.shape)[0],u=n.data.get(i.dataId).values,d=r.shape[c];for(let C=0;C<u.length;++C){const j=u[C];K(j<=d-1&&j>=0,()=>`GatherV2: the index value ${j} is not in [0, ${d-1}]`)}let h=l;l==null&&(h=0);const p=Le(i.shape),g=CM(r,i,c,h),x=ts({inputs:{x:r},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),y=ts({inputs:{x:i},backend:n,attrs:{shape:[g.batchSize,p/g.batchSize]}}),v=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],w=n.bufferSync(y),N=n.bufferSync(x),k=c9(N,w,v);return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(g.outputShape,k.dtype,k.values)}const Ibe={kernelName:s2,backendName:"cpu",kernelFunc:Tbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jbe(t){const{inputs:e,backend:n}=t,{input:s}=e,r=Le(s.shape),i=s.shape[s.shape.length-1],a=r/i,l=ts({inputs:{x:s},backend:n,attrs:{shape:[a,i]}}),c=J9(l,!0,n),u=ts({inputs:{x:c},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}const Ebe={kernelName:hk,backendName:"cpu",kernelFunc:jbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $be=Un(mg,t=>Number.isFinite(t)?1:0,"bool"),Abe={kernelName:mg,backendName:"cpu",kernelFunc:$be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rbe=Un(gg,t=>Math.abs(t)===1/0?1:0,"bool"),Dbe={kernelName:gg,backendName:"cpu",kernelFunc:Rbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pbe=Un(xg,t=>Number.isNaN(t)?1:0,"bool"),_be={kernelName:xg,backendName:"cpu",kernelFunc:Pbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(t){const{backend:e,attrs:n}=t,{start:s,stop:r,num:i}=n,a=p9(s,r,i);return e.makeTensorInfo([a.length],"float32",a)}const Fbe={kernelName:pk,backendName:"cpu",kernelFunc:Obe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mbe=Un(vg,t=>Math.log1p(t)),Lbe={kernelName:vg,backendName:"cpu",kernelFunc:Mbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bbe=Ls((t,e)=>t&&e),zbe=ir(l2,Bbe,null,"bool"),Vbe={kernelName:l2,backendName:"cpu",kernelFunc:zbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ube=Un(c2,t=>t?0:1,"bool"),Wbe={kernelName:c2,backendName:"cpu",kernelFunc:Ube};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gbe=Ls((t,e)=>t||e),Hbe=ir(u2,Gbe,null,"bool"),Kbe={kernelName:u2,backendName:"cpu",kernelFunc:Hbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{depthRadius:i,bias:a,alpha:l,beta:c}=s;Ct(r,"LRN");const u=r.shape[3],d=u-1,h=n.data.get(r.dataId).values,p=Le(r.shape),g=new Float32Array(p);function x(y){const v=y%u;let w=y-v+Math.max(0,v-i);const N=y-v+Math.min(v+i,d);let k=0;for(;w<=N;w++){const C=h[w];k+=C*C}return k}for(let y=0;y<p;y++){const v=x(y),w=h[y]*Math.pow(a+l*v,-c);g[y]=w}return n.makeTensorInfo(r.shape,r.dtype,g)}const Xbe={kernelName:d2,backendName:"cpu",kernelFunc:qbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,y:i,dy:a}=e,{depthRadius:l,bias:c,alpha:u,beta:d}=s;Ct(a,"LRNGrad");const h=Le(a.shape),p=a.shape[3],g=n.data.get(a.dataId).values,x=n.data.get(r.dataId).values,y=n.data.get(i.dataId).values,v=new Float32Array(h),w=h;for(let N=0;N<w;N++){const k=N%p,C=N-k+Math.max(0,k-l),j=N-k+Math.min(p,k+l+1);let R=0;for(let _=C;_<j;_++)R+=Math.pow(x[_],2);R=u*R+c;for(let _=C;_<j;_++){let A=-2*u*d*x[_]*y[N]/R;N===_&&(A+=Math.pow(R,-d)),A*=g[N],v[_]+=A}}return n.makeTensorInfo(a.shape,r.dtype,v)}const Zbe={kernelName:mk,backendName:"cpu",kernelFunc:Ybe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q9(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{reductionIndices:i,keepDims:a}=s,l=n;let c=r.shape;const u=c.length,d=fn(i,c);let h=d;const p=Ns(h,u);let g=l.data.get(r.dataId).values;if(p!=null){const C=new Array(u);for(let j=0;j<C.length;j++)C[j]=c[p[j]];g=jT(g,c,r.dtype,p,C),h=Fs(h.length,u),c=C}Ct(r,"max"),jr("max",h,u);const[x,y]=mr(c,h),v=Le(y),w=g9(g,v,x,r.dtype),N=l.write(w,x,r.dtype);let k=x;return a&&(k=Os(x,d)),{dataId:N,shape:k,dtype:r.dtype}}const Jbe={kernelName:h2,backendName:"cpu",kernelFunc:Q9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e;Ct(r,"maxPool");const{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=s,u=1;K(Ir(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=Fa(r.shape,i,a,u,l,c);let h;if(d.filterWidth===1&&d.filterHeight===1&&bn(d.inShape,d.outShape))h=rl({inputs:{x:r},backend:n});else{const p=n.data.get(r.dataId).values,g=Mt(r.shape),x=AT(p,r.shape,r.dtype,g,d,"max");h=n.makeTensorInfo(d.outShape,r.dtype,x.values)}return h}const ewe={kernelName:f2,backendName:"cpu",kernelFunc:Qbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c,dataFormat:u}=s;Ct(r,"maxPool3d");const d=Yl(r.shape,i,a,1,l,c,u),h=n.data.get(r.dataId).values,p=X9(h,r.shape,r.dtype,Mt(r.shape),d,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const nwe={kernelName:p2,backendName:"cpu",kernelFunc:twe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function swe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:i}=e,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=s;Ct([r,i],"maxPool3DGrad");const d=Yl(i.shape,a,l,1,c,u),h=n.bufferSync(i),p=G2e(h,d),g=d.strideDepth,x=d.strideHeight,y=d.strideWidth,v=d.dilationDepth,w=d.dilationHeight,N=d.dilationWidth,k=d.effectiveFilterDepth,C=d.effectiveFilterHeight,j=d.effectiveFilterWidth,R=k-1-d.padInfo.front,_=j-1-d.padInfo.left,A=C-1-d.padInfo.top,O=un(i.shape,"float32"),L=n.bufferSync(r);for(let D=0;D<d.batchSize;++D)for(let q=0;q<d.inChannels;++q)for(let V=0;V<d.inDepth;++V)for(let ne=0;ne<d.inHeight;++ne)for(let J=0;J<d.inWidth;++J){const ee=V-R,te=ne-A,X=J-_;let Q=0;for(let G=0;G<k;G+=v){const H=(ee+G)/g;if(!(H<0||H>=d.outDepth||Math.floor(H)!==H))for(let ie=0;ie<C;ie+=w){const de=(te+ie)/x;if(!(de<0||de>=d.outHeight||Math.floor(de)!==de))for(let ke=0;ke<j;ke+=N){const we=(X+ke)/y;if(we<0||we>=d.outWidth||Math.floor(we)!==we)continue;const Ee=k*C*j-1-p.get(D,H,de,we,q),Ce=G*C*j+ie*j+ke,Re=Ee===Ce?1:0;if(Re===0)continue;const se=L.get(D,H,de,we,q);Q+=se*Re}}}O.set(Q,D,V,ne,J,q)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const rwe={kernelName:xk,backendName:"cpu",kernelFunc:swe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:i,output:a}=e,l=i;Ct([i,a],"maxPoolGrad");const{filterSize:c,strides:u,pad:d,dimRoundingMode:h}=s,p=Fa(l.shape,c,u,1,d,h),g=n.data.get(l.dataId).values,x=un(p.outShape,l.dtype,q9(g,l.shape,l.dtype,p).values),y=p.strideHeight,v=p.strideWidth,w=p.dilationHeight,N=p.dilationWidth,k=p.effectiveFilterHeight,C=p.effectiveFilterWidth,j=C-1-p.padInfo.left,R=k-1-p.padInfo.top,_=un(l.shape,"float32"),A=n.data.get(r.dataId).values,O=un(r.shape,"float32",A);for(let L=0;L<p.batchSize;++L)for(let D=0;D<p.inChannels;++D)for(let q=0;q<p.inHeight;++q)for(let V=0;V<p.inWidth;++V){const ne=q-R,J=V-j;let ee=0;for(let te=0;te<k;te+=w){const X=(ne+te)/y;if(!(X<0||X>=p.outHeight||Math.floor(X)!==X))for(let Q=0;Q<C;Q+=N){const G=(J+Q)/v;if(G<0||G>=p.outWidth||Math.floor(G)!==G)continue;const H=k*C-1-x.get(L,X,G,D),ie=te*C+Q,de=H===ie?1:0;if(de===0)continue;const ke=O.get(L,X,G,D);ee+=ke*de}}_.set(ee,L,q,V,D)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const awe={kernelName:gk,backendName:"cpu",kernelFunc:iwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function owe(t,e,n,s,r){const i=Mt(e),a=AT(t,e,n,i,r,"max"),l=q9(t,e,n,r,!0,s);return[a.values,l.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lwe={kernelName:yk,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{filterSize:r,strides:i,pad:a,includeBatchInIndex:l}=e,c=n;Ct(s,"MaxPoolWithArgmax");const u=c.data.get(s.dataId).values,d=Fa(s.shape,r,i,[1,1],a),[h,p]=owe(u,s.shape,s.dtype,l,d),g=c.write(h,d.outShape,s.dtype),x=c.write(p,d.outShape,s.dtype);return[{dataId:g,shape:d.outShape,dtype:s.dtype},{dataId:x,shape:d.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cwe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s,l=fn(i,r.shape),u=mr(r.shape,l)[1],d=Le(u),h=[],p=n.makeTensorInfo([],"float32",new Float32Array([d]));h.push(p);const g=ru({inputs:{x:r},backend:n,attrs:{dtype:"float32"}});h.push(g);const x=RT({inputs:{a:g,b:p},backend:n});h.push(x);const y=lx({inputs:{x},backend:n,attrs:{axis:i,keepDims:a}});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const uwe={kernelName:m2,backendName:"cpu",kernelFunc:cwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dwe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s;Ct(r,"min");const l=fn(i,r.shape);let c=l;const u=Ns(c,r.shape.length);let d=r;u!=null&&(d=Ni({inputs:{x:r},backend:n,attrs:{perm:u}}),c=Fs(c.length,r.shape.length)),jr("min",c,d.shape.length);const[h,p]=mr(d.shape,c),g=Le(p),x=Or(Le(h),d.dtype),y=n.data.get(d.dataId).values;for(let w=0;w<x.length;++w){const N=w*g;let k=y[N];for(let C=0;C<g;++C){const j=y[N+C];(Number.isNaN(j)||j<k)&&(k=j)}x[w]=k}u!=null&&n.disposeIntermediateTensorInfo(d);const v=n.makeTensorInfo(h,d.dtype,x);if(a){const w=Os(h,l),N=ts({inputs:{x:v},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(v),N}return v}const hwe={kernelName:g2,backendName:"cpu",kernelFunc:dwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fwe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{paddings:i,mode:a}=s;Ct(r,"mirrorPad");const l=i.map((k,C)=>k[0]+r.shape[C]+k[1]),c=i.map(k=>k[0]),u=i.map((k,C)=>k[0]+r.shape[C]),d=a==="reflect"?0:1,h=n.data.get(r.dataId).values,p=r.shape.length,g=Mt(r.shape),x=Le(l),y=l.length,v=Mt(l),w=Cr(r.dtype,x);for(let k=0;k<x;k++){let C=Mf(k,y,v);for(let R=0;R<y;R++)C[R]<c[R]?C[R]=c[R]*2-C[R]-d:C[R]>=u[R]&&(C[R]=(u[R]-1)*2-C[R]+d);C=C.map((R,_)=>R-c[_]);const j=qo(C,p,g);w[k]=h[j]}return{dataId:n.write(w,l,r.dtype),shape:l,dtype:r.dtype}}const pwe={kernelName:x2,backendName:"cpu",kernelFunc:fwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mwe=Ls(((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})),gwe=ir(Ng,mwe),xwe={kernelName:Ng,backendName:"cpu",kernelFunc:gwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eB(t){const{inputs:e,backend:n,attrs:s}=t,{logits:r}=e,{dim:i}=s,a=r.shape.length;let l=i;if(l===-1&&(l=a-1),l!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${l}`);const c=fn([l],r.shape),u=Q9({inputs:{x:r},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),d=Os(u.shape,c),h=ts({inputs:{x:u},backend:n,attrs:{shape:d}}),p=$T({inputs:{a:r,b:h},backend:n}),g=r9({inputs:{x:p},backend:n}),x=lx({inputs:{x:g},backend:n,attrs:{axis:c,keepDims:!1}}),y=ts({inputs:{x},backend:n,attrs:{shape:d}}),v=RT({inputs:{a:g,b:y},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(y),v}const ywe={kernelName:_2,backendName:"cpu",kernelFunc:eB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vwe(t){const{inputs:e,backend:n,attrs:s}=t,{logits:r}=e,{numSamples:i,seed:a,normalized:l}=s;Ct(r,"multinomial");const c=l?r:eB({inputs:{logits:r},backend:n,attrs:{dim:-1}}),u=c.shape[0],d=c.shape[1],h=n.data.get(c.dataId).values,p=[u,i],g=Or(Le(p),"int32");for(let x=0;x<u;++x){const y=x*d,v=new Float32Array(d-1);v[0]=h[y];for(let k=1;k<v.length;++k)v[k]=v[k-1]+h[y+k];const w=Q2.alea(a.toString()),N=x*i;for(let k=0;k<i;++k){const C=w();g[N+k]=v.length;for(let j=0;j<v.length;j++)if(C<v[j]){g[N+k]=j;break}}}return l||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(p,"int32",g)}const bwe={kernelName:vk,backendName:"cpu",kernelFunc:vwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wwe=EC;function Nwe(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=s;Ct(r,"NonMaxSuppression");const u=n.data.get(r.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:h}=wwe(u,d,a,l,c);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const Swe={kernelName:bk,backendName:"cpu",kernelFunc:Nwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kwe=$C;function Cwe(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c,padToMaxOutputSize:u}=s;Ct(r,"NonMaxSuppressionPadded");const d=n.data.get(r.dataId).values,h=n.data.get(i.dataId).values,{selectedIndices:p,validOutputs:g}=kwe(d,h,a,l,c,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const Twe={kernelName:wk,backendName:"cpu",kernelFunc:Cwe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iwe=AC;function jwe(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=s;Ct(r,"NonMaxSuppressionWithScore");const d=n.data.get(r.dataId).values,h=n.data.get(i.dataId).values,p=a,g=l,x=c,y=u,{selectedIndices:v,selectedScores:w}=Iwe(d,h,p,g,x,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const Ewe={kernelName:Nk,backendName:"cpu",kernelFunc:jwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $we(t){const{inputs:e,backend:n,attrs:s}=t,{indices:r}=e,{dtype:i,depth:a,onValue:l,offValue:c}=s;Ct(r,"oneHot");const u=Le(r.shape),d=new Float32Array(u*a);d.fill(c);const h=n.data.get(r.dataId).values;for(let p=0;p<u;++p)h[p]>=0&&h[p]<a&&(d[p*a+h[p]]=l);return n.makeTensorInfo([...r.shape,a],i,d)}const Awe={kernelName:w2,backendName:"cpu",kernelFunc:$we};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(s.dtype==="complex64"){const r=$d({inputs:{input:s},backend:n}),i=Q0({inputs:{x:r},backend:n}),a=Sf({inputs:{input:s},backend:n}),l=Q0({inputs:{x:a},backend:n}),c=Li({inputs:{real:i,imag:l},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}else return DT({backend:n,attrs:{shape:s.shape,value:0,dtype:s.dtype}})}const Rwe={kernelName:L2,backendName:"cpu",kernelFunc:Q0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tB(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(s.dtype==="complex64"){const r=$d({inputs:{input:s},backend:n}),i=tB({inputs:{x:r},backend:n}),a=Sf({inputs:{input:s},backend:n}),l=Q0({inputs:{x:a},backend:n}),c=Li({inputs:{real:i,imag:l},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}else return DT({backend:n,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}const Dwe={kernelName:b2,backendName:"cpu",kernelFunc:tB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nB(t){const{inputs:e,backend:n,attrs:s}=t,{axis:r}=s;if(e.length===1)return J0({inputs:{input:e[0]},backend:n,attrs:{dim:r}});const i=e[0].shape,a=e[0].dtype;e.forEach(d=>{Hi(i,d.shape,"All tensors passed to stack must have matching shapes"),K(a===d.dtype,()=>"All tensors passed to stack must have matching dtypes")});const l=[],c=e.map(d=>{const h=J0({inputs:{input:d},backend:n,attrs:{dim:r}});return l.push(h),h}),u=kf({inputs:c,backend:n,attrs:{axis:r}});return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const Pwe={kernelName:N2,backendName:"cpu",kernelFunc:nB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _we(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{paddings:i,constantValue:a}=s;Ct(r,"pad");const l=i.map((N,k)=>N[0]+r.shape[k]+N[1]),c=i.map(N=>N[0]),u=n.data.get(r.dataId).values,d=Le(r.shape),h=r.shape.length,p=Mt(r.shape),g=Le(l),x=l.length,y=Mt(l),v=Cr(r.dtype,g);a!==0&&v.fill(a);for(let N=0;N<d;N++){const C=Mf(N,h,p).map((R,_)=>R+c[_]),j=qo(C,x,y);v[j]=u[N]}return{dataId:n.write(v,l,r.dtype),shape:l,dtype:r.dtype}}const sB={kernelName:S2,backendName:"cpu",kernelFunc:_we};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Owe=Ls((t,e)=>Math.pow(t,e)),Fwe=ir(kg,Owe),Mwe={kernelName:kg,backendName:"cpu",kernelFunc:Fwe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lwe(t){const{inputs:e,backend:n,attrs:s}=t,{paramsNestedSplits:r,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:l}=s,c=r.map(w=>n.data.get(w.dataId).values),u=r.map(w=>w.shape),d=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,[p,g,x]=N9(c,u,d,i.shape,i.dtype,h,a.shape),y=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),v=n.makeTensorInfo(x,i.dtype,g);return y.concat([v])}const Bwe={kernelName:Sk,backendName:"cpu",kernelFunc:Lwe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zwe(t){const{inputs:e,backend:n}=t,{starts:s,limits:r,deltas:i}=e,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,[u,d]=S9(a,s.shape,s.dtype,l,r.shape,c,i.shape),h=n.makeTensorInfo([u.length],"int32",u),p=n.makeTensorInfo([d.length],s.dtype,d);return[h,p]}const Vwe={kernelName:kk,backendName:"cpu",kernelFunc:zwe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uwe(t){const{inputs:e,backend:n,attrs:s}=t,{shape:r,values:i,defaultValue:a,rowPartitionTensors:l}=e,{rowPartitionTypes:c}=s,u=n.data.get(r.dataId).values,d=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,p=l.map(v=>n.data.get(v.dataId).values),g=l.map(v=>v.shape),[x,y]=k9(u,r.shape,d,i.shape,i.dtype,h,a.shape,p,g,c);return n.makeTensorInfo(x,i.dtype,y)}const Wwe={kernelName:Ck,backendName:"cpu",kernelFunc:Uwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gwe(t){const{backend:e,attrs:n}=t,{start:s,stop:r,dtype:i,step:a}=n,l=C9(s,r,a,i);return e.makeTensorInfo([l.length],i,l)}const Hwe={kernelName:Tk,backendName:"cpu",kernelFunc:Gwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kwe=Un(Cg,t=>1/t),qwe={kernelName:Cg,backendName:"cpu",kernelFunc:Kwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xwe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r}=e,{alignCorners:i,halfPixelCenters:a,size:l}=s;Ct(r,"resizeBilinear");const c=Mt(r.shape),[u,d]=l,[h,p,g,x]=r.shape,y=n.data.get(r.dataId).values,v=new Float32Array(Le([h,u,d,x])),w=[i&&u>1?p-1:p,i&&d>1?g-1:g],N=[i&&u>1?u-1:u,i&&d>1?d-1:d];let k=0;const C=w[0]/N[0],j=w[1]/N[1];for(let R=0;R<h;R++)for(let _=0;_<u;_++){let A;a?A=C*(_+.5)-.5:A=C*_;const O=Math.max(0,Math.floor(A)),L=A-O,D=Math.min(p-1,Math.ceil(A)),q=R*c[0]+O*c[1],V=R*c[0]+D*c[1];for(let ne=0;ne<d;ne++){let J;a?J=j*(ne+.5)-.5:J=j*ne;const ee=Math.max(0,Math.floor(J)),te=J-ee,X=Math.min(g-1,Math.ceil(J)),Q=q+ee*c[2],G=V+ee*c[2],H=q+X*c[2],ie=V+X*c[2];for(let de=0;de<x;de++){const ke=y[Q+de],we=y[G+de],Ee=y[H+de],Ce=y[ie+de],Re=ke+(Ee-ke)*te,se=we+(Ce-we)*te,Te=Re+(se-Re)*L;v[k++]=Te}}}return n.makeTensorInfo([h,u,d,x],"float32",v)}const Ywe={kernelName:j2,backendName:"cpu",kernelFunc:Xwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r,dy:i}=e,{alignCorners:a}=s;Ct([i,r],"resizeBilinearGrad");const l=Mt(r.shape),[c,u,d,h]=r.shape,[,p,g]=i.shape,x=new Float32Array(c*u*d*h),y=[a&&p>1?u-1:u,a&&g>1?d-1:d],v=[a&&p>1?p-1:p,a&&g>1?g-1:g],w=y[0]/v[0],N=y[1]/v[1],k=n.data.get(i.dataId).values;let C=0;for(let j=0;j<c;j++){const R=j*l[0];for(let _=0;_<p;_++){const A=_*w,O=Math.floor(A),L=Math.min(Math.ceil(A),u-1),D=R+O*l[1],q=R+L*l[1],V=A-O,ne=1-V;for(let J=0;J<g;J++){const ee=J*N,te=Math.floor(ee),X=Math.min(Math.ceil(ee),d-1),Q=ee-te,G=1-Q,H=D+te*l[2],ie=D+X*l[2],de=q+te*l[2],ke=q+X*l[2],we=ne*G,Ee=ne*Q,Ce=V*G,Re=V*Q;for(let se=0;se<h;se++){const Te=k[C++];x[H+se]+=Te*we,x[ie+se]+=Te*Ee,x[de+se]+=Te*Ce,x[ke+se]+=Te*Re}}}}return n.makeTensorInfo([c,d,u,h],"float32",x)}const Jwe={kernelName:Ek,backendName:"cpu",kernelFunc:Zwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r}=e,{alignCorners:i,halfPixelCenters:a,size:l}=s;Ct(r,"resizeNearestNeighbor");const c=Mt(r.shape),[u,d]=l,[h,p,g,x]=r.shape,y=n.data.get(r.dataId).values,v=new Float32Array(h*u*d*x),w=[i&&u>1?p-1:p,i&&d>1?g-1:g],N=[i&&u>1?u-1:u,i&&d>1?d-1:d],k=w[0]/N[0],C=w[1]/N[1];let j=0;for(let R=0;R<h;R++){const _=R*c[0];for(let A=0;A<u;A++){const O=a?k*(A+.5):k*A;let L=Math.min(p-1,i?Math.round(O):Math.floor(O));a&&(L=Math.max(0,L));const D=_+L*c[1];for(let q=0;q<d;q++){const V=a?C*(q+.5):C*q;let ne=Math.min(g-1,i?Math.round(V):Math.floor(V));a&&(ne=Math.max(0,ne));const J=D+ne*c[2];for(let ee=0;ee<x;ee++){const te=y[J+ee];v[j++]=te}}}}return n.makeTensorInfo([h,u,d,x],r.dtype,v)}const eNe={kernelName:I2,backendName:"cpu",kernelFunc:Qwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r,dy:i}=e,{alignCorners:a}=s;Ct([i,r],"resizeNearestNeighborGrad");const l=Mt(r.shape),c=Mt(i.shape),[u,d,h,p]=r.shape,[,g,x]=i.shape,y=new Float32Array(u*d*h*p),v=n.data.get(i.dataId).values,w=[a&&g>1?d-1:d,a&&x>1?h-1:h],N=[a&&g>1?g-1:g,a&&x>1?x-1:x],k=w[0]/N[0],C=w[1]/N[1],j=1/k,R=1/C,_=Math.ceil(j)*2+2,A=Math.ceil(R)*2+2;for(let O=0;O<u;O++){const L=O*l[0];for(let D=0;D<d;D++){const q=L+D*l[1],V=Math.floor(D*j),ne=Math.floor(V-_/2);for(let J=0;J<h;J++){const ee=q+J*l[2],te=Math.floor(J*R),X=Math.floor(te-A/2);for(let Q=0;Q<p;Q++){let G=0;for(let H=0;H<_;H++){const ie=H+ne;if(ie<0||ie>=g)continue;const de=L+ie*c[1],ke=ie*k,we=Math.min(d-1,a?Math.round(ke):Math.floor(ke));if(D===we)for(let Ee=0;Ee<A;Ee++){const Ce=Ee+X;if(Ce<0||Ce>=x)continue;const Re=de+Ce*c[2],se=Ce*C,Te=Math.min(h-1,a?Math.round(se):Math.floor(se));J===Te&&(G+=v[Re+Q])}}y[ee+Q]=G}}}}return n.makeTensorInfo(r.shape,r.dtype,y)}const nNe={kernelName:jk,backendName:"cpu",kernelFunc:tNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{dims:i}=s;Ct(r,"reverse");const a=r.shape.length,l=fn(i,r.shape);if(a===0)return rl({inputs:{x:r},backend:n});const c=new tr(r.shape,r.dtype),u=n.bufferSync(r);for(let d=0;d<c.size;d++){const h=c.indexToLoc(d),p=h.slice();l.forEach(g=>p[g]=r.shape[g]-1-p[g]),c.set(u.get(...p),...h)}return n.makeTensorInfo(c.shape,c.dtype,c.values)}const rNe={kernelName:E2,backendName:"cpu",kernelFunc:sNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iNe={kernelName:Hk,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,{radians:r,fillValue:i,center:a}=e,l=n,c=Cr(s.dtype,Le(s.shape)),[u,d,h,p]=s.shape,[g,x]=BC(a,d,h),y=255,v=Math.sin(r),w=Math.cos(r),N=l.data.get(s.dataId).values;for(let C=0;C<u;C++){const j=C*h*d*p;for(let R=0;R<d;R++){const _=R*(h*p);for(let A=0;A<h;A++){const O=A*p;for(let L=0;L<p;L++){const D=[u,R,A,L],q=D[2],V=D[1];let ne=(q-g)*w-(V-x)*v,J=(q-g)*v+(V-x)*w;ne=Math.round(ne+g),J=Math.round(J+x);let ee=i;if(typeof i!="number"&&(L===3?ee=y:ee=i[L]),ne>=0&&ne<h&&J>=0&&J<d){const X=J*(h*p),Q=ne*p,G=j+X+Q+L;ee=N[G]}const te=j+_+O+L;c[te]=ee}}}}return{dataId:l.write(c,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aNe=Un(jg,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),oNe={kernelName:jg,backendName:"cpu",kernelFunc:aNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(t){const{inputs:e,backend:n,attrs:s}=t,{indices:r,updates:i}=e,{shape:a}=s,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Vd(i,r,a),p=!0,g=n.bufferSync(r),x=n.bufferSync(i),y=id(g,x,a,h,u,c,l,d,0,p);return n.makeTensorInfo(a,y.dtype,y.values)}const cNe={kernelName:$k,backendName:"cpu",kernelFunc:lNe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(t,e){let n=0,s=t.length,r=0;for(;n<s;)r=Math.floor((n+s)/2),t[r]<e?n=r+1:s=r;return s}function dNe(t,e){let n=0,s=t.length,r=0;for(;n<s;)r=Math.floor((n+s)/2),t[r]<=e?n=r+1:s=r;return s}function hNe(t,e,n,s,r,i){const a=_s("int32",n*r);for(let l=0;l<n;++l){const c=t.slice(l*s,(l+1)*s),u=l*r;for(let d=0;d<r;++d)a[u+d]=i==="left"?uNe(c,e[d+u]):dNe(c,e[d+u])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNe(t){const{inputs:e,backend:n,attrs:s}=t,{sortedSequence:r,values:i}=e,{side:a}=s,l=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,u=hNe(l,c,r.shape[0],r.shape[1],i.shape[1],a);return n.makeTensorInfo(i.shape,"int32",u)}const pNe={kernelName:Rk,backendName:"cpu",kernelFunc:fNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mNe(t){const{inputs:e,backend:n}=t,{condition:s,t:r,e:i}=e;Ct([s,r,i],"select");const a=s.shape.length,l=n.data.get(s.dataId).values,c=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,d=Vi(r.dtype,i.dtype),h=Or(Le(r.shape),d);let p=0;const g=a===0||a>1||r.shape.length===1?1:Le(r.shape.slice(1));for(let x=0;x<l.length;x++)for(let y=0;y<g;y++)l[x]===1?h[p++]=c[x]:h[p++]=u[x];return n.makeTensorInfo(r.shape,d,h)}const gNe={kernelName:$2,backendName:"cpu",kernelFunc:mNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xNe=uv,yNe=dv,vNe=Un($g,t=>t>=0?yNe*t:xNe*(Math.exp(t)-1)),bNe={kernelName:$g,backendName:"cpu",kernelFunc:vNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wNe=Un(Dg,t=>t<0?-1:t>0?1:0),NNe={kernelName:Dg,backendName:"cpu",kernelFunc:wNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SNe=Un(Ag,t=>Math.sin(t)),kNe={kernelName:Ag,backendName:"cpu",kernelFunc:SNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CNe=Un(Rg,t=>Math.sinh(t)),TNe={kernelName:Rg,backendName:"cpu",kernelFunc:CNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INe=11920928955078125e-23,gR=Math.log(INe)+2,jNe=Un(_g,t=>{const e=t>-gR,n=t<gR,s=Math.exp(t);let r;return n?r=s:e?r=t:r=Math.log(1+s),r}),ENe={kernelName:_g,backendName:"cpu",kernelFunc:jNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ne(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockShape:i,paddings:a}=s;Ct([r],"spaceToBatchND");const l=Le(i),c=[[0,0]];c.push(...a);for(let R=1+i.length;R<r.shape.length;++R)c.push([0,0]);const u=sB.kernelFunc({inputs:{x:r},backend:n,attrs:{paddings:c,constantValue:0}}),d=Zg(u.shape,i,l,!1),h=Jg(d.length,i.length,!1),p=Qg(u.shape,i,l,!1),y=ts({inputs:{x:u},backend:n,attrs:{shape:d}}),N=Ni({inputs:{x:y},backend:n,attrs:{perm:h}}),j=ts({inputs:{x:N},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(N),j}const ANe={kernelName:D2,backendName:"cpu",kernelFunc:$Ne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(t){const{inputs:e,backend:n}=t,{indices:s,values:r,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${s.shape}`);if(r.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${r.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const l=n.data.get(s.dataId).values,c=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values[0],[h,p,g,x,y]=E9(l,s.shape,s.dtype,c,r.dtype,u,d);return[n.makeTensorInfo(p,s.dtype,h),n.makeTensorInfo([p[0]],r.dtype,g),n.makeTensorInfo([x.length],"bool",new Uint8Array(x.map(v=>Number(v)))),n.makeTensorInfo([y.length],s.dtype,new Int32Array(y))]}const DNe={kernelName:Dk,backendName:"cpu",kernelFunc:RNe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PNe(t){const{inputs:e,backend:n}=t,{inputIndices:s,inputShape:r,newShape:i}=e;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${s.shape}`);if(r.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(n.data.get(r.dataId).values),l=n.data.get(s.dataId).values,c=Array.from(n.data.get(i.dataId).values),[u,d,h]=$9(l,s.shape,s.dtype,a,c);return[n.makeTensorInfo(d,s.dtype,u),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}const _Ne={kernelName:Pk,backendName:"cpu",kernelFunc:PNe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ONe(t){const{inputs:e,backend:n}=t,{data:s,indices:r,segmentIds:i}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${r.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(r.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,[u,d]=ET(a,s.shape,s.dtype,l,c,!0);return n.makeTensorInfo(d,s.dtype,u)}const FNe={kernelName:_k,backendName:"cpu",kernelFunc:ONe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MNe(t){const{inputs:e,backend:n}=t,{data:s,indices:r,segmentIds:i}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(r.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,[u,d]=ET(a,s.shape,s.dtype,l,c);return n.makeTensorInfo(d,s.dtype,u)}const LNe={kernelName:Ok,backendName:"cpu",kernelFunc:MNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(t){const{inputs:e,backend:n,attrs:s}=t,{sparseIndices:r,sparseValues:i,defaultValue:a}=e,{outputShape:l}=s,{sliceRank:c,numUpdates:u,sliceSize:d,strides:h,outputSize:p}=Vd(i,r,l),g=!1,x=n.bufferSync(r);let y;switch(i.dtype){case"bool":{const v=n.bufferSync(i),w=!!n.data.get(a.dataId).values[0];y=id(x,v,l,p,d,u,c,h,w,g);break}case"float32":{const v=n.bufferSync(i),w=n.data.get(a.dataId).values[0];y=id(x,v,l,p,d,u,c,h,w,g);break}case"int32":{const v=n.bufferSync(i),w=n.data.get(a.dataId).values[0];y=id(x,v,l,p,d,u,c,h,w,g);break}case"string":{const v=n.bufferSync(i),w=Xc(n.data.get(a.dataId).values[0]);y=id(x,v,l,p,d,u,c,h,w,g);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(l,y.dtype,y.values)}const zNe={kernelName:Fk,backendName:"cpu",kernelFunc:BNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{numOrSizeSplits:i,axis:a}=s,l=fn(a,r.shape)[0],c=tT(r,i,l),u=new Array(r.shape.length).fill(0),d=r.shape.slice();return c.map(h=>{const p=[...d];p[l]=h;const g=Ad({inputs:{x:r},backend:n,attrs:{begin:u,size:p}});return u[l]+=h,g})}const UNe={kernelName:P2,backendName:"cpu",kernelFunc:VNe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WNe={kernelName:Mk,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,s=e;Ct(n,"square");const r=s.data.get(n.dataId).values,i=new Float32Array(r.length);for(let l=0;l<r.length;++l){const c=r[l];i[l]=c*c}return{dataId:s.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GNe=Un(Vg,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),HNe={kernelName:Vg,backendName:"cpu",kernelFunc:GNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{begin:i,end:a,strides:l,beginMask:c,endMask:u,ellipsisMask:d,newAxisMask:h,shrinkAxisMask:p}=s;Ct(r,"stridedSlice");const{finalShapeSparse:g,finalShape:x,isIdentity:y,sliceDim0:v,isSimpleSlice:w,begin:N,end:k,strides:C}=nM(r.shape,i,a,l,c,u,d,h,p);let j;if(y)j=ts({inputs:{x:r},backend:n,attrs:{shape:x}});else if(v||w){K(r.shape.length>=1,()=>`Input must have rank at least 1, got: ${r.shape.length}`);const R=Q8(N,k,C),_=Ad({inputs:{x:r},backend:n,attrs:{begin:N,size:R}});j=ts({inputs:{x:_},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(_)}else{const R=n.bufferSync(r),_=D9(g,R,C,N);j=n.makeTensorInfo(x,_.dtype,_.values)}return j}const qNe={kernelName:Lk,backendName:"cpu",kernelFunc:KNe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XNe(t){const{inputs:e,backend:n,attrs:s}=t,{separator:r,nGramWidths:i,leftPad:a,rightPad:l,padWidth:c,preserveShortSequences:u}=s,{data:d,dataSplits:h}=e,p=n.data.get(d.dataId).values,g=n.data.get(h.dataId).values,[x,y]=P9(p,g,r,i,a,l,c,u);return[n.makeTensorInfo([x.length],"string",x),n.makeTensorInfo(h.shape,"int32",y)]}const YNe={kernelName:Bk,backendName:"cpu",kernelFunc:XNe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNe(t){const{inputs:e,backend:n,attrs:s}=t,{skipEmpty:r}=s,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values[0],[u,d,h]=_9(l,c,r),p=d.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const JNe={kernelName:zk,backendName:"cpu",kernelFunc:ZNe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNe(t){const{inputs:e,backend:n,attrs:s}=t,{numBuckets:r}=s,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(i.dataId).values,l=O9(a,r);return n.makeTensorInfo(i.shape,"int32",l)}const e3e={kernelName:Vk,backendName:"cpu",kernelFunc:QNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3e=Un(Lg,t=>Math.tan(t)),n3e={kernelName:Lg,backendName:"cpu",kernelFunc:t3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s3e=Un(Bg,t=>Math.tanh(t)),r3e={kernelName:Bg,backendName:"cpu",kernelFunc:s3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i3e(t){const{inputs:e,backend:n}=t,{tensor:s,indices:r,updates:i}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Vd(i,r,s.shape),h=!1,p=n.bufferSync(r),g=n.bufferSync(i),x=n.bufferSync(s),y=id(p,g,s.shape,d,c,l,a,u,x,h);return n.makeTensorInfo(s.shape,y.dtype,y.values)}const a3e={kernelName:Ak,backendName:"cpu",kernelFunc:i3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{reps:i}=s;Ct(r,"tile");const a=M9(n.bufferSync(r),i);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const l3e={kernelName:zg,backendName:"cpu",kernelFunc:o3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{k:i,sorted:a}=s;Ct(r,"topk");const l=n.data.get(r.dataId).values,[c,u]=B9(l,r.shape,r.dtype,i,a);return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const u3e={kernelName:Uk,backendName:"cpu",kernelFunc:c3e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d3e(t){const{inputs:e,attrs:n,backend:s}=t,{image:r,transforms:i}=e,{interpolation:a,fillMode:l,fillValue:c,outputShape:u}=n,[d,h,p,g]=r.shape,[x,y]=u??[h,p],v=[d,x,y,g],w=Mt(r.shape),N=w[0],k=w[1],C=w[2],j=Mt(v),R=j[0],_=j[1],A=j[2],O=Cr(r.dtype,Le(v));O.fill(c);const L=s.data.get(r.dataId).values,D=s.data.get(i.dataId).values;for(let V=0;V<d;++V){const ne=i.shape[0]===1?D:D.subarray(V*8,V*8+8);for(let J=0;J<x;++J)for(let ee=0;ee<y;++ee)for(let te=0;te<g;++te){let X;const Q=ne[6]*ee+ne[7]*J+1;if(Q===0)continue;const G=(ne[0]*ee+ne[1]*J+ne[2])/Q,H=(ne[3]*ee+ne[4]*J+ne[5])/Q,ie=xR(G,p,l),de=xR(H,h,l);switch(a){case"nearest":X=x3e(L,h,p,N,k,C,V,de,ie,te,c);break;case"bilinear":X=y3e(L,h,p,N,k,C,V,de,ie,te,c);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const ke=V*R+J*_+ee*A+te;O[ke]=X}return s.makeTensorInfo(v,r.dtype,O)}return{dataId:s.write(O,v,r.dtype),shape:r.shape,dtype:r.dtype}}const h3e={kernelName:Wk,backendName:"cpu",kernelFunc:d3e};function xR(t,e,n){switch(n){case"reflect":return f3e(t,e);case"wrap":return p3e(t,e);case"nearest":return g3e(t,e);case"constant":default:return m3e(t)}}function f3e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const s=2*e;n<s&&(n=s*Math.trunc(-n/s)+n),n=n<-e?n+s:-n-1}else if(n>e-1)if(e<=1)n=0;else{const s=2*e;n-=s*Math.trunc(n/s),n>=e&&(n=s-n-1)}return LS(0,n,e-1)}function p3e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const s=e-1;n+=e*(Math.trunc(-n/s)+1)}else if(n>e-1)if(e<=1)n=0;else{const s=e-1;n-=e*Math.trunc(n/s)}return LS(0,n,e-1)}function m3e(t,e){return t}function g3e(t,e){return LS(0,t,e-1)}function Vp(t,e,n,s,r,i,a,l,c,u,d){const h=a*s+l*r+c*i+u;return 0<=l&&l<e&&0<=c&&c<n?t[h]:d}function x3e(t,e,n,s,r,i,a,l,c,u,d){const h=Math.round(l),p=Math.round(c);return Vp(t,e,n,s,r,i,a,h,p,u,d)}function y3e(t,e,n,s,r,i,a,l,c,u,d){const h=Math.floor(l),p=Math.floor(c),g=h+1,x=p+1,y=(x-c)*Vp(t,e,n,s,r,i,a,h,p,u,d)+(c-p)*Vp(t,e,n,s,r,i,a,h,x,u,d),v=(x-c)*Vp(t,e,n,s,r,i,a,g,p,u,d)+(c-p)*Vp(t,e,n,s,r,i,a,g,x,u,d);return(g-l)*y+(l-h)*v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3e(t){const{inputs:e,attrs:n,backend:s}=t,{axis:r}=n,{x:i}=e;Ct(i,"unique");const a=s.data.get(i.dataId).values,{outputValues:l,outputShape:c,indices:u}=z9(a,r,i.shape,i.dtype);return[s.makeTensorInfo(c,i.dtype,l),s.makeTensorInfo([u.length],"int32",u)]}const b3e={kernelName:Gk,backendName:"cpu",kernelFunc:v3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3e(t){const{inputs:e,backend:n,attrs:s}=t,{value:r}=e;let{axis:i}=s;i<0&&(i+=r.shape.length);const a=r.shape.length,l=r.shape[i],c=new Array(a-1);let u=0;for(let g=0;g<a;g++)g!==i&&(c[u++]=r.shape[g]);const d=new Array(a).fill(0),h=r.shape.slice();h[i]=1;const p=new Array(l);for(let g=0;g<p.length;g++){d[i]=g;const x=Ad({inputs:{x:r},backend:n,attrs:{begin:d,size:h}});p[g]=ts({inputs:{x},backend:n,attrs:{shape:c}}),n.disposeIntermediateTensorInfo(x)}return p}const N3e={kernelName:F2,backendName:"cpu",kernelFunc:w3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,segmentIds:i}=e,{numSegments:a}=s;Ct(r,"unsortedSegmentSum");const l=r.shape.length,c=i.shape.length,u=[],d=[],h=l-c;let p=i;for(let x=0;x<h;++x){const y=J0({inputs:{input:p},backend:n,attrs:{dim:x+1}});p=y,d.push(y)}for(let x=0;x<a;++x){const y=uu(x,"int32"),v=n.makeTensorInfo([],"int32",y),w=n9({inputs:{a:v,b:p},backend:n}),N=ru({inputs:{x:w},backend:n,attrs:{dtype:"float32"}}),k=Sv({inputs:{a:N,b:r},backend:n}),C=lx({inputs:{x:k},backend:n,attrs:{axis:0,keepDims:!1}});u.push(C),d.push(v),d.push(w),d.push(N),d.push(k),d.push(C)}const g=nB({inputs:u,backend:n,attrs:{axis:0}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),g}const k3e={kernelName:M2,backendName:"cpu",kernelFunc:S3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C3e=[v2e,Q0e,w2e,S2e,iye,C2e,I2e,E2e,A2e,D2e,_2e,F2e,L2e,V2e,W2e,K2e,X2e,Z2e,Q2e,x2e,tve,sve,ive,oye,ove,sye,cye,cve,eye,dve,fve,pve,gve,yve,bve,Nve,kve,Tve,jve,$ve,Rve,Pve,Ove,Mve,Lve,zve,Uve,Gve,Hve,Kve,qve,Yve,Qve,u2e,tbe,uye,cbe,dye,ube,fye,gbe,xbe,vbe,mye,xye,wbe,Sbe,Cbe,Ibe,vye,wye,tye,Ebe,hve,Abe,Dbe,_be,d2e,Sye,Cye,Fbe,Iye,Lbe,Vbe,Wbe,Kbe,Xbe,Zbe,Jbe,Eye,ewe,nwe,rwe,awe,lwe,uwe,hwe,Aye,pwe,xwe,bwe,Dye,_ye,Swe,Twe,Ewe,Fye,Awe,Dwe,Pwe,sB,Mwe,f2e,Bye,Bwe,Vwe,Wwe,Hwe,nye,d4,qwe,p2e,m2e,g2e,Ywe,Jwe,eNe,nNe,rNe,iNe,oNe,qye,cNe,pNe,gNe,bNe,Yye,NNe,kNe,TNe,Zye,ywe,ENe,ANe,DNe,_Ne,FNe,LNe,zNe,UNe,e2e,WNe,n2e,r2e,HNe,qNe,YNe,JNe,e3e,l2e,Zve,n3e,r3e,a3e,l3e,u3e,h3e,Mye,b3e,N3e,k3e,Rwe];for(const t of C3e)ZO(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ed={},$1={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function T3e(t,e){ed[t]=e}function yo(t,e){if(!(t in ed)||e!=null){const s=j3e(t,e);if(s!==null)ed[t]=s;else return console.log("Could not get context for WebGL version",t),null}const n=ed[t];return n==null||n.isContextLost()?(delete ed[t],yo(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),ed[t])}function I3e(t){if(!Pe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function j3e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??I3e(t);return n.addEventListener("webglcontextlost",s=>{s.preventDefault(),delete ed[t]},!1),Pe().getBool("SOFTWARE_WEBGL_ENABLED")&&($1.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",$1)||n.getContext("experimental-webgl",$1):n.getContext("webgl2",$1)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var jm;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(jm||(jm={}));var na;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(na||(na={}));var Nr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Nr||(Nr={}));function cx(t,e){return[e,t]}function E3e(t,e){return t*e}function A1(t){const e=Le(t),n=Math.ceil(e/4);return v3(n)}function Hf(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function $3e(t,e){const[n,s]=Hf(t,e);return n*s*4}function PT(t,e){const n=t;let s,r,i,a,l,c,u,d,h,p;return Pe().getNumber("WEBGL_VERSION")===2?(s=n.R32F,r=n.R16F,i=n.RGBA16F,a=n.RGBA32F,l=n.RED,u=4,d=1,h=n.HALF_FLOAT,p=n.FLOAT,c=n.RGBA8):(s=t.RGBA,r=t.RGBA,i=t.RGBA,a=n.RGBA,l=t.RGBA,u=4,d=4,h=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,c=t.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:l,downloadTextureFormat:c,downloadUnpackNumChannels:u,defaultNumChannels:d,textureTypeHalfFloat:h,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xt(t,e){const n=e();return Pe().getBool("DEBUG")&&A3e(t),n}function A3e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+_3e(t,e))}const R3e=596e-10,D3e=65504;function P3e(t){return!!(Pe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||R3e<Math.abs(t)&&Math.abs(t)<D3e)}function _3e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function R1(t,e){return ec(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function O3e(t,e){const n=ec(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(xt(t,()=>t.shaderSource(n,e)),xt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function F3e(t,e){const n=ec(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(xt(t,()=>t.shaderSource(n,e)),xt(t,()=>t.compileShader(n)),Pe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw rB(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const M3e=/ERROR: [0-9]+:([0-9]+):/g;function rB(t,e){const n=M3e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const s=+n[1],r=t.split(`
`),i=r.length.toString().length+2,a=r.map((h,p)=>Qh((p+1).toString(),i)+h);let l=0;for(let h=0;h<a.length;h++)l=Math.max(a[h].length,l);const c=a.slice(0,s-1),u=a.slice(s-1,s),d=a.slice(s);console.log(c.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Qh(u[0],l)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join(`
`))}function L3e(t){return ec(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function B3e(t,e){if(xt(t,()=>t.linkProgram(e)),!Pe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function lN(t,e){if(xt(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function z3e(t,e){const n=ec(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return xt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),xt(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function V3e(t,e){const n=ec(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return xt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),xt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function U3e(t){return ec(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function W3e(t,e){const n=Pe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const s=`[${t}x${e}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(t>n||e>n){const s=`[${t}x${e}]`,r=`[${n}x${n}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+r+".")}}function G3e(t){return ec(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function yR(t,e,n,s,r,i,a){const l=t.getAttribLocation(e,n);return l===-1?!1:(xt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,s)),xt(t,()=>t.vertexAttribPointer(l,r,t.FLOAT,!1,i,a)),xt(t,()=>t.enableVertexAttribArray(l)),!0)}function H3e(t,e,n){Z3e(t,n),xt(t,()=>t.activeTexture(t.TEXTURE0+n)),xt(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function K3e(t,e,n){return ec(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function q3e(t,e,n){return t.getUniformLocation(e,n)}function X3e(t,e,n,s){xt(t,()=>H3e(t,e,s)),xt(t,()=>t.uniform1i(n,s))}function cN(t,e,n){xt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),xt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function vR(t,e){xt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),xt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function D1(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Y3e(t,e))}function Y3e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ec(t,e,n){const s=xt(t,()=>e());if(s==null)throw new Error(n);return s}function Z3e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=e+t.TEXTURE0;if(s<t.TEXTURE0||s>n){const r=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${r}.`)}}function Cf(t,e=2){return Le(t.slice(0,t.length-e))}function Tf(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function P1(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Cf(t),...Tf(t)]),e}function J3e(t,e=!1){let n=Pe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),s=Pe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");s===1/0&&Pe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(s=n/2),e&&(n=n*2,s=s*2,t=t.map((l,c)=>c>=t.length-2?BS(t[c]):t[c]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=cu(t).newShape);let r=Le(t),i=null;t.length<=1&&r<=n?i=[1,r]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const a=i!=null&&Math.max(...i)>s&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||a)if(e){const l=Cf(t);let c=2,u=2;t.length&&([c,u]=Tf(t)),r=l*(c/2)*(u/2),i=v3(r).map(d=>d*2)}else i=v3(r);return i}function _1(t){return t%2===0}function ey(t,e){if(t=t.slice(-2),e=e.slice(-2),bn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],s=e[e.length-1];if(n===s||_1(n)&&_1(s)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&_1(t[0])&&_1(e[0])}let uN,dN;function Q3e(t){if(uN==null){const e=yo(t);uN=e.getParameter(e.MAX_TEXTURE_SIZE)}return uN}function e4e(t){if(dN==null){const e=yo(t);dN=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,dN)}function t4e(t){if(t===0)return 0;let e;const n=yo(t);return Ia(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Ia(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Ia(t,e){return t.getExtension(e)!=null}function bR(t){try{if(yo(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function n4e(t){if(t===0)return!1;const e=yo(t);if(t===1){if(!Ia(e,"OES_texture_float"))return!1}else if(!Ia(e,"EXT_color_buffer_float"))return!1;return f4(e)}function s4e(t){if(t===0)return!1;const e=yo(t);if(t===1){if(!Ia(e,"OES_texture_float")||!Ia(e,"WEBGL_color_buffer_float"))return!1}else{if(Ia(e,"EXT_color_buffer_float"))return f4(e);const s="EXT_color_buffer_half_float";if(Ia(e,s)){const r=e.getExtension(s);return r4e(e,r)}return!1}return f4(e)}function f4(t){const e=PT(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),a}function r4e(t,e){const n=PT(t,e),s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0);const l=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(s),t.deleteFramebuffer(a),l}function i4e(t){return t!==2?!1:yo(t).fenceSync!=null}function ux(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&K(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Et=Pe();Et.registerFlag("HAS_WEBGL",()=>Et.getNumber("WEBGL_VERSION")>0);Et.registerFlag("WEBGL_VERSION",()=>bR(2)?2:bR(1)?1:0);Et.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Et.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Et.get("WEBGL_VERSION")===2);Et.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Et.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Et.registerFlag("WEBGL_PACK",()=>Et.getBool("HAS_WEBGL"));Et.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_CLIP",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_REDUCE",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_LAZILY_UNPACK",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_CONV_IM2COL",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Q3e(Et.getNumber("WEBGL_VERSION")));Et.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>e4e(Et.getNumber("WEBGL_VERSION")));Et.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Et.getNumber("WEBGL_VERSION");return t===0?0:t4e(t)});Et.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Et.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!uF());Et.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>n4e(Et.getNumber("WEBGL_VERSION")));Et.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Et.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Et.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Et.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>s4e(Et.getNumber("WEBGL_VERSION")));Et.registerFlag("WEBGL_FENCE_API_ENABLED",()=>i4e(Et.getNumber("WEBGL_VERSION")));Et.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Et.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Et.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Et.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>uF()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Et.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Et.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Et.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Et.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Et.registerFlag("WEBGL_EXP_CONV",()=>!1);Et.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Et.getBool("IS_TEST"));Et.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Et.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Et.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Et.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function si(){let t,e,n,s,r,i,a,l,c,u;return Pe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",s="in",r="texture",i="outputColor",a="out vec4 outputColor;",l=Pe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",c="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",s="varying",r="texture2D",i="gl_FragColor",a="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:s,texture2D:r,output:i,defineOutput:a,defineSpecialNaN:l,defineSpecialInf:c,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gd(t,e,n="index"){const s=Mt(e);return s.map((r,i)=>{const a=`int ${t[i]} = ${n} / ${r}`,l=i===s.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${r}`:`index -= ${t[i]} * ${r}`;return`${a}; ${l};`}).join("")}function kv(t,e,n="index"){const s=Mt(e);return s.map((r,i)=>{const a=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,l=i===s.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${a}; ${l};`}).join("")}function a4e(t,e){const n=t.length,s=t.map(i=>`${e}[${i}]`),r=new Array(n-1);r[n-2]=s[n-1];for(let i=n-3;i>=0;--i)r[i]=`(${r[i+1]} * ${s[i+1]})`;return r}function o4e(t,e,n="index"){const s=t.map((i,a)=>a),r=a4e(s,e);return r.map((i,a)=>{const l=`int ${t[a]} = ${n} / ${r[a]}`,c=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${r[a]}`:`index -= ${t[a]} * ${r[a]}`;return`${l}; ${c};`}).join("")}function _T(t){const e=Mt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function OT(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const iB=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:aB}=kpe;function l4e(t,e,n){const s=[];if(t.forEach(g=>{const x=Le(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?s.push(`uniform float ${g.name}${x>1?`[${x}]`:""};`):(s.push(`uniform sampler2D ${g.name};`),s.push(`uniform int offset${g.name};`)),n.enableShapeUniforms){const{uniformShape:y}=FT(n.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(y.length){case 1:s.push(`uniform int ${g.name}Shape;`);break;case 2:s.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:s.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:s.push(`uniform ivec4 ${g.name}Shape;`);break}s.push(`uniform ivec2 ${g.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:s.push("uniform int outShape;");break;case 2:s.push("uniform ivec2 outShape;"),s.push("uniform int outShapeStrides;");break;case 3:s.push("uniform ivec3 outShape;"),s.push("uniform ivec2 outShapeStrides;");break;case 4:s.push("uniform ivec4 outShape;"),s.push("uniform ivec3 outShapeStrides;");break}s.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(g=>{s.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const r=s.join(`
`),i=t.map(g=>c4e(g,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=e.texShape,l=si(),c=h4e(l);let u,d,h=m4e(l);return e.isPacked?(u=u4e(e.logicalShape,a,n.enableShapeUniforms),d=p4e(l)):(u=d4e(e.logicalShape,a,n.enableShapeUniforms),d=f4e(l)),n.packedInputs&&(h+=v4e),[h,c,d,r,u,i,n.userCode].join(`
`)}function Kf(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return A4e(t,e);case 1:return D4e(t,e);case 2:return _4e(t,e);case 3:return F4e(t,e);case 4:return L4e(t,e);case 5:return B4e(t);case 6:return z4e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function oB(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return $4e(t);case 1:return R4e(t,e);case 2:return P4e(t,e);case 3:return O4e(t,e);default:return M4e(t,e)}}function c4e(t,e,n=!1,s){let r="";n?r+=oB(t,s):r+=Kf(t,s);const i=t.shapeInfo.logicalShape,a=e.logicalShape;return i.length<=a.length&&(n?r+=V4e(t,e):r+=U4e(t,e)),r}function u4e(t,e,n){switch(t.length){case 0:return lB();case 1:return b4e(t,e,n);case 2:return j4e(t,e,n);case 3:return N4e(t,e,n);default:return k4e(t,e,n)}}function d4e(t,e,n){switch(t.length){case 0:return lB();case 1:return w4e(t,e,n);case 2:return E4e(t,e,n);case 3:return S4e(t,e,n);case 4:return C4e(t,e,n);case 5:return T4e(t,e);case 6:return I4e(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function h4e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function f4e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function p4e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function m4e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${g4e}
    ${x4e}
    ${y4e}
  `}const g4e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,x4e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,y4e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,v4e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function lB(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function b4e(t,e,n){const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return s[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${s[1]}.0);
      }
    `:s[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${s[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      return 2 * (resTexRC.x * ${s[1]} + resTexRC.y);
    }
  `}function w4e(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function N4e(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),i=r*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec3(b, r, c);
    }
  `}function S4e(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${kv(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const s=Gd(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${s}
      return ivec3(r, c, d);
    }
  `}function k4e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),i=r*Math.ceil(t[t.length-2]/2);let a=i,l="",c="b, r, c";for(let u=2;u<t.length-1;u++)a*=t[t.length-u-1],l=`
      int b${u} = index / ${a};
      index -= b${u} * ${a};
    `+l,c=`b${u}, `+c;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      ${l}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec${t.length}(${c});
    }
  `}function C4e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${kv(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const s=Gd(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${s}
      return ivec4(r, c, d, d2);
    }
  `}function T4e(t,e){const n=Gd(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function I4e(t,e){const n=Gd(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function j4e(t,e,n){const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(bn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${s[0]}, ${s[1]}));
      }
    `;const r=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));

      int index = resTexRC.x * ${s[1]} + resTexRC.y;
      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec2(r, c);
    }
  `}function E4e(t,e,n){return bn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Hd(t){return`offset${t}`}function $4e(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),s=si();return`
    vec4 ${n}() {
      return ${s.texture2D}(${e}, halfCR);
    }
  `}function A4e(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${s}() {return ${n};}`;const[r,i]=t.shapeInfo.texShape;if(r===1&&i===1)return`
      float ${s}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Hd(n);if(e)return`
    float ${s}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[l,c]=t.shapeInfo.texShape;return`
    float ${s}() {
      vec2 uv = uvFromFlat(${l}, ${c}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function R4e(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),r=t.shapeInfo.texShape,i=si();if(e)return`
    vec4 ${s}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return`
    vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function D4e(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${s}(int index) {
        ${qf(t)}
      }
    `;const r=t.shapeInfo.texShape,i=r[0],a=r[1];if(a===1&&i===1)return`
      float ${s}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const l=Hd(n);return a===1?e?`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${l});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${i}, ${a}, index + ${l});
      return sampleTexture(${n}, uv);
    }
  `}function P4e(t,e){const n=t.shapeInfo.logicalShape,s=t.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),i=t.shapeInfo.texShape,a=i[0],l=i[1],c=si();if(i!=null&&bn(n,i))return e?`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);

        return ${c.texture2D}(${s}, uv);
      }
    `:`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${a}.0);

        return ${c.texture2D}(${s}, uv);
      }
    `;if(e)return`
    vec4 ${r}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${c.texture2D}(${s}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],d=Math.ceil(n[1]/2);return`
    vec4 ${r}(int row, int col) {
      vec2 uv = packedUVfrom2D(${d}, ${u[0]}, ${u[1]}, row, col);
      return ${c.texture2D}(${s}, uv);
    }
  `}function _4e(t,e){const n=t.shapeInfo.logicalShape,s=t.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),i=t.shapeInfo.texShape;if(i!=null&&bn(n,i)){if(e)return`
      float ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `;const p=i[0],g=i[1];return`
    float ${r}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${s}, uv);
    }
  `}const{newShape:a,keptDims:l}=cu(n),c=a;if(c.length<n.length){const p=Xf(t,c),g=["row","col"];return`
      ${Kf(p,e)}
      float ${r}(int row, int col) {
        return ${r}(${Yf(g,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${qf(t)}
      }
    `;const u=i[0],d=i[1],h=Hd(s);return d===1?e?`
      float ${r}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${s}, uv);
    }
  `:u===1?e?`
      float ${r}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${d}.0, 0.5);
      return sampleTexture(${s}, uv);
    }
  `:e?`
      float ${r}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
        return sampleTexture(${s}, uv);
      }
    `:`
  float ${r}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${h};
    vec2 uv = uvFromFlat(${u}, ${d}, index);
    return sampleTexture(${s}, uv);
  }
`}function O4e(t,e){const n=t.shapeInfo.logicalShape,s=t.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),i=t.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const p=n.slice(1),g=[1,2],x=Xf(t,p),y=["b","row","col"];return`
        ${oB(x,e)}
        vec4 ${r}(int b, int row, int col) {
          return ${r}(${Yf(y,g)});
        }
      `}const l=si();if(e)return`
    vec4 ${r}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `;const c=a[0],u=a[1],d=Math.ceil(n[2]/2),h=d*Math.ceil(n[1]/2);return`
    vec4 ${r}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${c}, ${u}, ${h}, ${d}, b, row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `}function F4e(t,e){const n=t.shapeInfo.logicalShape,s=t.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),i=n[1]*n[2],a=n[2],{newShape:l,keptDims:c}=cu(n),u=l;if(u.length<n.length){const y=Xf(t,u),v=["row","col","depth"];return`
        ${Kf(y,e)}
        float ${r}(int row, int col, int depth) {
          return ${r}(${Yf(v,c)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${a}, 1)));
        ${qf(t)}
      }
    `;const d=t.shapeInfo.texShape,h=d[0],p=d[1],g=t.shapeInfo.flatOffset;if(p===i&&g==null)return e?`
      float ${r}(int row, int col, int depth) {
        int stride1 = ${s}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
        float ${r}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${h}.0);
          return sampleTexture(${s}, uv);
        }
      `;if(p===a&&g==null)return e?`
      float ${r}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${s}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${r}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${h}.0);
      return sampleTexture(${s}, uv);
    }
  `;const x=Hd(s);return e?`
    float ${r}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${s}Shape[1] * ${s}Shape[2];
      int stride1 = ${s}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${x};
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
      return sampleTexture(${s}, uv);
    }
    `:`
      float ${r}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${a} + depth + ${x};
        vec2 uv = uvFromFlat(${h}, ${p}, index);
        return sampleTexture(${s}, uv);
      }
  `}function M4e(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),r=si();if(e)return`
    vec4 ${s}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${r.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,a=i.length,l=t.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],u=c[0],d=c[1],h=Math.ceil(i[a-1]/2);let p=h*Math.ceil(i[a-2]/2),g="int b, int row, int col",x=`b * ${p} + (row / 2) * ${h} + (col / 2)`;for(let y=2;y<a-1;y++)g=`int b${y}, `+g,p*=i[a-y-1],x=`b${y} * ${p} + `+x;return`
    vec4 ${s}(${g}) {
      int index = ${x};
      int texR = index / ${d};
      int texC = index - texR * ${d};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}, ${u});
      return ${r.texture2D}(${n}, uv);
    }
  `}function L4e(t,e){const n=t.shapeInfo.logicalShape,s=t.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),i=n[3],a=n[2]*i,l=n[1]*a,{newShape:c,keptDims:u}=cu(n);if(c.length<n.length){const N=Xf(t,c),k=["row","col","depth","depth2"];return`
      ${Kf(N,e)}
      float ${r}(int row, int col, int depth, int depth2) {
        return ${r}(${Yf(k,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${l}, ${a}, ${i}, 1)));
        ${qf(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],g=h[1],x=`int stride2 = ${s}Shape[3];`,y=`int stride1 = ${s}Shape[2] * stride2;`,v=`int stride0 = ${s}Shape[1] * stride1;`;if(g===l&&d==null)return e?`
      float ${r}(int row, int col, int depth, int depth2) {
        ${x}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(g===i&&d==null)return e?`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s}Shape[1] * ${s}Shape[2], ${s}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${s}, uv);
      }
    `;const w=Hd(s);return e?`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${x}
      ${y}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${w});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${w});
      return sampleTexture(${s}, uv);
    }
  `}function B4e(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),r=e[4],i=e[3]*r,a=e[2]*i,l=e[1]*a,{newShape:c,keptDims:u}=cu(e);if(c.length<e.length){const y=Xf(t,c),v=["row","col","depth","depth2","depth3"];return`
      ${Kf(y)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${Yf(v,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${l}, ${a}, ${i}, ${r})) +
          depth3;
        ${qf(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],g=h[1];if(g===l&&d==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${i}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===r&&d==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const x=Hd(n);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} + depth * ${i} +
          depth2 * ${r} + depth3 + ${x};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function z4e(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:r,keptDims:i}=cu(e);if(r.length<e.length){const v=Xf(t,r),w=["row","col","depth","depth2","depth3","depth4"];return`
      ${Kf(v)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${Yf(w,i)});
      }
    `}const a=e[5],l=e[4]*a,c=e[3]*l,u=e[2]*c,d=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${d}, ${u}, ${c}, ${l})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${qf(t)}
      }
    `;const h=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,g=p[0],x=p[1];if(x===d&&h==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${c}, ${l}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${x}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(x===a&&h==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${x}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=Hd(n);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${d} + col * ${u} + depth * ${c} +
          depth2 * ${l} + depth3 * ${a} + depth4 + ${y};
      vec2 uv = uvFromFlat(${g}, ${x}, index);
      return sampleTexture(${n}, uv);
    }
  `}function qf(t){const e=t.name,n=Le(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function V4e(t,e){const n=t.name,s=n.charAt(0).toUpperCase()+n.slice(1),r="get"+s+"AtOutCoords",i=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,l=aB(t.shapeInfo.logicalShape,e.logicalShape),c=Wn(a),u=a-i;let d;const h=["x","y","z","w","u","v"];i===0?d="":a<2&&l.length>=1?d="coords = 0;":d=l.map(N=>`coords.${h[N+u]} = 0;`).join(`
`);let p="";a<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((N,k)=>`coords.${h[k+u]}`).join(", ");let g="return outputValue;";const y=Le(t.shapeInfo.logicalShape)===1,w=Le(e.logicalShape)===1;if(i===1&&!y&&!w)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(y&&!w)a===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(l.length){const N=i-2,k=i-1;l.indexOf(N)>-1&&l.indexOf(k)>-1?g="return vec4(outputValue.x);":l.indexOf(N)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(k)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${r}() {
      ${c} coords = getOutputCoords();
      ${d}
      vec4 outputValue = get${s}(${p});
      ${g}
    }
  `}function U4e(t,e){const n=t.name,s=n.charAt(0).toUpperCase()+n.slice(1),r="get"+s+"AtOutCoords",i=e.texShape,a=t.shapeInfo.texShape,l=t.shapeInfo.logicalShape.length,c=e.logicalShape.length;if(!t.shapeInfo.isUniform&&l===c&&t.shapeInfo.flatOffset==null&&bn(a,i))return`
      float ${r}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Wn(c),d=aB(t.shapeInfo.logicalShape,e.logicalShape),h=c-l;let p;const g=["x","y","z","w","u","v"];l===0?p="":c<2&&d.length>=1?p="coords = 0;":p=d.map(y=>`coords.${g[y+h]} = 0;`).join(`
`);let x="";return c<2&&l>0?x="coords":x=t.shapeInfo.logicalShape.map((y,v)=>`coords.${g[v+h]}`).join(", "),`
    float ${r}() {
      ${u} coords = getOutputCoords();
      ${p}
      return get${s}(${x});
    }
  `}function Wn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function FT(t,e,n){const{newShape:s,keptDims:r}=cu(e),i=e.length,a=t&&i===3&&e[0]===1,l=a?e.slice(1):s,c=!t&&i>1&&!bn(e,n)&&s.length<i||a;return{useSqueezeShape:c,uniformShape:c?l:e,keptDims:r}}function Xf(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Yf(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W4e(t,e,n,s){const r=n.map((d,h)=>{const p={logicalShape:d.shape,texShape:d.isUniform?null:d.texData.texShape,isUniform:d.isUniform,isPacked:d.isUniform?!1:d.texData.isPacked,flatOffset:null};return d.texData!=null&&d.texData.slice!=null&&d.texData.slice.flatOffset>0&&(p.flatOffset=d.texData.slice.flatOffset),{name:e.variableNames[h],shapeInfo:p}}),i=r.map(d=>d.shapeInfo),a={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},l=l4e(r,a,e),c=F3e(t.gl,l),u=t.createProgram(c);return Pe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:c,source:l,webGLProgram:u,inShapeInfos:i,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:c,source:l,webGLProgram:u,inShapeInfos:i,outShapeInfo:a},cB(t,e,u)))}function cB(t,e,n){const s=[],r=[];let i,a,l,c=null,u=null;u=t.getUniformLocation(n,"NAN",!1),Pe().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(n,"INFINITY",!1));const d=!1;for(const h of e.variableNames){const p={name:h,uniform:t.getUniformLocation(n,h,d),offset:t.getUniformLocation(n,`offset${h}`,d)};e.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${h}Shape`,d),p.texShape=t.getUniformLocation(n,`${h}TexShape`,d)),s.push(p)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",d),l=t.getUniformLocation(n,"outShapeStrides",d),a=t.getUniformLocation(n,"outTexShape",d)),e.customUniforms)for(const h of e.customUniforms)r.push(t.getUniformLocation(n,h.name,d));return{variablesLocations:s,customUniformLocations:r,infLoc:c,nanLoc:u,outShapeLocation:i,outShapeStridesLocation:l,outTexShapeLocation:a}}function wR(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,s)=>{const r=n.logicalShape,i=e[s],a=i.shape;if(!bn(r,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${a} must match`);if(n.isUniform&&i.isUniform)return;const l=n.texShape,c=i.isUniform?null:i.texData.texShape;if(!bn(l,c))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${l} and ${c} must match`)})}function G4e(t,e,n,s,r){e.program.enableShapeUniforms||(wR(e.inShapeInfos,n),wR([e.outShapeInfo],[s]));const i=s.texData.texture,a=s.texData.texShape;s.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,a[0],a[1]):t.setOutputMatrixTexture(i.texture,a[0],a[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Pe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let c=0;c<n.length;++c){const u=n[c],{uniform:d,offset:h,shape:p,texShape:g}=e.variablesLocations[c];if(p){const{uniformShape:x}=FT(e.program.packedInputs,u.shape,u.texData.texShape);switch(x.length){case 1:t.gl.uniform1iv(p,new Int32Array(x));break;case 2:t.gl.uniform2iv(p,new Int32Array(x));break;case 3:t.gl.uniform3iv(p,new Int32Array(x));break;case 4:t.gl.uniform4iv(p,new Int32Array(x));break}}if(g&&t.gl.uniform2i(g,u.texData.texShape[0],u.texData.texShape[1]),d!=null){if(u.isUniform){if(Le(u.shape)<2)t.gl.uniform1f(d,u.uniformValues[0]);else{let x=u.uniformValues;x instanceof Float32Array||(x=new Float32Array(x)),t.gl.uniform1fv(d,x)}continue}u.texData.slice!=null&&h!=null&&t.gl.uniform1i(h,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,d,c)}}const l=e.outShapeLocation;if(l)switch(s.shape.length){case 1:t.gl.uniform1iv(l,new Int32Array(s.shape));break;case 2:t.gl.uniform2iv(l,new Int32Array(s.shape));break;case 3:t.gl.uniform3iv(l,new Int32Array(s.shape));break;case 4:t.gl.uniform4iv(l,new Int32Array(s.shape));break}if(e.outShapeStridesLocation){const c=Mt(s.shape);switch(s.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(c));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(c));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(c));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,s.texData.texShape[0],s.texData.texShape[1]),e.program.customUniforms&&r)for(let c=0;c<e.program.customUniforms.length;++c){const u=e.program.customUniforms[c],d=e.customUniformLocations[c],h=r[c];if(u.type==="float")t.gl.uniform1fv(d,h);else if(u.type==="vec2")t.gl.uniform2fv(d,h);else if(u.type==="vec3")t.gl.uniform3fv(d,h);else if(u.type==="vec4")t.gl.uniform4fv(d,h);else if(u.type==="int")t.gl.uniform1iv(d,h);else if(u.type==="ivec2")t.gl.uniform2iv(d,h);else if(u.type==="ivec3")t.gl.uniform3iv(d,h);else if(u.type==="ivec4")t.gl.uniform4iv(d,h);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function H4e(t,e,n){let s="";e.concat(n).forEach(a=>{const l=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){const c=a.texData.texShape,{useSqueezeShape:u,uniformShape:d,keptDims:h}=FT(t.packedInputs,a.shape,c);let p="",g="",x="";if(d.length===1&&t.packedInputs){const j=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];p=`${j[0]>1}_${j[1]>1}`}else if(d.length===2&&!t.packedInputs)g=`${d[0]>1}_${d[1]>1}`;else if(d.length>2&&!t.packedInputs){const j=Mt(d);x=`${j[0]===c[1]}_${j[j.length-1]===c[1]}`}const y=a.shape.length,v=d.length===2&&bn(a.shape,c),w=Le(a.shape)===1,N=yf(a.shape,n.shape),k=!t.packedInputs&&y===n.shape.length&&bn(c,n.texData.texShape),C=t.packedInputs||d.length>2?"":`${c[0]>1}_${c[1]>1}`;s+=`${y}_${k}_${u?h:""}_${d.length}_${w}_${N}_${v}_${p}_${g}_${x}_${C}_${l}`}else{const c=a.isUniform?"uniform":a.texData.texShape;s+=`${a.shape}_${c}_${l}`}});const r=t.userCode;let i=t.constructor.name;return i+="_"+s+"_"+r+`${Pe().getNumber("WEBGL_VERSION")}`,i}function Mr(t){return Pe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K4e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=jm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=si();this.outputShape=e,this.enableShapeUniforms=Mr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?kv(["r","c","d"],e):Gd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q4e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=jm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=si();this.outputShape=e,this.enableShapeUniforms=Mr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?kv(["r","c","d"],e):Gd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X4e{constructor(e){this.variableNames=["A"],this.outTexUsage=na.DOWNLOAD;const n=si();this.outputShape=e,this.userCode=`
      ${iB}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y4e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=na.DOWNLOAD;const n=si();this.outputShape=e,this.userCode=`
      ${iB}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e={R:0,G:1,B:2,A:3};class NR{constructor(e,n=!1,s="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=si();this.outputShape=e,this.enableShapeUniforms=Mr(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let a="";for(let l=0;l<s.length;l++){const c=s[l];a+=`
          if(offset == ${l}) {
            result = values[${Z4e[c]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?OT():_T(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${s.length});

        flatIndex = idiv(flatIndex, ${s.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${r.texture2D}(A, uv);
          ${a}
        }
        ${r.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J4e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=si();this.outputShape=e,this.enableShapeUniforms=Mr(this.outputShape.length);let r="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let l=0;l<=1;l++){const c=a*2+l;r+=`
          localCoords = coords;
          if(localCoords[2] + ${l} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${l};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${c}] = values[0];
            } else if (offset == 1) {
              result[${c}] = values[1];
            } else if (offset == 2) {
              result[${c}] = values[2];
            } else {
              result[${c}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?OT():_T(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${r}

          ${s.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q4e(t){const e=si(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return O3e(t,n)}function eSe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return z3e(t,e)}function tSe(t){const e=new Uint16Array([0,1,2,2,1,3]);return V3e(t,e)}function dx(t,e,n,s,r,i){W3e(e,n);const a=U3e(t),l=t.TEXTURE_2D;return xt(t,()=>t.bindTexture(l,a)),xt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),xt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),xt(t,()=>t.texParameteri(l,t.TEXTURE_MIN_FILTER,t.NEAREST)),xt(t,()=>t.texParameteri(l,t.TEXTURE_MAG_FILTER,t.NEAREST)),Pe().getNumber("WEBGL_VERSION")===1?xt(t,()=>t.texImage2D(l,0,s,e,n,0,r,i,null)):xt(t,()=>t.texStorage2D(l,1,s,e,n)),xt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,e]}}function uB(t){return t.internalFormatFloat}function nSe(t,e,n,s){const[r,i]=cx(e,n);return dx(t,r,i,uB(s),s.textureFormatFloat,t.FLOAT)}function dB(t){return t.internalFormatHalfFloat}function sSe(t,e,n,s){const[r,i]=cx(e,n);return dx(t,r,i,dB(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function hB(t){return t.downloadTextureFormat}function rSe(t,e,n,s){const[r,i]=cx(e,n);return dx(t,r,i,hB(s),t.RGBA,t.UNSIGNED_BYTE)}function fB(t){return t.internalFormatPackedFloat}function iSe(t,e,n,s){const[r,i]=Hf(e,n);return dx(t,r,i,fB(s),t.RGBA,t.FLOAT)}function pB(t){return t.internalFormatPackedHalfFloat}function aSe(t,e,n,s){const[r,i]=Hf(e,n);return dx(t,r,i,pB(s),t.RGBA,s.textureTypeHalfFloat)}function oSe(t,e,n){return xt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),yR(t,e,"clipSpacePos",n,3,20,0)&&yR(t,e,"uv",n,2,20,12)}function lSe(t,e,n,s,r,i){xt(t,()=>t.bindTexture(t.TEXTURE_2D,e));let a,l,c;r instanceof Uint8Array?(a=new Uint8Array(n*s*4),l=t.UNSIGNED_BYTE,c=t.RGBA):(a=new Float32Array(n*s*4),l=t.FLOAT,c=i.internalFormatPackedFloat),a.set(r),Pe().getNumber("WEBGL_VERSION")===2?xt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,s,t.RGBA,l,a)):xt(t,()=>t.texImage2D(t.TEXTURE_2D,0,c,n,s,0,t.RGBA,l,a)),xt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function cSe(t,e,n){xt(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Pe().getNumber("WEBGL_VERSION")===2?xt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):xt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Pe().getNumber("WEBGL_VERSION")===2?xt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):xt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),xt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function uSe(t,e,n,s){const r=t.createBuffer();xt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,r));const l=4*4*e*n;return xt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,l,t.STREAM_READ)),xt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),xt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),r}function dSe(t,e,n){const s=t,r=new Float32Array(n);return s.bindBuffer(s.PIXEL_PACK_BUFFER,e),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,r),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),r}function hSe(t,e,n,s){const[r,i]=cx(e,n),a=4,l=new Uint8Array(E3e(e*n,a));return xt(t,()=>t.readPixels(0,0,r,i,s.downloadTextureFormat,t.UNSIGNED_BYTE,l)),new Float32Array(l.buffer)}function fSe(t,e,n,s,r,i,a,l){const c=t,u=new Float32Array($3e(i,a));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,u),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),u}function pSe(t,e,n){const s=new Float32Array(e*n*4);return xt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,s)),s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hN{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Pe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,T3e(n,e)):this.gl=yo(n),e=this.gl,Pe().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>xt(i,()=>i.createVertexArray()),this.bindVertexArray=a=>xt(i,()=>i.bindVertexArray(a)),this.deleteVertexArray=a=>xt(i,()=>i.deleteVertexArray(a)),this.getVertexArray=()=>xt(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>xt(e,()=>i.createVertexArrayOES()),this.bindVertexArray=a=>xt(e,()=>i.bindVertexArrayOES(a)),this.deleteVertexArray=a=>xt(e,()=>i.deleteVertexArrayOES(a)),this.getVertexArray=()=>xt(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let s="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Pe().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=R1(this.gl,i),Ia(this.gl,a))this.textureHalfFloatExtension=R1(this.gl,a);else if(Pe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),Ia(this.gl,r))this.colorBufferHalfFloatExtension=R1(this.gl,r);else if(Pe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",Ia(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(Ia(this.gl,r))this.colorBufferHalfFloatExtension=this.gl.getExtension(r);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=eSe(this.gl),this.indexBuffer=tSe(this.gl),this.framebuffer=G3e(this.gl),this.textureConfig=PT(this.gl,this.textureHalfFloatExtension)}get debug(){return Pe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;xt(e,()=>e.finish()),xt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),xt(e,()=>e.deleteFramebuffer(this.framebuffer)),xt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),xt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),xt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),nSe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),sSe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),rSe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),cSe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,s,r){this.throwIfDisposed(),lSe(this.gl,e,n,s,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),aSe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),iSe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(vR(this.gl,this.framebuffer),this.outputTexture=null),xt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,s){return this.downloadMatrixDriver(e,()=>hSe(this.gl,n,s,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,s,r,i,a){return fSe(this.gl,e,n,s,r,i,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return dSe(this.gl,e,n)}createBufferFromTexture(e,n,s){this.bindTextureToFrameBuffer(e);const r=uSe(this.gl,n,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,s;if(Pe().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),s=()=>{const a=r.clientWaitSync(i,0,0);return a===r.ALREADY_SIGNALED||a===r.CONDITION_SATISFIED},n=i}else Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(n,Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:n,isFencePassed:s}}downloadMatrixFromPackedTexture(e,n,s){return this.downloadMatrixDriver(e,()=>pSe(this.gl,n,s))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=Q4e(n));const s=L3e(n);xt(n,()=>n.attachShader(s,this.vertexShader)),xt(n,()=>n.attachShader(s,e)),B3e(n,s);const r=Object.assign(s,{vao:this.createVertexArray()});return this.debug&&lN(n,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;xt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),oSe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(xt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&lN(this.gl,this.program),xt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,s=!0){return this.throwIfDisposed(),s?K3e(this.gl,e,n):q3e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),xt(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,s){this.throwIfDisposed(),this.throwIfNoProgram(),X3e(this.gl,e,n,s)}setOutputMatrixTexture(e,n,s){this.setOutputMatrixTextureDriver(e,s,n)}setOutputPackedMatrixTexture(e,n,s){this.throwIfDisposed();const[r,i]=Hf(n,s);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,n,s,r){this.setOutputMatrixWriteRegionDriver(s,e,r,n)}setOutputPackedMatrixWriteRegion(e,n,s,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&lN(this.gl,this.program),D1(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}xt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),xt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=R1(this.gl,Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=s.createQuery();return s.beginQuery(r.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,s=this.getQueryTimerExtensionWebGL2();n.endQuery(s.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await ZA(()=>this.disposed||this.isQueryAvailable(e,Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const s=this.gl;return s.getQueryParameter(e,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(e,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const s=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=s.getQueryParameter(e,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),r=s.getQueryObjectEXT(e,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=mSe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:s}=this.itemsToPoll[n];s()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let s;"setTimeoutCustom"in Pe().platform&&(s=Pe().platform.setTimeoutCustom.bind(Pe().platform)),ZA(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,s)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),cN(this.gl,e,this.framebuffer),this.debug&&D1(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(cN(this.gl,this.outputTexture,this.framebuffer),this.debug&&D1(this.gl)):vR(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const s=n();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(e,n,s){this.throwIfDisposed();const r=this.gl;cN(r,e,this.framebuffer),this.debug&&D1(r),this.outputTexture=e,xt(r,()=>r.viewport(0,0,n,s)),xt(r,()=>r.scissor(0,0,n,s))}setOutputMatrixWriteRegionDriver(e,n,s,r){this.throwIfDisposed(),xt(this.gl,()=>this.gl.scissor(e,n,s,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function mSe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:gSe,bincountImpl:mB,bincountReduceImpl:xSe,bitwiseAndImpl:ySe,castImpl:vSe,ceilImpl:bSe,concatImpl:wSe,equalImpl:NSe,expImpl:SSe,expm1Impl:kSe,floorImpl:CSe,gatherNdImpl:TSe,gatherV2Impl:ISe,greaterImpl:jSe,greaterEqualImpl:ESe,lessImpl:$Se,lessEqualImpl:ASe,linSpaceImpl:RSe,logImpl:DSe,maxImpl:PSe,maximumImpl:_Se,minimumImpl:OSe,multiplyImpl:FSe,negImpl:MSe,notEqualImpl:LSe,prodImpl:BSe,raggedGatherImpl:zSe,raggedRangeImpl:VSe,raggedTensorToTensorImpl:USe,rangeImpl:WSe,rsqrtImpl:GSe,scatterImpl:HSe,sigmoidImpl:KSe,simpleAbsImpl:gB,sliceImpl:qSe,sparseFillEmptyRowsImpl:XSe,sparseReshapeImpl:YSe,sparseSegmentReductionImpl:xB,sqrtImpl:ZSe,staticRegexReplaceImpl:JSe,stridedSliceImpl:QSe,stringNGramsImpl:eke,stringSplitImpl:tke,stringToHashBucketFastImpl:nke,subImpl:ske,tileImpl:rke,topKImpl:ike,transposeImpl:MT,uniqueImpl:ake}=c2e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yB(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Xr(t,e){return e===1?[t]:yB(t,e)}function oke(t,e){if(t===1)return"rc";let n="";for(let s=0;s<t;s++)n+=e[s],s<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lke{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Mr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Xr("rc",this.rank),s=Wn(this.rank),r=this.getOutOfBoundsCondition(n),i=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${r}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let s=0;s<=1;s++)for(let r=0;r<=1;r++){let i=`${s===0?"r":"rp1"}, ${r===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)i=`${e[e.length-1-a]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let s=this.rank-2;s<this.rank;s++)n+=`${e[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${r};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vB{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Mr(this.outputShape.length);let s="";for(let r=0;r<4;r++){let i="thisRC = rc;";r%2===1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),s+=`
        ${i}
        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${r}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${r>0?"}":""}
      `}this.userCode=`
      ${cke(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?OT():_T(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${s}

        setOutput(result);
      }
    `}}function cke(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?o4e(["r","c","d"],"inputShape"):Gd(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uke{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,s){const r=kR(n,s),i=CR(e,r,s);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const a=SR(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const c=this.freeTextures[i].pop();return this.usedTextures[i].push(c),c}let l;return r===Nr.PACKED_2X2_FLOAT32?l=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===Nr.PACKED_2X2_FLOAT16?l=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===Nr.UNPACKED_FLOAT32?l=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Nr.UNPACKED_FLOAT16?l=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Nr.PACKED_4X1_UNSIGNED_BYTE&&(l=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(l),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),l}releaseTexture(e,n,s,r){if(this.freeTextures==null)return;const i=kR(s,r),a=CR(n,i,r);a in this.freeTextures||(this.freeTextures[a]=[]);const l=SR(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),c=Pe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");c!==-1&&this._numBytesAllocated>c?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=l):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=l),this.numUsedTextures--;const u=this.usedTextures[a],d=u&&u.indexOf(e);if(d==null||d<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[d]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function dke(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function SR(t,e,n,s,r){const i=hke(e,s);let a;if(r){const[c,u]=Hf(t[0],t[1]);a=c*u}else{const[c,u]=cx(t[0],t[1]);a=c*u}const l=dke(n,i);return a*l}function hke(t,e){switch(t){case Nr.PACKED_2X2_FLOAT32:return fB(e);case Nr.PACKED_2X2_FLOAT16:return pB(e);case Nr.UNPACKED_FLOAT32:return uB(e);case Nr.UNPACKED_FLOAT16:return dB(e);case Nr.PACKED_4X1_UNSIGNED_BYTE:return hB(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function fke(t){return Pe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Nr.PACKED_2X2_FLOAT32:Nr.UNPACKED_FLOAT32:t?Nr.PACKED_2X2_FLOAT16:Nr.UNPACKED_FLOAT16}function kR(t,e){if(t===na.UPLOAD)return Nr.PACKED_2X2_FLOAT32;if(t===na.RENDER||t==null)return fke(e);if(t===na.DOWNLOAD||t===na.PIXELS)return Nr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function CR(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wo{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Mr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const La="if (isnan(x)) return x;",pke="return x;",TR="return abs(x);",mke="return (x >= 0.0) ? x : (exp(x) - 1.0);",gke=La+`
  return (x < 0.0) ? 0.0 : x;
`,xke=La+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ec="return x;",yke="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vke="return x;",bke=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,wke=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Nke=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ske="return 1.0 / (1.0 + exp(-1.0 * x));";class Dc{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Mr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kke{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Mr(this.outputShape.length);const n=e.length,s=Xr("rc",n),r=Wn(n),i=oke(n,s),a=s.slice(-2),l=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${r} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${l}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cke=TC,Tke=1e-7,Ike=1e-4,O1={};function jke(t){return t in O1||(O1[t]={}),O1[t]}const Eke=Pe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),$ke=600;function Ake(){return Pe().global.screen==null?1024:Pe().global.screen.height*Pe().global.screen.width*window.devicePixelRatio*$ke/1024/1024}class Cv extends MS{nextDataId(){return Cv.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Pe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof hN)n=e;else{const s=yo(Pe().getNumber("WEBGL_VERSION"),e);n=new hN(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=yo(Pe().getNumber("WEBGL_VERSION"));n=new hN(s),this.binaryCache=jke(Pe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new uke(this.gpgpu),this.numMBBeforeWarning=Ake(),this.texData=new WO(this,_o())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,s,r,i,a){const l=this.makeTensorInfo(n,s),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[r,i]},c.texShape=[r,i];const u=P1(n),d=new NR(u,!1,a),h=this.runWebGLProgram(d,[l],s,[[r,i]]);return h.shape=n,c.texture=null,this.disposeIntermediateTensorInfo(l),h.dataId}write(e,n,s){if((Pe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Pe().getBool("DEBUG"))&&this.checkNumericalProblems(e),s==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:n,dtype:s,values:e,usage:na.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,s,r,i){if(Pe().getBool("DEBUG")&&this.checkNumericalProblems(n),r==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:s,dtype:r,values:n,usage:na.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:s,dtype:r,complexTensorInfos:i,slice:a,shape:l,isPacked:c}=n;if(a!=null){let p;c?p=new Dc(l,Ec):p=new Wo(l,Ec);const g=this.runWebGLProgram(p,[{dataId:e,shape:l,dtype:r}],r),x=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),x}if(s!=null)return this.convertAndCacheOnCPU(e);if(r==="string")return s;const u=this.activeTimers!=null;let d;u&&(d=ci());let h;if(r==="complex64"){const p=this.readSync(i.real.dataId),g=this.readSync(i.imag.dataId);h=Gl(p,g)}else h=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=ci()-d),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const x=this.pendingRead.get(e);return new Promise(y=>x.push(y))}const n=this.texData.get(e),{values:s,shape:r,slice:i,dtype:a,complexTensorInfos:l,isPacked:c}=n;if(i!=null){let x;c?x=new Dc(r,Ec):x=new Wo(r,Ec);const y=this.runWebGLProgram(x,[{dataId:e,shape:r,dtype:a}],a),v=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),v}if(s!=null)return this.convertAndCacheOnCPU(e);if(Pe().getBool("DEBUG")&&!Pe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Pe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,d;if(a!=="complex64"&&Pe().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(e);const x=this.texData.get(d.dataId);u=this.gpgpu.createBufferFromTexture(x.texture.texture,...A1(r))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(a==="complex64"){const x=await Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]),y=x[0],v=x[1];h=Gl(y,v)}else if(u==null)h=this.getValuesFromTexture(e);else{const x=Le(r);h=this.gpgpu.downloadFloat32MatrixFromBuffer(u,x)}if(d!=null&&this.disposeIntermediateTensorInfo(d),u!=null){const x=this.gpgpu.gl;xt(x,()=>x.deleteBuffer(u))}const p=this.convertAndCacheOnCPU(e,h),g=this.pendingRead.get(e);return this.pendingRead.delete(e),g.forEach(x=>x(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&_o().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const s=this.texData.get(e),{values:r,shape:i,slice:a,dtype:l,isPacked:c,texture:u}=s;if(l==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let g;c?g=new Dc(i,Ec):g=new Wo(i,Ec);const x=this.runWebGLProgram(g,[{dataId:e,shape:i,dtype:l}],l),y=this.readToGPU(x,n);return this.disposeIntermediateTensorInfo(x),y}if(u==null)throw r!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const d=this.decode(e,n.customTexShape),h=_o().makeTensorFromTensorInfo(d),p=this.texData.get(d.dataId);return Object.assign({tensorRef:h},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const s=n.map(r=>Xc(r));return un(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return un(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const s=e[n];if(!P3e(s))throw Pe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:s,isPacked:r}=this.texData.get(e),i=Le(n);if(Pe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),g=this.texData.get(p.dataId),x=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...A1(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(p),x}const a=Pe().getBool("WEBGL_PACK")&&r===!0,l=a?P1(n):n,c=a?new Y4e(l):new X4e(l),u=this.runWebGLProgram(c,[{shape:l,dtype:s,dataId:e}],"float32"),d=this.texData.get(u.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),h}timerAvailable(){return Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,s=[];let r=!1;this.programTimersStack==null?(this.programTimersStack=s,r=!0):this.activeTimers.push(s),this.activeTimers=s,e();const i=bd(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),a=bd(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=n,r&&(this.programTimersStack=null);const l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const c=await Promise.all(i);l.kernelMs=eae(c),l.getExtraProfileInfo=()=>c.map((u,d)=>({name:a[d],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else l.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,l})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ci(),endMs:null}}endTimer(e){return Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ci(),e)}async getQueryTime(e){if(Pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:s}=this.texData.get(e);return s!=null&&(this.disposeData(s.real.dataId,n),this.disposeData(s.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:s,texShape:r,usage:i,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),n!=null&&(this.numBytesInGPU-=this.computeBytes(r,s),this.textureManager.releaseTexture(n,r,i,a)));const d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Eke){return Pe().getBool("WEBGL_CPU_FORWARD")&&e.every(s=>this.texData.get(s.dataId).texture==null&&Le(s.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){ta("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Cke(e.shape,n)}packedUnaryOp(e,n,s){const r=new Dc(e.shape,n),i=this.compileAndRun(r,[e],s);return _o().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const r=gB(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,r)}if(Pe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,TR,e.dtype);const n=new Wo(e.shape,TR),s=this.compileAndRun(n,[e]);return _o().makeTensorFromTensorInfo(s)}makeTensorInfo(e,n,s){let r;if(n==="string"&&s!=null&&s.length>0&&Km(s[0])){const i=s.map(a=>Oc(a));r=this.write(i,e,n)}else r=this.write(s,e,n);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:n}}makeOutput(e,n,s){return _o().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,s),this)}unpackTensor(e){const n=new kke(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new lke(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const s=[Cf(e.shape),...Tf(e.shape)],r={dtype:e.dtype,shape:s,dataId:e.dataId},i=[Cf(n),...Tf(n)],a=new vB(i,s),l=!0,c=[s],u=this.runWebGLProgram(a,[r],e.dtype,c,l);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const s=this.texData.get(e),{isPacked:r,shape:i,dtype:a}=s;if(n!=null){const p=Le(i),g=n[0]*n[1]*4;K(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const l=P1(i);let c;r?c=new q4e(l):c=new K4e(l);const u=!0,d=[n??A1(l)],h=this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,d,u,n);return{dtype:a,shape:i,dataId:h.dataId}}runWebGLProgram(e,n,s,r,i=!1,a){const l=this.makeTensorInfo(e.outputShape,s),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===jm.DENSE){const w=a??A1(e.outputShape);c.texShape=w.map(N=>N*2)}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),Le(l.shape)===0)return c.values=Cr(l.dtype,0),l;const u=[],d=n.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let N=this.texData.get(w.dataId);if(N.texture==null){if(!e.packedInputs&&Le(w.shape)<=Pe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:N.values};e.packedInputs&&(N.isPacked=!0,N.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!N.isPacked!=!!e.packedInputs)w=N.isPacked?this.unpackTensor(w):this.packTensor(w),u.push(w),N=this.texData.get(w.dataId);else if(N.isPacked&&!ey(N.shape,w.shape)){const k=w,C=w.shape;w.shape=N.shape,w=this.packedReshape(w,C),u.push(w),N=this.texData.get(w.dataId),k.shape=C}return{shape:w.shape,texData:N,isUniform:!1}});this.uploadToGPU(l.dataId);const h={shape:l.shape,texData:c,isUniform:!1},p=H4e(e,d,h),g=this.getAndSaveBinary(p,()=>W4e(this.gpgpu,e,d,h)),x=this.activeTimers!=null;let y;x&&(y=this.startTimer()),Pe().get("ENGINE_COMPILE_ONLY")||G4e(this.gpgpu,g,d,h,r),u.forEach(w=>this.disposeIntermediateTensorInfo(w)),x&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const v=Pe().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){const w=ci();w-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!Pe().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&i===!1){const w=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),w}return l}compileAndRun(e,n,s,r,i=!1){return s=s||n[0].dtype,this.runWebGLProgram(e,n,s,r,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Pe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ie(()=>{if(!Pe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Pe().getBool("DEBUG");Pe().set("DEBUG",!1);const n=this.abs(Lt(1e-8)).dataSync()[0];if(Pe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Tke:Ike}uploadToGPU(e){const n=this.texData.get(e),{shape:s,dtype:r,values:i,texture:a,usage:l,isPacked:c}=n;if(a!=null)return;const u=this.activeTimers!=null;let d;u&&(d=ci());let h=n.texShape;if(h==null&&(h=J3e(s,c),n.texShape=h),i!=null){const p=P1(s);let g,x=h[1],y=h[0];const v=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(c||!v)&&([x,y]=Hf(h[0],h[1])),c?g=new J4e(p,v):g=new NR(p,v);const w=v?[y,x]:h,N=this.makeTensorInfo(w,r),k=this.texData.get(N.dataId);v?k.usage=na.PIXELS:k.usage=na.UPLOAD,k.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(N.dataId),x,y,i);const C=[[y,x]],R=this.runWebGLProgram(g,[N],r,C,!0),_=this.texData.get(R.dataId);n.texShape=_.texShape,n.isPacked=_.isPacked,n.usage=_.usage,Pe().get("ENGINE_COMPILE_ONLY")?this.disposeData(R.dataId):(n.texture=_.texture,n.values=null,this.texData.delete(R.dataId)),this.disposeIntermediateTensorInfo(N),u&&(this.uploadWaitMs+=ci()-d)}else{const p=this.acquireTexture(h,l,r,c);n.texture=p}}convertAndCacheOnCPU(e,n){const s=this.texData.get(e),{dtype:r}=s;return n!=null&&(s.values=Rke(n,r)),s.values}acquireTexture(e,n,s,r){if(this.numBytesInGPU+=this.computeBytes(e,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,r)}computeBytes(e,n){return e[0]*e[1]*E0(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const s=new Promise(r=>{try{this.checkCompletion_(n),r(!0)}catch(i){throw i}});e.push(s)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await sM(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(rB(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:s,infLoc:r,nanLoc:i,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=cB(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=s,e.infLoc=r,e.nanLoc=i,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,n,s){e.channels=e.channels||"RGBA";const{texture:r,height:i,width:a,channels:l}=e,c=_o().backend;if(!c.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=c.writeTexture(r,n,s,i,a,l);return _o().makeTensorFromDataId(u,n,s,c)}}Cv.nextDataId=0;function Rke(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let s=0;s<n.length;++s)n[s]=Math.round(t[s]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dF()&&mF("webgl",()=>new Cv,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LT=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Rd{constructor(e,n,s){this.variableNames=["A","B"],this.outputShape=rn(n,s),this.enableShapeUniforms=Mr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kd=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Zf{constructor(e,n,s,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=rn(n,s);const i=this.outputShape.length;this.enableShapeUniforms=Mr(i);let a="";if(r)if(i===0||Le(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Wn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const c=Xr("coords",i);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${c[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${c[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${c[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${c[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gi(t){const{inputs:e,backend:n}=t,{x:s}=e;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const Dke={kernelName:pg,backendName:"webgl",kernelFunc:Gi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bu(t){const{inputs:e,backend:n}=t,{real:s,imag:r}=e,i=n.makeTensorInfo(s.shape,"complex64"),a=n.texData.get(i.dataId),l=Gi({inputs:{x:s},backend:n}),c=Gi({inputs:{x:r},backend:n});return a.complexTensorInfos={real:l,imag:c},i}const Pke={kernelName:XS,backendName:"webgl",kernelFunc:bu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bB="return (a < 0.) ? b * a : a;",wB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function _ke(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{alpha:i}=s,a=n.makeTensorInfo([],"float32",uu(i,"float32")),l=Pe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zf(wB,r.shape,a.shape):new Rd(bB,r.shape,a.shape),c=n.runWebGLProgram(l,[r,a],"float32");return n.disposeIntermediateTensorInfo(a),c}const Oke={kernelName:i2,backendName:"webgl",kernelFunc:_ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NB="return (a < 0.) ? b * a : a;",SB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Fke(t){const{inputs:e,backend:n}=t,{x:s,alpha:r}=e,i=Pe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zf(SB,s.shape,r.shape):new Rd(NB,s.shape,r.shape);return n.runWebGLProgram(i,[s,r],"float32")}const Mke={kernelName:k2,backendName:"webgl",kernelFunc:Fke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jf="if (isnan(x)) return x;";function Cn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:s}){return({inputs:r,backend:i})=>{const{x:a}=r,l=i,c=s||a.dtype;if(l.shouldExecuteOnCPU([a])&&n!=null){const h=l.texData.get(a.dataId),p=n(h.values,c);return l.makeTensorInfo(a.shape,c,p)}const u=Pe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let d;return u?d=new Dc(a.shape,e):d=new Wo(a.shape,t),l.runWebGLProgram(d,[a],c)}}function $r({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:s=!1,cpuKernelImpl:r,dtype:i}){return({inputs:a,backend:l})=>{const{a:c,b:u}=a,d=l;if(s&&c.dtype==="complex64"){const x=d.texData.get(c.dataId),y=d.texData.get(u.dataId),[v,w]=[[x.complexTensorInfos.real,y.complexTensorInfos.real],[x.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(k=>{const[C,j]=k,R={dataId:C.dataId,dtype:C.dtype,shape:c.shape},_={dataId:j.dataId,dtype:j.dtype,shape:u.shape},A=new Rd(t,c.shape,u.shape);return d.runWebGLProgram(A,[R,_],Vi(C.dtype,j.dtype))}),N=bu({inputs:{real:v,imag:w},backend:d});return d.disposeIntermediateTensorInfo(v),d.disposeIntermediateTensorInfo(w),N}const h=i||Vi(c.dtype,u.dtype);if((c.dtype==="string"||u.dtype==="string"||d.shouldExecuteOnCPU([c,u]))&&r!=null){const x=d.texData.get(c.dataId).values,y=d.texData.get(u.dataId).values,v=c.dtype==="string"?Hl(x):x,w=c.dtype==="string"?Hl(y):y,[N,k]=r(c.shape,u.shape,v,w,h),C=d.makeTensorInfo(k,h),j=d.texData.get(C.dataId);return j.values=N,C}const p=Pe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let g;return p?g=new Zf(e,c.shape,u.shape,n):g=new Rd(t,c.shape,u.shape),d.runWebGLProgram(g,[c,u],h)}}function Em(t,e=!1){if(t==="linear")return e?vke:pke;if(t==="relu")return e?wke:gke;if(t==="elu")return e?bke:mke;if(t==="relu6")return e?Nke:xke;if(t==="prelu")return e?SB:NB;if(t==="leakyrelu")return e?wB:bB;if(t==="sigmoid")return e?Ske:yke;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kB{constructor(e,n,s,r=!1,i=!1,a=!1,l=null,c=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=Mr(this.outputShape.length);const d=r?e[1]:e[2],h=Math.ceil(d/2),p=r?"i * 2, rc.y":"rc.y, i * 2",g=i?"rc.z, i * 2":"i * 2, rc.z",x=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",w="";l&&(c?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${l}
        }`:u?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${l}
        }`:v=`vec4 activation(vec4 x) {
          ${l}
        }`,w="result = activation(result);");const N=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let k="rc.x",C="rc.x";e[0]<n[0]?k=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(C=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${k};
        int batchB = ${C};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${x[0]} * ${y[0]});
          result += (${x[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${N}

        ${w}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IR={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class jR{constructor(e,n,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=rn(n,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ER="return a * b;";function BT(t){const{inputs:e,backend:n}=t,{a:s,b:r}=e,i=Vi(s.dtype,r.dtype);if(s.dtype==="complex64"){const l=n.texData.get(s.dataId),c=n.texData.get(r.dataId),u=new jR(IR.REAL,s.shape,r.shape),d=new jR(IR.IMAG,s.shape,r.shape),h=[{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:r.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:r.shape}],p=n.runWebGLProgram(u,h,"float32"),g=n.runWebGLProgram(d,h,"float32"),x=bu({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),x}if(n.shouldExecuteOnCPU([s,r])){const l=n.texData.get(s.dataId),c=n.texData.get(r.dataId),[u,d]=FSe(s.shape,r.shape,l.values,c.values,i),h=n.makeTensorInfo(d,i),p=n.texData.get(h.dataId);return p.values=u,h}let a;return Pe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new Zf(ER,s.shape,r.shape):a=new Rd(ER,s.shape,r.shape),n.runWebGLProgram(a,[s,r],i)}const Lke={kernelName:Sg,backendName:"webgl",kernelFunc:BT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bke(t,e,n){const s=[Cf(t.shape),...Tf(t.shape)],r={dtype:t.dtype,shape:s,dataId:t.dataId},i=[Cf(e),...Tf(e)],a=new vB(i,s),l=!0,c=[s],u=n.runWebGLProgram(a,[r],t.dtype,c,l);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pt(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{shape:i}=s,a=n,l=Le(r.shape),c=GO(i,l),u=Le(c);K(l===u,()=>`The new shape (${c}) has ${u} elements and the old shape (${r.shape}) has ${l} elements. The new shape and old shape must have the same number of elements.`);const d=a.texData.get(r.dataId);return d.isPacked&&!ey(r.shape,c)&&!(d.texture!==null&&ey(d.shape,c))?Bke(r,c,a):(a.incRef(r.dataId),{dataId:r.dataId,shape:c,dtype:r.dtype})}const zke={kernelName:T2,backendName:"webgl",kernelFunc:pt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $R{constructor(e,n){this.variableNames=["x"];const{windowSize:s,batchSize:r,inSize:i,outSize:a}=e;this.outputShape=[r,a];const l=Math.floor(s/4)*4,c=s%4;let u="sumValue += dot(values, ones);";if(n!=null){const h=1/n;u=`sumValue += dot(values * ${mf(h)?h.toPrecision(2):h}, ones);`}let d="";i%s>0&&(d=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${l};
        if (${c===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${c===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${c===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vke{constructor(e,n){this.variableNames=["x"];const{windowSize:s,batchSize:r,inSize:i,outSize:a}=e;this.outputShape=[r,a];let l="0.0",c="";n==="prod"?l="1.0":n==="min"?(l="1.0 / 1e-20",c="min"):n==="max"&&(l="-1.0 / 1e-20",c="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const d=Math.floor(s/4)*4,h=s%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${c}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${c}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";n==="all"?(l="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):n==="any"&&(l="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let x="";i%s>0&&(x=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${l};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${x}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${l});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${d}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${d};
        if (${h===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],s=cv(n);e.push({inSize:n,windowSize:s,outSize:Math.ceil(n/s)})}return e}function qd(t,e,n,s){const r=Uke(t.shape);let i=t;for(let a=0;a<r.length;a++){const{inSize:l,windowSize:c,outSize:u}=r[a];let d,h;n==="mean"?d=a===0?new $R({windowSize:c,inSize:l,batchSize:t.shape[0],outSize:u},l):new $R({windowSize:c,inSize:l,batchSize:t.shape[0],outSize:u}):d=new Vke({windowSize:c,inSize:l,batchSize:t.shape[0],outSize:u},n),h=i,i=s.runWebGLProgram(d,[i],e),h.dataId!==t.dataId&&s.disposeIntermediateTensorInfo(h)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wke{constructor(e,n){this.variableNames=["A"];const s=new Array(e.length);for(let a=0;a<s.length;a++)s[a]=e[n[a]];this.outputShape=s,this.rank=s.length;const r=Wn(this.rank),i=Gke(n);this.userCode=`
    void main() {
      ${r} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function Gke(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(e);for(let r=0;r<t.length;r++)s[t[r]]=n[r];return s.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hke{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(e.length);for(let d=0;d<s.length;d++)s[d]=e[n[d]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=Wn(this.rank),i=yB("rc",this.rank),a=new Array(this.rank);for(let d=0;d<n.length;d++)a[n[d]]=i[d];const l=`vec2(${a.slice(-2).join()})`,c=`++${i[this.rank-1]} < ${s[this.rank-1]}`,u=`getChannel(getA(${a.join()}), ${l})`;this.userCode=`
    void main() {
      ${r} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${c}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${u};
        if(${c}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tv(t,e,n){const s=Pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Hke(t.shape,e):new Wke(t.shape,e);return n.runWebGLProgram(s,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kke(t,e,n,s){const r=e,i=t.shape.length,a=fn(r,t.shape);let l=a;const c=Ns(l,i),u=c!=null;let d=t;u&&(d=Tv(t,c,s),l=Fs(l.length,i)),jr("sum",l,i);const[h,p]=mr(d.shape,l);let g=h;n&&(g=Os(h,a));const x=Le(p),v=Le(t.shape)/x,w=pt({inputs:{x:d},attrs:{shape:[v,x]},backend:s}),N=Kk(t.dtype),k=qd(w,N,"sum",s),C=pt({inputs:{x:k},attrs:{shape:g},backend:s});return s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(k),u&&s.disposeIntermediateTensorInfo(d),C}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iv(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s;return Kke(r,i,a,n)}const qke={kernelName:R2,backendName:"webgl",kernelFunc:Iv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qr(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{perm:i}=s,a=n,l=r.shape.length,c=new Array(l);for(let d=0;d<c.length;d++)c[d]=r.shape[i[d]];let u;if(a.shouldExecuteOnCPU([r])){const h=a.texData.get(r.dataId).values,p=MT(h,r.shape,r.dtype,i,c);u=a.makeTensorInfo(c,r.dtype);const g=a.texData.get(u.dataId);g.values=p}else u=Tv(r,i,a);return u}const Xke={kernelName:ef,backendName:"webgl",kernelFunc:Qr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CB=1e3;function ty({a:t,b:e,transposeA:n,transposeB:s,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:l=0,activation:c=null}){const u=t.shape.length,d=e.shape.length,h=n?t.shape[u-2]:t.shape[u-1],p=s?e.shape[d-1]:e.shape[d-2],g=n?t.shape[u-1]:t.shape[u-2],x=s?e.shape[d-2]:e.shape[d-1],y=t.shape.slice(0,-2),v=e.shape.slice(0,-2),w=Le(y),N=Le(v),C=rn(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([g,x]);K(h===p,()=>`Error in matMul: inner shapes (${h}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${s} must match.`);const j=n?[w,h,g]:[w,g,h],R=s?[N,x,p]:[N,p,x],_=pt({inputs:{x:t},backend:r,attrs:{shape:j}}),A=pt({inputs:{x:e},backend:r,attrs:{shape:R}}),O=[_,A],L=Math.max(w,N),D=n?_.shape[1]:_.shape[2],q=i!=null,V=a!=null,ne=c==="leakyrelu",J=c!=null?Em(c,!0):null,ee=q||V||ne||J!=null;let te;if((g===1||x===1)&&D>CB&&ee===!1){let Q=_,G=A;n&&(Q=Qr({inputs:{x:_},backend:r,attrs:{perm:[0,2,1]}}),O.push(Q)),s&&(G=Qr({inputs:{x:A},backend:r,attrs:{perm:[0,2,1]}}),O.push(G));const H=x!==1,ie=x===1;let de=Q;H&&(de=pt({inputs:{x:Q},backend:r,attrs:{shape:[L,D,1]}}),O.push(de));const ke=x===1?2:1;let we=G;ie&&(we=pt({inputs:{x:G},backend:r,attrs:{shape:[L,1,D]}}),O.push(we));const Ee=BT({inputs:{a:de,b:we},backend:r});te=Iv({inputs:{x:Ee},backend:r,attrs:{axis:ke,keepDims:!0}}),O.push(Ee)}else{const Q=Vi(t.dtype,e.dtype),G=new kB(j,R,[L,g,x],n,s,q,J,V,ne),H=[_,A];if(i!=null&&H.push(i),V&&H.push(a),ne){const ie=r.makeTensorInfo([],"float32",uu(l,"float32"));H.push(ie),O.push(ie)}te=r.runWebGLProgram(G,H,Q)}const X=pt({inputs:{x:te},backend:r,attrs:{shape:C}});O.push(te);for(const Q of O)r.disposeIntermediateTensorInfo(Q);return X}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yke(t){const{inputs:e,backend:n,attrs:s}=t,{a:r,b:i,bias:a,preluActivationWeights:l}=e,{transposeA:c,transposeB:u,activation:d,leakyreluAlpha:h}=s;return ty({a:r,b:i,transposeA:c,transposeB:u,backend:n,bias:a,preluActivationWeights:l,leakyreluAlpha:h,activation:d})}const Zke={kernelName:$0,backendName:"webgl",kernelFunc:Yke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AR="return abs(x);";function Jke(t){const{inputs:e,backend:n}=t,{x:s}=e;if(n.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const i=n.texData.get(s.dataId),a=gB(i.values);return n.makeTensorInfo(s.shape,s.dtype,a)}let r;return Pe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?r=new Dc(s.shape,AR):r=new Wo(s.shape,AR),n.runWebGLProgram(r,[s],s.dtype)}const Qke={kernelName:Fy,backendName:"webgl",kernelFunc:Jke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eCe=La+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,tCe=Cn({opSnippet:eCe}),nCe={kernelName:qm,backendName:"webgl",kernelFunc:tCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sCe=La+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,rCe=Cn({opSnippet:sCe}),iCe={kernelName:Xm,backendName:"webgl",kernelFunc:rCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RR="return a + b;",aCe=$r({opSnippet:RR,packedOpSnippet:RR,supportsComplex:!0,cpuKernelImpl:gSe}),oCe={kernelName:Lf,backendName:"webgl",kernelFunc:aCe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lCe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);const s=[];this.variableNames.forEach(i=>{s.push(`float v${i} = get${i}AtOutCoords();`)});const r=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${r};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cCe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);const s=[];this.variableNames.forEach(i=>{s.push(`vec4 v${i} = get${i}AtOutCoords();`)});const r=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${r};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0(t){const{inputs:e,backend:n}=t,s=e;if(s.length===1)return Gi({inputs:{x:s[0]},backend:n});if(s.length>Pe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const c=Math.floor(s.length/2),u=i0({inputs:s.slice(0,c),backend:n}),d=i0({inputs:s.slice(c),backend:n});return i0({inputs:[u,d],backend:n})}const r=s.map(c=>c.dtype).reduce((c,u)=>Vi(c,u)),i=s.map(c=>c.shape),l=Pe().getBool("WEBGL_PACK")?new cCe(s[0].shape,i):new lCe(s[0].shape,i);return n.runWebGLProgram(l,s,r)}const uCe={kernelName:My,backendName:"webgl",kernelFunc:i0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s,l=r.shape.length,c=fn(i,r.shape);let u=c;const d=Ns(u,l);let h=r;d!=null&&(h=Qr({inputs:{x:r},backend:n,attrs:{perm:d}}),u=Fs(u.length,l)),jr("all",u,l);const[p,g]=mr(h.shape,u),x=Le(g),y=pt({inputs:{x:h},backend:n,attrs:{shape:[-1,x]}}),v=qd(y,y.dtype,"all",n);let w;if(a){const N=Os(p,c);w=pt({inputs:{x:v},backend:n,attrs:{shape:N}})}else w=pt({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),d!=null&&n.disposeIntermediateTensorInfo(h),w}const hCe={kernelName:US,backendName:"webgl",kernelFunc:dCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fCe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s,l=r.shape.length,c=fn(i,r.shape);let u=c;const d=Ns(u,l);let h=r;d!=null&&(h=Qr({inputs:{x:r},backend:n,attrs:{perm:d}}),u=Fs(u.length,l)),jr("any",u,l);const[p,g]=mr(h.shape,u),x=Le(g),y=pt({inputs:{x:h},backend:n,attrs:{shape:[-1,x]}}),v=qd(y,y.dtype,"any",n);let w;if(a){const N=Os(p,c);w=pt({inputs:{x:v},backend:n,attrs:{shape:N}})}else w=pt({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),d!=null&&n.disposeIntermediateTensorInfo(h),w}const pCe={kernelName:WS,backendName:"webgl",kernelFunc:fCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mCe{constructor(e,n,s){this.variableNames=["A"];const{windowSize:r,batchSize:i,outSize:a}=e;s||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];const l=n==="max"?">":"<",c=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${r}; i++) {
          int inIdx = ${c};
          float candidate = getA(batch, inIdx);
          if (candidate ${l} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gCe{constructor(e,n,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,K(e.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],a=Math.ceil(i/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");const l=this.outputShape,c=l.length,u=Wn(c),d=Xr("coords",c);let h,p;if(a===1){p=c+1;const A=Wn(p);h=`
        ${A} sourceLocR = ${A}(${d.join()}, 0);
        ++${d[c-1]};
        ${A} sourceLocG = ${A}(${d.join()}, 0);
        ++${d[c-2]};
        ${A} sourceLocA = ${A}(${d.join()}, 0);
        --${d[c-1]};
        ${A} sourceLocB = ${A}(${d.join()}, 0);
        --${d[c-2]};`}else p=c,h=`
        ${u} sourceLocR = coords;
        ++${d[c-1]};
        ${u} sourceLocG = coords;
        ++${d[c-2]};
        ${u} sourceLocA = coords;
        --${d[c-1]};
        ${u} sourceLocB = coords;
        --${d[c-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),x="."+g[p-1],y=g.map(A=>"int "+A),v=Xr("sourceLocR",p-1).concat("inIdx.r"),w=Xr("sourceLocG",p-1).concat("inIdx.g"),N=Xr("sourceLocB",p-1).concat("inIdx.b"),k=Xr("sourceLocA",p-1).concat("inIdx.a"),C=s==="max"?"greaterThan":"lessThan",j=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${N.join()}),
                             getBestIndicesAChannel(${k.join()})));`,R=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${w.join()}) : 0.,
            hasNextRow ? getAChannel(${N.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${k.join()}) : 0.)`,_=r?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${_}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${d[c-1]} < ${l[c-1]-1};
        bool hasNextRow = ${d[c-2]} < ${l[c-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${x}, sourceLocG${x},
          sourceLocB${x}, sourceLocA${x}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${R};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${j}
          vec4 candidate = ${R};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${C}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TB(t,e,n,s=null){let r=e.shape[0],i=e.shape[1];s!=null&&(r=s.shape[0],i=s.shape[1]);const a=cv(i),l={windowSize:a,inSize:i,batchSize:r,outSize:Math.ceil(i/a)},c=new mCe(l,n,s==null),u=[e];s!=null&&u.push(s);const d=t.runWebGLProgram(c,u,"int32");if(d.shape[1]===1)return d;const h=TB(t,e,n,d);return t.disposeIntermediateTensorInfo(d),h}function IB(t,e,n,s=null){const r=s!=null?s.shape:e.shape,i=r[r.length-1],a=cv(i),l=new gCe(r,a,n,s==null),c=s==null?[e]:[e,s],u=t.runWebGLProgram(l,c,"int32");if(u.shape.length===e.shape.length){const d=IB(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}return u}function jB(t,e,n,s){const r=[n];if(jr("arg"+s.charAt(0).toUpperCase()+s.slice(1),r,e.shape.length),!Pe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],a=t.texData.get(e.dataId),l=a!==null&&a.isPacked;let c=e;l&&(c=t.unpackTensor(e),i.push(c));const[u,d]=mr(c.shape,r),h=Le(d),p=pt({inputs:{x:c},backend:t,attrs:{shape:[-1,h]}});i.push(p);const g=TB(t,p,s);i.push(g);const x=pt({inputs:{x:g},backend:t,attrs:{shape:u}});return i.forEach(y=>t.disposeIntermediateTensorInfo(y)),x}return IB(t,e,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xCe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i}=s;let a=fn(i,r.shape);const l=Ns(a,r.shape.length);let c=r;const u=[];l!=null&&(c=Qr({inputs:{x:r},backend:n,attrs:{perm:l}}),u.push(c),a=Fs(a.length,c.shape.length)),jr("argMax",[a[0]],c.shape.length);const d=jB(n,c,a[0],"max");return u.forEach(h=>n.disposeIntermediateTensorInfo(h)),d}const yCe={kernelName:Ly,backendName:"webgl",kernelFunc:xCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vCe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i}=s;let a=fn(i,r.shape);const l=Ns(a,r.shape.length);let c=r;const u=[];l!=null&&(c=Qr({inputs:{x:r},backend:n,attrs:{perm:l}}),u.push(c),a=Fs(a.length,c.shape.length)),jr("argMin",[a[0]],c.shape.length);const d=jB(n,c,a[0],"min");return u.forEach(h=>n.disposeIntermediateTensorInfo(h)),d}const bCe={kernelName:By,backendName:"webgl",kernelFunc:vCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wCe=La+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,NCe=Cn({opSnippet:wCe}),SCe={kernelName:Ym,backendName:"webgl",kernelFunc:NCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kCe=La+"return log(x + sqrt(x * x + 1.0));",CCe=Cn({opSnippet:kCe}),TCe={kernelName:Zm,backendName:"webgl",kernelFunc:CCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ICe=La+`
  return atan(x);
`,jCe=Cn({opSnippet:ICe}),ECe={kernelName:Jm,backendName:"webgl",kernelFunc:jCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ce=LT+`
  return atan(a, b);
`,ACe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Kd+`
  return result;
`,RCe=$r({opSnippet:$Ce,packedOpSnippet:ACe}),DCe={kernelName:eg,backendName:"webgl",kernelFunc:RCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PCe=La+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,_Ce=Cn({opSnippet:PCe}),OCe={kernelName:Qm,backendName:"webgl",kernelFunc:_Ce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $m{constructor(e,n,s,r=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,w=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let N="0.0";if(y||(N="-1.0 / 1e-20"),s){this.userCode=`
        const ivec2 strides = ivec2(${l}, ${c});
        const ivec2 pads = ivec2(${g}, ${x});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${d}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${r?i?v:w:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const k="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const j=Math.floor(a/4)*4,R=a%4,_=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${g}, ${x});
      const float initializationValue = ${N};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${N});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${j}; wC += 4) {
            int xC = xCCorner + wC * ${d};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              getValue(batch, xR, xC + 2 * ${d}, d),
              getValue(batch, xR, xC + 3 * ${d}, d)
            );

            ${_}
          }

          int xC = xCCorner + ${j};
          if (${R===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${R===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${R===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              getValue(batch, xR, xC + 2 * ${d}, d),
              initializationValue
            );

            ${_}
          }
        }
        setOutput(${C});
      }
    `}}class zT{constructor(e,n,s,r=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,l=e.strideDepth,c=e.strideHeight,u=e.strideWidth,d=e.dilationDepth,h=e.dilationHeight,p=e.dilationWidth,g=e.effectiveFilterDepth,x=e.effectiveFilterHeight,y=e.effectiveFilterWidth,v=e.padInfo.front,w=e.padInfo.top,N=e.padInfo.left;this.outputShape=e.outShape;const k=n==="avg";let C="0.0";if(k||(C="-1.0 / 1e-20"),s){this.userCode=`
        const ivec3 strides =
            ivec3(${l}, ${c}, ${u});
        const ivec3 pads = ivec3(${v}, ${w}, ${N});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${d}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${x};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${r?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${x} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const j="max";let R=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(R="avgValue / max(count, 1.0)");const _=Math.floor(a/4)*4,A=a%4,O=`
      if (${k}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${j}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${l}, ${c}, ${u});
      const ivec3 pads = ivec3(${v}, ${w}, ${N});
      const float initializationValue = ${C};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${C});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${d}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${x};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${_}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${O}
            }

            int xC = xCCorner + ${_};
            if (${A===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${A===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${A===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${O}
            }
          }
        }
        setOutput(${R});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FCe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e;ux(r,"avgPool");const{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=s,u=1;K(Ir(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=Fa(r.shape,i,a,u,l,c);if(d.filterWidth===1&&d.filterHeight===1&&bn(d.inShape,d.outShape))return Gi({inputs:{x:r},backend:n});const h=new $m(d,"avg",!1);return n.runWebGLProgram(h,[r],"float32")}const MCe={kernelName:zy,backendName:"webgl",kernelFunc:FCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LCe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c,dataFormat:u}=s,d=[1,1,1],h=Yl(r.shape,i,a,d,l,c,u),p=new zT(h,"avg",!1);return n.runWebGLProgram(p,[r],"float32")}const BCe={kernelName:Vy,backendName:"webgl",kernelFunc:LCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=c-1-e.padInfo.top,h=u-1-e.padInfo.left,p=1/(n*s);this.userCode=`
      const ivec2 pads = ivec2(${d}, ${h});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${c};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${l}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class VCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,s=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,x=h-1-e.padInfo.front,y=p-1-e.padInfo.top,v=g-1-e.padInfo.left,w=1/(n*s*r);this.userCode=`
      const ivec3 pads = ivec3(${x}, ${y}, ${v});
      const float avgMultiplier = float(${w});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${d}) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UCe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:i}=e,a=i,{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=s,h=[1,1,1],p=Yl(a.shape,l,c,h,u,d),g=new VCe(p);return n.runWebGLProgram(g,[r],a.dtype)}const WCe={kernelName:HS,backendName:"webgl",kernelFunc:UCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GCe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:i}=e,a=i;ux([r,i],"avgPoolGrad");const{filterSize:l,strides:c,pad:u}=s,d=Fa(a.shape,l,c,1,u),h=new zCe(d);return n.runWebGLProgram(h,[r],a.dtype)}const HCe={kernelName:GS,backendName:"webgl",kernelFunc:GCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KCe(t){const{inputs:e,backend:n,attrs:s}=t,{a:r,b:i}=e,{transposeA:a,transposeB:l}=s;return ty({a:r,b:i,transposeA:a,transposeB:l,backend:n})}const qCe={kernelName:Uy,backendName:"webgl",kernelFunc:KCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XCe{constructor(e,n,s,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],rn(e,n),rn(e,s);let l="0.0";r!=null&&(rn(e,r),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let c="1.0";i!=null&&(rn(e,i),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${l};
        float scale = ${c};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YCe{constructor(e,n,s,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],rn(e,n),rn(e,s);let l="vec4(0.0)";r!=null&&(rn(e,r),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let c="vec4(1.0)";i!=null&&(rn(e,i),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${l};
        vec4 scale = ${c};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZCe=({inputs:t,backend:e,attrs:n})=>{const{x:s,mean:r,variance:i,offset:a,scale:l}=t;K(r.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),K(a==null||r.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),K(l==null||r.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:c}=n;c==null&&(c=.001);const u=[s,r,i];let d=null;a!=null&&(d=a.shape,u.push(a));let h=null;l!=null&&(h=l.shape,u.push(l));const p=Pe().getBool("WEBGL_PACK_NORMALIZATION")?new YCe(s.shape,r.shape,i.shape,d,h,c):new XCe(s.shape,r.shape,i.shape,d,h,c);return e.runWebGLProgram(p,u,u[0].dtype)},JCe={kernelName:n2,backendName:"webgl",kernelFunc:ZCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QCe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Wn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=eTe(this.rank);let r;const i=e.map((a,l)=>`sourceLoc.${p4[l]} = start[${l}] + coords.${p4[l]};`);r=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${r}
        setOutput(getSource(${s}));
      }
    `}}const p4=["x","y","z","w","u","v"];function eTe(t){if(t===1)return"sourceLoc";if(t<=6)return p4.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tTe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Wn(this.rank),s=Xr("coords",this.rank),r=Xr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${r.slice(-2).join()})`,a=`getChannel(getSource(${r.join()}), ${i})`,l=`
      result.x = ${a};
      if (++${s[this.rank-1]} < ${e[this.rank-1]}) {
        ++${r[this.rank-1]};
        result.y = ${a};
        --${r[this.rank-1]};
      }
    `,c=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${e[this.rank-2]}) {
        ++${r[this.rank-2]};
        result.z = ${a};
        if (++${s[this.rank-1]} < ${e[this.rank-1]}) {
          ++${r[this.rank-1]};
          result.w = ${a};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((d,h)=>`start[${h}]`).join()});`:e.map((d,h)=>`${r[h]} = ${s[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${l}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nTe(t,e,n,s){const r=s.texData.get(t.dataId),i=s.makeTensorInfo(n,t.dtype),a=s.texData.get(i.dataId);Object.assign(a,r),a.refCount=1,a.shape=n,a.dtype=t.dtype;let l=tM(e,Mt(t.shape));r.slice&&(l+=r.slice.flatOffset),a.slice={flatOffset:l,origDataId:r.slice&&r.slice.origDataId||t.dataId};const c=s.dataRefCount.get(a.slice.origDataId)||1;return s.dataRefCount.set(a.slice.origDataId,c+1),i}function Qf(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{begin:i,size:a}=s,[l,c]=FC(r,i,a);if(J8(r,l,c),Le(c)===0)return n.makeTensorInfo(c,r.dtype,[]);if(n.shouldExecuteOnCPU([r])||r.dtype==="string"){const h=n.texData.get(r.dataId),p=qSe(h.values,l,c,r.shape,r.dtype);return n.makeTensorInfo(c,r.dtype,p)}const{isPacked:u}=n.texData.get(r.dataId),d=eM(r.shape,l,c);if(u||!d){const h=Pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tTe(c):new QCe(c),p=[l];return n.runWebGLProgram(h,[r],r.dtype,p)}return n.uploadToGPU(r.dataId),nTe(r,l,c,n)}const sTe={kernelName:A2,backendName:"webgl",kernelFunc:Qf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rTe=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockShape:i,crops:a}=s;K(r.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const l=i.reduce((N,k)=>N*k),c=Zg(r.shape,i,l),u=Jg(c.length,i.length),d=Qg(r.shape,i,l),h=zC(a,i.length),p=VC(d,a,i.length),g=[],x=pt({inputs:{x:r},backend:n,attrs:{shape:c}}),y=Qr({inputs:{x},backend:n,attrs:{perm:u}}),v=pt({inputs:{x:y},backend:n,attrs:{shape:d}}),w=Qf({inputs:{x:v},backend:n,attrs:{begin:h,size:p}});return g.push(x),g.push(y),g.push(v),g.forEach(N=>n.disposeIntermediateTensorInfo(N)),w},iTe={kernelName:Wy,backendName:"webgl",kernelFunc:rTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,weights:i}=e,{size:a}=s,l=n.readSync(r.dataId),c=n.readSync(i.dataId),u=mB(l,c,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,u)}const oTe={kernelName:KS,backendName:"webgl",kernelFunc:aTe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lTe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,cTe=`
  return float(int(a.r) & int(b.r));
`;function uTe(t){const{inputs:e,backend:n}=t,{a:s,b:r}=e,i=Pe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=Pe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([s,r])||a===1){const c=n.texData.get(s.dataId).values,u=n.texData.get(r.dataId).values,[d,h]=ySe(s.shape,r.shape,c,u,s.dtype),p=n.makeTensorInfo(h,s.dtype),g=n.texData.get(p.dataId);return g.values=d,p}let l;return i?l=new Zf(lTe,s.shape,r.shape,!1):l=new Rd(cTe,s.shape,r.shape),n.runWebGLProgram(l,[s,r],s.dtype)}const dTe={kernelName:Gy,backendName:"webgl",kernelFunc:uTe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTe(t){const{inputs:e,backend:n}=t,{s0:s,s1:r}=e,i=n.readSync(s.dataId),a=n.readSync(r.dataId),l=rn(Array.from(i),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}const fTe={kernelName:qS,backendName:"webgl",kernelFunc:hTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pTe="return float(a != b);",EB=$r({opSnippet:pTe,cpuKernelImpl:LSe,dtype:"bool"}),mTe={kernelName:v2,backendName:"webgl",kernelFunc:EB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hx(t){const{inputs:e,backend:n}=t,{input:s}=e,r=n.texData.get(s.dataId);return Gi({inputs:{x:r.complexTensorInfos.real},backend:n})}const gTe={kernelName:Ik,backendName:"webgl",kernelFunc:hx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xTe="return float(int(x));";function yTe(t,e){const n=new Wo(t.shape,xTe),s=e.runWebGLProgram(n,[t],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m4(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{dtype:i}=s;if(i==="complex64"){if(r.dtype==="complex64")return Gi({inputs:{x:r},backend:n});const a=Js(r.shape),l=m4({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),c=bu({inputs:{real:l,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(l),c}if(r.dtype==="complex64"){const a=hx({inputs:{input:r},backend:n}),l=m4({inputs:{x:a},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(a),l}if(!HO(r.dtype,i)){const a=Gi({inputs:{x:r},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:i}}if(n.shouldExecuteOnCPU([r])){const a=n.texData.get(r.dataId).values,[l,c,u]=vSe(a,r.shape,r.dtype,i);return n.makeTensorInfo(l,c,u)}if(i==="int32")return yTe(r,n);if(i==="bool"){const a=n.makeTensorInfo([],"bool",Cr("bool",1)),c=EB({inputs:{a:r,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),c}throw new Error(`Error in Cast: failed to cast ${r.dtype} to ${i}`)}const vTe={kernelName:tg,backendName:"webgl",kernelFunc:m4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DR="return ceil(x);",bTe=Cn({opSnippet:DR,packedOpSnippet:DR,cpuKernelImpl:bSe}),wTe={kernelName:ng,backendName:"webgl",kernelFunc:bTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NTe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class STe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{clipValueMin:i,clipValueMax:a}=s;let l;Pe().getBool("WEBGL_PACK_CLIP")?l=new STe(r.shape):l=new NTe(r.shape);const c=[[i],[a]];return n.runWebGLProgram(l,[r],r.dtype,c)}const CTe={kernelName:sg,backendName:"webgl",kernelFunc:kTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TTe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PR(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function ITe(t){const{inputs:e,backend:n}=t,{x:s}=e,r=n.texData.get(s.dataId),i=new TTe(s.shape),a=[PR(s,r.complexTensorInfos.real),PR(s,r.complexTensorInfos.imag)];return n.runWebGLProgram(i,a,a[0].dtype)}const jTe={kernelName:Hy,backendName:"webgl",kernelFunc:ITe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ETe{constructor(e){this.outputShape=[],this.outputShape=Xo(e,1),this.variableNames=e.map((a,l)=>`T${l}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+e[a][1];const s=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const l=n[a-1];s.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${l}));`)}const r=n.length,i=n[n.length-1];s.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Te{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Xo(e,n);const s=this.outputShape,r=s.length,i=Wn(r),a=Xr("coords",r),l=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((y,v)=>`T${v}`);const c=new Array(e.length-1);c[0]=e[0][n];for(let y=1;y<c.length;y++)c[y]=c[y-1]+e[y][n];const u=l[n],d=l.slice(-2),h=l.join();let p=`if (${u} < ${c[0]}) {
        return getChannel(
            getT0(${h}), vec2(${d.join()}));
        }`;for(let y=1;y<c.length;y++){const v=c[y-1];p+=`
        if (${u} < ${c[y]}  && ${u} >= ${c[y-1]}) {
          return getChannel(
            getT${y}(${F1(l,u,v)}),
            vec2(${F1(d,u,v)}));
        }`}const g=c.length,x=c[c.length-1];p+=`
        return getChannel(
          getT${g}(${F1(l,u,x)}),
          vec2(${F1(d,u,x)}));`,this.userCode=`
      float getValue(${l.map(y=>"int "+y)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[r-1]} = ${a[r-1]} + 1;
        if (${a[r-1]} < ${s[r-1]}) {
          result.g = getValue(${a});
        }

        ${a[r-2]} = ${a[r-2]} + 1;
        if (${a[r-2]} < ${s[r-2]}) {
          result.a = getValue(${a});
        }

        ${a[r-1]} = ${a[r-1]} - 1;
        if (${a[r-2]} < ${s[r-2]} &&
            ${a[r-1]} < ${s[r-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function F1(t,e,n){const s=t.indexOf(e);return t.map((i,a)=>a===s?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jv(t){const{inputs:e,backend:n}=t,{input:s}=e,r=n.texData.get(s.dataId);return Gi({inputs:{x:r.complexTensorInfos.imag},backend:n})}const ATe={kernelName:fk,backendName:"webgl",kernelFunc:jv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Up(t,e,n){const s=t[0].dtype;if(s==="complex64"){const g=t.map(N=>hx({inputs:{input:N},backend:n})),x=t.map(N=>jv({inputs:{input:N},backend:n})),y=Up(g,e,n),v=Up(x,e,n),w=bu({inputs:{real:y,imag:v},backend:n});return g.forEach(N=>n.disposeIntermediateTensorInfo(N)),x.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),w}let r=n.shouldExecuteOnCPU(t);if(s==="string"&&(r=!0),r){const g=t.map(C=>{const R=[-1,Le(C.shape.slice(e))];return pt({inputs:{x:C},backend:n,attrs:{shape:R}})}),x=g.map(C=>({vals:n.readSync(C.dataId),shape:C.shape})),y=Xo(g.map(C=>C.shape),1),v=g[0].shape[0]===1,w=wSe(x,y,s,v),N=Xo(t.map(C=>C.shape),e),k=n.makeTensorInfo(N,s,w);return g.forEach(C=>n.disposeIntermediateTensorInfo(C)),k}const i=t.filter(g=>Le(g.shape)>0),a=Pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const g=a?new Wo(t[0].shape,Ec):new Dc(t[0].shape,Ec);return n.runWebGLProgram(g,t,s)}const l=Pe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>l){const g=[];for(let y=0;y<i.length;y+=l){const v=i.slice(y,y+l);g.push(Up(v,e,n))}const x=Up(g,e,n);for(const y of g)n.disposeIntermediateTensorInfo(y);return x}if(a){const g=new $Te(i.map(x=>x.shape),e);return n.runWebGLProgram(g,i,s)}const{tensors2D:c,outShape:u}=RTe(i,e,n),d=new ETe(c.map(g=>g.shape)),h=n.runWebGLProgram(d,c,s);c.forEach(g=>n.disposeIntermediateTensorInfo(g));const p=pt({inputs:{x:h},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(h),p}function RTe(t,e,n){const s=Xo(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>pt({inputs:{x:i},attrs:{shape:[-1,Le(i.shape.slice(e))]},backend:n})),outShape:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $B(t){const{inputs:e,backend:n,attrs:s}=t,{axis:r}=s,i=fn(r,e[0].shape)[0],a=e.map(u=>u.shape);MC(a,i);const l=Xo(e.map(u=>u.shape),i);if(Le(l)===0)return n.makeTensorInfo(l,e[0].dtype,[]);const c=e.filter(u=>Le(u.shape)>0);return c.length===1?Gi({inputs:{x:c[0]},backend:n}):Up(c,i,n)}const DTe={kernelName:Ky,backendName:"webgl",kernelFunc:$B};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AB{constructor(e,n=!1,s=null,r=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,u=e.strideWidth,d=e.dilationHeight,h=e.dilationWidth,p=e.filterHeight,g=e.filterWidth,x=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,v=e.dataFormat==="channelsLast",w=v?1:2,N=v?2:3,k=v?3:1;let C="",j="";s&&(r?C=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:i?C=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:C=`
          float activation(float x) {
            ${s}
          }
        `,j="result = activation(result);");const R=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${C}

      const ivec2 strides = ivec2(${c}, ${u});
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${k}];

        ivec2 xRCCorner =
            ivec2(coords[${w}], coords[${N}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${d};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${x}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${x}) *
                    getW(wR, wC, ${x}, d2);
              } else {
                dotProd +=
                    getX(batch, ${x}, xR, xC) *
                    getW(wR, wC, ${x}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${x}, d2),
                getW(wR, wC, ${x} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${x}),
                  getX(batch, xR, xC, ${x} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${x}, xR, xC),
                  getX(batch, ${x} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${x}, d2),
                getW(wR, wC, ${x} + 1, d2),
                getW(wR, wC, ${x} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${x}),
                  getX(batch, xR, xC, ${x} + 1),
                  getX(batch, xR, xC, ${x} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${x}, xR, xC),
                  getX(batch, ${x} + 1, xR, xC),
                  getX(batch, ${x} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${R}
        ${j}
        setOutput(result);
      }
    `}}class PTe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,s=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,d=e.dilationWidth,h=e.filterDepth,p=e.filterHeight,g=e.filterWidth,x=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${a}, ${l});
      const ivec3 pads = ivec3(${n}, ${s}, ${r});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${c};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${d};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${x}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${x}) *
                  getW(wF, wR, wC, ${x}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${x}),
                  getX(batch, xF, xR, xC, ${x} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${x}, d2),
                  getW(wF, wR, wC, ${x} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${x}),
                  getX(batch, xF, xR, xC, ${x} + 1),
                  getX(batch, xF, xR, xC, ${x} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${x}, d2),
                  getW(wF, wR, wC, ${x} + 1, d2),
                  getW(wF, wR, wC, ${x} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RB{constructor(e,n=!1,s=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Mr(this.outputShape.length);const a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,h=d;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)p+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;p+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<d;v++)p+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(h+1)/2;v++){const w=v*2;if(p+=`
           xC = xCCorner + ${w*c};
           `,l===1){if(w<d&&(a%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }
               `,c===1&&w>0?p+=`
                 xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                   } else {
                     xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xC${w} = xTexelC${w};
                 `,w+1<d)){const N=a%2===0?BS(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${N};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                     xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${w+1}.zw = vec2(0.0);
                     }
                     xTexelC${w+1}Ready = 1;
                   }
                   `,c>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                     } else {
                      xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                     }
                     `:p+=`
                     xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                     `):N===1?p+=`
                     xC${w+1} = xTexelC${w};
                     `:p+=`
                     xCOffset = xC + ${N};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                       xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${w+1}.zw = vec2(0.0);
                       }
                       xTexelC${w+1}Ready = 1;
                     }

                     xC${w+1} = xTexelC${w+1};
                     `}}else w<d&&(a%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.0);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
               `,w+1<d&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(
                   xTexelC${w}.xy, xTexelC${w+1}.xy);
               `,w+1<d&&(p+=`
                   xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                 `)));w<d&&(p+=`
             wTexel = getW(r, ${w}, d1, d2);
             dotProd += xC${w}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${w}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,w+1<d&&(p+=`
               wTexel = getW(r, ${w+1}, d1, d2);
               dotProd += xC${w+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${w+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",x="";s&&(r?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${s}
         }`:i?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${s}
         }`:g=`vec4 activation(vec4 x) {
           ${s}
         }`,x="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${x}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Te{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Mr(this.outputShape.length);const{dataFormat:s}=n,r=si(),i=s==="channelsLast",a=i?1:2,l=i?2:3,c=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let d=0;d<=1;d++)for(let h=0;h<=1;h++)u+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${d};

          ${c}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${l}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${d*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${d*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${r.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ny(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function DB({x:t,filter:e,convInfo:n,backend:s,bias:r=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape,u=s.texData.get(t.dataId),d=n.inChannels,h=c[0]*c[1]*c[2],p=n.outChannels,g=n.dataFormat==="channelsLast",x=!1,y=!1;let v;const w=[];if(i!=null){const C=ny(i.shape,g);C!=null&&(i=pt({inputs:{x:i},backend:s,attrs:{shape:C}}),w.push(i))}if(r!=null){const C=ny(r.shape,g);C!=null&&(r=pt({inputs:{x:r},backend:s,attrs:{shape:C}}),w.push(r))}if(!((h===1||p===1)&&d>CB)&&u.isPacked&&g&&u.texture!=null&&c[2]%2!==0&&bn(u.shape.slice(-3),c.slice(-3))){const C=c[0]*c[1]*(c[2]+1),j={dataId:t.dataId,shape:[1,C,n.inChannels],dtype:t.dtype},R=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,K(ey(u.shape,j.shape),()=>`packed reshape ${u.shape} to ${j.shape} isn't free`);const _=pt({inputs:{x:e},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}});w.push(_);const A=ty({a:j,b:_,backend:s,transposeA:x,transposeB:y,bias:r,activation:l,preluActivationWeights:i,leakyreluAlpha:a}),O=s.texData.get(A.dataId);K(O.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=R,O.shape=n.outShape,v=Gi({inputs:{x:A},backend:s}),v.shape=n.outShape,w.push(A)}else{const C=n.outHeight*n.outWidth,j=pt({inputs:{x:t},backend:s,attrs:{shape:g?[n.batchSize,C,n.inChannels]:[n.batchSize,n.inChannels,C]}}),R=pt({inputs:{x:e},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}}),_=ty({a:g?j:R,b:g?R:j,transposeA:!g,transposeB:y,backend:s,bias:r,activation:l,preluActivationWeights:i,leakyreluAlpha:a});v=pt({inputs:{x:_},backend:s,attrs:{shape:n.outShape}}),w.push(j),w.push(R),w.push(_)}for(const C of w)s.disposeIntermediateTensorInfo(C);return v}function PB({x:t,filter:e,convInfo:n,backend:s,bias:r=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const{filterWidth:c,filterHeight:u,inChannels:d,outWidth:h,outHeight:p,dataFormat:g}=n,x=g==="channelsLast",y=c*u*d,v=p*h,w=[n.batchSize,y,v],N=!0,k=!1,C=[];if(i!=null){const X=ny(i.shape,x);X!=null&&(i=pt({inputs:{x:i},backend:s,attrs:{shape:X}}),C.push(i))}if(r!=null){const X=ny(r.shape,x);X!=null&&(r=pt({inputs:{x:r},backend:s,attrs:{shape:X}}),C.push(r))}const j=pt({inputs:{x:e},backend:s,attrs:{shape:[1,y,Le(e.shape)/y]}});C.push(j);const R=new _Te(w,n),_=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],A=s.runWebGLProgram(R,[t],"float32",_),O=pt({inputs:{x:A},backend:s,attrs:{shape:w}});C.push(A),C.push(O);const L=r!=null,D=i!=null,q=l==="leakyrelu",V=l?Em(l,!0):null,ne=new kB(x?O.shape:j.shape,x?j.shape:O.shape,x?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],N,k,L,V,D,q),J=x?[O,j]:[j,O];if(r&&J.push(r),D&&J.push(i),q){const X=s.makeTensorInfo([],"float32",uu(a,"float32"));J.push(X),C.push(X)}const ee=s.runWebGLProgram(ne,J,"float32"),te=pt({inputs:{x:ee},backend:s,attrs:{shape:n.outShape}});C.push(ee);for(const X of C)s.disposeIntermediateTensorInfo(X);return te}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i}=e,{strides:a,pad:l,dataFormat:c,dilations:u,dimRoundingMode:d}=s,h=Zl(c),p=pr(r.shape,i.shape,a,u,l,d,!1,h);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=DB({x:r,filter:i,convInfo:p,backend:n});else if(p.strideWidth<=2&&h==="channelsLast"&&Pe().getBool("WEBGL_EXP_CONV")){const y=new RB(p),v=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=n.runWebGLProgram(y,[r,i],"float32",v)}else if(Pe().getBool("WEBGL_CONV_IM2COL"))g=PB({x:r,filter:i,convInfo:p,backend:n});else{const y=new AB(p);g=n.runWebGLProgram(y,[r,i],"float32")}const x=pt({inputs:{x:g},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(g),x}const FTe={kernelName:qy,backendName:"webgl",kernelFunc:OTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MTe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,s=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class LTe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dataFormat==="channelsLast",l=n-1-e.padInfo.top,c=s-1-e.padInfo.left,u=a?1:2,d=a?2:3,h=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${c});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${d}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class BTe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,s=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,l=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${r} - ${l};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class zTe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,s=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,l=e.strideWidth,c=n-1-e.padInfo.front,u=s-1-e.padInfo.top,d=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${c}, ${u}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${r}; wC++) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${r} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:i}=e,{strides:a,pad:l,dataFormat:c,dimRoundingMode:u,filterShape:d}=s,h=Zl(c),p=pr(r.shape,d,a,1,l,u,!1,h),g=new MTe(p);return n.runWebGLProgram(g,[r,i],"float32")}const UTe={kernelName:YS,backendName:"webgl",kernelFunc:VTe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WTe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Mr(this.outputShape.length);const n=e.filterHeight,s=e.filterWidth,r=n-1-e.padInfo.top,i=s-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${r}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            int wCPerm = ${s} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:i}=e,{inputShape:a,strides:l,pad:c,dataFormat:u,dimRoundingMode:d}=s,h=Zl(u),p=pr(a,i.shape,l,1,c,d,!1,h);if(Pe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&h==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],x=new WTe(p);return n.runWebGLProgram(x,[r,i],"float32",g)}else{const g=new LTe(p);return n.runWebGLProgram(g,[r,i],"float32")}}const HTe={kernelName:Xy,backendName:"webgl",kernelFunc:GTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i}=e,{strides:a,pad:l,dilations:c}=s,u=fu(r.shape,i.shape,a,c,l),d=new PTe(u);return n.runWebGLProgram(d,[r,i],"float32")}const qTe={kernelName:Yy,backendName:"webgl",kernelFunc:KTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:i}=e,{strides:a,pad:l,filterShape:c}=s,u=fu(r.shape,c,a,1,l),d=new BTe(u);return n.runWebGLProgram(d,[r,i],"float32")}const YTe={kernelName:ZS,backendName:"webgl",kernelFunc:XTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZTe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:i}=e,{pad:a,strides:l,inputShape:c}=s,u=fu(c,i.shape,l,1,a),d=new zTe(u);return n.runWebGLProgram(d,[r,i],"float32")}const JTe={kernelName:JS,backendName:"webgl",kernelFunc:ZTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QTe=Jf+`
  return cos(x);
`,eIe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Kd}
  return result;
`,tIe=Cn({opSnippet:QTe,packedOpSnippet:eIe}),nIe={kernelName:rg,backendName:"webgl",kernelFunc:tIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sIe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,rIe=Cn({opSnippet:sIe}),iIe={kernelName:ig,backendName:"webgl",kernelFunc:rIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aIe{constructor(e,n,s,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,l,c,u]=e,[d]=n,[h,p]=s;this.outputShape=[d,h,p,u];const g=r==="bilinear"?1:0,[x,y]=[`${l-1}.0`,`${c-1}.0`],[v,w,N]=h>1?[`${(l-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${x} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${x}`],[k,C,j]=p>1?[`${(c-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${k});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${w};
        float width_scale = ${C};

        float in_y = ${N};
        if( in_y < 0.0 || in_y > ${x} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${j};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oIe=t=>{const{inputs:e,backend:n,attrs:s}=t,{image:r,boxes:i,boxInd:a}=e,{cropSize:l,method:c,extrapolationValue:u}=s,d=new aIe(r.shape,i.shape,l,c,u);return n.runWebGLProgram(d,[r,i,a],"float32")},lIe={kernelName:ek,backendName:"webgl",kernelFunc:oIe};var Am;(function(t){t.Prod="*",t.Sum="+"})(Am||(Am={}));class _R{constructor(e,n,s,r){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,a=this.op===Am.Prod?"1.0":"0.0",l=s?a:`getX(${OR(i,"coords",this.op)})`,c=this.outputShape[this.outputShape.length-1];let u="",d="";s?(u=r?`end != ${c-1}`:"end != 0",d=r?"end + 1":"end - 1"):(u=r?`end + pow2 < ${c}`:"end >= pow2",d=r?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Wn(i)} coords = getOutputCoords();
        int end = ${FR(i,"coords",this.op)};
        float val = ${l};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${d};
          ${FR(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${OR(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function OR(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function FR(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _B(t,e,n,s,r,i){const a=e.shape.length,l=Ns([s],a);let c=e;l!=null&&(c=Qr({inputs:{x:e},backend:n,attrs:{perm:l}}));const u=Fs(1,a)[0];if(u!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${s}`);const d=c.shape[u];let h=Gi({inputs:{x:c},backend:n});for(let p=0;p<=Math.ceil(Math.log2(d))-1;p++){const g=new _R(t,c.shape,!1,i),x=[[p]],y=h;h=n.runWebGLProgram(g,[h],h.dtype,x),n.disposeIntermediateTensorInfo(y)}if(r){const p=new _R(t,c.shape,r,i),g=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(g)}if(l!=null){const p=pu(l),g=Qr({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),g}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,exclusive:a,reverse:l}=s;return _B(Am.Prod,r,n,i,a,l)}const uIe={kernelName:QS,backendName:"webgl",kernelFunc:cIe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,exclusive:a,reverse:l}=s;return _B(Am.Sum,r,n,i,a,l)}const hIe={kernelName:Zy,backendName:"webgl",kernelFunc:dIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fIe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,weights:i}=e,{size:a,binaryOutput:l}=s;if(r.shape.length===1){const c=n.readSync(r.dataId),u=n.readSync(i.dataId),d=mB(c,u,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,d)}else if(r.shape.length===2){const c=n.bufferSync(r),u=n.bufferSync(i),d=xSe(c,u,a,l);return n.makeTensorInfo(d.shape,i.dtype,d.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}const pIe={kernelName:tk,backendName:"webgl",kernelFunc:fIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mIe{constructor(e,n,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gIe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockSize:i,dataFormat:a}=s,l=r.shape[0],c=a==="NHWC"?r.shape[1]:r.shape[2],u=a==="NHWC"?r.shape[2]:r.shape[3],d=a==="NHWC"?r.shape[3]:r.shape[1],h=c*i,p=u*i,g=d/(i*i),x=a==="NHWC"?[l,h,p,g]:[l,g,h,p],y=new mIe(x,i,a);return n.runWebGLProgram(y,[r],r.dtype)}const xIe={kernelName:nk,backendName:"webgl",kernelFunc:gIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OB{constructor(e,n=!1,s=null,r=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Mr(this.outputShape.length);const a=e.filterHeight,l=e.filterWidth,c=e.outChannels/e.inChannels;let u="",d="";s&&(r?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:u=`
          float activation(float x) {
            ${s}
          }
        `,d="result = activation(result);");const h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${c};
        int q = d2 - d1 * ${c};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${l}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${d}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FB{constructor(e,n=!1,s=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Mr(this.outputShape.length);const a=e.outChannels/e.inChannels,l=e.padInfo.left,c=e.strideWidth,u=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=h;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<h;w++)g+=`
          vec4 xTexelC${w*2};
          int xTexelC${w*2}Ready;
          vec4 xTexelC${w*2+1};
          int xTexelC${w*2+1}Ready;
          vec4 xC${w};`;g+=`
    for (int r = 0; r < ${d}; r++) {
      `;for(let w=0;w<h;w++)g+=`
          xTexelC${w*2} = vec4(0.0);
          xTexelC${w*2}Ready = 0;
          xTexelC${w*2+1} = vec4(0.0);
          xTexelC${w*2+1}Ready = 0;
          xC${w} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let w=0;w<(p+1)/2;w++){const N=w*2;if(g+=`
          xC = xCCorner + ${N*u};
          `,c===1){if(N<h&&(l%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }
              `,u===1&&N>0?g+=`
                xC${N} = vec4(xTexelC${N-2}.zw, xTexelC${N}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${N} = vec4(previous.zw, xTexelC${N}.xy);
                  } else {
                    xC${N} = vec4(0.0, 0.0, xTexelC${N}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }

                xC${N} = xTexelC${N};
                `,N+1<h)){const k=l%2===0?BS(u):u;u%2===0&&l%2===1||u%2!==0&&l%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${k};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                    xTexelC${N+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${N+1}.zw = vec2(0.0);
                    }
                    xTexelC${N+1}Ready = 1;
                  }
                  `,u>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${N+1} = vec4(previous.zw, xTexelC${N+1}.xy);
                    } else {
                     xC${N+1} = vec4(0.0, 0.0, xTexelC${N+1}.xy);
                    }
                    `:g+=`
                    xC${N+1} = vec4(xTexelC${N}.zw, xTexelC${N+1}.xy);
                    `):k===1?g+=`
                    xC${N+1} = xTexelC${N};
                    `:g+=`
                    xCOffset = xC + ${k};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                      xTexelC${N+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${N+1}.zw = vec2(0.0);
                      }
                      xTexelC${N+1}Ready = 1;
                    }

                    xC${N+1} = xTexelC${N+1};
                    `}}else N<h&&(l%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${N+1}Ready == 0) {
                  xTexelC${N+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${N+1}.zw = vec2(0.0);
                  }
                  xTexelC${N+1}Ready = 1;
                }

                xC${N} = vec4(xTexelC${N}.zw, xTexelC${N+1}.zw);
              `,N+1<h&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${N+1} = vec4(xTexelC${N+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                  xTexelC${N+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${N+1}.zw = vec2(0.);
                  }
                  xTexelC${N+1}Ready = 1;
                }

                xC${N} = vec4(
                  xTexelC${N}.xy, xTexelC${N+1}.xy);
              `,N+1<h&&(g+=`
                  xC${N+1} = vec4(xTexelC${N}.zw, xTexelC${N+1}.zw);
                `)));N<h&&(g+=`
            wTexel = getW(r, ${N}, d1, q);
            dotProd += xC${N} * vec4(wTexel.xz, wTexel.xz);
          `,N+1<h&&(g+=`
              wTexel = getW(r, ${N+1}, d1, q);
              dotProd += xC${N+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let x="",y="";s&&(r?x=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:i?x=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:x=`vec4 activation(vec4 x) {
          ${s}
        }`,y="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yIe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i}=e,{strides:a,pad:l,dilations:c,dimRoundingMode:u}=s;let d=c;d==null&&(d=[1,1]),K(Ir(a,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`);const h=pr(r.shape,i.shape,a,d,l,u,!0);let p;Pe().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?p=new FB(h):p=new OB(h);const g=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(p,[r,i],"float32",g)}const vIe={kernelName:Jy,backendName:"webgl",kernelFunc:yIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bIe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,s=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class wIe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=n-1-e.padInfo.top,l=s-1-e.padInfo.left,c=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${c}; dm++) {
              int d2 = d1 * ${c} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:i}=e,{strides:a,dilations:l,pad:c,dimRoundingMode:u,filterShape:d}=s,h=pr(r.shape,d,a,l,c,u,!0),p=new bIe(h);return n.runWebGLProgram(p,[r,i],"float32")}const SIe={kernelName:sk,backendName:"webgl",kernelFunc:NIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kIe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:i}=e,{strides:a,dilations:l,pad:c,dimRoundingMode:u,inputShape:d}=s,h=pr(d,i.shape,a,l,c,u,!0),p=new wIe(h);return n.runWebGLProgram(p,[r,i],"float32")}const CIe={kernelName:rk,backendName:"webgl",kernelFunc:kIe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TIe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IIe(t){const{inputs:e,backend:n}=t,{x:s}=e,r=[...s.shape,...s.shape],i=Le(s.shape),a=pt({inputs:{x:s},backend:n,attrs:{shape:[i]}}),l=new TIe(i),c=n.runWebGLProgram(l,[a],a.dtype),u=pt({inputs:{x:c},backend:n,attrs:{shape:r}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),u}const jIe={kernelName:ik,backendName:"webgl",kernelFunc:IIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EIe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:s,padInfo:r,strideHeight:i,strideWidth:a,filterHeight:l,filterWidth:c,dilationHeight:u,dilationWidth:d}=e,{top:h,left:p}=r;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${a});
      const ivec2 pads = ivec2(${h}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${l}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${c}; w++) {
              int wIn = wBeg + w * ${d};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ie(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i}=e,{strides:a,pad:l,dilations:c}=s,u=Wg(r.shape,i.shape,a,l,"NHWC",c);let d;const h=new EIe(u);d=n.runWebGLProgram(h,[r,i],"float32");const p=pt({inputs:{x:d},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(d),p}const AIe={kernelName:Qy,backendName:"webgl",kernelFunc:$Ie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RIe(t){const{inputs:e,backend:n,attrs:s}=t,{equation:r}=s,i=e,{allDims:a,summedDims:l,idDims:c}=YC(r,i.length);JC(a.length,c,i);const{path:u,steps:d}=QC(l,c),h=d.length;let p=null,g=a.length;const x=[];for(let y=0;y<h;++y){for(const v of d[y]){const{permutationIndices:w,expandDims:N}=ZC(g,c[v]);let k;eT(w)?k=i[v]:(k=Qr({inputs:{x:i[v]},backend:n,attrs:{perm:w}}),x.push(k));const C=k.shape.slice();for(let j=0;j<N.length;++j)C.splice(N[j],0,1);bn(k.shape,C)||(k=pt({inputs:{x:k},backend:n,attrs:{shape:C}}),x.push(k)),p===null?p=k:(p=BT({inputs:{a:k,b:p},backend:n}),x.push(p))}y<h-1&&(u[y]>=0&&(p=Iv({inputs:{x:p},backend:n,attrs:{axis:u[y]-(a.length-g),keepDims:!1}}),x.push(p)),g--)}for(const y of x)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const DIe={kernelName:ak,backendName:"webgl",kernelFunc:RIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PIe="return (x >= 0.0) ? x : (exp(x) - 1.0);",_Ie=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,OIe=Cn({opSnippet:PIe,packedOpSnippet:_Ie}),FIe={kernelName:og,backendName:"webgl",kernelFunc:OIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MIe="return (b >= 0.0) ? a : a * (b + 1.0);",LIe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,BIe=t=>{const{inputs:e,backend:n}=t,{dy:s,y:r}=e,i=Pe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zf(LIe,s.shape,r.shape):new Rd(MIe,s.shape,r.shape);return n.runWebGLProgram(i,[s,r],s.dtype)},zIe={kernelName:ok,backendName:"webgl",kernelFunc:BIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VIe=`
  return vec4(equal(a, b));
`,UIe="return float(a == b);",WIe=$r({opSnippet:UIe,packedOpSnippet:VIe,dtype:"bool",cpuKernelImpl:NSe}),GIe={kernelName:e2,backendName:"webgl",kernelFunc:WIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HIe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${UC};
  float a1 = ${WC};
  float a2 = ${GC};
  float a3 = ${HC};
  float a4 = ${KC};
  float a5 = ${qC};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,KIe=Cn({opSnippet:HIe}),qIe={kernelName:lg,backendName:"webgl",kernelFunc:KIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XIe=Jf+`
  return exp(x);
`,YIe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,MB=Cn({opSnippet:XIe,packedOpSnippet:YIe,cpuKernelImpl:SSe,dtype:"float32"}),ZIe={kernelName:cg,backendName:"webgl",kernelFunc:MB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g4(t){const{inputs:e,attrs:n,backend:s}=t,{dim:r}=n,{input:i}=e,a=i.shape.length,l=i.shape.slice();let c=r;return r<0&&(K(-(a+1)<=r,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),c=a+r+1),l.splice(c,0,1),pt({inputs:{x:i},backend:s,attrs:{shape:l}})}const JIe={kernelName:t2,backendName:"webgl",kernelFunc:g4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MR="return exp(x) - 1.0;",QIe=Cn({opSnippet:MR,packedOpSnippet:MR,cpuKernelImpl:kSe}),eje={kernelName:ug,backendName:"webgl",kernelFunc:QIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LR{constructor(e,n,s){this.variableNames=["real","imag"];const r=n[1];this.outputShape=n;const i=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=s?`${r}.0`:"1.0";let l;if(e==="real")l="return real * expR - imag * expI;";else if(e==="imag")l="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${l}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${r});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${r}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LB(t,e,n){const s=n.texData.get(t.dataId),r=Le(t.shape),i=t.shape[t.shape.length-1],a=r/i,l=pt({inputs:{x:t},backend:n,attrs:{shape:[a,i]}}),c=l.shape,u=new LR("real",c,e),d=new LR("imag",c,e),h=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:c},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:c}],p=n.runWebGLProgram(u,h,"float32"),g=n.runWebGLProgram(d,h,"float32"),x=bu({inputs:{real:p,imag:g},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g);const y=pt({inputs:{x},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(x),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tje(t){const{inputs:e,backend:n}=t,{input:s}=e;return LB(s,!1,n)}const nje={kernelName:lk,backendName:"webgl",kernelFunc:tje};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sje{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fx(t){const{backend:e,attrs:n}=t,{shape:s,value:r}=n;let{dtype:i}=n;if(i=i||Ff(r),i==="string"){const a=_s(i,Le(s));return a.fill(r),e.makeTensorInfo(s,i,a)}else{const a=new sje(s,r),l=[[r]];return e.runWebGLProgram(a,[],i,l)}}const rje={kernelName:ck,backendName:"webgl",kernelFunc:fx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ije{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aje={kernelName:uk,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,s=e,r=new ije(n.shape);return s.runWebGLProgram(r,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BR="return floor(x);",oje=Cn({opSnippet:BR,packedOpSnippet:BR,cpuKernelImpl:CSe}),lje={kernelName:dg,backendName:"webgl",kernelFunc:oje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cje=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,uje=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,dje=$r({opSnippet:cje,packedOpSnippet:uje,dtype:"int32"}),hje={kernelName:hg,backendName:"webgl",kernelFunc:dje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fje{constructor(e){this.variableNames=["A"];const n=si(),[s,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${s}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pje{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=si(),[s,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${r}.0, ${s}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mje={kernelName:C3,backendName:"webgl",kernelFunc:gje};let Dh,fN=Pe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function gje(t){const{inputs:e,backend:n,attrs:s}=t;let{pixels:r}=e;const{numChannels:i}=s,a=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement,[c,u]=a?[r.videoWidth,r.videoHeight]:[r.width,r.height],d=[u,c],h=[u,c,i];if(l||a){const y=Pe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Dh==null||y!==fN)&&(fN=y,Dh=document.createElement("canvas").getContext("2d",{willReadFrequently:fN})),Dh.canvas.width=c,Dh.canvas.height=u,Dh.drawImage(r,0,0,c,u),r=Dh.canvas}const p=n.makeTensorInfo(d,"int32");n.texData.get(p.dataId).usage=na.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),r);const g=Pe().getBool("WEBGL_PACK")?new pje(h):new fje(h),x=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xje(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i,bias:a,preluActivationWeights:l}=e,{strides:c,pad:u,dataFormat:d,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:x}=s,y=Zl(d),v=pr(r.shape,i.shape,c,h,u,p,!1,y);let w;const N=[],k=a!=null,C=l!=null,j=g==="leakyrelu",R=()=>{const A=[r,i],O=(L,D)=>{if(D==="NCHW"&&L.shape.length===1&&L.shape[0]!==1){const q=pt({inputs:{x:L},backend:n,attrs:{shape:[L.shape[0],1,1]}});return N.push(q),q}return L};if(k&&A.push(O(a,d)),C&&A.push(O(l,d)),j){const L=n.makeTensorInfo([],"float32",uu(x,"float32"));A.push(L),N.push(L)}return A};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))w=DB({x:r,filter:i,convInfo:v,backend:n,bias:a,activation:g,preluActivationWeights:l,leakyreluAlpha:x});else if(v.strideWidth<=2&&y==="channelsLast"&&Pe().getBool("WEBGL_EXP_CONV")){const A=g?Em(g,!0):null,O=new RB(v,k,A,C,j),L=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],D=R();w=n.runWebGLProgram(O,D,"float32",L)}else if(Pe().getBool("WEBGL_CONV_IM2COL"))w=PB({x:r,filter:i,convInfo:v,backend:n,bias:a,activation:g,preluActivationWeights:l,leakyreluAlpha:x});else{const A=g?Em(g,!1):null,O=new AB(v,k,A,C,j),L=R();w=n.runWebGLProgram(O,L,"float32")}const _=pt({inputs:{x:w},backend:n,attrs:{shape:v.outShape}});return N.push(w),N.forEach(A=>n.disposeIntermediateTensorInfo(A)),_}const yje={kernelName:A0,backendName:"webgl",kernelFunc:xje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vje(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:i,bias:a,preluActivationWeights:l}=e,{strides:c,pad:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:g}=s,x=[];let y=d;y==null&&(y=[1,1]),K(Ir(c,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${c} and dilations '${y}'`);const v=pr(r.shape,i.shape,c,y,u,h,!0),w=Pe().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,N=p?Em(p,w):null,k=[r,i],C=a!=null,j=l!=null,R=p==="leakyrelu";if(C&&k.push(a),j&&k.push(l),R){const L=n.makeTensorInfo([],"float32",uu(g,"float32"));k.push(L),x.push(L)}let _;w?_=new FB(v,C,N,j,R):_=new OB(v,C,N,j,R);const A=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],O=n.runWebGLProgram(_,k,"float32",A);return x.forEach(L=>n.disposeIntermediateTensorInfo(L)),O}const bje={kernelName:R0,backendName:"webgl",kernelFunc:vje};class wje{constructor(e,n,s,r){this.sliceDim=e,this.strides=n,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=s;const i=Wn(s.length);let a=`
    int index;`;for(let l=0;l<this.sliceDim;l++)a+=`
          index = round(getIndices(coords[0], ${l}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[l]};
          flattenIndex += index * ${this.strides[l]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nje(t){const{inputs:e,backend:n}=t,{params:s,indices:r}=e,i=r.shape,a=i[i.length-1],l=Le(s.shape),[c,u,d,h]=OC(s,r),p=pt({inputs:{x:r},backend:n,attrs:{shape:[u,a]}}),g=pt({inputs:{x:s},backend:n,attrs:{shape:[Le(s.shape)/d,d]}});if(n.shouldExecuteOnCPU([s,r])||s.dtype==="string"){const w=n.readSync(r.dataId),N=n.bufferSync(s),k=TSe(w,N,s.dtype,u,a,d,h,s.shape,l);return n.makeTensorInfo(c,s.dtype,k.values)}const x=new wje(a,h,[u,d],s.shape),y=n.runWebGLProgram(x,[g,p],g.dtype),v=pt({inputs:{x:y},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}const Sje={kernelName:dk,backendName:"webgl",kernelFunc:Nje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kje{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const s=Wn(this.rank),r=Cje(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${r}));
      }
    `}}function Cje(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let r=0;r<t.length;r++)r===2?s.push("index"):s.push(`${n[r]}`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BB(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,indices:i}=e,{axis:a,batchDims:l}=s,c=fn(a,r.shape)[0];if(Pe().get("DEBUG")){const N=n.readSync(i.dataId),k=r.shape[c];for(let C=0;C<N.length;++C){const j=N[C];K(j<=k-1&&j>=0,()=>`GatherV2: the index value ${j} is not in [0, ${k-1}]`)}}const u=CM(r,i,c,l),d=Le(i.shape),h=[],p=pt({inputs:{x:r},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),g=pt({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,d/u.batchSize]}});h.push(p),h.push(g);const x=[u.batchSize,u.outerSize,d/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const N=n.bufferSync(g),k=n.bufferSync(p),C=ISe(k,N,x);return h.forEach(j=>n.disposeIntermediateTensorInfo(j)),n.makeTensorInfo(u.outputShape,C.dtype,C.values)}const y=new kje(p.shape,x),v=n.runWebGLProgram(y,[p,g],p.dtype);h.push(v);const w=pt({inputs:{x:v},backend:n,attrs:{shape:u.outputShape}});return h.forEach(N=>n.disposeIntermediateTensorInfo(N)),w}const Tje={kernelName:s2,backendName:"webgl",kernelFunc:BB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ije="return float(a > b);",jje=`
  return vec4(greaterThan(a, b));
`,Eje=$r({opSnippet:Ije,packedOpSnippet:jje,cpuKernelImpl:jSe,dtype:"bool"}),$je={kernelName:r2,backendName:"webgl",kernelFunc:Eje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aje="return float(a >= b);",Rje=`
  return vec4(greaterThanEqual(a, b));
`,Dje=$r({opSnippet:Aje,packedOpSnippet:Rje,dtype:"bool",cpuKernelImpl:ESe}),Pje={kernelName:fg,backendName:"webgl",kernelFunc:Dje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _je(t){const{inputs:e,backend:n}=t,{input:s}=e;return LB(s,!0,n)}const Oje={kernelName:hk,backendName:"webgl",kernelFunc:_je};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fje="return float(!isnan(x) && !isinf(x));",Mje=Cn({opSnippet:Fje,dtype:"bool"}),Lje={kernelName:mg,backendName:"webgl",kernelFunc:Mje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bje="return float(isinf(x));",zje=Cn({opSnippet:Bje,dtype:"bool"}),Vje={kernelName:gg,backendName:"webgl",kernelFunc:zje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uje="return float(isnan(x));",Wje=Cn({opSnippet:Uje,dtype:"bool"}),Gje={kernelName:xg,backendName:"webgl",kernelFunc:Wje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hje="return float(a < b);",Kje=`
  return vec4(lessThan(a, b));
`,qje=$r({opSnippet:Hje,packedOpSnippet:Kje,cpuKernelImpl:$Se,dtype:"bool"}),Xje={kernelName:a2,backendName:"webgl",kernelFunc:qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yje="return float(a <= b);",Zje=`
  return vec4(lessThanEqual(a, b));
`,Jje=$r({opSnippet:Yje,packedOpSnippet:Zje,cpuKernelImpl:ASe,dtype:"bool"}),Qje={kernelName:o2,backendName:"webgl",kernelFunc:Jje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(t){const{backend:e,attrs:n}=t,{start:s,stop:r,num:i}=n,a=RSe(s,r,i);return e.makeTensorInfo([a.length],"float32",a)}const tEe={kernelName:pk,backendName:"webgl",kernelFunc:eEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nEe=Jf+`
  return x < 0.0 ? 0./0. : log(x);
`,sEe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,rEe=Cn({opSnippet:nEe,packedOpSnippet:sEe,cpuKernelImpl:DSe}),iEe={kernelName:yg,backendName:"webgl",kernelFunc:rEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aEe=Jf+`
  return log(1.0 + x);
`,oEe=Cn({opSnippet:aEe}),lEe={kernelName:vg,backendName:"webgl",kernelFunc:oEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cEe="return float(a >= 1.0 && b >= 1.0);",uEe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,dEe=$r({opSnippet:cEe,packedOpSnippet:uEe,dtype:"bool"}),hEe={kernelName:l2,backendName:"webgl",kernelFunc:dEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fEe="return float(!(x >= 1.0));",pEe=Cn({opSnippet:fEe}),mEe={kernelName:c2,backendName:"webgl",kernelFunc:pEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gEe="return float(a >= 1.0 || b >= 1.0);",xEe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,yEe=$r({opSnippet:gEe,packedOpSnippet:xEe,dtype:"bool"}),vEe={kernelName:u2,backendName:"webgl",kernelFunc:yEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bEe{constructor(e,n,s,r,i){this.variableNames=["x"],this.outputShape=[];const a=n,l=e[3]-1;this.outputShape=e;let c;const u=`float(${s}) + float(${r}) * sum`;i===.5?c=`inversesqrt(${u})`:i===1?c=`1.0/(${u})`:c=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${l}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${c};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wEe{constructor(e,n,s,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,l=e[3]-1;this.outputShape=e;let c;const u=`float(${s}) + float(${r}) * sum`;i===.5?c=`inversesqrt(${u})`:i===1?c=`1.0/(${u})`:c=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${l}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${c};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NEe=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{depthRadius:i,bias:a,alpha:l,beta:c}=s,u=Pe().getBool("WEBGL_PACK_NORMALIZATION")?new wEe(r.shape,i,a,l,c):new bEe(r.shape,i,a,l,c);return n.runWebGLProgram(u,[r],r.dtype)},SEe={kernelName:d2,backendName:"webgl",kernelFunc:NEe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kEe{constructor(e,n,s,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=s,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${r}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${r})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CEe=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:r,y:i,dy:a}=e,{depthRadius:l,bias:c,alpha:u,beta:d}=s,h=new kEe(r.shape,l,c,u,d);return n.runWebGLProgram(h,[r,i,a],r.dtype)},TEe={kernelName:mk,backendName:"webgl",kernelFunc:CEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IEe(t,e,n,s){const r=Le(e),a=Le(t.shape)/r,l=pt({inputs:{x:t},attrs:{shape:[a,r]},backend:s}),c=qd(l,t.dtype,"max",s),u=pt({inputs:{x:c},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(c),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zB(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{reductionIndices:i,keepDims:a}=s,l=r.shape.length,c=fn(i,r.shape);let u=c;const d=Ns(u,l),h=d!=null,p=n.shouldExecuteOnCPU([r]);let g=r;if(h){if(p){const k=n.texData.get(g.dataId).values,C=new Array(l);for(let _=0;_<C.length;_++)C[_]=r.shape[d[_]];const j=MT(k,r.shape,r.dtype,d,C);g=n.makeTensorInfo(C,r.dtype);const R=n.texData.get(g.dataId);R.values=j}else g=Tv(r,d,n);u=Fs(u.length,l)}jr("max",u,l);const[x,y]=mr(g.shape,u);let v=x;a&&(v=Os(x,c));let w;if(p){const k=n.texData.get(g.dataId).values,C=PSe(k,Le(y),v,r.dtype);w=n.makeTensorInfo(v,r.dtype);const j=n.texData.get(w.dataId);j.values=C}else w=IEe(g,y,v,n);return h&&n.disposeIntermediateTensorInfo(g),w}const jEe={kernelName:h2,backendName:"webgl",kernelFunc:zB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EEe=LT+`
  return max(a, b);
`,$Ee=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Kd+`
  return result;
`,AEe=$r({opSnippet:EEe,packedOpSnippet:$Ee,cpuKernelImpl:_Se}),REe={kernelName:bg,backendName:"webgl",kernelFunc:AEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e;ux(r,"maxPool");const{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=s,u=1;K(Ir(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=Fa(r.shape,i,a,u,l,c);if(d.filterWidth===1&&d.filterHeight===1&&bn(d.inShape,d.outShape))return Gi({inputs:{x:r},backend:n});const h=new $m(d,"max",!1);return n.runWebGLProgram(h,[r],r.dtype)}const PEe={kernelName:f2,backendName:"webgl",kernelFunc:DEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{filterSize:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=s,d=[1,1,1],h=Yl(r.shape,i,a,d,l,u,c),p=new zT(h,"max",!1);return n.runWebGLProgram(p,[r],r.dtype)}const OEe={kernelName:p2,backendName:"webgl",kernelFunc:_Ee};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FEe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,s=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,l=i-1-e.padInfo.top,c=a-1-e.padInfo.left,u=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${c});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${r}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class MEe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,s=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=c-1-e.padInfo.front,p=u-1-e.padInfo.top,g=d-1-e.padInfo.left,x=c*u*d-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${c};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${l}) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${x} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${d} +
                  wR * ${d} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:i}=e,a=i,{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=s,h=[1,1,1],p=Yl(a.shape,l,c,h,u,d),g=new zT(p,"max",!0),x=n.runWebGLProgram(g,[a],a.dtype),y=new MEe(p),v=n.runWebGLProgram(y,[r,x],a.dtype);return n.disposeIntermediateTensorInfo(x),v}const BEe={kernelName:xk,backendName:"webgl",kernelFunc:LEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:i,output:a}=e,l=i;ux([i,a],"maxPoolGrad");const{filterSize:c,strides:u,pad:d,dimRoundingMode:h}=s,p=Fa(l.shape,c,u,1,d,h),g=!0,x=new $m(p,"max",g),y=n.runWebGLProgram(x,[l],l.dtype),v=new FEe(p),w=n.runWebGLProgram(v,[r,y],l.dtype);return n.disposeIntermediateTensorInfo(y),w}const VEe={kernelName:gk,backendName:"webgl",kernelFunc:zEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEe(t,e,n,s){let r=new $m(n,"max",!1);const i=s.runWebGLProgram(r,[t],"float32");r=new $m(n,"max",!0,!0,e);const a=s.runWebGLProgram(r,[t],"float32");return[i,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WEe={kernelName:yk,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{filterSize:r,strides:i,pad:a,includeBatchInIndex:l}=e,c=n;K(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const u=[1,1];K(Ir(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const d=Fa(s.shape,r,i,u,a),[h,p]=UEe(s,l,d,c);return[h,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(t,e,n,s){const r=Le(e),a=Le(t.shape)/r,l=pt({inputs:{x:t},attrs:{shape:[a,r]},backend:s}),c=qd(l,"float32","mean",s),u=pt({inputs:{x:c},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(c),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HEe={kernelName:m2,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{keepDims:r,axis:i}=e,a=n,l=s.shape.length,c=fn(i,s.shape);let u=c;const d=Ns(u,l),h=d!=null,p=a.shouldExecuteOnCPU([s]),g=[];let x=s;if(h){if(p){const C=a.texData.get(x.dataId).values,j=new Array(l);for(let A=0;A<j.length;A++)j[A]=s.shape[d[A]];const R=MT(C,s.shape,s.dtype,d,j);x=a.makeTensorInfo(j,s.dtype);const _=a.texData.get(x.dataId);_.values=R}else x=Tv(s,d,a);g.push(x),u=Fs(u.length,l)}jr("sum",u,l);const[y,v]=mr(x.shape,u);let w=y;r&&(w=Os(y,c));const N=GEe(x,v,w,a);for(const k of g)a.disposeIntermediateTensorInfo(k);return N}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s,l=r.shape.length,c=fn(i,r.shape);let u=c;const d=Ns(u,l);let h=r;d!=null&&(h=Qr({inputs:{x:r},backend:n,attrs:{perm:d}}),u=Fs(u.length,r.shape.length)),jr("min",u,l);const[p,g]=mr(h.shape,u),x=Le(g),y=pt({inputs:{x:h},backend:n,attrs:{shape:[-1,x]}}),v=qd(y,y.dtype,"min",n);let w;if(a){const N=Os(p,c);w=pt({inputs:{x:v},backend:n,attrs:{shape:N}})}else w=pt({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),d!=null&&n.disposeIntermediateTensorInfo(h),w}const qEe={kernelName:g2,backendName:"webgl",kernelFunc:KEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XEe=LT+`
  return min(a, b);
`,YEe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Kd+`
  return result;
`,ZEe=$r({opSnippet:XEe,packedOpSnippet:YEe,cpuKernelImpl:OSe}),JEe={kernelName:wg,backendName:"webgl",kernelFunc:ZEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QEe{constructor(e,n,s){this.variableNames=["x"],this.outputShape=n.map((d,h)=>d[0]+e[h]+d[1]);const r=e.length,i=Wn(r),a=n.map(d=>d[0]).join(","),l=n.map((d,h)=>d[0]+e[h]).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),u=s==="reflect"?0:1;if(r===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${l});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${r}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${c}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e$e{constructor(e,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((x,y)=>x[0]+e[y]+x[1]);const r=e.length,i=Wn(r),a=n.map(x=>x[0]).join(","),l=n.map((x,y)=>x[0]+e[y]).join(","),c=Xr("rc",r),u=Xr("source",r),d=`${c[r-1]} < ${this.outputShape[r-1]}`,h=r===1?"source":`vec2(${u.slice(-2).join()})`,p=s==="reflect"?0:1;let g="";if(r===1){const x=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${i} rc = outputLoc;
        ${x}
        result[0] = getChannel(getX(${u.join()}), ${h});
        ${c[r-1]} += 1;
        if(${d}) {
          ${x}
          result[1] = getChannel(getX(${u.join()}), ${h});
        }
      `}else{const x=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${i} rc = outputLoc;
        ${x}
        result[0] = getChannel(getX(${u.join()}), ${h});
        ${c[r-1]} += 1;
        if(${d}) {
          ${x}
          result[1] = getChannel(getX(${u.join()}), ${h});
        }
        rc = outputLoc;
        ${c[r-2]} += 1;
        if(${c[r-2]} < ${this.outputShape[r-2]}) {
          ${x}
          result[2] = getChannel(getX(${u.join()}), ${h});
          ${c[r-1]} += 1;
          if(${d}) {
            ${x}
            result[3] = getChannel(getX(${u.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${l});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t$e=({inputs:t,backend:e,attrs:n})=>{const{x:s}=t,{paddings:r,mode:i}=n,a=Pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new e$e(s.shape,r,i):new QEe(s.shape,r,i);return e.runWebGLProgram(a,[s],s.dtype)},n$e={kernelName:x2,backendName:"webgl",kernelFunc:t$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s$e=`if (b == 0.0) return NAN;
  return mod(a, b);`,r$e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Kd+`
  return result;
`,i$e=$r({opSnippet:s$e,packedOpSnippet:r$e}),a$e={kernelName:Ng,backendName:"webgl",kernelFunc:i$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o$e{constructor(e,n,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l$e=`
if (a == b) {
  return 1.0;
};
return a / b;`,c$e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,VB=$r({opSnippet:l$e,packedOpSnippet:c$e,checkOutOfBounds:!0}),u$e={kernelName:ag,backendName:"webgl",kernelFunc:VB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zR="return a - b;",UB=$r({opSnippet:zR,packedOpSnippet:zR,supportsComplex:!0,cpuKernelImpl:ske}),d$e={kernelName:Mg,backendName:"webgl",kernelFunc:UB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WB(t){const{inputs:e,backend:n,attrs:s}=t,{logits:r}=e,{dim:i}=s,a=fn([i],r.shape),l=zB({inputs:{x:r},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),c=Os(l.shape,a),u=pt({inputs:{x:l},backend:n,attrs:{shape:c}}),d=UB({inputs:{a:r,b:u},backend:n}),h=MB({inputs:{x:d},backend:n}),p=Iv({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:!1}}),g=pt({inputs:{x:p},backend:n,attrs:{shape:c}}),x=VB({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),x}const h$e={kernelName:_2,backendName:"webgl",kernelFunc:WB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$e(t){const{inputs:e,backend:n,attrs:s}=t,{logits:r}=e,{numSamples:i,seed:a,normalized:l}=s,c=l?r:WB({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),u=c.shape[0],d=c.shape[1],h=new o$e(u,d,i),p=[[a]],g=n.runWebGLProgram(h,[c],"int32",p);return l||n.disposeIntermediateTensorInfo(c),g}const p$e={kernelName:vk,backendName:"webgl",kernelFunc:f$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m$e=La+`
  return -x;
`,g$e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function x$e(t){const{inputs:e,backend:n}=t,{x:s}=e;if(n.shouldExecuteOnCPU([s])){const i=n.texData.get(s.dataId),[a,l]=MSe(i.values,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,a)}let r;return Pe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?r=new Dc(s.shape,g$e):r=new Wo(s.shape,m$e),n.runWebGLProgram(r,[s],s.dtype)}const y$e={kernelName:y2,backendName:"webgl",kernelFunc:x$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v$e=EC;function b$e(t){ta("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=s,u=n.readSync(r.dataId),d=n.readSync(i.dataId),{selectedIndices:h}=v$e(u,d,a,l,c);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const w$e={kernelName:bk,backendName:"webgl",kernelFunc:b$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N$e=$C;function S$e(t){ta("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c,padToMaxOutputSize:u}=s,d=n.readSync(r.dataId),h=n.readSync(i.dataId),{selectedIndices:p,validOutputs:g}=N$e(d,h,a,l,c,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const k$e={kernelName:wk,backendName:"webgl",kernelFunc:S$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C$e=AC;function T$e(t){ta("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=s,d=n.readSync(r.dataId),h=n.readSync(i.dataId),p=a,g=l,x=c,y=u,{selectedIndices:v,selectedScores:w}=C$e(d,h,p,g,x,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const I$e={kernelName:Nk,backendName:"webgl",kernelFunc:T$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j$e{constructor(e,n,s,r){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${r}), float(${s}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E$e=t=>{const{inputs:e,backend:n,attrs:s}=t,{indices:r}=e,{dtype:i,depth:a,onValue:l,offValue:c}=s,u=Le(r.shape),d=new j$e(u,a,l,c),h=pt({inputs:{x:r},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(d,[h],i);n.disposeIntermediateTensorInfo(h);const g=[...r.shape,a],x=pt({inputs:{x:p},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(p),x},$$e={kernelName:w2,backendName:"webgl",kernelFunc:E$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sy(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="complex64"){const r=hx({inputs:{input:s},backend:n}),i=sy({inputs:{x:r},backend:n}),a=jv({inputs:{input:s},backend:n}),l=sy({inputs:{x:a},backend:n}),c=bu({inputs:{real:i,imag:l},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}else return fx({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:n})}const A$e={kernelName:L2,backendName:"webgl",kernelFunc:sy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GB(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const r=hx({inputs:{input:s},backend:n}),i=GB({inputs:{x:r},backend:n}),a=jv({inputs:{input:s},backend:n}),l=sy({inputs:{x:a},backend:n}),c=bu({inputs:{real:i,imag:l},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}else return fx({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:n})}const R$e={kernelName:b2,backendName:"webgl",kernelFunc:GB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$e(t){const{inputs:e,backend:n,attrs:s}=t,{axis:r}=s;if(e.length===1)return g4({inputs:{input:e[0]},backend:n,attrs:{dim:r}});const i=e[0].shape,a=e[0].dtype;e.forEach(d=>{Hi(i,d.shape,"All tensors passed to stack must have matching shapes"),K(a===d.dtype,()=>"All tensors passed to stack must have matching dtypes")});const l=[],c=e.map(d=>{const h=g4({inputs:{input:d},backend:n,attrs:{dim:r}});return l.push(h),h}),u=$B({inputs:c,backend:n,attrs:{axis:r}});return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const P$e={kernelName:N2,backendName:"webgl",kernelFunc:D$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _$e{constructor(e,n,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const r=e.length,i=Wn(r),a=n.map(u=>u[0]).join(","),l=n.map((u,d)=>u[0]+e[d]).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);if(r===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${l});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${c}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O$e{constructor(e,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,v)=>y[0]+e[v]+y[1]);const r=e.length,i=Wn(r),a=n.map(y=>y[0]).join(","),l=n.map((y,v)=>y[0]+e[v]).join(","),c=Xr("rc",r),u=Xr("source",r),d=`${c[r-1]} < ${this.outputShape[r-1]}`,h=r===1?"source":`vec2(${u.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${c[r-1]} += 1;
       if(${d}) {
      `,r===1?"":`}
       rc = outputLoc;
       ${c[r-2]} += 1;
       if(${c[r-2]} < ${this.outputShape[r-2]}) {`,r===1?"":`  ${c[r-1]} += 1;
         if(${d}) {`],g=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let x="";for(let y=0,v=r===1?2:4;y<v;y++)x+=`
        ${p[y]}
        if (${g}) {
          result[${y}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${y}] = getChannel(getX(${u.join()}), ${h});
        }
      `;x+=r===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${l});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HB=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{paddings:i,constantValue:a}=s;if(Le(r.shape)===0){const u=i.map((d,h)=>d[0]+r.shape[h]+d[1]);return fx({backend:n,attrs:{shape:u,value:a,dtype:r.dtype}})}const l=Pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new O$e(r.shape,i,a):new _$e(r.shape,i,a),c=[[a]];return n.runWebGLProgram(l,[r],r.dtype,c)},F$e={kernelName:S2,backendName:"webgl",kernelFunc:HB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M$e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,L$e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Kd+`
  return result;
`,B$e=$r({opSnippet:M$e,packedOpSnippet:L$e}),z$e={kernelName:kg,backendName:"webgl",kernelFunc:B$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:i,keepDims:a}=s,l=r.shape.length,c=[],u=fn(i,r.shape);let d=u;const h=Ns(d,l);let p=r;h!=null&&(p=Qr({inputs:{x:r},backend:n,attrs:{perm:h}}),d=Fs(d.length,l),c.push(p)),jr("prod",d,l);let g;if(n.shouldExecuteOnCPU([p])){const x=n.texData.get(p.dataId).values,{outVals:y,outShape:v,outDtype:w}=BSe(p.shape,p.dtype,x,d);g=n.makeTensorInfo(v,w,y)}else{const[x,y]=mr(p.shape,d),v=Le(y),w=pt({inputs:{x:p},backend:n,attrs:{shape:[-1,v]}}),N=Kk(r.dtype),k=qd(w,N,"prod",n);g=pt({inputs:{x:k},backend:n,attrs:{shape:x}}),c.push(w),c.push(k)}if(a){c.push(g);const x=Os(g.shape,u);g=pt({inputs:{x:g},backend:n,attrs:{shape:x}})}return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),g}const U$e={kernelName:C2,backendName:"webgl",kernelFunc:V$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$e(t){const{inputs:e,backend:n,attrs:s}=t,{paramsNestedSplits:r,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:l}=s,c=r.map(w=>n.readSync(w.dataId)),u=r.map(w=>w.shape),d=n.readSync(i.dataId),h=n.readSync(a.dataId),[p,g,x]=zSe(c,u,d,i.shape,i.dtype,h,a.shape,l),y=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),v=n.makeTensorInfo(x,i.dtype,g);return y.concat([v])}const G$e={kernelName:Sk,backendName:"webgl",kernelFunc:W$e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$e(t){const{inputs:e,backend:n}=t,{starts:s,limits:r,deltas:i}=e,a=n.readSync(s.dataId),l=n.readSync(r.dataId),c=n.readSync(i.dataId),[u,d]=VSe(a,s.shape,s.dtype,l,r.shape,c,i.shape),h=n.makeTensorInfo([u.length],"int32",u),p=n.makeTensorInfo([d.length],s.dtype,d);return[h,p]}const K$e={kernelName:kk,backendName:"webgl",kernelFunc:H$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(t){const{inputs:e,backend:n,attrs:s}=t,{shape:r,values:i,defaultValue:a,rowPartitionTensors:l}=e,{rowPartitionTypes:c}=s,u=n.readSync(r.dataId),d=n.readSync(i.dataId),h=n.readSync(a.dataId),p=l.map(v=>n.readSync(v.dataId)),g=l.map(v=>v.shape),[x,y]=USe(u,r.shape,d,i.shape,i.dtype,h,a.shape,p,g,c);return n.makeTensorInfo(x,i.dtype,y)}const X$e={kernelName:Ck,backendName:"webgl",kernelFunc:q$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KB=t=>{const{backend:e,attrs:n}=t,{start:s,stop:r,step:i,dtype:a}=n,l=WSe(s,r,i,a);return e.makeTensorInfo([l.length],a,l)},Y$e={kernelName:Tk,backendName:"webgl",kernelFunc:KB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z$e="return 1.0 / x;",J$e=Cn({opSnippet:Z$e}),Q$e={kernelName:Cg,backendName:"webgl",kernelFunc:J$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eAe=La+`
  return (x < 0.0) ? 0.0 : x;
`,tAe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,nAe=Cn({opSnippet:eAe,packedOpSnippet:tAe}),sAe={kernelName:Tg,backendName:"webgl",kernelFunc:nAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rAe=La+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,iAe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,aAe=Cn({opSnippet:rAe,packedOpSnippet:iAe}),oAe={kernelName:Ig,backendName:"webgl",kernelFunc:aAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lAe{constructor(e,n,s,r,i){this.variableNames=["A"],this.outputShape=[];const[a,l,c,u]=e;this.outputShape=[a,n,s,u];const d=[r&&n>1?l-1:l,r&&s>1?c-1:c],h=[r&&n>1?n-1:n,r&&s>1?s-1:s];let p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${d[0]/h[0]},
          ${d[1]/h[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${c}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cAe{constructor(e,n,s,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,l,c,u]=e;this.outputShape=[a,n,s,u];const d=[r&&n>1?l-1:l,r&&s>1?c-1:c],h=[r&&n>1?n-1:n,r&&s>1?s-1:s];let p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${d[0]/h[0]},
          ${d[1]/h[1]},
          ${d[1]/h[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${c}.0,
                                     ${c}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uAe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r}=e,{alignCorners:i,halfPixelCenters:a,size:l}=s,[c,u]=l,d=Pe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new cAe(r.shape,c,u,i,a):new lAe(r.shape,c,u,i,a);return n.runWebGLProgram(d,[r],"float32")}const dAe={kernelName:j2,backendName:"webgl",kernelFunc:uAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hAe{constructor(e,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,r,i]=n,[,a,l]=e,c=[s&&a>1?r-1:r,s&&l>1?i-1:i],u=[s&&a>1?a-1:a,s&&l>1?l-1:l],d=c[0]/u[0],h=c[1]/u[1],p=1/d,g=1/h,x=Math.ceil(p)*2+2,y=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${d});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${x});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fAe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r,dy:i}=e,{alignCorners:a}=s,l=new hAe(i.shape,r.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const pAe={kernelName:Ek,backendName:"webgl",kernelFunc:fAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mAe{constructor(e,n,s,r,i){this.variableNames=["A"],this.outputShape=[];const[a,l,c,u]=e;this.outputShape=[a,n,s,u];const d=[r&&n>1?l-1:l,r&&s>1?c-1:c],h=[r&&n>1?n-1:n,r&&s>1?s-1:s],p=r?"0.5":"0.0";let g;i?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${d[0]/h[0]},
          ${d[1]/h[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${c}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gAe{constructor(e,n,s,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,l,c,u]=e;this.outputShape=[a,n,s,u];const d=[r&&n>1?l-1:l,r&&s>1?c-1:c],h=[r&&n>1?n-1:n,r&&s>1?s-1:s],p=r?"0.5":"0.0";let g;i?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${d[0]/h[0]},
          ${d[1]/h[1]},
          ${d[1]/h[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${c}.0,
                                     ${c}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xAe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r}=e,{alignCorners:i,halfPixelCenters:a,size:l}=s,[c,u]=l,d=Pe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gAe(r.shape,c,u,i,a):new mAe(r.shape,c,u,i,a);return n.runWebGLProgram(d,[r],r.dtype)}const yAe={kernelName:I2,backendName:"webgl",kernelFunc:xAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vAe{constructor(e,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,r,i]=n,[,a,l]=e,c=[s&&a>1?r-1:r,s&&l>1?i-1:i],u=[s&&a>1?a-1:a,s&&l>1?l-1:l],d=c[0]/u[0],h=c[1]/u[1],p=1/d,g=1/h,x=Math.ceil(p)*2+2,y=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${d});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${x});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float sourceFracRow =
              float(${c[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${c[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${r}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bAe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r,dy:i}=e,{alignCorners:a}=s,l=new vAe(i.shape,r.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const wAe={kernelName:jk,backendName:"webgl",kernelFunc:bAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NAe{constructor(e,n){this.variableNames=["x"];const s=e.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=e,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const r=l=>n.indexOf(l)!==-1&&e[l]!==1?`${e[l]} - coords[${l}] - 1`:`coords[${l}]`,i=e.map((l,c)=>r(c)).join(","),a=Wn(s);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SAe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=e.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=e;const r=Xr("rc",s),i=`${r[s-1]} + 1 < ${this.outputShape[s-1]}`,a=`${r[s-2]} + 1 < ${this.outputShape[s-2]}`,l=Wn(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${l} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${c(r.slice())};
          if(${i}){
            result.g = ${u(r.slice())};
          }
          if(${a}) {
            result.b = ${d(r.slice())};
            if(${i}) {
              result.a = ${h(r.slice())};
            }
          }
          setOutput(result);
        }
    `;function c(x){return p(x)}function u(x){return x[s-1]="("+x[s-1]+" + 1)",p(x)}function d(x){return x[s-2]="("+x[s-2]+" + 1)",p(x)}function h(x){return x[s-1]="("+x[s-1]+" + 1)",x[s-2]="("+x[s-2]+" + 1)",p(x)}function p(x){const y=e.map((N,k)=>g(k,x)),v=y.join(","),w=y.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${w}))`}function g(x,y){return n.indexOf(x)!==-1&&e[x]!==1?`${e[x]} - ${y[x]} - 1`:`${y[x]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kAe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{dims:i}=s,a=r.shape.length,l=fn(i,r.shape);if(a===0)return Gi({inputs:{x:r},backend:n});const c=Pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new SAe(r.shape,l):new NAe(r.shape,l);return n.runWebGLProgram(c,[r],r.dtype)}const CAe={kernelName:E2,backendName:"webgl",kernelFunc:kAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TAe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const s=e[1],r=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe={kernelName:Hk,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,{radians:r,fillValue:i,center:a}=e,l=n,c=new TAe(s.shape,i),[u,d]=BC(a,s.shape[1],s.shape[2]),h=[[u,d,Math.sin(r),Math.cos(r)]];return l.runWebGLProgram(c,[s],s.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jAe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,EAe=Cn({opSnippet:jAe}),$Ae={kernelName:jg,backendName:"webgl",kernelFunc:EAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAe="return inversesqrt(x);",RAe=Cn({opSnippet:AAe,cpuKernelImpl:GSe}),DAe={kernelName:Eg,backendName:"webgl",kernelFunc:RAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VT{constructor(e,n,s,r,i,a,l=!0,c=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const u=Wn(i.length),d=Wn(a.length);let h="";s===1?h="i":s===2&&(h="i, j");const p=`getIndices(${h})`;let g="";r===1?g="i":r===2&&(g="i, coords[1]");const x=`getUpdates(${g})`;let y="";c&&(y="coords[0], coords[1]");const v=`getDefaultValue(${y})`,w=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${d} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${w};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${x};
              found = true;
            }
          }
          setOutput(mix(${v}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PAe{constructor(e,n,s,r,i,a,l=!0,c=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const u=Wn(i.length),d=Wn(a.length);let h="";s===1?h="i":s===2&&(h="i, j");const p=`getIndices(${h})`;let g="";r===1?g="i":r===2&&(g="i, coords[1]");const x=`getUpdates(${g})`;let y="";c&&(y="coords[0], coords[1]");const v=`getDefaultValue(${y})`,w=n>1?"strides[j]":"strides",N=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${d} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${w};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${N};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${x};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${v}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ae(t){const{inputs:e,backend:n,attrs:s}=t,{indices:r,updates:i}=e,{shape:a}=s,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Vd(i,r,a),p=[h/u,u];if(h===0)return n.makeTensorInfo(a,r.dtype);const g=pt({inputs:{x:r},backend:n,attrs:{shape:[c,l]}}),x=pt({inputs:{x:i},backend:n,attrs:{shape:[c,u]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0]));let v;Pe().getBool("WEBGL_PACK")?v=new PAe(c,l,g.shape.length,x.shape.length,d,p):v=new VT(c,l,g.shape.length,x.shape.length,d,p);const w=n.runWebGLProgram(v,[x,g,y],x.dtype),N=pt({inputs:{x:w},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(y),N}const OAe={kernelName:$k,backendName:"webgl",kernelFunc:_Ae};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FAe{constructor(e,n,s,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,s];const i="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,l=Pe().getNumber("WEBGL_VERSION")===2?i:a,c=r==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${l}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${c} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(t){const{inputs:e,backend:n,attrs:s}=t,{sortedSequence:r,values:i}=e,{side:a}=s,l=new FAe(r.shape[0],r.shape[1],i.shape[1],a),c=[[r.shape[1]]];return n.runWebGLProgram(l,[r,i],"int32",c)}const LAe={kernelName:Rk,backendName:"webgl",kernelFunc:MAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BAe{constructor(e,n,s){this.variableNames=["c","a","b"],this.outputShape=n;let r,i;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)i="resRC",r="resRC";else{const l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],u=[];for(let d=0;d<n.length;d++)u.push(`${l[d]}`),d<e&&c.push(`${l[d]}`);r=c.join(),i=u.join()}const a=Wn(s);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${r});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(t){const{inputs:e,backend:n}=t,{condition:s,t:r,e:i}=e,a=new BAe(s.shape.length,r.shape,r.shape.length);return n.runWebGLProgram(a,[s,r,i],Vi(r.dtype,i.dtype))}const VAe={kernelName:$2,backendName:"webgl",kernelFunc:zAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UAe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${uv};
  float scale = ${dv};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,WAe=Cn({opSnippet:UAe}),GAe={kernelName:$g,backendName:"webgl",kernelFunc:WAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe=Jf+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,KAe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,qAe=Cn({opSnippet:HAe,packedOpSnippet:KAe,cpuKernelImpl:KSe}),XAe={kernelName:Pg,backendName:"webgl",kernelFunc:qAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YAe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,ZAe=Cn({opSnippet:YAe}),JAe={kernelName:Dg,backendName:"webgl",kernelFunc:ZAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QAe=Jf+`
  return sin(x);
`,e5e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Kd}
  return result;
`,t5e=Cn({opSnippet:QAe,packedOpSnippet:e5e}),n5e={kernelName:Ag,backendName:"webgl",kernelFunc:t5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s5e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,r5e=Cn({opSnippet:s5e}),i5e={kernelName:Rg,backendName:"webgl",kernelFunc:r5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a5e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,o5e=Cn({opSnippet:a5e}),l5e={kernelName:_g,backendName:"webgl",kernelFunc:o5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c5e=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockShape:i,paddings:a}=s;K(r.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const l=i.reduce((w,N)=>w*N),c=[[0,0]];c.push(...a);for(let w=1+i.length;w<r.shape.length;++w)c.push([0,0]);const u=[],d=HB({inputs:{x:r},backend:n,attrs:{paddings:c,constantValue:0}}),h=Zg(d.shape,i,l,!1),p=Jg(h.length,i.length,!1),g=Qg(d.shape,i,l,!1),x=pt({inputs:{x:d},backend:n,attrs:{shape:h}}),y=Qr({inputs:{x},backend:n,attrs:{perm:p}}),v=pt({inputs:{x:y},backend:n,attrs:{shape:g}});return u.push(d),u.push(x),u.push(y),u.forEach(w=>n.disposeIntermediateTensorInfo(w)),v},u5e={kernelName:D2,backendName:"webgl",kernelFunc:c5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5e(t){const{inputs:e,backend:n}=t,{indices:s,values:r,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${s.shape}`);if(r.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${r.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const l=n.readSync(s.dataId),c=n.readSync(r.dataId),u=n.readSync(i.dataId),d=n.readSync(a.dataId)[0],[h,p,g,x,y]=XSe(l,s.shape,s.dtype,c,r.dtype,u,d);return[n.makeTensorInfo(p,s.dtype,h),n.makeTensorInfo([p[0]],r.dtype,g),n.makeTensorInfo([x.length],"bool",new Uint8Array(x.map(v=>Number(v)))),n.makeTensorInfo([y.length],s.dtype,new Int32Array(y))]}const h5e={kernelName:Dk,backendName:"webgl",kernelFunc:d5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f5e(t){const{inputs:e,backend:n}=t,{inputIndices:s,inputShape:r,newShape:i}=e;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${s.shape}`);if(r.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(n.readSync(r.dataId)),l=n.readSync(s.dataId),c=Array.from(n.readSync(i.dataId)),[u,d,h]=YSe(l,s.shape,s.dtype,a,c);return[n.makeTensorInfo(d,s.dtype,u),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}const p5e={kernelName:Pk,backendName:"webgl",kernelFunc:f5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(t){const{inputs:e,backend:n}=t,{data:s,indices:r,segmentIds:i}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${r.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const a=n.readSync(s.dataId),l=n.readSync(r.dataId),c=n.readSync(i.dataId),[u,d]=xB(a,s.shape,s.dtype,l,c,!0);return n.makeTensorInfo(d,s.dtype,u)}const g5e={kernelName:_k,backendName:"webgl",kernelFunc:m5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5e(t){const{inputs:e,backend:n}=t,{data:s,indices:r,segmentIds:i}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${r.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const a=n.readSync(s.dataId),l=n.readSync(r.dataId),c=n.readSync(i.dataId),[u,d]=xB(a,s.shape,s.dtype,l,c);return n.makeTensorInfo(d,s.dtype,u)}const y5e={kernelName:Ok,backendName:"webgl",kernelFunc:x5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v5e(t){const{inputs:e,backend:n,attrs:s}=t,{sparseIndices:r,sparseValues:i,defaultValue:a}=e,{outputShape:l}=s,{sliceRank:c,numUpdates:u,sliceSize:d,strides:h,outputSize:p}=Vd(i,r,l),g=!1;if(i.dtype==="string"){const w=n.bufferSync(r),N=n.bufferSync(i),k=Xc(n.readSync(a.dataId)[0]),C=HSe(w,N,l,p,d,u,c,h,k,g);return n.makeTensorInfo(l,C.dtype,C.values)}const x=new VT(u,c,r.shape.length,i.shape.length,h,[p,1],g),y=n.runWebGLProgram(x,[i,r,a],i.dtype),v=pt({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(y),v}const b5e={kernelName:Fk,backendName:"webgl",kernelFunc:v5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{numOrSizeSplits:i,axis:a}=s,l=fn(a,r.shape)[0],c=tT(r,i,l),u=r.shape.length,d=new Array(u).fill(0),h=r.shape.slice();return c.map(p=>{const g=[...h];g[l]=p;const x=Qf({inputs:{x:r},backend:n,attrs:{begin:d,size:g}});return d[l]+=p,x})}const N5e={kernelName:P2,backendName:"webgl",kernelFunc:w5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VR="return sqrt(x);",S5e=Cn({opSnippet:VR,packedOpSnippet:VR,cpuKernelImpl:ZSe}),k5e={kernelName:Og,backendName:"webgl",kernelFunc:S5e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5e="return x * x;",T5e=Cn({opSnippet:C5e}),I5e={kernelName:Mk,backendName:"webgl",kernelFunc:T5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UR="return (a - b) * (a - b);",j5e=$r({opSnippet:UR,packedOpSnippet:UR}),E5e={kernelName:Fg,backendName:"webgl",kernelFunc:j5e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $5e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(r.dataId),a=Hl(i),l=JSe(a,"string",s);return n.makeTensorInfo(r.shape,"string",l)}const A5e={kernelName:O2,backendName:"webgl",kernelFunc:$5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R5e({inputs:t,attrs:e,backend:n}){const{x:s}=t,r=La+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Wo(s.shape,r);return n.runWebGLProgram(i,[s],s.dtype)}const D5e={kernelName:Vg,backendName:"webgl",kernelFunc:R5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P5e{constructor(e,n,s){this.variableNames=["x"],this.outputShape=s;const r=s.length,i=Wn(s.length),a=Wn(s.length);let l="";if(r===1)l="coords * strides + begin";else{let c=0;l=s.map((u,d)=>(c++,s.length===1?`coords * strides[${d}] + begin[${d}]`:`coords[${c-1}] * strides[${d}] + begin[${d}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{begin:i,end:a,strides:l,beginMask:c,endMask:u,ellipsisMask:d,newAxisMask:h,shrinkAxisMask:p}=s,{finalShapeSparse:g,finalShape:x,isIdentity:y,sliceDim0:v,isSimpleSlice:w,begin:N,end:k,strides:C}=nM(r.shape,i,a,l,c,u,d,h,p);let j;if(y)j=pt({inputs:{x:r},backend:n,attrs:{shape:x}});else if(v||w){K(r.shape.length>=1,()=>`Input must have rank at least 1, got: ${r.shape.length}`);const _=Q8(N,k,C),A=Qf({inputs:{x:r},backend:n,attrs:{begin:N,size:_}});j=pt({inputs:{x:A},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(A)}else if(n.shouldExecuteOnCPU([r])){const A=n.readSync(r.dataId),O=un(r.shape,r.dtype,A),L=QSe(g,O,C,N);j=n.makeTensorInfo(x,r.dtype,L.values)}else{const A=new P5e(N,C,g);j=n.runWebGLProgram(A,[r],r.dtype)}const R=pt({inputs:{x:j},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(j),R}const O5e={kernelName:Lk,backendName:"webgl",kernelFunc:_5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F5e(t){const{inputs:e,backend:n,attrs:s}=t,{separator:r,nGramWidths:i,leftPad:a,rightPad:l,padWidth:c,preserveShortSequences:u}=s,{data:d,dataSplits:h}=e,p=n.readSync(d.dataId),g=n.readSync(h.dataId),[x,y]=eke(p,g,r,i,a,l,c,u);return[n.makeTensorInfo([x.length],"string",x),n.makeTensorInfo(h.shape,"int32",y)]}const M5e={kernelName:Bk,backendName:"webgl",kernelFunc:F5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L5e(t){const{inputs:e,backend:n,attrs:s}=t,{skipEmpty:r}=s,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const l=n.readSync(i.dataId),c=n.readSync(a.dataId)[0],[u,d,h]=tke(l,c,r),p=d.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const B5e={kernelName:zk,backendName:"webgl",kernelFunc:L5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z5e(t){const{inputs:e,backend:n,attrs:s}=t,{numBuckets:r}=s,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(i.dataId),l=nke(a,r);return n.makeTensorInfo(i.shape,"int32",l)}const V5e={kernelName:Vk,backendName:"webgl",kernelFunc:z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U5e="return tan(x);",W5e=Cn({opSnippet:U5e}),G5e={kernelName:Lg,backendName:"webgl",kernelFunc:W5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,K5e=Cn({opSnippet:H5e}),q5e={kernelName:Bg,backendName:"webgl",kernelFunc:K5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5e(t){const{inputs:e,backend:n,attrs:s}=t,{tensor:r,indices:i,updates:a}=e,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Vd(a,i,r.shape),p=[h/u,u];if(h===0)return n.makeTensorInfo(r.shape,i.dtype);const g=pt({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),x=pt({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),y=pt({inputs:{x:r},backend:n,attrs:{shape:p}}),v=new VT(c,l,g.shape.length,x.shape.length,d,p,!1,!0),w=n.runWebGLProgram(v,[x,g,y],y.dtype),N=pt({inputs:{x:w},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),N}const Y5e={kernelName:Ak,backendName:"webgl",kernelFunc:X5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z5e{constructor(e,n){this.variableNames=["A"];const s=new Array(e.length);for(let a=0;a<s.length;a++)s[a]=e[a]*n[a];this.outputShape=s,this.rank=s.length;const r=Wn(this.rank),i=J5e(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function J5e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let r=0;r<t.length;r++)s.push(`imod(${n[r]}, ${t[r]})`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qB(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{reps:i}=s;if(r.dtype==="string"||r.shape.length>5){const c=n.readSync(r.dataId),u=r.dtype==="string"?c.map(p=>Xc(p)):c,d=un(r.shape,r.dtype,u),h=rke(d,i);return n.makeTensorInfo(h.shape,h.dtype,h.values)}const a=new Z5e(r.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const Q5e={kernelName:zg,backendName:"webgl",kernelFunc:qB};class eRe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class tRe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ku(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function WR(t){let e=1;for(;e<t;)e*=2;return e}function nRe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{k:i,sorted:a}=s,l=Pe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=Pe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=r.shape,d=u[u.length-1];if(n.shouldExecuteOnCPU([r])||d<l||i>c){const L=n.readSync(r.dataId),[D,q]=ike(L,u,r.dtype,i,a);return[n.makeTensorInfo(D.shape,D.dtype,D.values),n.makeTensorInfo(q.shape,q.dtype,q.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,r.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(d===1)return[r,fx({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const h=n.texData.get(r.dataId),p=h!==null&&h.isPacked,g=p?n.unpackTensor(r):r,y=Le(u)/d,v=pt({inputs:{x:g},attrs:{shape:[y,d]},backend:n});p&&Ku(n,g);const w=WR(i),N=WR(d);let k=null;const C=()=>k===null?[v,v]:[v,k],j=(L,D,q)=>{const V=C(),ne=new eRe(q),ee=[[d],[k===null?1:0],[Number.NEGATIVE_INFINITY],[L],[D]],te=k;k=n.runWebGLProgram(ne,V,"int32",ee),Ku(n,te)};for(let L=1;L<w;L*=2){const D=L*2;for(let q=L;q>=1;q/=2)j(D,q,[y,N])}for(let L=N;L>w;L/=2){const D=C(),q=new tRe([y,L/2]),ne=[[d],[k===null?1:0],[w]],J=k;k=n.runWebGLProgram(q,D,"int32",ne),Ku(n,J);const ee=w/2,te=ee*2;for(let X=ee;X>=1;X/=2)j(te,X,k.shape)}let R=k;k=Qf({inputs:{x:k},backend:n,attrs:{begin:0,size:[y,i]}}),Ku(n,R);let _=BB({inputs:{x:v,indices:k},backend:n,attrs:{axis:1,batchDims:1}});Ku(n,v);const A=u.slice(0,-1);A.push(i),R=k,k=pt({inputs:{x:k},attrs:{shape:A},backend:n}),Ku(n,R);const O=_;return _=pt({inputs:{x:_},attrs:{shape:A},backend:n}),Ku(n,O),[_,k]}const sRe={kernelName:Uk,backendName:"webgl",kernelFunc:nRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rRe{constructor(e,n,s,r,i,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const l=s==="nearest"?1:2;let c;switch(r){case"constant":c=1;break;case"reflect":c=2;break;case"wrap":c=3;break;case"nearest":c=4;break;default:c=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${c} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${c} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${c} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${l} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(t){const{inputs:e,backend:n,attrs:s}=t,{image:r,transforms:i}=e,{interpolation:a,fillMode:l,fillValue:c,outputShape:u}=s,[d,h,p,g]=r.shape,[x,y]=u??[h,p],v=[d,x,y,g],w=new rRe(h,p,a,l,c,v);return n.runWebGLProgram(w,[r,i],"float32")}const aRe={kernelName:Wk,backendName:"webgl",kernelFunc:iRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(t){const{inputs:e,attrs:n,backend:s}=t,{axis:r}=n,{x:i}=e;ux(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=s.readSync(i.dataId),{outputValues:l,outputShape:c,indices:u}=ake(a,r,i.shape,i.dtype);return[s.makeTensorInfo(c,i.dtype,l),s.makeTensorInfo([u.length],"int32",u)]}const lRe={kernelName:Gk,backendName:"webgl",kernelFunc:oRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(t){const{inputs:e,backend:n,attrs:s}=t,{value:r}=e;let{axis:i}=s;i<0&&(i+=r.shape.length);const a=r,l=a.shape.length,c=r.shape[i],u=new Array(l-1);let d=0;for(let y=0;y<l;y++)y!==i&&(u[d++]=a.shape[y]);const h=[],p=new Array(l).fill(0),g=a.shape.slice();g[i]=1;const x=new Array(c);for(let y=0;y<x.length;y++){p[i]=y;const v=Qf({inputs:{x:a},backend:n,attrs:{begin:p,size:g}}),w=pt({inputs:{x:v},backend:n,attrs:{shape:u}});x[y]=w,h.push(v)}return h.forEach(y=>n.disposeIntermediateTensorInfo(y)),x}const uRe={kernelName:F2,backendName:"webgl",kernelFunc:cRe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dRe{constructor(e,n){this.variableNames=["x","segmentIds"];const s=e.windowSize,r=e.batchSize,i=e.inSize,a=e.numSegments,l=a*Math.ceil(i/s);this.outputShape=[r,l];const c="0.0",u="sumValue",d=Math.floor(s/4)*4,h=s%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";i%s>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let x="";i%s>0&&(x=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${c};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${x}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${d}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${d};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,segmentIds:i}=e,{numSegments:a}=s,l=r.shape.length,c=[];let u=0;const d=Ns([u],l);let h=r;d!=null&&(h=Qr({inputs:{x:r},backend:n,attrs:{perm:d}}),c.push(h),u=Fs(1,l)[0]);const p=Spe(h.shape,u,a),g=Le([h.shape[u]]),x=pt({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}});c.push(x);const y=Kk(r.dtype),v=(C,j,R,_,A)=>{const O=C.shape[0],L=C.shape[1],D=Npe(L,A),q={windowSize:D,inSize:L,batchSize:O,numSegments:A},V=new dRe(q,j),ne=n.compileAndRun(V,[C,R],_);if(c.push(ne),ne.shape[1]===A)return ne;const J=KB({backend:n,attrs:{start:0,stop:A,step:1,dtype:"float32"}}),ee=qB({inputs:{x:J},backend:n,attrs:{reps:[L/D]}});return c.push(J),c.push(ee),v(ne,j,ee,_,A)},w=v(x,"unsortedSegmentSum",i,y,a),N=pt({inputs:{x:w},backend:n,attrs:{shape:p}});let k=N;if(d!=null){c.push(N);const C=pu(d);k=Qr({inputs:{x:k},backend:n,attrs:{perm:C}})}return c.forEach(C=>n.disposeIntermediateTensorInfo(C)),k}const fRe={kernelName:M2,backendName:"webgl",kernelFunc:hRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pRe=[Zke,Qke,nCe,iCe,oCe,uCe,hCe,pCe,yCe,bCe,SCe,TCe,ECe,DCe,OCe,MCe,BCe,WCe,HCe,qCe,JCe,iTe,oTe,dTe,fTe,vTe,wTe,CTe,Pke,jTe,DTe,FTe,UTe,HTe,qTe,YTe,JTe,nIe,iIe,lIe,uIe,hIe,pIe,xIe,vIe,SIe,CIe,jIe,AIe,DIe,FIe,zIe,GIe,qIe,ZIe,JIe,eje,nje,rje,aje,lje,hje,mje,yje,bje,Sje,Tje,$je,Pje,Dke,Oje,ATe,Lje,Vje,Gje,Oke,Xje,Qje,tEe,iEe,lEe,hEe,mEe,vEe,SEe,TEe,jEe,REe,PEe,OEe,BEe,VEe,WEe,HEe,qEe,JEe,n$e,a$e,p$e,Lke,y$e,w$e,k$e,I$e,mTe,$$e,R$e,P$e,F$e,z$e,Mke,U$e,G$e,K$e,X$e,Y$e,gTe,u$e,Q$e,sAe,oAe,zke,dAe,pAe,yAe,wAe,CAe,IAe,$Ae,DAe,OAe,LAe,VAe,GAe,XAe,JAe,n5e,i5e,sTe,h$e,l5e,u5e,h5e,p5e,g5e,y5e,b5e,N5e,k5e,I5e,E5e,A5e,D5e,O5e,M5e,B5e,V5e,d$e,qke,G5e,q5e,Y5e,Q5e,sRe,aRe,Xke,lRe,uRe,fRe,A$e];for(const t of pRe)ZO(t);var pN={},GR;function mRe(){return GR||(GR=1,(function(){var t;function e($){var M=0;return function(){return M<$.length?{done:!1,value:$[M++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function($,M,z){return $==Array.prototype||$==Object.prototype||($[M]=z.value),$};function s($){$=[typeof globalThis=="object"&&globalThis,$,typeof window=="object"&&window,typeof self=="object"&&self,typeof bE=="object"&&bE];for(var M=0;M<$.length;++M){var z=$[M];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var r=s(this);function i($,M){if(M)e:{var z=r;$=$.split(".");for(var oe=0;oe<$.length-1;oe++){var je=$[oe];if(!(je in z))break e;z=z[je]}$=$[$.length-1],oe=z[$],M=M(oe),M!=oe&&M!=null&&n(z,$,{configurable:!0,writable:!0,value:M})}}i("Symbol",function($){function M(Ve){if(this instanceof M)throw new TypeError("Symbol is not a constructor");return new z(oe+(Ve||"")+"_"+je++,Ve)}function z(Ve,De){this.g=Ve,n(this,"description",{configurable:!0,writable:!0,value:De})}if($)return $;z.prototype.toString=function(){return this.g};var oe="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",je=0;return M}),i("Symbol.iterator",function($){if($)return $;$=Symbol("Symbol.iterator");for(var M="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),z=0;z<M.length;z++){var oe=r[M[z]];typeof oe=="function"&&typeof oe.prototype[$]!="function"&&n(oe.prototype,$,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return $});function a($){return $={next:$},$[Symbol.iterator]=function(){return this},$}function l($){var M=typeof Symbol<"u"&&Symbol.iterator&&$[Symbol.iterator];return M?M.call($):{next:e($)}}function c($){if(!($ instanceof Array)){$=l($);for(var M,z=[];!(M=$.next()).done;)z.push(M.value);$=z}return $}var u=typeof Object.create=="function"?Object.create:function($){function M(){}return M.prototype=$,new M},d;if(typeof Object.setPrototypeOf=="function")d=Object.setPrototypeOf;else{var h;e:{var p={a:!0},g={};try{g.__proto__=p,h=g.a;break e}catch{}h=!1}d=h?function($,M){if($.__proto__=M,$.__proto__!==M)throw new TypeError($+" is not extensible");return $}:null}var x=d;function y($,M){if($.prototype=u(M.prototype),$.prototype.constructor=$,x)x($,M);else for(var z in M)if(z!="prototype")if(Object.defineProperties){var oe=Object.getOwnPropertyDescriptor(M,z);oe&&Object.defineProperty($,z,oe)}else $[z]=M[z];$.ea=M.prototype}function v(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function w($){if($.l)throw new TypeError("Generator is already running");$.l=!0}v.prototype.o=function($){this.h=$};function N($,M){$.j={U:M,V:!0},$.g=$.m||$.s}v.prototype.return=function($){this.j={return:$},this.g=this.s};function k($,M,z){return $.g=z,{value:M}}function C($){this.g=new v,this.h=$}function j($,M){w($.g);var z=$.g.i;return z?R($,"return"in z?z.return:function(oe){return{value:oe,done:!0}},M,$.g.return):($.g.return(M),_($))}function R($,M,z,oe){try{var je=M.call($.g.i,z);if(!(je instanceof Object))throw new TypeError("Iterator result "+je+" is not an object");if(!je.done)return $.g.l=!1,je;var Ve=je.value}catch(De){return $.g.i=null,N($.g,De),_($)}return $.g.i=null,oe.call($.g,Ve),_($)}function _($){for(;$.g.g;)try{var M=$.h($.g);if(M)return $.g.l=!1,{value:M.value,done:!1}}catch(z){$.g.h=void 0,N($.g,z)}if($.g.l=!1,$.g.j){if(M=$.g.j,$.g.j=null,M.V)throw M.U;return{value:M.return,done:!0}}return{value:void 0,done:!0}}function A($){this.next=function(M){return w($.g),$.g.i?M=R($,$.g.i.next,M,$.g.o):($.g.o(M),M=_($)),M},this.throw=function(M){return w($.g),$.g.i?M=R($,$.g.i.throw,M,$.g.o):(N($.g,M),M=_($)),M},this.return=function(M){return j($,M)},this[Symbol.iterator]=function(){return this}}function O($,M){return M=new A(new C(M)),x&&$.prototype&&x(M,$.prototype),M}function L($,M){$ instanceof String&&($+="");var z=0,oe=!1,je={next:function(){if(!oe&&z<$.length){var Ve=z++;return{value:M(Ve,$[Ve]),done:!1}}return oe=!0,{done:!0,value:void 0}}};return je[Symbol.iterator]=function(){return je},je}var D=typeof Object.assign=="function"?Object.assign:function($,M){for(var z=1;z<arguments.length;z++){var oe=arguments[z];if(oe)for(var je in oe)Object.prototype.hasOwnProperty.call(oe,je)&&($[je]=oe[je])}return $};i("Object.assign",function($){return $||D}),i("Promise",function($){function M(De){this.h=0,this.i=void 0,this.g=[],this.o=!1;var We=this.j();try{De(We.resolve,We.reject)}catch(st){We.reject(st)}}function z(){this.g=null}function oe(De){return De instanceof M?De:new M(function(We){We(De)})}if($)return $;z.prototype.h=function(De){if(this.g==null){this.g=[];var We=this;this.i(function(){We.l()})}this.g.push(De)};var je=r.setTimeout;z.prototype.i=function(De){je(De,0)},z.prototype.l=function(){for(;this.g&&this.g.length;){var De=this.g;this.g=[];for(var We=0;We<De.length;++We){var st=De[We];De[We]=null;try{st()}catch(mt){this.j(mt)}}}this.g=null},z.prototype.j=function(De){this.i(function(){throw De})},M.prototype.j=function(){function De(mt){return function(Ht){st||(st=!0,mt.call(We,Ht))}}var We=this,st=!1;return{resolve:De(this.C),reject:De(this.l)}},M.prototype.C=function(De){if(De===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(De instanceof M)this.F(De);else{e:switch(typeof De){case"object":var We=De!=null;break e;case"function":We=!0;break e;default:We=!1}We?this.u(De):this.m(De)}},M.prototype.u=function(De){var We=void 0;try{We=De.then}catch(st){this.l(st);return}typeof We=="function"?this.G(We,De):this.m(De)},M.prototype.l=function(De){this.s(2,De)},M.prototype.m=function(De){this.s(1,De)},M.prototype.s=function(De,We){if(this.h!=0)throw Error("Cannot settle("+De+", "+We+"): Promise already settled in state"+this.h);this.h=De,this.i=We,this.h===2&&this.D(),this.A()},M.prototype.D=function(){var De=this;je(function(){if(De.B()){var We=r.console;typeof We<"u"&&We.error(De.i)}},1)},M.prototype.B=function(){if(this.o)return!1;var De=r.CustomEvent,We=r.Event,st=r.dispatchEvent;return typeof st>"u"?!0:(typeof De=="function"?De=new De("unhandledrejection",{cancelable:!0}):typeof We=="function"?De=new We("unhandledrejection",{cancelable:!0}):(De=r.document.createEvent("CustomEvent"),De.initCustomEvent("unhandledrejection",!1,!0,De)),De.promise=this,De.reason=this.i,st(De))},M.prototype.A=function(){if(this.g!=null){for(var De=0;De<this.g.length;++De)Ve.h(this.g[De]);this.g=null}};var Ve=new z;return M.prototype.F=function(De){var We=this.j();De.J(We.resolve,We.reject)},M.prototype.G=function(De,We){var st=this.j();try{De.call(We,st.resolve,st.reject)}catch(mt){st.reject(mt)}},M.prototype.then=function(De,We){function st(en,Yt){return typeof en=="function"?function(St){try{mt(en(St))}catch(I){Ht(I)}}:Yt}var mt,Ht,xn=new M(function(en,Yt){mt=en,Ht=Yt});return this.J(st(De,mt),st(We,Ht)),xn},M.prototype.catch=function(De){return this.then(void 0,De)},M.prototype.J=function(De,We){function st(){switch(mt.h){case 1:De(mt.i);break;case 2:We(mt.i);break;default:throw Error("Unexpected state: "+mt.h)}}var mt=this;this.g==null?Ve.h(st):this.g.push(st),this.o=!0},M.resolve=oe,M.reject=function(De){return new M(function(We,st){st(De)})},M.race=function(De){return new M(function(We,st){for(var mt=l(De),Ht=mt.next();!Ht.done;Ht=mt.next())oe(Ht.value).J(We,st)})},M.all=function(De){var We=l(De),st=We.next();return st.done?oe([]):new M(function(mt,Ht){function xn(St){return function(I){en[St]=I,Yt--,Yt==0&&mt(en)}}var en=[],Yt=0;do en.push(void 0),Yt++,oe(st.value).J(xn(en.length-1),Ht),st=We.next();while(!st.done)})},M}),i("Object.is",function($){return $||function(M,z){return M===z?M!==0||1/M===1/z:M!==M&&z!==z}}),i("Array.prototype.includes",function($){return $||function(M,z){var oe=this;oe instanceof String&&(oe=String(oe));var je=oe.length;for(z=z||0,0>z&&(z=Math.max(z+je,0));z<je;z++){var Ve=oe[z];if(Ve===M||Object.is(Ve,M))return!0}return!1}}),i("String.prototype.includes",function($){return $||function(M,z){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(M instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(M,z||0)!==-1}}),i("Array.prototype.keys",function($){return $||function(){return L(this,function(M){return M})}});var q=this||self;function V($,M){$=$.split(".");var z=q;$[0]in z||typeof z.execScript>"u"||z.execScript("var "+$[0]);for(var oe;$.length&&(oe=$.shift());)$.length||M===void 0?z[oe]&&z[oe]!==Object.prototype[oe]?z=z[oe]:z=z[oe]={}:z[oe]=M}function ne($,M){return M=String.fromCharCode.apply(null,M),$==null?M:$+M}var J,ee=typeof TextDecoder<"u",te,X=typeof TextEncoder<"u";function Q($){if(X)$=(te||(te=new TextEncoder)).encode($);else{var M=void 0;M=M===void 0?!1:M;for(var z=0,oe=new Uint8Array(3*$.length),je=0;je<$.length;je++){var Ve=$.charCodeAt(je);if(128>Ve)oe[z++]=Ve;else{if(2048>Ve)oe[z++]=Ve>>6|192;else{if(55296<=Ve&&57343>=Ve){if(56319>=Ve&&je<$.length){var De=$.charCodeAt(++je);if(56320<=De&&57343>=De){Ve=1024*(Ve-55296)+De-56320+65536,oe[z++]=Ve>>18|240,oe[z++]=Ve>>12&63|128,oe[z++]=Ve>>6&63|128,oe[z++]=Ve&63|128;continue}else je--}if(M)throw Error("Found an unpaired surrogate");Ve=65533}oe[z++]=Ve>>12|224,oe[z++]=Ve>>6&63|128}oe[z++]=Ve&63|128}}$=oe.subarray(0,z)}return $}var G={},H=null;function ie($,M){M===void 0&&(M=0),we(),M=G[M];for(var z=Array(Math.floor($.length/3)),oe=M[64]||"",je=0,Ve=0;je<$.length-2;je+=3){var De=$[je],We=$[je+1],st=$[je+2],mt=M[De>>2];De=M[(De&3)<<4|We>>4],We=M[(We&15)<<2|st>>6],st=M[st&63],z[Ve++]=mt+De+We+st}switch(mt=0,st=oe,$.length-je){case 2:mt=$[je+1],st=M[(mt&15)<<2]||oe;case 1:$=$[je],z[Ve]=M[$>>2]+M[($&3)<<4|mt>>4]+st+oe}return z.join("")}function de($){var M=$.length,z=3*M/4;z%3?z=Math.floor(z):"=.".indexOf($[M-1])!=-1&&(z="=.".indexOf($[M-2])!=-1?z-2:z-1);var oe=new Uint8Array(z),je=0;return ke($,function(Ve){oe[je++]=Ve}),oe.subarray(0,je)}function ke($,M){function z(st){for(;oe<$.length;){var mt=$.charAt(oe++),Ht=H[mt];if(Ht!=null)return Ht;if(!/^[\s\xa0]*$/.test(mt))throw Error("Unknown base64 encoding at char: "+mt)}return st}we();for(var oe=0;;){var je=z(-1),Ve=z(0),De=z(64),We=z(64);if(We===64&&je===-1)break;M(je<<2|Ve>>4),De!=64&&(M(Ve<<4&240|De>>2),We!=64&&M(De<<6&192|We))}}function we(){if(!H){H={};for(var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),M=["+/=","+/","-_=","-_.","-_"],z=0;5>z;z++){var oe=$.concat(M[z].split(""));G[z]=oe;for(var je=0;je<oe.length;je++){var Ve=oe[je];H[Ve]===void 0&&(H[Ve]=je)}}}}var Ee=typeof Uint8Array.prototype.slice=="function",Ce;function Re($,M,z){return M===z?Ce||(Ce=new Uint8Array(0)):Ee?$.slice(M,z):new Uint8Array($.subarray(M,z))}var se=0,Te=0;function Me($,M){M=M===void 0?{}:M,M=M.v===void 0?!1:M.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=M,$&&Ye(this,$)}function Ye($,M){M=M.constructor===Uint8Array?M:M.constructor===ArrayBuffer?new Uint8Array(M):M.constructor===Array?new Uint8Array(M):M.constructor===String?de(M):M instanceof Uint8Array?new Uint8Array(M.buffer,M.byteOffset,M.byteLength):new Uint8Array(0),$.h=M,$.l=0,$.j=$.h.length,$.g=$.l}Me.prototype.reset=function(){this.g=this.l};function me($){for(var M=128,z=0,oe=0,je=0;4>je&&128<=M;je++)M=$.h[$.g++],z|=(M&127)<<7*je;if(128<=M&&(M=$.h[$.g++],z|=(M&127)<<28,oe|=(M&127)>>4),128<=M)for(je=0;5>je&&128<=M;je++)M=$.h[$.g++],oe|=(M&127)<<7*je+3;if(128>M)return $=z>>>0,M=oe>>>0,(oe=M&2147483648)&&($=~$+1>>>0,M=~M>>>0,$==0&&(M=M+1>>>0)),$=4294967296*M+($>>>0),oe?-$:$;$.m=!0}Me.prototype.i=function(){var $=this.h,M=$[this.g],z=M&127;return 128>M?(this.g+=1,z):(M=$[this.g+1],z|=(M&127)<<7,128>M?(this.g+=2,z):(M=$[this.g+2],z|=(M&127)<<14,128>M?(this.g+=3,z):(M=$[this.g+3],z|=(M&127)<<21,128>M?(this.g+=4,z):(M=$[this.g+4],z|=(M&15)<<28,128>M?(this.g+=5,z>>>0):(this.g+=5,128<=$[this.g++]&&128<=$[this.g++]&&128<=$[this.g++]&&128<=$[this.g++]&&this.g++,z)))))},Me.prototype.o=function(){var $=this.h[this.g],M=this.h[this.g+1],z=this.h[this.g+2],oe=this.h[this.g+3];return this.g+=4,z=($<<0|M<<8|z<<16|oe<<24)>>>0,$=2*(z>>31)+1,M=z>>>23&255,z&=8388607,M==255?z?NaN:1/0*$:M==0?$*Math.pow(2,-149)*z:$*Math.pow(2,M-150)*(z+Math.pow(2,23))};var xe=[];function $e(){this.g=new Uint8Array(64),this.h=0}$e.prototype.push=function($){if(!(this.h+1<this.g.length)){var M=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(M)}this.g[this.h++]=$},$e.prototype.length=function(){return this.h},$e.prototype.end=function(){var $=this.g,M=this.h;return this.h=0,Re($,0,M)};function Ze($,M){for(;127<M;)$.push(M&127|128),M>>>=7;$.push(M)}function bt($){var M={},z=M.N===void 0?!1:M.N;this.o={v:M.v===void 0?!1:M.v},this.N=z,M=this.o,xe.length?(z=xe.pop(),M&&(z.v=M.v),$&&Ye(z,$),$=z):$=new Me($,M),this.g=$,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}bt.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function $t($){var M=$.g;if((M=M.g==M.j)||(M=$.j)||(M=$.g,M=M.m||0>M.g||M.g>M.j),M)return!1;$.m=$.g.g,M=$.g.i();var z=M&7;return z!=0&&z!=5&&z!=1&&z!=2&&z!=3&&z!=4?($.j=!0,!1):($.i=M,$.l=M>>>3,$.h=z,!0)}function at($){switch($.h){case 0:if($.h!=0)at($);else{for($=$.g;$.h[$.g]&128;)$.g++;$.g++}break;case 1:$.h!=1?at($):($=$.g,$.g+=8);break;case 2:if($.h!=2)at($);else{var M=$.g.i();$=$.g,$.g+=M}break;case 5:$.h!=5?at($):($=$.g,$.g+=4);break;case 3:M=$.l;do{if(!$t($)){$.j=!0;break}if($.h==4){$.l!=M&&($.j=!0);break}at($)}while(!0);break;default:$.j=!0}}function nt($,M,z){var oe=$.g.j,je=$.g.i(),Ve=$.g.g+je;if($.g.j=Ve,z(M,$),z=Ve-$.g.g,z!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+je+" bytes, instead read "+(je-z)+" bytes, either the data ended unexpectedly or the message misreported its own length");return $.g.g=Ve,$.g.j=oe,M}function Xt($){return $.g.o()}function dn($){var M=$.g.i();$=$.g;var z=$.g;$.g+=M,$=$.h;var oe;if(ee)(oe=J)||(oe=J=new TextDecoder("utf-8",{fatal:!1})),oe=oe.decode($.subarray(z,z+M));else{M=z+M;for(var je=[],Ve=null,De,We,st;z<M;)De=$[z++],128>De?je.push(De):224>De?z>=M?je.push(65533):(We=$[z++],194>De||(We&192)!==128?(z--,je.push(65533)):je.push((De&31)<<6|We&63)):240>De?z>=M-1?je.push(65533):(We=$[z++],(We&192)!==128||De===224&&160>We||De===237&&160<=We||((oe=$[z++])&192)!==128?(z--,je.push(65533)):je.push((De&15)<<12|(We&63)<<6|oe&63)):244>=De?z>=M-2?je.push(65533):(We=$[z++],(We&192)!==128||(De<<28)+(We-144)>>30!==0||((oe=$[z++])&192)!==128||((st=$[z++])&192)!==128?(z--,je.push(65533)):(De=(De&7)<<18|(We&63)<<12|(oe&63)<<6|st&63,De-=65536,je.push((De>>10&1023)+55296,(De&1023)+56320))):je.push(65533),8192<=je.length&&(Ve=ne(Ve,je),je.length=0);oe=ne(Ve,je)}return oe}function Zn($,M,z){var oe=$.g.i();for(oe=$.g.g+oe;$.g.g<oe;)z.push(M.call($.g))}function Gn($,M){$.h==2?Zn($,Me.prototype.o,M):M.push(Xt($))}function Jn(){this.h=[],this.i=0,this.g=new $e}function $n($,M){M.length!==0&&($.h.push(M),$.i+=M.length)}function ms($){var M=$.i+$.g.length();if(M===0)return new Uint8Array(0);M=new Uint8Array(M);for(var z=$.h,oe=z.length,je=0,Ve=0;Ve<oe;Ve++){var De=z[Ve];De.length!==0&&(M.set(De,je),je+=De.length)}return z=$.g,oe=z.h,oe!==0&&(M.set(z.g.subarray(0,oe),je),z.h=0),$.h=[M],M}function In($,M,z){if(z!=null){Ze($.g,8*M+5),$=$.g;var oe=z;oe=(z=0>oe?1:0)?-oe:oe,oe===0?0<1/oe?se=Te=0:(Te=0,se=2147483648):isNaN(oe)?(Te=0,se=2147483647):34028234663852886e22<oe?(Te=0,se=(z<<31|2139095040)>>>0):11754943508222875e-54>oe?(oe=Math.round(oe/Math.pow(2,-149)),Te=0,se=(z<<31|oe)>>>0):(M=Math.floor(Math.log(oe)/Math.LN2),oe*=Math.pow(2,-M),oe=Math.round(8388608*oe),16777216<=oe&&++M,Te=0,se=(z<<31|M+127<<23|oe&8388607)>>>0),z=se,$.push(z>>>0&255),$.push(z>>>8&255),$.push(z>>>16&255),$.push(z>>>24&255)}}var As=typeof Uint8Array=="function";function gs($,M,z){if($!=null)return typeof $=="object"?As&&$ instanceof Uint8Array?z($):Ne($,M,z):M($)}function Ne($,M,z){if(Array.isArray($)){for(var oe=Array($.length),je=0;je<$.length;je++)oe[je]=gs($[je],M,z);return Array.isArray($)&&$.W&&Sn(oe),oe}oe={};for(je in $)oe[je]=gs($[je],M,z);return oe}function ft($){return typeof $=="number"?isFinite($)?$:String($):$}var on={W:{value:!0,configurable:!0}};function Sn($){return Array.isArray($)&&!Object.isFrozen($)&&Object.defineProperties($,on),$}var An;function Pn($,M,z){var oe=An;An=null,$||($=oe),oe=this.constructor.ca,$||($=oe?[oe]:[]),this.j=oe?0:-1,this.m=this.g=null,this.h=$;e:{if(oe=this.h.length,$=oe-1,oe&&(oe=this.h[$],!(oe===null||typeof oe!="object"||Array.isArray(oe)||As&&oe instanceof Uint8Array))){this.l=$-this.j,this.i=oe;break e}M!==void 0&&-1<M?(this.l=Math.max(M,$+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(z)for(M=0;M<z.length;M++)$=z[M],$<this.l?($+=this.j,(oe=this.h[$])?Sn(oe):this.h[$]=Ss):(Rn(this),(oe=this.i[$])?Sn(oe):this.i[$]=Ss)}var Ss=Object.freeze(Sn([]));function Rn($){var M=$.l+$.j;$.h[M]||($.i=$.h[M]={})}function hn($,M,z){return M===-1?null:z!==void 0&&z||M>=$.l?$.i?$.i[M]:void 0:$.h[M+$.j]}function qi($,M){var z=z===void 0?!1:z,oe=hn($,M,z);return oe==null&&(oe=Ss),oe===Ss&&(oe=Sn([]),dt($,M,oe,z)),oe}function Ci($){var M=qi($,3);if($.m||($.m={}),!$.m[3]){for(var z=0;z<M.length;z++)M[z]=+M[z];$.m[3]=!0}return M}function Hs($,M,z){return $=hn($,M),$??z}function ar($,M,z){return $=hn($,M),$=$==null?$:+$,$??(z===void 0?0:z)}function dt($,M,z,oe){oe!==void 0&&oe||M>=$.l?(Rn($),$.i[M]=z):$.h[M+$.j]=z}function ns($,M,z){if(z===-1)return null;if($.g||($.g={}),!$.g[z]){var oe=hn($,z,!1);oe&&($.g[z]=new M(oe))}return $.g[z]}function ss($,M){$.g||($.g={});var z=$.g[1];if(!z){var oe=qi($,1);z=[];for(var je=0;je<oe.length;je++)z[je]=new M(oe[je]);$.g[1]=z}return z}function xs($,M,z){var oe=oe===void 0?!1:oe;$.g||($.g={});var je=z&&_n(z);$.g[M]=z,dt($,M,je,oe)}function Lr($,M,z,oe){var je=ss($,z);M=M||new z,$=qi($,1),oe!=null?(je.splice(oe,0,M),$.splice(oe,0,_n(M))):(je.push(M),$.push(_n(M)))}Pn.prototype.toJSON=function(){var $=_n(this);return Ne($,ft,ie)};function _n($,M){if($.g)for(var z in $.g){var oe=$.g[z];if(Array.isArray(oe))for(var je=0;je<oe.length;je++)oe[je]&&_n(oe[je]);else oe&&_n(oe)}return $.h}Pn.prototype.toString=function(){return _n(this).toString()};function cs($,M){if($=$.o){$n(M,M.g.end());for(var z=0;z<$.length;z++)$n(M,$[z])}}function Rs($,M){if(M.h==4)return!1;var z=M.m;return at(M),M.N||(M=Re(M.g.h,z,M.g.g),(z=$.o)?z.push(M):$.o=[M]),!0}function Hn($){Pn.call(this,$,-1,ca)}y(Hn,Pn),Hn.prototype.getRows=function(){return hn(this,1)},Hn.prototype.getCols=function(){return hn(this,2)},Hn.prototype.getPackedDataList=function(){return Ci(this)},Hn.prototype.getLayout=function(){return Hs(this,4,0)};function gr($,M){for(;$t(M);)switch(M.i){case 8:var z=M.g.i();dt($,1,z);break;case 16:z=M.g.i(),dt($,2,z);break;case 29:case 26:Gn(M,$.getPackedDataList());break;case 32:z=me(M.g),dt($,4,z);break;default:if(!Rs($,M))return $}return $}var ca=[3];function On($,M){var z=void 0;return new(z||(z=Promise))(function(oe,je){function Ve(st){try{We(M.next(st))}catch(mt){je(mt)}}function De(st){try{We(M.throw(st))}catch(mt){je(mt)}}function We(st){st.done?oe(st.value):new z(function(mt){mt(st.value)}).then(Ve,De)}We((M=M.apply($,void 0)).next())})}function Br($){Pn.call(this,$)}y(Br,Pn);function tc($,M){for(;$t(M);)switch(M.i){case 8:var z=M.g.i();dt($,1,z);break;case 21:z=Xt(M),dt($,2,z);break;case 26:z=dn(M),dt($,3,z);break;case 34:z=dn(M),dt($,4,z);break;default:if(!Rs($,M))return $}return $}function nc($){Pn.call(this,$,-1,Xd)}y(nc,Pn),nc.prototype.addClassification=function($,M){return Lr(this,$,Br,M),this};var Xd=[1];function So($){Pn.call(this,$)}y(So,Pn);function za($,M){for(;$t(M);)switch(M.i){case 13:var z=Xt(M);dt($,1,z);break;case 21:z=Xt(M),dt($,2,z);break;case 29:z=Xt(M),dt($,3,z);break;case 37:z=Xt(M),dt($,4,z);break;case 45:z=Xt(M),dt($,5,z);break;default:if(!Rs($,M))return $}return $}function Su($){Pn.call(this,$,-1,Yd)}y(Su,Pn);function ku($){e:{var M=new Su;for($=new bt($);$t($);)switch($.i){case 10:var z=nt($,new So,za);Lr(M,z,So,void 0);break;default:if(!Rs(M,$))break e}}return M}var Yd=[1];function cl($){Pn.call(this,$)}y(cl,Pn);function ua($){Pn.call(this,$,-1,Jd)}y(ua,Pn),ua.prototype.getVertexType=function(){return Hs(this,1,0)},ua.prototype.getPrimitiveType=function(){return Hs(this,2,0)},ua.prototype.getVertexBufferList=function(){return Ci(this)},ua.prototype.getIndexBufferList=function(){return qi(this,4)};function Zd($,M){for(;$t(M);)switch(M.i){case 8:var z=me(M.g);dt($,1,z);break;case 16:z=me(M.g),dt($,2,z);break;case 29:case 26:Gn(M,$.getVertexBufferList());break;case 32:case 34:z=M;var oe=$.getIndexBufferList();z.h==2?Zn(z,Me.prototype.i,oe):oe.push(z.g.i());break;default:if(!Rs($,M))return $}return $}var Jd=[3,4];function sc($){Pn.call(this,$)}y(sc,Pn),sc.prototype.getMesh=function(){return ns(this,ua,1)},sc.prototype.getPoseTransformMatrix=function(){return ns(this,Hn,2)};function Qd($){e:{var M=new sc;for($=new bt($);$t($);)switch($.i){case 10:var z=nt($,new ua,Zd);xs(M,1,z);break;case 18:z=nt($,new Hn,gr),xs(M,2,z);break;default:if(!Rs(M,$))break e}}return M}function Qn($,M,z){if(z=$.createShader(z===0?$.VERTEX_SHADER:$.FRAGMENT_SHADER),$.shaderSource(z,M),$.compileShader(z),!$.getShaderParameter(z,$.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+$.getShaderInfoLog(z));return z}function Cu($){return ss($,Br).map(function(M){return{index:Hs(M,1,0),Y:ar(M,2),label:hn(M,3)!=null?Hs(M,3,""):void 0,displayName:hn(M,4)!=null?Hs(M,4,""):void 0}})}function ul($){return{x:ar($,1),y:ar($,2),z:ar($,3),visibility:hn($,4)!=null?ar($,4):void 0}}function ko($,M){this.h=$,this.g=M,this.l=0}function Xi($,M,z){return ri($,M),typeof $.g.canvas.transferToImageBitmap=="function"?Promise.resolve($.g.canvas.transferToImageBitmap()):z?Promise.resolve($.g.canvas):typeof createImageBitmap=="function"?createImageBitmap($.g.canvas):($.i===void 0&&($.i=document.createElement("canvas")),new Promise(function(oe){$.i.height=$.g.canvas.height,$.i.width=$.g.canvas.width,$.i.getContext("2d",{}).drawImage($.g.canvas,0,0,$.g.canvas.width,$.g.canvas.height),oe($.i)}))}function ri($,M){var z=$.g;if($.m===void 0){var oe=Qn(z,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),je=Qn(z,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Ve=z.createProgram();if(z.attachShader(Ve,oe),z.attachShader(Ve,je),z.linkProgram(Ve),!z.getProgramParameter(Ve,z.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+z.getProgramInfoLog(Ve));oe=$.m=Ve,z.useProgram(oe),je=z.getUniformLocation(oe,"sampler0"),$.j={I:z.getAttribLocation(oe,"aVertex"),H:z.getAttribLocation(oe,"aTex"),da:je},$.s=z.createBuffer(),z.bindBuffer(z.ARRAY_BUFFER,$.s),z.enableVertexAttribArray($.j.I),z.vertexAttribPointer($.j.I,2,z.FLOAT,!1,0,0),z.bufferData(z.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),z.STATIC_DRAW),z.bindBuffer(z.ARRAY_BUFFER,null),$.o=z.createBuffer(),z.bindBuffer(z.ARRAY_BUFFER,$.o),z.enableVertexAttribArray($.j.H),z.vertexAttribPointer($.j.H,2,z.FLOAT,!1,0,0),z.bufferData(z.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),z.STATIC_DRAW),z.bindBuffer(z.ARRAY_BUFFER,null),z.uniform1i(je,0)}oe=$.j,z.useProgram($.m),z.canvas.width=M.width,z.canvas.height=M.height,z.viewport(0,0,M.width,M.height),z.activeTexture(z.TEXTURE0),$.h.bindTexture2d(M.glName),z.enableVertexAttribArray(oe.I),z.bindBuffer(z.ARRAY_BUFFER,$.s),z.vertexAttribPointer(oe.I,2,z.FLOAT,!1,0,0),z.enableVertexAttribArray(oe.H),z.bindBuffer(z.ARRAY_BUFFER,$.o),z.vertexAttribPointer(oe.H,2,z.FLOAT,!1,0,0),z.bindFramebuffer(z.DRAW_FRAMEBUFFER?z.DRAW_FRAMEBUFFER:z.FRAMEBUFFER,null),z.clearColor(0,0,0,0),z.clear(z.COLOR_BUFFER_BIT),z.colorMask(!0,!0,!0,!0),z.drawArrays(z.TRIANGLE_FAN,0,4),z.disableVertexAttribArray(oe.I),z.disableVertexAttribArray(oe.H),z.bindBuffer(z.ARRAY_BUFFER,null),$.h.bindTexture2d(0)}function eh($){this.g=$}var rc=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function ii($,M){return M+$}function Tu($,M){window[$]=M}function rs($){var M=document.createElement("script");return M.setAttribute("src",$),M.setAttribute("crossorigin","anonymous"),new Promise(function(z){M.addEventListener("load",function(){z()},!1),M.addEventListener("error",function(){z()},!1),document.body.appendChild(M)})}function th(){return On(this,function $(){return O($,function(M){switch(M.g){case 1:return M.m=2,k(M,WebAssembly.instantiate(rc),4);case 4:M.g=3,M.m=0;break;case 2:return M.m=0,M.j=null,M.return(!1);case 3:return M.return(!0)}})})}function Va($){if(this.g=$,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=$&&$.locateFile||ii,typeof window=="object")var M=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")M=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=M,$.options){M=l(Object.keys($.options));for(var z=M.next();!z.done;z=M.next()){z=z.value;var oe=$.options[z].default;oe!==void 0&&(this.j[z]=typeof oe=="function"?oe():oe)}}}t=Va.prototype,t.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function nh($,M){return $.g.files===void 0?[]:typeof $.g.files=="function"?$.g.files(M):$.g.files}function Co($){return On($,function M(){var z=this,oe,je,Ve,De,We,st,mt,Ht,xn,en,Yt;return O(M,function(St){switch(St.g){case 1:return oe=z,z.R?(je=nh(z,z.j),k(St,th(),2)):St.return();case 2:if(Ve=St.h,typeof window=="object")return Tu("createMediapipeSolutionsWasm",{locateFile:z.locateFile}),Tu("createMediapipeSolutionsPackedAssets",{locateFile:z.locateFile}),st=je.filter(function(I){return I.data!==void 0}),mt=je.filter(function(I){return I.data===void 0}),Ht=Promise.all(st.map(function(I){var B=Yi(oe,I.url);if(I.path!==void 0){var U=I.path;B=B.then(function(Y){return oe.overrideFile(U,Y),Promise.resolve(Y)})}return B})),xn=Promise.all(mt.map(function(I){return I.simd===void 0||I.simd&&Ve||!I.simd&&!Ve?rs(oe.locateFile(I.url,oe.S)):Promise.resolve()})).then(function(){return On(oe,function I(){var B,U,Y=this;return O(I,function(ae){if(ae.g==1)return B=window.createMediapipeSolutionsWasm,U=window.createMediapipeSolutionsPackedAssets,k(ae,B(U),2);Y.h=ae.h,ae.g=0})})}),en=(function(){return On(oe,function I(){var B=this;return O(I,function(U){return B.g.graph&&B.g.graph.url?U=k(U,Yi(B,B.g.graph.url),0):(U.g=0,U=void 0),U})})})(),k(St,Promise.all([xn,Ht,en]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return De=je.filter(function(I){return I.simd===void 0||I.simd&&Ve||!I.simd&&!Ve}).map(function(I){return oe.locateFile(I.url,oe.S)}),importScripts.apply(null,c(De)),k(St,createMediapipeSolutionsWasm(Module),6);case 6:z.h=St.h,z.l=new OffscreenCanvas(1,1),z.h.canvas=z.l,We=z.h.GL.createContext(z.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),z.h.GL.makeContextCurrent(We),St.g=4;break;case 7:if(z.l=document.createElement("canvas"),Yt=z.l.getContext("webgl2",{}),!Yt&&(Yt=z.l.getContext("webgl",{}),!Yt))return alert("Failed to create WebGL canvas context when passing video frame."),St.return();z.D=Yt,z.h.canvas=z.l,z.h.createContext(z.l,!0,!0,{});case 4:z.i=new z.h.SolutionWasm,z.R=!1,St.g=0}})})}function ic($){return On($,function M(){var z=this,oe,je,Ve,De,We,st,mt,Ht;return O(M,function(xn){if(xn.g==1){if(z.g.graph&&z.g.graph.url&&z.P===z.g.graph.url)return xn.return();if(z.o=!0,!z.g.graph||!z.g.graph.url){xn.g=2;return}return z.P=z.g.graph.url,k(xn,Yi(z,z.g.graph.url),3)}for(xn.g!=2&&(oe=xn.h,z.i.loadGraph(oe)),je=l(Object.keys(z.B)),Ve=je.next();!Ve.done;Ve=je.next())De=Ve.value,z.i.overrideFile(De,z.B[De]);if(z.B={},z.g.listeners)for(We=l(z.g.listeners),st=We.next();!st.done;st=We.next())mt=st.value,Iu(z,mt);Ht=z.j,z.j={},z.setOptions(Ht),xn.g=0})})}t.reset=function(){return On(this,function $(){var M=this;return O($,function(z){M.i&&(M.i.reset(),M.m={},M.s={}),z.g=0})})},t.setOptions=function($,M){var z=this;if(M=M||this.g.options){for(var oe=[],je=[],Ve={},De=l(Object.keys($)),We=De.next();!We.done;Ve={K:Ve.K,L:Ve.L},We=De.next()){var st=We.value;st in this.j&&this.j[st]===$[st]||(this.j[st]=$[st],We=M[st],We!==void 0&&(We.onChange&&(Ve.K=We.onChange,Ve.L=$[st],oe.push((function(mt){return function(){return On(z,function Ht(){var xn,en=this;return O(Ht,function(Yt){if(Yt.g==1)return k(Yt,mt.K(mt.L),2);xn=Yt.h,xn===!0&&(en.o=!0),Yt.g=0})})}})(Ve))),We.graphOptionXref&&(st={valueNumber:We.type===1?$[st]:0,valueBoolean:We.type===0?$[st]:!1,valueString:We.type===2?$[st]:""},We=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),We.graphOptionXref),st),je.push(We))))}(oe.length!==0||je.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(je),this.u=(this.u===void 0?[]:this.u).concat(oe))}};function dl($){return On($,function M(){var z=this,oe,je,Ve,De,We,st,mt;return O(M,function(Ht){switch(Ht.g){case 1:if(!z.o)return Ht.return();if(!z.u){Ht.g=2;break}oe=l(z.u),je=oe.next();case 3:if(je.done){Ht.g=5;break}return Ve=je.value,k(Ht,Ve(),4);case 4:je=oe.next(),Ht.g=3;break;case 5:z.u=void 0;case 2:if(z.A){for(De=new z.h.GraphOptionChangeRequestList,We=l(z.A),st=We.next();!st.done;st=We.next())mt=st.value,De.push_back(mt);z.i.changeOptions(De),De.delete(),z.A=void 0}z.o=!1,Ht.g=0}})})}t.initialize=function(){return On(this,function $(){var M=this;return O($,function(z){return z.g==1?k(z,Co(M),2):z.g!=3?k(z,ic(M),3):k(z,dl(M),0)})})};function Yi($,M){return On($,function z(){var oe=this,je,Ve;return O(z,function(De){return M in oe.F?De.return(oe.F[M]):(je=oe.locateFile(M,""),Ve=fetch(je).then(function(We){return We.arrayBuffer()}),oe.F[M]=Ve,De.return(Ve))})})}t.overrideFile=function($,M){this.i?this.i.overrideFile($,M):this.B[$]=M},t.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},t.send=function($,M){return On(this,function z(){var oe=this,je,Ve,De,We,st,mt,Ht,xn,en;return O(z,function(Yt){switch(Yt.g){case 1:return oe.g.inputs?(je=1e3*(M??performance.now()),k(Yt,oe.C,2)):Yt.return();case 2:return k(Yt,oe.initialize(),3);case 3:for(Ve=new oe.h.PacketDataList,De=l(Object.keys($)),We=De.next();!We.done;We=De.next())if(st=We.value,mt=oe.g.inputs[st]){e:{var St=oe,I=$[st];switch(mt.type){case"video":var B=St.m[mt.stream];if(B||(B=new ko(St.h,St.D),St.m[mt.stream]=B),St=B,St.l===0&&(St.l=St.h.createTexture()),typeof HTMLVideoElement<"u"&&I instanceof HTMLVideoElement){var U=I.videoWidth;B=I.videoHeight}else typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement?(U=I.naturalWidth,B=I.naturalHeight):(U=I.width,B=I.height);B={glName:St.l,width:U,height:B},U=St.g,U.canvas.width=B.width,U.canvas.height=B.height,U.activeTexture(U.TEXTURE0),St.h.bindTexture2d(St.l),U.texImage2D(U.TEXTURE_2D,0,U.RGBA,U.RGBA,U.UNSIGNED_BYTE,I),St.h.bindTexture2d(0),St=B;break e;case"detections":for(B=St.m[mt.stream],B||(B=new eh(St.h),St.m[mt.stream]=B),St=B,St.data||(St.data=new St.g.DetectionListData),St.data.reset(I.length),B=0;B<I.length;++B){U=I[B];var Y=St.data,ae=Y.setBoundingBox,re=B,le=U.T,pe=new cl;dt(pe,1,le.Z),dt(pe,2,le.$),dt(pe,3,le.height),dt(pe,4,le.width),dt(pe,5,le.rotation),dt(pe,6,le.X);var Oe=le=new Jn;In(Oe,1,hn(pe,1)),In(Oe,2,hn(pe,2)),In(Oe,3,hn(pe,3)),In(Oe,4,hn(pe,4)),In(Oe,5,hn(pe,5));var Ge=hn(pe,6);if(Ge!=null&&Ge!=null){Ze(Oe.g,48);var qe=Oe.g,ot=Ge;Ge=0>ot,ot=Math.abs(ot);var ct=ot>>>0;for(ot=Math.floor((ot-ct)/4294967296),ot>>>=0,Ge&&(ot=~ot>>>0,ct=(~ct>>>0)+1,4294967295<ct&&(ct=0,ot++,4294967295<ot&&(ot=0))),se=ct,Te=ot,Ge=se,ct=Te;0<ct||127<Ge;)qe.push(Ge&127|128),Ge=(Ge>>>7|ct<<25)>>>0,ct>>>=7;qe.push(Ge)}if(cs(pe,Oe),le=ms(le),ae.call(Y,re,le),U.O)for(Y=0;Y<U.O.length;++Y)pe=U.O[Y],Oe=!!pe.visibility,ae=St.data,re=ae.addNormalizedLandmark,le=B,pe=Object.assign(Object.assign({},pe),{visibility:Oe?pe.visibility:0}),Oe=new So,dt(Oe,1,pe.x),dt(Oe,2,pe.y),dt(Oe,3,pe.z),pe.visibility&&dt(Oe,4,pe.visibility),qe=pe=new Jn,In(qe,1,hn(Oe,1)),In(qe,2,hn(Oe,2)),In(qe,3,hn(Oe,3)),In(qe,4,hn(Oe,4)),In(qe,5,hn(Oe,5)),cs(Oe,qe),pe=ms(pe),re.call(ae,le,pe);if(U.M)for(Y=0;Y<U.M.length;++Y){if(ae=St.data,re=ae.addClassification,le=B,pe=U.M[Y],Oe=new Br,dt(Oe,2,pe.Y),pe.index&&dt(Oe,1,pe.index),pe.label&&dt(Oe,3,pe.label),pe.displayName&&dt(Oe,4,pe.displayName),qe=pe=new Jn,ct=hn(Oe,1),ct!=null&&ct!=null)if(Ze(qe.g,8),Ge=qe.g,0<=ct)Ze(Ge,ct);else{for(ot=0;9>ot;ot++)Ge.push(ct&127|128),ct>>=7;Ge.push(1)}In(qe,2,hn(Oe,2)),Ge=hn(Oe,3),Ge!=null&&(Ge=Q(Ge),Ze(qe.g,26),Ze(qe.g,Ge.length),$n(qe,qe.g.end()),$n(qe,Ge)),Ge=hn(Oe,4),Ge!=null&&(Ge=Q(Ge),Ze(qe.g,34),Ze(qe.g,Ge.length),$n(qe,qe.g.end()),$n(qe,Ge)),cs(Oe,qe),pe=ms(pe),re.call(ae,le,pe)}}St=St.data;break e;default:St={}}}switch(Ht=St,xn=mt.stream,mt.type){case"video":Ve.pushTexture2d(Object.assign(Object.assign({},Ht),{stream:xn,timestamp:je}));break;case"detections":en=Ht,en.stream=xn,en.timestamp=je,Ve.pushDetectionList(en);break;default:throw Error("Unknown input config type: '"+mt.type+"'")}}return oe.i.send(Ve),k(Yt,oe.C,4);case 4:Ve.delete(),Yt.g=0}})})};function sh($,M,z){return On($,function oe(){var je,Ve,De,We,st,mt,Ht=this,xn,en,Yt,St,I,B,U,Y;return O(oe,function(ae){switch(ae.g){case 1:if(!z)return ae.return(M);for(je={},Ve=0,De=l(Object.keys(z)),We=De.next();!We.done;We=De.next())st=We.value,mt=z[st],typeof mt!="string"&&mt.type==="texture"&&M[mt.stream]!==void 0&&++Ve;1<Ve&&(Ht.G=!1),xn=l(Object.keys(z)),We=xn.next();case 2:if(We.done){ae.g=4;break}if(en=We.value,Yt=z[en],typeof Yt=="string")return U=je,Y=en,k(ae,rh(Ht,en,M[Yt]),14);if(St=M[Yt.stream],Yt.type==="detection_list"){if(St){for(var re=St.getRectList(),le=St.getLandmarksList(),pe=St.getClassificationsList(),Oe=[],Ge=0;Ge<re.size();++Ge){var qe=re.get(Ge);e:{var ot=new cl;for(qe=new bt(qe);$t(qe);)switch(qe.i){case 13:var ct=Xt(qe);dt(ot,1,ct);break;case 21:ct=Xt(qe),dt(ot,2,ct);break;case 29:ct=Xt(qe),dt(ot,3,ct);break;case 37:ct=Xt(qe),dt(ot,4,ct);break;case 45:ct=Xt(qe),dt(ot,5,ct);break;case 48:ct=me(qe.g),dt(ot,6,ct);break;default:if(!Rs(ot,qe))break e}}ot={Z:ar(ot,1),$:ar(ot,2),height:ar(ot,3),width:ar(ot,4),rotation:ar(ot,5,0),X:Hs(ot,6,0)},qe=ss(ku(le.get(Ge)),So).map(ul);var ut=pe.get(Ge);e:for(ct=new nc,ut=new bt(ut);$t(ut);)switch(ut.i){case 10:ct.addClassification(nt(ut,new Br,tc));break;default:if(!Rs(ct,ut))break e}ot={T:ot,O:qe,M:Cu(ct)},Oe.push(ot)}re=Oe}else re=[];je[en]=re,ae.g=7;break}if(Yt.type==="proto_list"){if(St){for(re=Array(St.size()),le=0;le<St.size();le++)re[le]=St.get(le);St.delete()}else re=[];je[en]=re,ae.g=7;break}if(St===void 0){ae.g=3;break}if(Yt.type==="float_list"){je[en]=St,ae.g=7;break}if(Yt.type==="proto"){je[en]=St,ae.g=7;break}if(Yt.type!=="texture")throw Error("Unknown output config type: '"+Yt.type+"'");return I=Ht.s[en],I||(I=new ko(Ht.h,Ht.D),Ht.s[en]=I),k(ae,Xi(I,St,Ht.G),13);case 13:B=ae.h,je[en]=B;case 7:Yt.transform&&je[en]&&(je[en]=Yt.transform(je[en])),ae.g=3;break;case 14:U[Y]=ae.h;case 3:We=xn.next(),ae.g=2;break;case 4:return ae.return(je)}})})}function rh($,M,z){return On($,function oe(){var je=this,Ve;return O(oe,function(De){return typeof z=="number"||z instanceof Uint8Array||z instanceof je.h.Uint8BlobList?De.return(z):z instanceof je.h.Texture2dDataOut?(Ve=je.s[M],Ve||(Ve=new ko(je.h,je.D),je.s[M]=Ve),De.return(Xi(Ve,z,je.G))):De.return(void 0)})})}function Iu($,M){for(var z=M.name||"$",oe=[].concat(c(M.wants)),je=new $.h.StringList,Ve=l(M.wants),De=Ve.next();!De.done;De=Ve.next())je.push_back(De.value);Ve=$.h.PacketListener.implement({onResults:function(We){for(var st={},mt=0;mt<M.wants.length;++mt)st[oe[mt]]=We.get(mt);var Ht=$.listeners[z];Ht&&($.C=sh($,st,M.outs).then(function(xn){xn=Ht(xn);for(var en=0;en<M.wants.length;++en){var Yt=st[oe[en]];typeof Yt=="object"&&Yt.hasOwnProperty&&Yt.hasOwnProperty("delete")&&Yt.delete()}xn&&($.C=xn)}))}}),$.i.attachMultiListener(je,Ve),je.delete()}t.onResults=function($,M){this.listeners[M||"$"]=$},V("Solution",Va),V("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function ih($){$=Qd($);var M=$.getMesh();if(!M)return $;var z=new Float32Array(M.getVertexBufferList());M.getVertexBufferList=function(){return z};var oe=new Uint32Array(M.getIndexBufferList());return M.getIndexBufferList=function(){return oe},$}var hl={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function($){return $.map(ih)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function($){return $.map(function(M){return ss(ku(M),So).map(ul)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},Ua=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],ju=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],fl=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],kn=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],ac=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],oc=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],lc=[].concat(c(Ua),c(ju),c(fl),c(kn),c(ac),c(oc));function Eu($){$=$||{},$=Object.assign(Object.assign({},hl),$),this.g=new Va($)}t=Eu.prototype,t.close=function(){return this.g.close(),Promise.resolve()},t.onResults=function($){this.g.onResults($)},t.initialize=function(){return On(this,function $(){var M=this;return O($,function(z){return k(z,M.g.initialize(),0)})})},t.reset=function(){this.g.reset()},t.send=function($){return On(this,function M(){var z=this;return O(M,function(oe){return k(oe,z.g.send($),0)})})},t.setOptions=function($){this.g.setOptions($)},V("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),V("FaceMesh",Eu),V("FACEMESH_LIPS",Ua),V("FACEMESH_LEFT_EYE",ju),V("FACEMESH_LEFT_EYEBROW",fl),V("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),V("FACEMESH_RIGHT_EYE",kn),V("FACEMESH_RIGHT_EYEBROW",ac),V("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),V("FACEMESH_FACE_OVAL",oc),V("FACEMESH_CONTOURS",lc),V("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),V("matrixDataToMatrix",function($){for(var M=$.getCols(),z=$.getRows(),oe=$.getPackedDataList(),je=[],Ve=0;Ve<z;Ve++)je.push(Array(M));for(Ve=0;Ve<z;Ve++)for(var De=0;De<M;De++){var We=$.getLayout()===1?Ve*M+De:De*z+Ve;je[Ve][De]=oe[We]}return je}),V("VERSION","0.4.1633559619")}).call(pN)),pN}var gRe=mRe();/**
    * @license
    * Copyright 2024 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var co=function(){return co=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},co.apply(this,arguments)};function Dl(t,e,n,s){return new(n||(n=Promise))((function(r,i){function a(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){var d;u.done?r(u.value):(d=u.value,d instanceof n?d:new n((function(h){h(d)}))).then(a,l)}c((s=s.apply(t,[])).next())}))}function Pl(t,e){var n,s,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(u){return(function(d){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(r=2&d[0]?s.return:d[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,d[1])).done)return r;switch(s=0,r&&(d=[2&d[0],r.value]),d[0]){case 0:case 1:r=d;break;case 4:return a.label++,{value:d[1],done:!1};case 5:a.label++,s=d[1],d=[0];continue;case 7:d=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||d[0]!==6&&d[0]!==2)){a=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){a.label=d[1];break}if(d[0]===6&&a.label<r[1]){a.label=r[1],r=d;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(d);break}r[2]&&a.ops.pop(),a.trys.pop();continue}d=e.call(t,a)}catch(h){d=[6,h],s=0}finally{n=r=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([c,u])}}}function Tc(t){var e=t.map((function(n){return n[0]}));return e.push(t[t.length-1][1]),e}var xRe={lips:Tc([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:Tc([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:Tc([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:Tc([[474,475],[475,476],[476,477],[477,474]]),rightEye:Tc([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:Tc([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:Tc([[469,470],[470,471],[471,472],[472,469]]),faceOval:Tc([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},yRe=Object.entries(xRe).map((function(t){var e=t[0];return t[1].map((function(n){return[n,e]}))})).flat(),XB=new Map(yRe);function x4(t){for(var e={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,a=0;a<t.length;++a){var l=t[a];n=Math.min(n,l.x),s=Math.max(s,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y),e.locationData.relativeKeypoints.push({x:l.x,y:l.y})}return e.locationData.relativeBoundingBox={xMin:n,yMin:r,xMax:s,yMax:i,width:s-n,height:i-r},e}var mN={runtime:"mediapipe",maxFaces:1,refineLandmarks:!1},vRe=(function(){function t(e){var n=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceMeshSolution=new gRe.FaceMesh({locateFile:function(s,r){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+s:r+"/"+s}}),this.faceMeshSolution.setOptions({refineLandmarks:e.refineLandmarks,selfieMode:this.selfieMode,maxNumFaces:e.maxFaces}),this.faceMeshSolution.onResults((function(s){if(n.height=s.image.height,n.width=s.image.width,n.faces=[],s.multiFaceLandmarks!==null)for(var r=s.multiFaceLandmarks,i=0;i<r.length;i++){var a=n.translateOutput(r[i]);n.faces.push({keypoints:a,box:x4(a).locationData.relativeBoundingBox})}}))}return t.prototype.translateOutput=function(e){var n=this;return e.map((function(s,r){var i={x:s.x*n.width,y:s.y*n.height,z:s.z*n.width},a=XB.get(r);return a!=null&&(i.name=a),i}))},t.prototype.estimateFaces=function(e,n){return Dl(this,void 0,void 0,(function(){var s,r;return Pl(this,(function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.faceMeshSolution.setOptions({selfieMode:this.selfieMode})),e instanceof zn?(r=ImageData.bind,[4,Y8(e)]):[3,2];case 1:return s=new(r.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:s=e,i.label=3;case 3:return e=s,[4,this.faceMeshSolution.send({image:e})];case 4:return i.sent(),[2,this.faces]}}))}))},t.prototype.dispose=function(){this.faceMeshSolution.close()},t.prototype.reset=function(){this.faceMeshSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceMeshSolution.initialize()},t})();function bRe(t){return Dl(this,void 0,void 0,(function(){var e,n;return Pl(this,(function(s){switch(s.label){case 0:return e=(function(r){if(r==null)return co({},mN);var i=co({},r);return i.runtime="mediapipe",i.maxFaces==null&&(i.maxFaces=mN.maxFaces),i.refineLandmarks==null&&(i.refineLandmarks=mN.refineLandmarks),i})(t),[4,(n=new vRe(e)).initialize()];case 1:return s.sent(),[2,n]}}))}))}var gN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wRe={};(function(){var t;function e(I){var B=0;return function(){return B<I.length?{done:!1,value:I[B++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,B,U){return I==Array.prototype||I==Object.prototype||(I[B]=U.value),I},s=(function(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof gN=="object"&&gN];for(var B=0;B<I.length;++B){var U=I[B];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")})(this);function r(I,B){if(B)e:{var U=s;I=I.split(".");for(var Y=0;Y<I.length-1;Y++){var ae=I[Y];if(!(ae in U))break e;U=U[ae]}(B=B(Y=U[I=I[I.length-1]]))!=Y&&B!=null&&n(U,I,{configurable:!0,writable:!0,value:B})}}function i(I){return(I={next:I})[Symbol.iterator]=function(){return this},I}function a(I){var B=typeof Symbol<"u"&&Symbol.iterator&&I[Symbol.iterator];return B?B.call(I):{next:e(I)}}function l(I){if(!(I instanceof Array)){I=a(I);for(var B,U=[];!(B=I.next()).done;)U.push(B.value);I=U}return I}r("Symbol",(function(I){function B(ae,re){this.g=ae,n(this,"description",{configurable:!0,writable:!0,value:re})}if(I)return I;B.prototype.toString=function(){return this.g};var U="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Y=0;return function ae(re){if(this instanceof ae)throw new TypeError("Symbol is not a constructor");return new B(U+(re||"")+"_"+Y++,re)}})),r("Symbol.iterator",(function(I){if(I)return I;I=Symbol("Symbol.iterator");for(var B="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),U=0;U<B.length;U++){var Y=s[B[U]];typeof Y=="function"&&typeof Y.prototype[I]!="function"&&n(Y.prototype,I,{configurable:!0,writable:!0,value:function(){return i(e(this))}})}return I}));var c,u=typeof Object.create=="function"?Object.create:function(I){function B(){}return B.prototype=I,new B};if(typeof Object.setPrototypeOf=="function")c=Object.setPrototypeOf;else{var d;e:{var h={};try{h.__proto__={a:!0},d=h.a;break e}catch{}d=!1}c=d?function(I,B){if(I.__proto__=B,I.__proto__!==B)throw new TypeError(I+" is not extensible");return I}:null}var p=c;function g(I,B){if(I.prototype=u(B.prototype),I.prototype.constructor=I,p)p(I,B);else for(var U in B)if(U!="prototype")if(Object.defineProperties){var Y=Object.getOwnPropertyDescriptor(B,U);Y&&Object.defineProperty(I,U,Y)}else I[U]=B[U];I.na=B.prototype}function x(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function y(I){if(I.l)throw new TypeError("Generator is already running");I.l=!0}function v(I,B){I.j={da:B,ea:!0},I.g=I.o||I.u}function w(I,B,U){return I.g=U,{value:B}}function N(I){this.g=new x,this.h=I}function k(I,B,U,Y){try{var ae=B.call(I.g.i,U);if(!(ae instanceof Object))throw new TypeError("Iterator result "+ae+" is not an object");if(!ae.done)return I.g.l=!1,ae;var re=ae.value}catch(le){return I.g.i=null,v(I.g,le),C(I)}return I.g.i=null,Y.call(I.g,re),C(I)}function C(I){for(;I.g.g;)try{var B=I.h(I.g);if(B)return I.g.l=!1,{value:B.value,done:!1}}catch(U){I.g.h=void 0,v(I.g,U)}if(I.g.l=!1,I.g.j){if(B=I.g.j,I.g.j=null,B.ea)throw B.da;return{value:B.return,done:!0}}return{value:void 0,done:!0}}function j(I){this.next=function(B){return y(I.g),I.g.i?B=k(I,I.g.i.next,B,I.g.s):(I.g.s(B),B=C(I)),B},this.throw=function(B){return y(I.g),I.g.i?B=k(I,I.g.i.throw,B,I.g.s):(v(I.g,B),B=C(I)),B},this.return=function(B){return(function(U,Y){y(U.g);var ae=U.g.i;return ae?k(U,"return"in ae?ae.return:function(re){return{value:re,done:!0}},Y,U.g.return):(U.g.return(Y),C(U))})(I,B)},this[Symbol.iterator]=function(){return this}}function R(I){return(function(B){function U(ae){return B.next(ae)}function Y(ae){return B.throw(ae)}return new Promise((function(ae,re){(function le(pe){pe.done?ae(pe.value):Promise.resolve(pe.value).then(U,Y).then(le,re)})(B.next())}))})(new j(new N(I)))}x.prototype.s=function(I){this.h=I},x.prototype.return=function(I){this.j={return:I},this.g=this.u},r("Promise",(function(I){function B(le){this.h=0,this.i=void 0,this.g=[],this.s=!1;var pe=this.j();try{le(pe.resolve,pe.reject)}catch(Oe){pe.reject(Oe)}}function U(){this.g=null}function Y(le){return le instanceof B?le:new B((function(pe){pe(le)}))}if(I)return I;U.prototype.h=function(le){if(this.g==null){this.g=[];var pe=this;this.i((function(){pe.l()}))}this.g.push(le)};var ae=s.setTimeout;U.prototype.i=function(le){ae(le,0)},U.prototype.l=function(){for(;this.g&&this.g.length;){var le=this.g;this.g=[];for(var pe=0;pe<le.length;++pe){var Oe=le[pe];le[pe]=null;try{Oe()}catch(Ge){this.j(Ge)}}}this.g=null},U.prototype.j=function(le){this.i((function(){throw le}))},B.prototype.j=function(){function le(Ge){return function(qe){Oe||(Oe=!0,Ge.call(pe,qe))}}var pe=this,Oe=!1;return{resolve:le(this.D),reject:le(this.l)}},B.prototype.D=function(le){if(le===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(le instanceof B)this.H(le);else{e:switch(typeof le){case"object":var pe=le!=null;break e;case"function":pe=!0;break e;default:pe=!1}pe?this.A(le):this.o(le)}},B.prototype.A=function(le){var pe=void 0;try{pe=le.then}catch(Oe){return void this.l(Oe)}typeof pe=="function"?this.I(pe,le):this.o(le)},B.prototype.l=function(le){this.u(2,le)},B.prototype.o=function(le){this.u(1,le)},B.prototype.u=function(le,pe){if(this.h!=0)throw Error("Cannot settle("+le+", "+pe+"): Promise already settled in state"+this.h);this.h=le,this.i=pe,this.h===2&&this.G(),this.B()},B.prototype.G=function(){var le=this;ae((function(){if(le.C()){var pe=s.console;pe!==void 0&&pe.error(le.i)}}),1)},B.prototype.C=function(){if(this.s)return!1;var le=s.CustomEvent,pe=s.Event,Oe=s.dispatchEvent;return Oe===void 0||(typeof le=="function"?le=new le("unhandledrejection",{cancelable:!0}):typeof pe=="function"?le=new pe("unhandledrejection",{cancelable:!0}):(le=s.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,le),le.promise=this,le.reason=this.i,Oe(le))},B.prototype.B=function(){if(this.g!=null){for(var le=0;le<this.g.length;++le)re.h(this.g[le]);this.g=null}};var re=new U;return B.prototype.H=function(le){var pe=this.j();le.M(pe.resolve,pe.reject)},B.prototype.I=function(le,pe){var Oe=this.j();try{le.call(pe,Oe.resolve,Oe.reject)}catch(Ge){Oe.reject(Ge)}},B.prototype.then=function(le,pe){function Oe(ct,ut){return typeof ct=="function"?function(Ut){try{Ge(ct(Ut))}catch(tn){qe(tn)}}:ut}var Ge,qe,ot=new B((function(ct,ut){Ge=ct,qe=ut}));return this.M(Oe(le,Ge),Oe(pe,qe)),ot},B.prototype.catch=function(le){return this.then(void 0,le)},B.prototype.M=function(le,pe){function Oe(){switch(Ge.h){case 1:le(Ge.i);break;case 2:pe(Ge.i);break;default:throw Error("Unexpected state: "+Ge.h)}}var Ge=this;this.g==null?re.h(Oe):this.g.push(Oe),this.s=!0},B.resolve=Y,B.reject=function(le){return new B((function(pe,Oe){Oe(le)}))},B.race=function(le){return new B((function(pe,Oe){for(var Ge=a(le),qe=Ge.next();!qe.done;qe=Ge.next())Y(qe.value).M(pe,Oe)}))},B.all=function(le){var pe=a(le),Oe=pe.next();return Oe.done?Y([]):new B((function(Ge,qe){function ot(Ut){return function(tn){ct[Ut]=tn,--ut==0&&Ge(ct)}}var ct=[],ut=0;do ct.push(void 0),ut++,Y(Oe.value).M(ot(ct.length-1),qe),Oe=pe.next();while(!Oe.done)}))},B}));var _=typeof Object.assign=="function"?Object.assign:function(I,B){for(var U=1;U<arguments.length;U++){var Y=arguments[U];if(Y)for(var ae in Y)Object.prototype.hasOwnProperty.call(Y,ae)&&(I[ae]=Y[ae])}return I};r("Object.assign",(function(I){return I||_})),r("Object.is",(function(I){return I||function(B,U){return B===U?B!==0||1/B==1/U:B!=B&&U!=U}})),r("Array.prototype.includes",(function(I){return I||function(B,U){var Y=this;Y instanceof String&&(Y=String(Y));var ae=Y.length;for(0>(U=U||0)&&(U=Math.max(U+ae,0));U<ae;U++){var re=Y[U];if(re===B||Object.is(re,B))return!0}return!1}})),r("String.prototype.includes",(function(I){return I||function(B,U){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(B instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(B,U||0)!==-1}})),r("Array.prototype.keys",(function(I){return I||function(){return(function(B,U){B instanceof String&&(B+="");var Y=0,ae=!1,re={next:function(){if(!ae&&Y<B.length){var le=Y++;return{value:U(le,B[le]),done:!1}}return ae=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re})(this,(function(B){return B}))}}));var A=this||self;function O(I,B){I=I.split(".");var U,Y=A;for((I[0]in Y)||Y.execScript===void 0||Y.execScript("var "+I[0]);I.length&&(U=I.shift());)I.length||B===void 0?Y=Y[U]&&Y[U]!==Object.prototype[U]?Y[U]:Y[U]={}:Y[U]=B}function L(){throw Error("Invalid UTF8")}function D(I,B){return B=String.fromCharCode.apply(null,B),I==null?B:I+B}var q,V,ne=typeof TextDecoder<"u",J=typeof TextEncoder<"u",ee={},te=null;function X(I){var B;B===void 0&&(B=0),G(),B=ee[B];for(var U=Array(Math.floor(I.length/3)),Y=B[64]||"",ae=0,re=0;ae<I.length-2;ae+=3){var le=I[ae],pe=I[ae+1],Oe=I[ae+2],Ge=B[le>>2];le=B[(3&le)<<4|pe>>4],pe=B[(15&pe)<<2|Oe>>6],Oe=B[63&Oe],U[re++]=Ge+le+pe+Oe}switch(Ge=0,Oe=Y,I.length-ae){case 2:Oe=B[(15&(Ge=I[ae+1]))<<2]||Y;case 1:I=I[ae],U[re]=B[I>>2]+B[(3&I)<<4|Ge>>4]+Oe+Y}return U.join("")}function Q(I){var B=I.length,U=3*B/4;U%3?U=Math.floor(U):"=.".indexOf(I[B-1])!=-1&&(U="=.".indexOf(I[B-2])!=-1?U-2:U-1);var Y=new Uint8Array(U),ae=0;return(function(re,le){function pe(ut){for(;Oe<re.length;){var Ut=re.charAt(Oe++),tn=te[Ut];if(tn!=null)return tn;if(!/^[\s\xa0]*$/.test(Ut))throw Error("Unknown base64 encoding at char: "+Ut)}return ut}G();for(var Oe=0;;){var Ge=pe(-1),qe=pe(0),ot=pe(64),ct=pe(64);if(ct===64&&Ge===-1)break;le(Ge<<2|qe>>4),ot!=64&&(le(qe<<4&240|ot>>2),ct!=64&&le(ot<<6&192|ct))}})(I,(function(re){Y[ae++]=re})),ae!==U?Y.subarray(0,ae):Y}function G(){if(!te){te={};for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),B=["+/=","+/","-_=","-_.","-_"],U=0;5>U;U++){var Y=I.concat(B[U].split(""));ee[U]=Y;for(var ae=0;ae<Y.length;ae++){var re=Y[ae];te[re]===void 0&&(te[re]=ae)}}}}var H,ie=typeof Uint8Array=="function";function de(I){return ie&&I!=null&&I instanceof Uint8Array}function ke(I){if(this.L=I,I!==null&&I.length===0)throw Error("ByteString should be constructed with non-empty values")}var we=typeof Uint8Array.prototype.slice=="function",Ee=0;function Ce(I,B){return Error("Invalid wire type: "+I+" (at position "+B+")")}function Re(){return Error("Failed to read varint, encoding is invalid.")}function se(I,B){B=(B=B===void 0?{}:B).v!==void 0&&B.v,this.h=null,this.g=this.i=this.j=0,this.v=B,I&&Te(this,I)}function Te(I,B){I.h=(function(U,Y){if(U.constructor===Uint8Array)return U;if(U.constructor===ArrayBuffer)return new Uint8Array(U);if(U.constructor===Array)return new Uint8Array(U);if(U.constructor===String)return Q(U);if(U.constructor===ke)return!Y&&(Y=U.L)&&Y.constructor===Uint8Array?Y:(Y=(Y=U.L)==null||de(Y)?Y:typeof Y=="string"?Q(Y):null,(U=U.L=Y)?new Uint8Array(U):H||(H=new Uint8Array(0)));if(U instanceof Uint8Array)return new Uint8Array(U.buffer,U.byteOffset,U.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")})(B,I.v),I.j=0,I.i=I.h.length,I.g=I.j}function Me(I){if(I.g>I.i)throw Error("Tried to read past the end of the data "+I.g+" > "+I.i)}function Ye(I){var B=I.h,U=B[I.g],Y=127&U;if(128>U)return I.g+=1,Me(I),Y;if(Y|=(127&(U=B[I.g+1]))<<7,128>U)return I.g+=2,Me(I),Y;if(Y|=(127&(U=B[I.g+2]))<<14,128>U)return I.g+=3,Me(I),Y;if(Y|=(127&(U=B[I.g+3]))<<21,128>U)return I.g+=4,Me(I),Y;if(U=B[I.g+4],I.g+=5,Y|=(15&U)<<28,128>U)return Me(I),Y;if(128<=B[I.g++]&&128<=B[I.g++]&&128<=B[I.g++]&&128<=B[I.g++]&&128<=B[I.g++])throw Re();return Me(I),Y}se.prototype.reset=function(){this.g=this.j};var me=[];function xe(){this.g=[]}function $e(I,B){for(;127<B;)I.g.push(127&B|128),B>>>=7;I.g.push(B)}function Ze(I){var B={},U=B.W!==void 0&&B.W;this.l={v:B.v!==void 0&&B.v},this.W=U,B=this.l,me.length?(U=me.pop(),B&&(U.v=B.v),I&&Te(U,I),I=U):I=new se(I,B),this.g=I,this.j=this.g.g,this.h=this.i=-1}function bt(I){var B=I.g;if(B.g==B.i)return!1;I.j=I.g.g;var U=Ye(I.g)>>>0;if(B=U>>>3,!(0<=(U&=7)&&5>=U))throw Ce(U,I.j);if(1>B)throw Error("Invalid field number: "+B+" (at position "+I.j+")");return I.i=B,I.h=U,!0}function $t(I){switch(I.h){case 0:if(I.h!=0)$t(I);else e:{for(var B=(I=I.g).g,U=B+10;B<U;)if((128&I.h[B++])==0){I.g=B,Me(I);break e}throw Re()}break;case 1:(I=I.g).g+=8,Me(I);break;case 2:I.h!=2?$t(I):(B=Ye(I.g)>>>0,(I=I.g).g+=B,Me(I));break;case 5:(I=I.g).g+=4,Me(I);break;case 3:for(B=I.i;;){if(!bt(I))throw Error("Unmatched start-group tag: stream EOF");if(I.h==4){if(I.i!=B)throw Error("Unmatched end-group tag");break}$t(I)}break;default:throw Ce(I.h,I.j)}}xe.prototype.length=function(){return this.g.length},xe.prototype.end=function(){var I=this.g;return this.g=[],I},Ze.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var at=[];function nt(){this.i=[],this.h=0,this.g=new xe}function Xt(I,B){B.length!==0&&(I.i.push(B),I.h+=B.length)}var dn=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Zn(I,B){Object.isFrozen(I)||(dn?I[dn]|=B:I.N!==void 0?I.N|=B:Object.defineProperties(I,{N:{value:B,configurable:!0,writable:!0,enumerable:!1}}))}function Gn(I){var B;return(B=dn?I[dn]:I.N)==null?0:B}function Jn(I){return Zn(I,1),I}function $n(I){return!!Array.isArray(I)&&!!(2&Gn(I))}function ms(I){if(!Array.isArray(I))throw Error("cannot mark non-array as immutable");Zn(I,2)}function In(I){return I!==null&&typeof I=="object"&&!Array.isArray(I)&&I.constructor===Object}var As=Object.freeze(Jn([]));function gs(I){if($n(I.m))throw Error("Cannot mutate an immutable Message")}var Ne,ft=typeof Symbol<"u"&&Symbol.hasInstance!==void 0;function on(I){return{value:I,configurable:!1,writable:!1,enumerable:!1}}function Sn(I,B,U){return B===-1?null:B>=I.i?I.g?I.g[B]:void 0:U!==void 0&&U&&I.g&&(U=I.g[B])!=null?U:I.m[B+I.h]}function An(I,B,U,Y){Y=Y!==void 0&&Y,gs(I),B<I.i&&!Y?I.m[B+I.h]=U:(I.g||(I.g=I.m[I.i+I.h]={}))[B]=U}function Pn(I,B,U,Y){U=U===void 0||U;var ae=Sn(I,B,Y=Y!==void 0&&Y);return ae==null&&(ae=As),$n(I.m)?U&&(ms(ae),Object.freeze(ae)):(ae===As||$n(ae))&&An(I,B,ae=Jn(ae.slice()),Y),ae}function Ss(I,B,U){return(I=(I=Sn(I,B))==null?I:+I)==null?U===void 0?0:U:I}function Rn(I,B,U,Y){I.j||(I.j={});var ae=$n(I.m),re=I.j[U];if(!re){Y=Pn(I,U,!0,Y!==void 0&&Y),re=[],ae=ae||$n(Y);for(var le=0;le<Y.length;le++)re[le]=new B(Y[le]),ae&&ms(re[le].m);ae&&(ms(re),Object.freeze(re)),I.j[U]=re}return re}function hn(I,B,U,Y,ae){var re=re!==void 0&&re;return gs(I),re=Rn(I,U,B,re),U=Y||new U,I=Pn(I,B),ae!=null?(re.splice(ae,0,U),I.splice(ae,0,U.m)):(re.push(U),I.push(U.m)),U}function qi(I,B){return(I=Sn(I,B))==null?0:I}function Ci(I,B){return(I=Sn(I,B))==null?"":I}function Hs(I){var B=ns;return dt(I,B=B===void 0?ss:B)}function ar(I,B){if(I!=null){if(Array.isArray(I))I=dt(I,B);else if(In(I)){var U,Y={};for(U in I)Y[U]=ar(I[U],B);I=Y}else I=B(I);return I}}function dt(I,B){for(var U=I.slice(),Y=0;Y<U.length;Y++)U[Y]=ar(U[Y],B);return Array.isArray(I)&&1&Gn(I)&&Jn(U),U}function ns(I){return I&&typeof I=="object"&&I.toJSON?I.toJSON():(I=(function(B){switch(typeof B){case"number":return isFinite(B)?B:String(B);case"object":if(B&&!Array.isArray(B)){if(de(B))return X(B);if(B instanceof ke){var U=B.L;return U=U==null||typeof U=="string"?U:ie&&U instanceof Uint8Array?X(U):null,(B.L=U)||""}}}return B})(I),Array.isArray(I)?Hs(I):I)}function ss(I){return de(I)?new Uint8Array(I):I}function xs(I,B,U){I||(I=Ne),Ne=null;var Y=this.constructor.h;if(I||(I=Y?[Y]:[]),this.h=(Y?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=I,I=(Y=this.m.length)-1,Y&&In(Y=this.m[I])?(this.i=I-this.h,this.g=Y):B!==void 0&&-1<B?(this.i=Math.max(B,I+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,U)for(B=0;B<U.length;B++)if((I=U[B])<this.i)I+=this.h,(Y=this.m[I])?Array.isArray(Y)&&Jn(Y):this.m[I]=As;else{var ae=(Y=this.g||(this.g=this.m[this.i+this.h]={}))[I];ae?Array.isArray(ae)&&Jn(ae):Y[I]=As}}function Lr(){xs.apply(this,arguments)}if(xs.prototype.toJSON=function(){return Hs(this.m)},xs.prototype.toString=function(){return this.m.toString()},g(Lr,xs),ft){var _n={};Object.defineProperties(Lr,(_n[Symbol.hasInstance]=on((function(){throw Error("Cannot perform instanceof checks for MutableMessage")})),_n))}function cs(I,B,U){if(U){var Y,ae={};for(Y in U){var re=U[Y],le=re.ha;le||(ae.F=re.la||re.fa.P,re.aa?(ae.U=tc(re.aa),le=(function(pe){return function(Oe,Ge,qe){return pe.F(Oe,Ge,qe,pe.U)}})(ae)):re.ca?(ae.T=nc(re.X.g,re.ca),le=(function(pe){return function(Oe,Ge,qe){return pe.F(Oe,Ge,qe,pe.T)}})(ae)):le=ae.F,re.ha=le),le(B,I,re.X),ae={F:ae.F,U:ae.U,T:ae.T}}}(function(pe,Oe){if(Oe=Oe.ba){Xt(pe,pe.g.end());for(var Ge=0;Ge<Oe.length;Ge++)Xt(pe,Oe[Ge])}})(B,I)}var Rs=Symbol();function Hn(I,B,U){return I[Rs]||(I[Rs]=function(Y,ae){return B(Y,ae,U)})}function gr(I){var B=I[Rs];if(!B){var U=Qd(I);B=function(Y,ae){return Qn(Y,ae,U)},I[Rs]=B}return B}function ca(I){var B=(function(ae){var re=ae.aa;return re?gr(re):(re=ae.ka)?Hn(ae.X.g,re,ae.ca):void 0})(I),U=I.X,Y=I.fa.O;return B?function(ae,re){return Y(ae,re,U,B)}:function(ae,re){return Y(ae,re,U)}}function On(I,B,U,Y,ae,re){var le=0;for((I=I()).length&&typeof I[0]!="number"&&(U(B,I[0]),le++);le<I.length;){U=I[le++];for(var pe=le+1;pe<I.length&&typeof I[pe]!="number";)pe++;var Oe=I[le++];switch(pe-=le){case 0:Y(B,U,Oe);break;case 1:Y(B,U,Oe,I[le++]);break;case 2:ae(B,U,Oe,I[le++],I[le++]);break;case 3:pe=I[le++];var Ge=I[le++],qe=I[le++];Array.isArray(qe)?ae(B,U,Oe,pe,Ge,qe):re(B,U,Oe,pe,Ge,qe);break;case 4:re(B,U,Oe,I[le++],I[le++],I[le++],I[le++]);break;default:throw Error("unexpected number of binary field arguments: "+pe)}}return B}var Br=Symbol();function tc(I){var B=I[Br];if(!B){var U=Yd(I);B=function(Y,ae){return ul(Y,ae,U)},I[Br]=B}return B}function nc(I,B){var U=I[Br];return U||(U=function(Y,ae){return cs(Y,ae,B)},I[Br]=U),U}var Xd=Symbol();function So(I,B){I.push(B)}function za(I,B,U){I.push(B,U.P)}function Su(I,B,U,Y,ae){var re=tc(ae),le=U.P;I.push(B,(function(pe,Oe,Ge){return le(pe,Oe,Ge,Y,re)}))}function ku(I,B,U,Y,ae,re){var le=nc(Y,re),pe=U.P;I.push(B,(function(Oe,Ge,qe){return pe(Oe,Ge,qe,Y,le)}))}function Yd(I){var B=I[Xd];return B||On(I,I[Xd]=[],So,za,Su,ku)}var cl=Symbol();function ua(I,B){I[0]=B}function Zd(I,B,U,Y){var ae=U.O;I[B]=Y?function(re,le,pe){return ae(re,le,pe,Y)}:ae}function Jd(I,B,U,Y,ae,re){var le=U.O,pe=gr(ae);I[B]=function(Oe,Ge,qe){return le(Oe,Ge,qe,Y,pe,re)}}function sc(I,B,U,Y,ae,re,le){var pe=U.O,Oe=Hn(Y,ae,re);I[B]=function(Ge,qe,ot){return pe(Ge,qe,ot,Y,Oe,le)}}function Qd(I){var B=I[cl];return B||On(I,I[cl]={},ua,Zd,Jd,sc)}function Qn(I,B,U){for(;bt(B)&&B.h!=4;){var Y=B.i,ae=U[Y];if(!ae){var re=U[0];re&&(re=re[Y])&&(ae=U[Y]=ca(re))}if(!(ae&&ae(B,I,Y)||(ae=B,Y=I,re=ae.j,$t(ae),ae.W))){var le=ae.g.h;ae=re===(ae=ae.g.g)?H||(H=new Uint8Array(0)):we?le.slice(re,ae):new Uint8Array(le.subarray(re,ae)),(re=Y.ba)?re.push(ae):Y.ba=[ae]}}return I}function Cu(I,B,U){if(at.length){var Y=at.pop();I&&(Te(Y.g,I),Y.i=-1,Y.h=-1),I=Y}else I=new Ze(I);try{return Qn(new B,I,Qd(U))}finally{(B=I.g).h=null,B.j=0,B.i=0,B.g=0,B.v=!1,I.i=-1,I.h=-1,100>at.length&&at.push(I)}}function ul(I,B,U){for(var Y=U.length,ae=Y%2==1,re=ae?1:0;re<Y;re+=2)(0,U[re+1])(B,I,U[re]);cs(I,B,ae?U[0]:void 0)}function ko(I,B){var U=new nt;ul(I,U,Yd(B)),Xt(U,U.g.end()),I=new Uint8Array(U.h);for(var Y=(B=U.i).length,ae=0,re=0;re<Y;re++){var le=B[re];I.set(le,ae),ae+=le.length}return U.i=[I],I}function Xi(I,B){return{O:I,P:B}}var ri=Xi((function(I,B,U){if(I.h!==5)return!1;var Y=(I=I.g).h[I.g],ae=I.h[I.g+1],re=I.h[I.g+2],le=I.h[I.g+3];return I.g+=4,Me(I),I=2*((ae=(Y<<0|ae<<8|re<<16|le<<24)>>>0)>>31)+1,Y=ae>>>23&255,ae&=8388607,An(B,U,Y==255?ae?NaN:1/0*I:Y==0?I*Math.pow(2,-149)*ae:I*Math.pow(2,Y-150)*(ae+Math.pow(2,23))),!0}),(function(I,B,U){if((B=Sn(B,U))!=null){$e(I.g,8*U+5),I=I.g;var Y=B;(Y=(U=0>Y?1:0)?-Y:Y)===0?0<1/Y?Ee=0:Ee=2147483648:isNaN(Y)?Ee=2147483647:34028234663852886e22<Y?Ee=(U<<31|2139095040)>>>0:11754943508222875e-54>Y?(Y=Math.round(Y/Math.pow(2,-149)),Ee=(U<<31|Y)>>>0):(B=Math.floor(Math.log(Y)/Math.LN2),Y*=Math.pow(2,-B),16777216<=(Y=Math.round(8388608*Y))&&++B,Ee=(U<<31|B+127<<23|8388607&Y)>>>0),U=Ee,I.g.push(U>>>0&255),I.g.push(U>>>8&255),I.g.push(U>>>16&255),I.g.push(U>>>24&255)}})),eh=Xi((function(I,B,U){if(I.h!==0)return!1;for(var Y=I.g,ae=128,re=0,le=I=0;4>le&&128<=ae;le++)ae=Y.h[Y.g++],Me(Y),re|=(127&ae)<<7*le;if(128<=ae&&(ae=Y.h[Y.g++],Me(Y),re|=(127&ae)<<28,I|=(127&ae)>>4),128<=ae)for(le=0;5>le&&128<=ae;le++)ae=Y.h[Y.g++],Me(Y),I|=(127&ae)<<7*le+3;if(!(128>ae))throw Re();return Y=re>>>0,(I=2147483648&(ae=I>>>0))&&(ae=~ae>>>0,(Y=1+~Y>>>0)==0&&(ae=ae+1>>>0)),Y=4294967296*ae+(Y>>>0),An(B,U,I?-Y:Y),!0}),(function(I,B,U){if((B=Sn(B,U))!=null&&B!=null){$e(I.g,8*U),I=I.g;var Y=B;for(U=0>Y,B=(Y=Math.abs(Y))>>>0,Y=Math.floor((Y-B)/4294967296),Y>>>=0,U&&(Y=~Y>>>0,4294967295<(B=1+(~B>>>0))&&(B=0,4294967295<++Y&&(Y=0))),U=Ee=B,B=Y;0<B||127<U;)I.g.push(127&U|128),U=(U>>>7|B<<25)>>>0,B>>>=7;I.g.push(U)}})),rc=Xi((function(I,B,U){return I.h===0&&(An(B,U,Ye(I.g)),!0)}),(function(I,B,U){if((B=Sn(B,U))!=null&&B!=null)if($e(I.g,8*U),I=I.g,0<=(U=B))$e(I,U);else{for(B=0;9>B;B++)I.g.push(127&U|128),U>>=7;I.g.push(1)}})),ii=Xi((function(I,B,U){if(I.h!==2)return!1;var Y,ae=Ye(I.g)>>>0,re=(I=I.g).g;if(I.g+=ae,Me(I),I=I.h,ne)(Y=q)||(Y=q=new TextDecoder("utf-8",{fatal:!0})),Y=Y.decode(I.subarray(re,re+ae));else{ae=re+ae;for(var le,pe,Oe,Ge=[],qe=null;re<ae;)128>(le=I[re++])?Ge.push(le):224>le?re>=ae?L():(pe=I[re++],194>le||(192&pe)!=128?(re--,L()):Ge.push((31&le)<<6|63&pe)):240>le?re>=ae-1?L():(192&(pe=I[re++]))!=128||le===224&&160>pe||le===237&&160<=pe||(192&(Y=I[re++]))!=128?(re--,L()):Ge.push((15&le)<<12|(63&pe)<<6|63&Y):244>=le?re>=ae-2?L():(192&(pe=I[re++]))!=128||pe-144+(le<<28)>>30!=0||(192&(Y=I[re++]))!=128||(192&(Oe=I[re++]))!=128?(re--,L()):(le=(7&le)<<18|(63&pe)<<12|(63&Y)<<6|63&Oe,le-=65536,Ge.push(55296+(le>>10&1023),56320+(1023&le))):L(),8192<=Ge.length&&(qe=D(qe,Ge),Ge.length=0);Y=D(qe,Ge)}return An(B,U,Y),!0}),(function(I,B,U){if((B=Sn(B,U))!=null){var Y=!1;if(Y=Y!==void 0&&Y,J){if(Y&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(B))throw Error("Found an unpaired surrogate");B=(V||(V=new TextEncoder)).encode(B)}else{for(var ae=0,re=new Uint8Array(3*B.length),le=0;le<B.length;le++){var pe=B.charCodeAt(le);if(128>pe)re[ae++]=pe;else{if(2048>pe)re[ae++]=pe>>6|192;else{if(55296<=pe&&57343>=pe){if(56319>=pe&&le<B.length){var Oe=B.charCodeAt(++le);if(56320<=Oe&&57343>=Oe){pe=1024*(pe-55296)+Oe-56320+65536,re[ae++]=pe>>18|240,re[ae++]=pe>>12&63|128,re[ae++]=pe>>6&63|128,re[ae++]=63&pe|128;continue}le--}if(Y)throw Error("Found an unpaired surrogate");pe=65533}re[ae++]=pe>>12|224,re[ae++]=pe>>6&63|128}re[ae++]=63&pe|128}}B=re.subarray(0,ae)}$e(I.g,8*U+2),$e(I.g,B.length),Xt(I,I.g.end()),Xt(I,B)}})),Tu=Xi((function(I,B,U,Y,ae){if(I.h!==2)return!1;B=hn(B,U,Y),U=I.g.i,Y=Ye(I.g)>>>0;var re=I.g.g+Y,le=re-U;if(0>=le&&(I.g.i=re,ae(B,I),le=re-I.g.g),le)throw Error("Message parsing ended unexpectedly. Expected to read "+Y+" bytes, instead read "+(Y-le)+" bytes, either the data ended unexpectedly or the message misreported its own length");return I.g.g=re,I.g.i=U,!0}),(function(I,B,U,Y,ae){if((B=Rn(B,Y,U))!=null)for(Y=0;Y<B.length;Y++){var re=I;$e(re.g,8*U+2);var le=re.g.end();Xt(re,le),le.push(re.h),re=le,ae(B[Y],I),le=I;var pe=re.pop();for(pe=le.h+le.g.length()-pe;127<pe;)re.push(127&pe|128),pe>>>=7,le.h++;re.push(pe),le.h++}}));function rs(){Lr.apply(this,arguments)}if(g(rs,Lr),ft){var th={};Object.defineProperties(rs,(th[Symbol.hasInstance]=on(Object[Symbol.hasInstance]),th))}function Va(I){rs.call(this,I)}function nh(){return[1,rc,2,ri,3,ii,4,ii]}function Co(I){rs.call(this,I,-1,dl)}function ic(){return[1,Tu,Va,nh]}g(Va,rs),g(Co,rs),Co.prototype.addClassification=function(I,B){return hn(this,1,Va,I,B),this};var dl=[1];function Yi(I){rs.call(this,I)}function sh(){return[1,ri,2,ri,3,ri,4,ri,5,ri]}function rh(I){rs.call(this,I,-1,ih)}function Iu(){return[1,Tu,Yi,sh]}g(Yi,rs),g(rh,rs);var ih=[1];function hl(I){rs.call(this,I)}function Ua(){return[1,ri,2,ri,3,ri,4,ri,5,ri,6,eh]}g(hl,rs);var ju=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],fl=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],kn=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],ac=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],oc=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],lc=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Eu=[].concat(l(ju),l(fl),l(kn),l(ac),l(oc),l(lc));function $(I,B,U){if(U=I.createShader(U===0?I.VERTEX_SHADER:I.FRAGMENT_SHADER),I.shaderSource(U,B),I.compileShader(U),!I.getShaderParameter(U,I.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+I.getShaderInfoLog(U));return U}function M(I){return Rn(I,Va,1).map((function(B){return{index:qi(B,1),ga:Ss(B,2),label:Sn(B,3)!=null?Ci(B,3):void 0,displayName:Sn(B,4)!=null?Ci(B,4):void 0}}))}function z(I){return{x:Ss(I,1),y:Ss(I,2),z:Ss(I,3),visibility:Sn(I,4)!=null?Ss(I,4):void 0}}function oe(I,B){this.h=I,this.g=B,this.l=0}function je(I,B,U){return(function(Y,ae){var re=Y.g;if(Y.o===void 0){var le=$(re,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),pe=$(re,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Oe=re.createProgram();if(re.attachShader(Oe,le),re.attachShader(Oe,pe),re.linkProgram(Oe),!re.getProgramParameter(Oe,re.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+re.getProgramInfoLog(Oe));le=Y.o=Oe,re.useProgram(le),pe=re.getUniformLocation(le,"sampler0"),Y.j={K:re.getAttribLocation(le,"aVertex"),J:re.getAttribLocation(le,"aTex"),ma:pe},Y.u=re.createBuffer(),re.bindBuffer(re.ARRAY_BUFFER,Y.u),re.enableVertexAttribArray(Y.j.K),re.vertexAttribPointer(Y.j.K,2,re.FLOAT,!1,0,0),re.bufferData(re.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),re.STATIC_DRAW),re.bindBuffer(re.ARRAY_BUFFER,null),Y.s=re.createBuffer(),re.bindBuffer(re.ARRAY_BUFFER,Y.s),re.enableVertexAttribArray(Y.j.J),re.vertexAttribPointer(Y.j.J,2,re.FLOAT,!1,0,0),re.bufferData(re.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),re.STATIC_DRAW),re.bindBuffer(re.ARRAY_BUFFER,null),re.uniform1i(pe,0)}le=Y.j,re.useProgram(Y.o),re.canvas.width=ae.width,re.canvas.height=ae.height,re.viewport(0,0,ae.width,ae.height),re.activeTexture(re.TEXTURE0),Y.h.bindTexture2d(ae.glName),re.enableVertexAttribArray(le.K),re.bindBuffer(re.ARRAY_BUFFER,Y.u),re.vertexAttribPointer(le.K,2,re.FLOAT,!1,0,0),re.enableVertexAttribArray(le.J),re.bindBuffer(re.ARRAY_BUFFER,Y.s),re.vertexAttribPointer(le.J,2,re.FLOAT,!1,0,0),re.bindFramebuffer(re.DRAW_FRAMEBUFFER?re.DRAW_FRAMEBUFFER:re.FRAMEBUFFER,null),re.clearColor(0,0,0,0),re.clear(re.COLOR_BUFFER_BIT),re.colorMask(!0,!0,!0,!0),re.drawArrays(re.TRIANGLE_FAN,0,4),re.disableVertexAttribArray(le.K),re.disableVertexAttribArray(le.J),re.bindBuffer(re.ARRAY_BUFFER,null),Y.h.bindTexture2d(0)})(I,B),typeof I.g.canvas.transferToImageBitmap=="function"?Promise.resolve(I.g.canvas.transferToImageBitmap()):U?Promise.resolve(I.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(I.g.canvas):(I.i===void 0&&(I.i=document.createElement("canvas")),new Promise((function(Y){I.i.height=I.g.canvas.height,I.i.width=I.g.canvas.width,I.i.getContext("2d",{}).drawImage(I.g.canvas,0,0,I.g.canvas.width,I.g.canvas.height),Y(I.i)})))}function Ve(I){this.g=I}var De=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function We(I,B){return B+I}function st(I,B){window[I]=B}function mt(I){if(this.g=I,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=I&&I.locateFile||We,typeof window=="object")var B=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if(typeof location>"u")throw Error("solutions can only be loaded on a web page or in a web worker");B=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=B,I.options)for(var U=(B=a(Object.keys(I.options))).next();!U.done;U=B.next()){U=U.value;var Y=I.options[U].default;Y!==void 0&&(this.j[U]=typeof Y=="function"?Y():Y)}}function Ht(I){var B,U,Y,ae,re,le,pe,Oe,Ge,qe,ot;return R((function(ct){switch(ct.g){case 1:return I.Z?(B=I.g.files===void 0?[]:typeof I.g.files=="function"?I.g.files(I.j):I.g.files,w(ct,R((function(ut){switch(ut.g){case 1:return ut.o=2,w(ut,WebAssembly.instantiate(De),4);case 4:ut.g=3,ut.o=0;break;case 2:return ut.o=0,ut.j=null,ut.return(!1);case 3:return ut.return(!0)}})),2)):ct.return();case 2:if(U=ct.h,typeof window=="object")return st("createMediapipeSolutionsWasm",{locateFile:I.locateFile}),st("createMediapipeSolutionsPackedAssets",{locateFile:I.locateFile}),le=B.filter((function(ut){return ut.data!==void 0})),pe=B.filter((function(ut){return ut.data===void 0})),Oe=Promise.all(le.map((function(ut){var Ut=xn(I,ut.url);if(ut.path!==void 0){var tn=ut.path;Ut=Ut.then((function(Fn){return I.overrideFile(tn,Fn),Promise.resolve(Fn)}))}return Ut}))),Ge=Promise.all(pe.map((function(ut){return ut.simd===void 0||ut.simd&&U||!ut.simd&&!U?(function(Ut){var tn=document.createElement("script");return tn.setAttribute("src",Ut),tn.setAttribute("crossorigin","anonymous"),new Promise((function(Fn){tn.addEventListener("load",(function(){Fn()}),!1),tn.addEventListener("error",(function(){Fn()}),!1),document.body.appendChild(tn)}))})(I.locateFile(ut.url,I.$)):Promise.resolve()}))).then((function(){var ut,Ut,tn;return R((function(Fn){if(Fn.g==1)return ut=window.createMediapipeSolutionsWasm,Ut=window.createMediapipeSolutionsPackedAssets,tn=I,w(Fn,ut(Ut),2);tn.h=Fn.h,Fn.g=0}))})),qe=R((function(ut){return I.g.graph&&I.g.graph.url?ut=w(ut,xn(I,I.g.graph.url),0):(ut.g=0,ut=void 0),ut})),w(ct,Promise.all([Ge,Oe,qe]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Y=B.filter((function(ut){return ut.simd===void 0||ut.simd&&U||!ut.simd&&!U})).map((function(ut){return I.locateFile(ut.url,I.$)})),importScripts.apply(null,l(Y)),ae=I,w(ct,createMediapipeSolutionsWasm(Module),6);case 6:ae.h=ct.h,I.l=new OffscreenCanvas(1,1),I.h.canvas=I.l,re=I.h.GL.createContext(I.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),I.h.GL.makeContextCurrent(re),ct.g=4;break;case 7:if(I.l=document.createElement("canvas"),!(ot=I.l.getContext("webgl2",{}))&&!(ot=I.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),ct.return();I.G=ot,I.h.canvas=I.l,I.h.createContext(I.l,!0,!0,{});case 4:I.i=new I.h.SolutionWasm,I.Z=!1,ct.g=0}}))}function xn(I,B){var U,Y;return R((function(ae){return B in I.H?ae.return(I.H[B]):(U=I.locateFile(B,""),Y=fetch(U).then((function(re){return re.arrayBuffer()})),I.H[B]=Y,ae.return(Y))}))}function en(I,B,U){var Y,ae,re,le,pe,Oe,Ge,qe,ot,ct,ut,Ut,tn,Fn;return R((function(Mn){switch(Mn.g){case 1:if(!U)return Mn.return(B);for(Y={},ae=0,re=a(Object.keys(U)),le=re.next();!le.done;le=re.next())pe=le.value,typeof(Oe=U[pe])!="string"&&Oe.type==="texture"&&B[Oe.stream]!==void 0&&++ae;1<ae&&(I.I=!1),Ge=a(Object.keys(U)),le=Ge.next();case 2:if(le.done){Mn.g=4;break}if(qe=le.value,typeof(ot=U[qe])=="string")return tn=Y,Fn=qe,w(Mn,(function(pl,ah,To){var Io;return R((function(cc){return typeof To=="number"||To instanceof Uint8Array||To instanceof pl.h.Uint8BlobList?cc.return(To):To instanceof pl.h.Texture2dDataOut?((Io=pl.u[ah])||(Io=new oe(pl.h,pl.G),pl.u[ah]=Io),cc.return(je(Io,To,pl.I))):cc.return(void 0)}))})(I,qe,B[ot]),14);if(ct=B[ot.stream],ot.type==="detection_list"){if(ct){for(var Ks=ct.getRectList(),ai=ct.getLandmarksList(),Kn=ct.getClassificationsList(),yn=[],Bs=0;Bs<Ks.size();++Bs){var Ti=Cu(Ks.get(Bs),hl,Ua);Ti={boundingBox:{xCenter:Ss(Ti,1),yCenter:Ss(Ti,2),height:Ss(Ti,3),width:Ss(Ti,4),rotation:Ss(Ti,5,0),rectId:qi(Ti,6)},landmarks:Rn(Cu(ai.get(Bs),rh,Iu),Yi,1).map(z),V:M(Cu(Kn.get(Bs),Co,ic))},yn.push(Ti)}Ks=yn}else Ks=[];Y[qe]=Ks,Mn.g=7;break}if(ot.type==="proto_list"){if(ct){for(Ks=Array(ct.size()),ai=0;ai<ct.size();ai++)Ks[ai]=ct.get(ai);ct.delete()}else Ks=[];Y[qe]=Ks,Mn.g=7;break}if(ct===void 0){Mn.g=3;break}if(ot.type==="float_list"){Y[qe]=ct,Mn.g=7;break}if(ot.type==="proto"){Y[qe]=ct,Mn.g=7;break}if(ot.type!=="texture")throw Error("Unknown output config type: '"+ot.type+"'");return(ut=I.u[qe])||(ut=new oe(I.h,I.G),I.u[qe]=ut),w(Mn,je(ut,ct,I.I),13);case 13:Ut=Mn.h,Y[qe]=Ut;case 7:ot.transform&&Y[qe]&&(Y[qe]=ot.transform(Y[qe])),Mn.g=3;break;case 14:tn[Fn]=Mn.h;case 3:le=Ge.next(),Mn.g=2;break;case 4:return Mn.return(Y)}}))}function Yt(I,B){for(var U=B.name||"$",Y=[].concat(l(B.wants)),ae=new I.h.StringList,re=a(B.wants),le=re.next();!le.done;le=re.next())ae.push_back(le.value);re=I.h.PacketListener.implement({onResults:function(pe){for(var Oe={},Ge=0;Ge<B.wants.length;++Ge)Oe[Y[Ge]]=pe.get(Ge);var qe=I.listeners[U];qe&&(I.D=en(I,Oe,B.outs).then((function(ot){ot=qe(ot);for(var ct=0;ct<B.wants.length;++ct){var ut=Oe[Y[ct]];typeof ut=="object"&&ut.hasOwnProperty&&ut.hasOwnProperty("delete")&&ut.delete()}ot&&(I.D=ot)})))}}),I.i.attachMultiListener(ae,re),ae.delete()}function St(I){var B=this;I=I||{};var U={url:"face_detection_short.binarypb"},Y={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new mt({locateFile:I.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:U,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window=="object"&&window.navigator!==void 0&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(ae){var re,le,pe,Oe,Ge;return R((function(qe){switch(qe.g){case 1:re=a(ae==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),le=re.next();case 2:if(le.done){qe.g=4;break}return pe=le.value,Oe="third_party/mediapipe/modules/face_detection/"+pe,w(qe,xn(B.g,pe),5);case 5:Ge=qe.h,B.g.overrideFile(Oe,Ge),le=re.next(),qe.g=2;break;case 4:return U.url=ae==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",Y.graphOptionXref.calculatorName=ae==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",qe.return(!0)}}))}},minDetectionConfidence:Y}})}(t=mt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},t.reset=function(){var I=this;return R((function(B){I.i&&(I.i.reset(),I.o={},I.u={}),B.g=0}))},t.setOptions=function(I,B){var U=this;if(B=B||this.g.options){for(var Y=[],ae=[],re={},le=a(Object.keys(I)),pe=le.next();!pe.done;re={R:re.R,S:re.S},pe=le.next()){var Oe=pe.value;Oe in this.j&&this.j[Oe]===I[Oe]||(this.j[Oe]=I[Oe],(pe=B[Oe])!==void 0&&(pe.onChange&&(re.R=pe.onChange,re.S=I[Oe],Y.push((function(Ge){return function(){return R((function(qe){if(qe.g==1)return w(qe,Ge.R(Ge.S),2);qe.h===!0&&(U.s=!0),qe.g=0}))}})(re))),pe.graphOptionXref&&(Oe={valueNumber:pe.type===1?I[Oe]:0,valueBoolean:pe.type===0&&I[Oe],valueString:pe.type===2?I[Oe]:""},pe=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),pe.graphOptionXref),Oe),ae.push(pe))))}Y.length===0&&ae.length===0||(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(ae),this.A=(this.A===void 0?[]:this.A).concat(Y))}},t.initialize=function(){var I=this;return R((function(B){return B.g==1?w(B,Ht(I),2):B.g!=3?w(B,(function(U){var Y,ae,re,le,pe,Oe,Ge,qe;return R((function(ot){if(ot.g==1)return U.g.graph&&U.g.graph.url&&U.Y===U.g.graph.url?ot.return():(U.s=!0,U.g.graph&&U.g.graph.url?(U.Y=U.g.graph.url,w(ot,xn(U,U.g.graph.url),3)):void(ot.g=2));for(ot.g!=2&&(Y=ot.h,U.i.loadGraph(Y)),ae=a(Object.keys(U.C)),re=ae.next();!re.done;re=ae.next())le=re.value,U.i.overrideFile(le,U.C[le]);if(U.C={},U.g.listeners)for(pe=a(U.g.listeners),Oe=pe.next();!Oe.done;Oe=pe.next())Ge=Oe.value,Yt(U,Ge);qe=U.j,U.j={},U.setOptions(qe),ot.g=0}))})(I),3):w(B,(function(U){var Y,ae,re,le,pe,Oe;return R((function(Ge){switch(Ge.g){case 1:if(!U.s)return Ge.return();if(!U.A){Ge.g=2;break}Y=a(U.A),ae=Y.next();case 3:if(ae.done){Ge.g=5;break}return w(Ge,(0,ae.value)(),4);case 4:ae=Y.next(),Ge.g=3;break;case 5:U.A=void 0;case 2:if(U.B){for(re=new U.h.GraphOptionChangeRequestList,le=a(U.B),pe=le.next();!pe.done;pe=le.next())Oe=pe.value,re.push_back(Oe);U.i.changeOptions(re),re.delete(),U.B=void 0}U.s=!1,Ge.g=0}}))})(I),0)}))},t.overrideFile=function(I,B){this.i?this.i.overrideFile(I,B):this.C[I]=B},t.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},t.send=function(I,B){var U,Y,ae,re,le,pe,Oe,Ge,qe,ot=this;return R((function(ct){switch(ct.g){case 1:return ot.g.inputs?(U=1e3*(B??performance.now()),w(ct,ot.D,2)):ct.return();case 2:return w(ct,ot.initialize(),3);case 3:for(Y=new ot.h.PacketDataList,ae=a(Object.keys(I)),re=ae.next();!re.done;re=ae.next())if(le=re.value,pe=ot.g.inputs[le]){e:{var ut=I[le];switch(pe.type){case"video":var Ut=ot.o[pe.stream];if(Ut||(Ut=new oe(ot.h,ot.G),ot.o[pe.stream]=Ut),Ut.l===0&&(Ut.l=Ut.h.createTexture()),typeof HTMLVideoElement<"u"&&ut instanceof HTMLVideoElement)var tn=ut.videoWidth,Fn=ut.videoHeight;else typeof HTMLImageElement<"u"&&ut instanceof HTMLImageElement?(tn=ut.naturalWidth,Fn=ut.naturalHeight):(tn=ut.width,Fn=ut.height);Fn={glName:Ut.l,width:tn,height:Fn},(tn=Ut.g).canvas.width=Fn.width,tn.canvas.height=Fn.height,tn.activeTexture(tn.TEXTURE0),Ut.h.bindTexture2d(Ut.l),tn.texImage2D(tn.TEXTURE_2D,0,tn.RGBA,tn.RGBA,tn.UNSIGNED_BYTE,ut),Ut.h.bindTexture2d(0),Ut=Fn;break e;case"detections":for((Ut=ot.o[pe.stream])||(Ut=new Ve(ot.h),ot.o[pe.stream]=Ut),Ut.data||(Ut.data=new Ut.g.DetectionListData),Ut.data.reset(ut.length),Fn=0;Fn<ut.length;++Fn){tn=ut[Fn];var Mn=Ut.data,Ks=Mn.setBoundingBox,ai=Fn,Kn=tn.boundingBox,yn=new hl;if(An(yn,1,Kn.xCenter),An(yn,2,Kn.yCenter),An(yn,3,Kn.height),An(yn,4,Kn.width),An(yn,5,Kn.rotation),An(yn,6,Kn.rectId),Kn=ko(yn,Ua),Ks.call(Mn,ai,Kn),tn.landmarks)for(Mn=0;Mn<tn.landmarks.length;++Mn){var Bs=!!(yn=tn.landmarks[Mn]).visibility;ai=(Ks=Ut.data).addNormalizedLandmark,Kn=Fn,yn=Object.assign(Object.assign({},yn),{visibility:Bs?yn.visibility:0}),An(Bs=new Yi,1,yn.x),An(Bs,2,yn.y),An(Bs,3,yn.z),yn.visibility&&An(Bs,4,yn.visibility),yn=ko(Bs,sh),ai.call(Ks,Kn,yn)}if(tn.V)for(Mn=0;Mn<tn.V.length;++Mn)ai=(Ks=Ut.data).addClassification,Kn=Fn,yn=tn.V[Mn],An(Bs=new Va,2,yn.ga),yn.index&&An(Bs,1,yn.index),yn.label&&An(Bs,3,yn.label),yn.displayName&&An(Bs,4,yn.displayName),yn=ko(Bs,nh),ai.call(Ks,Kn,yn)}Ut=Ut.data;break e;default:Ut={}}}switch(Oe=Ut,Ge=pe.stream,pe.type){case"video":Y.pushTexture2d(Object.assign(Object.assign({},Oe),{stream:Ge,timestamp:U}));break;case"detections":(qe=Oe).stream=Ge,qe.timestamp=U,Y.pushDetectionList(qe);break;default:throw Error("Unknown input config type: '"+pe.type+"'")}}return ot.i.send(Y),w(ct,ot.D,4);case 4:Y.delete(),ct.g=0}}))},t.onResults=function(I,B){this.listeners[B||"$"]=I},O("Solution",mt),O("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=St.prototype).close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(I){this.g.onResults(I)},t.initialize=function(){var I=this;return R((function(B){return w(B,I.g.initialize(),0)}))},t.reset=function(){this.g.reset()},t.send=function(I){var B=this;return R((function(U){return w(U,B.g.send(I),0)}))},t.setOptions=function(I){this.g.setOptions(I)},O("FaceDetection",St),O("FACEDETECTION_LIPS",ju),O("FACEDETECTION_LEFT_EYE",fl),O("FACEDETECTION_LEFT_EYEBROW",kn),O("FACEDETECTION_RIGHT_EYE",ac),O("FACEDETECTION_RIGHT_EYEBROW",oc),O("FACEDETECTION_FACE_OVAL",lc),O("FACEDETECTION_CONTOURS",Eu),O("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),O("VERSION","0.4.1646425229")}).call(gN);var iu=function(){return iu=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},iu.apply(this,arguments)};function Kl(t,e,n,s){return new(n||(n=Promise))((function(r,i){function a(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){var d;u.done?r(u.value):(d=u.value,d instanceof n?d:new n((function(h){h(d)}))).then(a,l)}c((s=s.apply(t,[])).next())}))}function ql(t,e){var n,s,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(u){return(function(d){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(r=2&d[0]?s.return:d[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,d[1])).done)return r;switch(s=0,r&&(d=[2&d[0],r.value]),d[0]){case 0:case 1:r=d;break;case 4:return a.label++,{value:d[1],done:!1};case 5:a.label++,s=d[1],d=[0];continue;case 7:d=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||d[0]!==6&&d[0]!==2)){a=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){a.label=d[1];break}if(d[0]===6&&a.label<r[1]){a.label=r[1],r=d;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(d);break}r[2]&&a.ops.pop(),a.trys.pop();continue}d=e.call(t,a)}catch(h){d=[6,h],s=0}finally{n=r=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([c,u])}}}var YB=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],xN={modelType:"short",runtime:"mediapipe",maxFaces:1},NRe=(function(){function t(e){var n=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new wRe.FaceDetection({locateFile:function(s,r){if(e.solutionPath){var i=e.solutionPath.replace(/\/+$/,"");return"".concat(i,"/").concat(s)}return"".concat(r,"/").concat(s)}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults((function(s){if(n.height=s.image.height,n.width=s.image.width,n.faces=[],s.detections!==null)for(var r=0,i=s.detections;r<i.length;r++){var a=i[r];n.faces.push(n.normalizedToAbsolute(a.landmarks,{xMin:c=(l=a.boundingBox).xCenter-l.width/2,xMax:c+l.width,yMin:u=l.yCenter-l.height/2,yMax:u+l.height,width:l.width,height:l.height}))}var l,c,u}))}return t.prototype.normalizedToAbsolute=function(e,n){var s=this;return{keypoints:e.map((function(r,i){return{x:r.x*s.width,y:r.y*s.height,name:YB[i]}})),box:{xMin:n.xMin*this.width,yMin:n.yMin*this.height,xMax:n.xMax*this.width,yMax:n.yMax*this.height,width:n.width*this.width,height:n.height*this.height}}},t.prototype.estimateFaces=function(e,n){return Kl(this,void 0,void 0,(function(){var s,r;return ql(this,(function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof zn?(r=ImageData.bind,[4,Y8(e)]):[3,2];case 1:return s=new(r.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:s=e,i.label=3;case 3:return e=s,[4,this.faceDetectorSolution.send({image:e})];case 4:return i.sent(),[2,this.faces]}}))}))},t.prototype.dispose=function(){this.faceDetectorSolution.close()},t.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},t})();function SRe(t){return Kl(this,void 0,void 0,(function(){var e,n;return ql(this,(function(s){switch(s.label){case 0:return e=(function(r){if(r==null)return iu({},xN);var i=iu({},r);return i.runtime="mediapipe",i.modelType==null&&(i.modelType=xN.modelType),i.maxFaces==null&&(i.maxFaces=xN.maxFaces),i})(t),[4,(n=new NRe(e)).initialize()];case 1:return s.sent(),[2,n]}}))}))}function ZB(t){return t instanceof zn?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function JB(t){return t instanceof zn?t:Z8(t)}function yN(t,e){K(t.width!==0,(function(){return"".concat(e," width cannot be 0.")})),K(t.height!==0,(function(){return"".concat(e," height cannot be 0.")}))}function kRe(t,e,n){var s=e.outputTensorSize,r=e.keepAspectRatio,i=e.borderMode,a=e.outputTensorFloatRange,l=ZB(t),c=(function(p,g){return{xCenter:.5*p.width,yCenter:.5*p.height,width:p.width,height:p.height,rotation:0}})(l),u=(function(p,g,x){if(x===void 0&&(x=!1),!x)return{top:0,left:0,right:0,bottom:0};var y=g.height,v=g.width;yN(g,"targetSize"),yN(p,"roi");var w,N,k=y/v,C=p.height/p.width,j=0,R=0;return k>C?(w=p.width,N=p.width*k,R=(1-C/k)/2):(w=p.height/k,N=p.height,j=(1-k/C)/2),p.width=w,p.height=N,{top:R,left:j,right:j,bottom:R}})(c,s,r),d=(function(p,g,x,y){var v=p.width,w=p.height,N=1,k=Math.cos(p.rotation),C=Math.sin(p.rotation),j=p.xCenter,R=p.yCenter,_=1/g,A=1/x,O=new Array(16);return O[0]=v*k*N*_,O[1]=-w*C*_,O[2]=0,O[3]=(-.5*v*k*N+.5*w*C+j)*_,O[4]=v*C*N*A,O[5]=w*k*A,O[6]=0,O[7]=(-.5*w*k-.5*v*C*N+R)*A,O[8]=0,O[9]=0,O[10]=v*_,O[11]=0,O[12]=0,O[13]=0,O[14]=0,O[15]=1,(function(L){if(L.length!==16)throw new Error("Array length must be 16 but got ".concat(L.length));return[[L[0],L[1],L[2],L[3]],[L[4],L[5],L[6],L[7]],[L[8],L[9],L[10],L[11]],[L[12],L[13],L[14],L[15]]]})(O)})(c,l.width,l.height),h=Ie((function(){var p=JB(t),g=Fc((function(v,w,N){return yN(N,"inputResolution"),[1/N.width*v[0][0]*w.width,1/N.height*v[0][1]*w.width,v[0][3]*w.width,1/N.width*v[1][0]*w.height,1/N.height*v[1][1]*w.height,v[1][3]*w.height,0,0]})(d,l,s),[1,8]),x=i==="zero"?"constant":"nearest",y=mi.transform(Zs(ht(p,"float32")),g,"bilinear",x,0,[s.height,s.width]);return a!=null?(function(v,w){var N=(function(k,C,j,R){var _=(R-j)/255;return{scale:_,offset:j-0*_}})(0,0,w[0],w[1]);return Ie((function(){return Ke(he(v,N.scale),N.offset)}))})(y,a):y}));return{imageTensor:h,padding:u,transformationMatrix:d}}function HR(t){t.reduceBoxesInLowestLayer==null&&(t.reduceBoxesInLowestLayer=!1),t.interpolatedScaleAspectRatio==null&&(t.interpolatedScaleAspectRatio=1),t.fixedAnchorSize==null&&(t.fixedAnchorSize=!1);for(var e=[],n=0;n<t.numLayers;){for(var s=[],r=[],i=[],a=[],l=n;l<t.strides.length&&t.strides[l]===t.strides[n];){var c=KR(t.minScale,t.maxScale,l,t.strides.length);if(l===0&&t.reduceBoxesInLowestLayer)i.push(1),i.push(2),i.push(.5),a.push(.1),a.push(c),a.push(c);else{for(var u=0;u<t.aspectRatios.length;++u)i.push(t.aspectRatios[u]),a.push(c);if(t.interpolatedScaleAspectRatio>0){var d=l===t.strides.length-1?1:KR(t.minScale,t.maxScale,l+1,t.strides.length);a.push(Math.sqrt(c*d)),i.push(t.interpolatedScaleAspectRatio)}}l++}for(var h=0;h<i.length;++h){var p=Math.sqrt(i[h]);s.push(a[h]/p),r.push(a[h]*p)}var g=0,x=0;if(t.featureMapHeight.length>0)g=t.featureMapHeight[n],x=t.featureMapWidth[n];else{var y=t.strides[n];g=Math.ceil(t.inputSizeHeight/y),x=Math.ceil(t.inputSizeWidth/y)}for(var v=0;v<g;++v)for(var w=0;w<x;++w)for(var N=0;N<s.length;++N){var k={xCenter:(w+t.anchorOffsetX)/x,yCenter:(v+t.anchorOffsetY)/g,width:0,height:0};t.fixedAnchorSize?(k.width=1,k.height=1):(k.width=r[N],k.height=s[N]),e.push(k)}n=l}return e}function KR(t,e,n,s){return s===1?.5*(t+e):t+(e-t)*n/(s-1)}function qR(t,e){var n=e[0],s=e[1];return[n*t[0]+s*t[1]+t[3],n*t[4]+s*t[5]+t[7]]}function CRe(t,e,n,s){return Kl(this,void 0,void 0,(function(){var r,i,a,l,c;return ql(this,(function(u){switch(u.label){case 0:return t.sort((function(d,h){return Math.max.apply(Math,h.score)-Math.max.apply(Math,d.score)})),r=Fc(t.map((function(d){return[d.locationData.relativeBoundingBox.yMin,d.locationData.relativeBoundingBox.xMin,d.locationData.relativeBoundingBox.yMax,d.locationData.relativeBoundingBox.xMax]}))),i=Ws(t.map((function(d){return d.score[0]}))),[4,mi.nonMaxSuppressionAsync(r,i,e,n)];case 1:return[4,(a=u.sent()).array()];case 2:return l=u.sent(),c=t.filter((function(d,h){return l.indexOf(h)>-1})),Kt([r,i,a]),[2,c]}}))}))}function TRe(t,e,n){return Kl(this,void 0,void 0,(function(){var s,r,i,a,l;return ql(this,(function(c){switch(c.label){case 0:return s=t[0],r=t[1],i=(function(u,d,h){return Ie((function(){var p,g,x,y;h.reverseOutputOrder?(g=Ts(Wt(u,[0,h.boxCoordOffset+0],[-1,1])),p=Ts(Wt(u,[0,h.boxCoordOffset+1],[-1,1])),y=Ts(Wt(u,[0,h.boxCoordOffset+2],[-1,1])),x=Ts(Wt(u,[0,h.boxCoordOffset+3],[-1,1]))):(p=Ts(Wt(u,[0,h.boxCoordOffset+0],[-1,1])),g=Ts(Wt(u,[0,h.boxCoordOffset+1],[-1,1])),x=Ts(Wt(u,[0,h.boxCoordOffset+2],[-1,1])),y=Ts(Wt(u,[0,h.boxCoordOffset+3],[-1,1]))),g=Ke(he(yt(g,h.xScale),d.w),d.x),p=Ke(he(yt(p,h.yScale),d.h),d.y),h.applyExponentialOnBoxSize?(x=he(Jr(yt(x,h.hScale)),d.h),y=he(Jr(yt(y,h.wScale)),d.w)):(x=he(yt(x,h.hScale),d.h),y=he(yt(y,h.wScale),d.h));var v=vt(p,yt(x,2)),w=vt(g,yt(y,2)),N=Ke(p,yt(x,2)),k=Ke(g,yt(y,2)),C=Es([ge(v,[h.numBoxes,1]),ge(w,[h.numBoxes,1]),ge(N,[h.numBoxes,1]),ge(k,[h.numBoxes,1])],1);if(h.numKeypoints)for(var j=0;j<h.numKeypoints;++j){var R=h.keypointCoordOffset+j*h.numValuesPerKeypoint,_=void 0,A=void 0;h.reverseOutputOrder?(_=Ts(Wt(u,[0,R],[-1,1])),A=Ts(Wt(u,[0,R+1],[-1,1]))):(A=Ts(Wt(u,[0,R],[-1,1])),_=Ts(Wt(u,[0,R+1],[-1,1])));var O=Ke(he(yt(_,h.xScale),d.w),d.x),L=Ke(he(yt(A,h.yScale),d.h),d.y);C=Es([C,ge(O,[h.numBoxes,1]),ge(L,[h.numBoxes,1])],1)}return C}))})(r,e,n),a=Ie((function(){var u=s;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(u=wi(s,-n.scoreClippingThresh,n.scoreClippingThresh)),u=oo(u)):u})),[4,IRe(i,a,n)];case 1:return l=c.sent(),Kt([i,a]),[2,l]}}))}))}function IRe(t,e,n){return Kl(this,void 0,void 0,(function(){var s,r,i,a,l,c,u,d,h,p,g,x;return ql(this,(function(y){switch(y.label){case 0:return s=[],[4,t.data()];case 1:return r=y.sent(),[4,e.data()];case 2:for(i=y.sent(),a=0;a<n.numBoxes;++a)if(!(n.minScoreThresh!=null&&i[a]<n.minScoreThresh||(l=a*n.numCoords,c=jRe(r[l+0],r[l+1],r[l+2],r[l+3],i[a],n.flipVertically,a),(u=c.locationData.relativeBoundingBox).width<0||u.height<0))){if(n.numKeypoints>0)for((d=c.locationData).relativeKeypoints=[],h=n.numKeypoints*n.numValuesPerKeypoint,p=0;p<h;p+=n.numValuesPerKeypoint)g=l+n.keypointCoordOffset+p,x={x:r[g+0],y:n.flipVertically?1-r[g+1]:r[g+1]},d.relativeKeypoints.push(x);s.push(c)}return[2,s]}}))}))}function jRe(t,e,n,s,r,i,a){return{score:[r],ind:a,locationData:{relativeBoundingBox:{xMin:e,yMin:i?1-n:t,xMax:s,yMax:i?1-t:n,width:s-e,height:n-t}}}}var ry,ERe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},$Re={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},vN={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},ARe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},RRe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},DRe={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},PRe={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},_Re=(function(){function t(e,n,s){this.detectorModel=n,this.maxFaces=s,e==="full"?(this.imageToTensorConfig=PRe,this.tensorsToDetectionConfig=RRe,this.anchors=HR($Re)):(this.imageToTensorConfig=DRe,this.tensorsToDetectionConfig=ARe,this.anchors=HR(ERe));var r=Ws(this.anchors.map((function(c){return c.width}))),i=Ws(this.anchors.map((function(c){return c.height}))),a=Ws(this.anchors.map((function(c){return c.xCenter}))),l=Ws(this.anchors.map((function(c){return c.yCenter})));this.anchorTensor={x:a,y:l,w:r,h:i}}return t.prototype.dispose=function(){this.detectorModel.dispose(),Kt([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},t.prototype.reset=function(){},t.prototype.detectFaces=function(e,n){return n===void 0&&(n=!1),Kl(this,void 0,void 0,(function(){var s,r,i,a,l,c,u,d,h,p,g;return ql(this,(function(x){switch(x.label){case 0:return e==null?(this.reset(),[2,[]]):(s=Ie((function(){var y=ht(JB(e),"float32");return n&&(y=Ts(mi.flipLeftRight(Zs(y,0)),[0])),y})),r=kRe(s,this.imageToTensorConfig),i=r.imageTensor,a=r.transformationMatrix,l=this.detectorModel.execute(i,"Identity:0"),c=(function(y){return Ie((function(){var v=(function(k){return Ie((function(){return[Wt(k,[0,0,0],[1,-1,1]),Wt(k,[0,0,1],[1,-1,-1])]}))})(y),w=v[0],N=v[1];return{boxes:Ts(N),logits:Ts(w)}}))})(l),u=c.boxes,[4,TRe([d=c.logits,u],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return(h=x.sent()).length===0?(Kt([s,i,l,d,u]),[2,h]):[4,CRe(h,this.maxFaces,.3)];case 2:return p=x.sent(),g=(function(y,v){y===void 0&&(y=[]);var w,N=(w=v,[].concat.apply([],w));return y.forEach((function(k){var C=k.locationData;C.relativeKeypoints.forEach((function(L){var D=qR(N,[L.x,L.y]),q=D[0],V=D[1];L.x=q,L.y=V}));var j=C.relativeBoundingBox,R=Number.MAX_VALUE,_=Number.MAX_VALUE,A=Number.MIN_VALUE,O=Number.MIN_VALUE;[[j.xMin,j.yMin],[j.xMin+j.width,j.yMin],[j.xMin+j.width,j.yMin+j.height],[j.xMin,j.yMin+j.height]].forEach((function(L){var D=qR(N,L),q=D[0],V=D[1];R=Math.min(R,q),A=Math.max(A,q),_=Math.min(_,V),O=Math.max(O,V)})),C.relativeBoundingBox={xMin:R,xMax:A,yMin:_,yMax:O,width:A-R,height:O-_}})),y})(p,a),Kt([s,i,l,d,u]),[2,g]}}))}))},t.prototype.estimateFaces=function(e,n){return Kl(this,void 0,void 0,(function(){var s,r;return ql(this,(function(i){return s=ZB(e),r=!!n&&n.flipHorizontal,[2,this.detectFaces(e,r).then((function(a){return a.map((function(l){for(var c=l.locationData.relativeKeypoints.map((function(x,y){return iu(iu({},x),{x:x.x*s.width,y:x.y*s.height,name:YB[y]})})),u=l.locationData.relativeBoundingBox,d=0,h=["width","xMax","xMin"];d<h.length;d++)u[h[d]]*=s.width;for(var p=0,g=["height","yMax","yMin"];p<g.length;p++)u[g[p]]*=s.height;return{keypoints:c,box:u}}))}))]}))}))},t})();function ORe(t){return Kl(this,void 0,void 0,(function(){var e,n,s;return ql(this,(function(r){switch(r.label){case 0:return e=(function(i){if(i==null)return iu({},vN);var a=iu({},i);return a.modelType==null&&(a.modelType=vN.modelType),a.maxFaces==null&&(a.maxFaces=vN.maxFaces),a.detectorModelUrl==null&&(a.modelType==="full"?a.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":a.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),a})(t),n=typeof e.detectorModelUrl=="string"&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,K7(e.detectorModelUrl,{fromTFHub:n})];case 1:return s=r.sent(),[2,new _Re(e.modelType,s,e.maxFaces)]}}))}))}function FRe(t,e){return Kl(this,void 0,void 0,(function(){var n,s;return ql(this,(function(r){if(t===ry.MediaPipeFaceDetector){if(s=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,ORe(n)];if(n.runtime==="mediapipe")return[2,SRe(n)];s=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(s))}throw new Error("".concat(t," is not a supported model name."))}))}))}function bN(t){return t.width*t.height}function XR(t){var e=t.xCenter-t.width/2,n=e+t.width,s=t.yCenter-t.height/2;return{xMin:e,xMax:n,yMin:s,yMax:s+t.height,width:t.width,height:t.height}}function MRe(t,e){var n=XR(t),s=XR(e);if(!(function(a,l){return!(a.xMax<l.xMin||l.xMax<a.xMin||a.yMax<l.yMin||l.yMax<a.yMin)})(n,s))return 0;var r=bN((function(a,l){var c=Math.max(a.xMin,l.xMin),u=Math.min(a.xMax,l.xMax),d=Math.max(a.yMin,l.yMin),h=Math.min(a.yMax,l.yMax);return{xMin:c,xMax:u,yMin:d,yMax:h,width:Math.max(u-c,0),height:Math.max(h-d,0)}})(n,s)),i=bN(n)+bN(s)-r;return i>0?r/i:0}function LRe(t,e,n,s){var r=t.width,i=t.height,a=1,l=Math.cos(t.rotation),c=Math.sin(t.rotation),u=t.xCenter,d=t.yCenter,h=1/e,p=1/n,g=new Array(16);return g[0]=r*l*a*h,g[1]=-i*c*h,g[2]=0,g[3]=(-.5*r*l*a+.5*i*c+u)*h,g[4]=r*c*a*p,g[5]=i*l*p,g[6]=0,g[7]=(-.5*i*l-.5*r*c*a+d)*p,g[8]=0,g[9]=0,g[10]=r*h,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,(function(x){if(x.length!==16)throw new Error("Array length must be 16 but got "+x.length);return[[x[0],x[1],x[2],x[3]],[x[4],x[5],x[6],x[7]],[x[8],x[9],x[10],x[11]],[x[12],x[13],x[14],x[15]]]})(g)}function QB(t){return t instanceof zn?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function ez(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function tz(t){return t instanceof zn?t:Z8(t)}function wN(t,e){K(t.width!==0,(function(){return e+" width cannot be 0."})),K(t.height!==0,(function(){return e+" height cannot be 0."}))}function BRe(t,e){var n=(function(s,r,i,a){var l=r-s,c=a-i,u=c/l;return{scale:u,offset:i-s*u}})(0,255,e[0],e[1]);return Ie((function(){return Ke(he(t,n.scale),n.offset)}))}function zRe(t,e,n){var s=e.outputTensorSize,r=e.keepAspectRatio,i=e.outputTensorFloatRange,a=QB(t),l=(function(h,p){return p?{xCenter:p.xCenter*h.width,yCenter:p.yCenter*h.height,width:p.width*h.width,height:p.height*h.height,rotation:p.rotation}:{xCenter:.5*h.width,yCenter:.5*h.height,width:h.width,height:h.height,rotation:0}})(a,n),c=(function(h,p,g){if(g===void 0&&(g=!1),!g)return{top:0,left:0,right:0,bottom:0};var x=p.height,y=p.width;wN(p,"targetSize"),wN(h,"roi");var v,w,N=x/y,k=h.height/h.width,C=0,j=0;return N>k?(v=h.width,w=h.width*N,j=(1-k/N)/2):(v=h.height/N,w=h.height,C=(1-N/k)/2),h.width=v,h.height=w,{top:j,left:C,right:C,bottom:j}})(l,s,r),u=LRe(l,a.width,a.height),d=Ie((function(){var h=tz(t),p=Fc((function(y,v,w){return wN(w,"inputResolution"),[1/w.width*y[0][0]*v.width,1/w.height*y[0][1]*v.width,y[0][3]*v.width,1/w.width*y[1][0]*v.height,1/w.height*y[1][1]*v.height,y[1][3]*v.height,0,0]})(u,a,s),[1,8]),g="nearest",x=mi.transform(Zs(ht(h,"float32")),p,"bilinear",g,0,[s.height,s.width]);return i!=null?BRe(x,i):x}));return{imageTensor:d,padding:c,transformationMatrix:u}}function YR(t){return{xCenter:t.xMin+t.width/2,yCenter:t.yMin+t.height/2,width:t.width,height:t.height}}function VRe(t){var e=t.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,s=Number.MAX_VALUE,r=Number.MIN_VALUE,i=Number.MIN_VALUE;return e.forEach((function(a){n=Math.min(n,a.x),r=Math.max(r,a.x),s=Math.min(s,a.y),i=Math.max(i,a.y)})),{xCenter:(n+r)/2,yCenter:(s+i)/2,width:r-n,height:i-s}}function ZR(t,e,n,s,r){var i=n==="rect"?(function(a,l,c){var u,d=a.locationData;return u=YR(d.boundingBox),u})(t):(function(a,l){var c=a.locationData;return l==="boundingbox"?YR(c.relativeBoundingBox):VRe(c)})(t,e);return r&&(i.rotation=(function(a,l,c){var u,d=a.locationData,h=c.rotationVectorStartKeypointIndex,p=c.rotationVectorEndKeypointIndex;u=c.rotationVectorTargetAngle?c.rotationVectorTargetAngle:Math.PI*c.rotationVectorTargetAngleDegree/180;var g=d.relativeKeypoints[h].x*l.width,x=d.relativeKeypoints[h].y*l.height,y=d.relativeKeypoints[p].x*l.width,v=d.relativeKeypoints[p].y*l.height;return ez(u-Math.atan2(-(v-x),y-g))})(t,s,r)),i}function URe(t,e,n){for(var s=0;s<e.length;++s){var r=e[s],i=n[t[s]];i.x=r.x,i.y=r.y}}function WRe(t,e,n,s){if(typeof e=="string"){if(e==="copy")for(var r=0;r<n.length;++r)s[t[r]].z=n[r].z}else{var i=(function(a,l){for(var c=0,u=0;u<l.length;++u)c+=a[l[u]].z;return c/l.length})(s,e);for(r=0;r<t.length;++r)s[t[r]].z=i}}function GRe(t,e){for(var n=(function(l){var c=[].concat.apply([],l.map((function(g){return g.indexesMapping})));if(c.length===0)throw new Error("There should be at least one landmark in indexes mapping");var u=c[0],d=c[0],h=new Set(c);h.forEach((function(g){u=Math.min(u,g),d=Math.max(d,g)}));var p=h.size;if(u!==0)throw new Error("Indexes are expected to start with 0 instead of "+u);if(d+1!==p)throw new Error("Indexes should have no gaps but "+(d-p+1)+" indexes are missing");return p})(e),s=new Array(n).fill(null).map(Object),r=0;r<t.length;++r){var i=t[r],a=e[r];if(i.length!==a.indexesMapping.length)throw new Error("There are "+i.length+" refinement landmarks while mapping has "+a.indexesMapping.length);URe(a.indexesMapping,i,s),WRe(a.indexesMapping,a.zRefinement,i,s)}return s}function HRe(t,e){return t.map((function(n){var s=co(co({},n),{x:n.x*e.width,y:n.y*e.height});return n.z!=null&&(s.z=n.z*e.width),s}))}function KRe(t,e){return t==="none"?e:(function(n){return 1/(1+Math.exp(-n))})(e)}function qu(t,e,n,s){return Dl(this,void 0,void 0,(function(){var r,i,a,l,c,u,d,h;return Pl(this,(function(p){switch(p.label){case 0:return n=n||e.flipHorizontally||!1,s=s||e.flipVertically||!1,r=t.size,i=r/e.numLandmarks,[4,t.data()];case 1:for(a=p.sent(),l=[],c=0;c<e.numLandmarks;++c)u=c*i,(h={x:0,y:0}).x=n?e.inputImageWidth-a[u]:a[u],i>1&&(h.y=s?e.inputImageHeight-a[u+1]:a[u+1]),i>2&&(h.z=a[u+2]),i>3&&(h.score=KRe(e.visibilityActivation,a[u+3])),l.push(h);for(d=0;d<l.length;++d)(h=l[d]).x=h.x/e.inputImageWidth,h.y=h.y/e.inputImageHeight,h.z=h.z/e.inputImageWidth/(e.normalizeZ||1);return[2,l]}}))}))}function JR(t,e,n){var s=t.width,r=t.height,i=t.rotation;if(n.rotation==null&&n.rotationDegree==null||(i=(function(u,d){return d.rotation!=null?u+=d.rotation:d.rotationDegree!=null&&(u+=Math.PI*d.rotationDegree/180),ez(u)})(i,n)),i===0)t.xCenter=t.xCenter+s*n.shiftX,t.yCenter=t.yCenter+r*n.shiftY;else{var a=(e.width*s*n.shiftX*Math.cos(i)-e.height*r*n.shiftY*Math.sin(i))/e.width,l=(e.width*s*n.shiftX*Math.sin(i)+e.height*r*n.shiftY*Math.cos(i))/e.height;t.xCenter=t.xCenter+a,t.yCenter=t.yCenter+l}{var c=Math.max(s*e.width,r*e.height);s=c/e.width,r=c/e.height}return t.width=s*n.scaleX,t.height=r*n.scaleY,t}(ry||(ry={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var NN={runtime:"tfjs",maxFaces:1,refineLandmarks:!1,landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"},SN={flipHorizontal:!1,staticImageMode:!1},QR={shiftX:0,shiftY:0,scaleX:1.5,scaleY:1.5},qRe={outputTensorSize:{width:192,height:192},outputTensorFloatRange:[0,1]},eD={numLandmarks:468,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},XRe={numLandmarks:80,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},tD={numLandmarks:71,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},nD={numLandmarks:5,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},YRe={indexesMapping:Array.from(Array(468).keys()),zRefinement:"copy"},ZRe={indexesMapping:[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],zRefinement:"none"},JRe={indexesMapping:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],zRefinement:"none"},QRe={indexesMapping:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],zRefinement:"none"},eDe={indexesMapping:[468,469,470,471,472],zRefinement:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173]},tDe={indexesMapping:[473,474,475,476,477],zRefinement:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398]},iy,nDe=(function(){function t(e,n,s,r){this.detector=e,this.landmarkModel=n,this.maxFaces=s,this.withAttention=r,this.prevFaceRectsFromLandmarks=null}return t.prototype.estimateFaces=function(e,n){return Dl(this,void 0,void 0,(function(){var s,r,i,a,l,c,u,d,h,p,g,x,y,v=this;return Pl(this,(function(w){switch(w.label){case 0:return s=(function(C){if(C==null)return co({},SN);var j=co({},C);return j.flipHorizontal==null&&(j.flipHorizontal=SN.flipHorizontal),j.staticImageMode==null&&(j.staticImageMode=SN.staticImageMode),j})(n),e==null?(this.reset(),[2,[]]):(r=QB(e),i=Ie((function(){var C=ht(tz(e),"float32");return s.flipHorizontal&&(C=Ts(mi.flipLeftRight(Zs(C,0)),[0])),C})),a=this.prevFaceRectsFromLandmarks,s.staticImageMode||a==null||a.length<this.maxFaces?[4,this.detector.detectFaces(i,!1)]:[3,2]);case 1:return(c=w.sent()).length===0?(this.reset(),i.dispose(),[2,[]]):(l=c.map((function(C){return v.faceDetectionFrontDetectionToRoi(C,r)})),[3,3]);case 2:l=[],w.label=3;case 3:return N=.5,k=[],[l,a||[]].forEach((function(C){return C.forEach((function(j){(k=k.filter((function(R){return MRe(j,R)<=N}))).push(j)}))})),u=k,[4,Promise.all(u.map((function(C){return v.faceLandmark(C,i)})))];case 4:for(d=w.sent(),h=[],this.prevFaceRectsFromLandmarks=[],p=0;p<d.length;++p)(g=d[p])!=null&&(this.prevFaceRectsFromLandmarks.push(this.faceLandmarksToRoi(g,r)),(x=HRe(g,r))!=null&&x.forEach((function(C,j){var R=XB.get(j);R!=null&&(C.name=R)})),y=x4(x),h.push({keypoints:x,box:y.locationData.relativeBoundingBox}));return i.dispose(),[2,h]}var N,k}))}))},t.prototype.dispose=function(){this.detector.dispose(),this.landmarkModel.dispose()},t.prototype.reset=function(){this.detector.reset(),this.prevFaceRectsFromLandmarks=null},t.prototype.faceDetectionFrontDetectionToRoi=function(e,n){return JR(ZR(e,"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:0}),n,QR)},t.prototype.faceLandmark=function(e,n){return Dl(this,void 0,void 0,(function(){var s,r,i,a,l,c,u;return Pl(this,(function(d){switch(d.label){case 0:return s=zRe(n,qRe,e).imageTensor,r=["output_faceflag"].concat(this.withAttention?["output_mesh_identity","output_lips","Identity_6:0","Identity_1:0","Identity_2:0","Identity_5:0"]:["output_mesh"]),i=this.landmarkModel.execute(s,r),a=i[0],l=i.slice(1),[4,a.data()];case 1:return d.sent()[0]<.5?(Kt(i),Kt(s),[2,null]):this.withAttention?[4,this.tensorsToFaceLandmarksWithAttention(l)]:[3,3];case 2:return c=d.sent(),[3,5];case 3:return[4,this.tensorsToFaceLandmarks(l)];case 4:c=d.sent(),d.label=5;case 5:return u=(function(h,p,g){g===void 0&&(g={ignoreRotation:!1});for(var x=[],y=0,v=h;y<v.length;y++){var w=v[y],N=w.x-.5,k=w.y-.5,C=g.ignoreRotation?0:p.rotation,j=Math.cos(C)*N-Math.sin(C)*k,R=Math.sin(C)*N+Math.cos(C)*k;j=j*p.width+p.xCenter,R=R*p.height+p.yCenter;var _=w.z*p.width,A=co({},w);A.x=j,A.y=R,A.z=_,x.push(A)}return x})(c,e),Kt(i),Kt(s),[2,u]}}))}))},t.prototype.tensorsToFaceLandmarks=function(e){return Dl(this,void 0,void 0,(function(){return Pl(this,(function(n){return[2,qu(e[0],eD)]}))}))},t.prototype.tensorsToFaceLandmarksWithAttention=function(e){return Dl(this,void 0,void 0,(function(){var n,s,r,i,a,l;return Pl(this,(function(c){switch(c.label){case 0:return[4,qu(e[0],eD)];case 1:return n=c.sent(),[4,qu(e[1],XRe)];case 2:return s=c.sent(),[4,qu(e[3],tD)];case 3:return r=c.sent(),[4,qu(e[5],tD)];case 4:return i=c.sent(),[4,qu(e[4],nD)];case 5:return a=c.sent(),[4,qu(e[2],nD)];case 6:return l=c.sent(),[2,GRe([n,s,r,i,a,l],[YRe,ZRe,JRe,QRe,eDe,tDe])]}}))}))},t.prototype.faceLandmarksToRoi=function(e,n){return JR(ZR(x4(e),"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:33,rotationVectorEndKeypointIndex:263,rotationVectorTargetAngleDegree:0}),n,QR)},t})();function sDe(t){return Dl(this,void 0,void 0,(function(){var e,n,s,r;return Pl(this,(function(i){switch(i.label){case 0:return e=(function(a){if(a==null)return co({},NN);var l=co({},a);return l.runtime="tfjs",l.maxFaces==null&&(l.maxFaces=NN.maxFaces),l.refineLandmarks==null&&(l.refineLandmarks=NN.refineLandmarks),l.landmarkModelUrl==null&&(l.landmarkModelUrl=l.refineLandmarks?"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/attention_mesh/1":"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"),l})(t),n=typeof e.landmarkModelUrl=="string"&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,K7(e.landmarkModelUrl,{fromTFHub:n})];case 1:return s=i.sent(),[4,FRe(ry.MediaPipeFaceDetector,{modelType:"short",maxFaces:e.maxFaces,detectorModelUrl:e.detectorModelUrl,runtime:e.runtime})];case 2:return r=i.sent(),[2,new nDe(r,s,e.maxFaces,e.refineLandmarks)]}}))}))}function rDe(t,e){return Dl(this,void 0,void 0,(function(){var n,s;return Pl(this,(function(r){if(t===iy.MediaPipeFaceMesh){if(s=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,sDe(n)];if(n.runtime==="mediapipe")return[2,bRe(n)];s=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+s)}throw new Error(t+" is not a supported model name.")}))}))}(function(t){t.MediaPipeFaceMesh="MediaPipeFaceMesh"})(iy||(iy={}));const Do={forehead:[10,67,69,104,108,151,297,299,332,333,334,338],leftCheek:[36,47,50,101,116,117,118,119,123,187,205,206,207,213],rightCheek:[266,280,329,347,346,345,330,411,427,436,426,423],nose:[1,2,4,5,6,19,44,45,51,94,125,141,197,274,275,281,354,370],tZone:[4,6,10,151,168,193,197,417],leftEye:[33,7,163,144,145,153,154,155,133,173,157,158,159,160,161,246],rightEye:[362,382,381,380,374,373,390,249,263,466,388,387,386,385,384,398],jawline:[132,58,172,136,150,149,176,148,152,377,400,378,379,365,397,288,361],lips:[61,185,40,39,37,0,267,269,270,409,291,375,321,405,314,17,84,181,91,146],faceOval:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109]};class Kh{model=null;isInitialized=!1;isInitializing=!1;static instance;constructor(){}static getInstance(){return Kh.instance||(Kh.instance=new Kh),Kh.instance}async initialize(){if(!this.isInitialized){if(this.isInitializing){const n=Date.now();for(;this.isInitializing&&Date.now()-n<3e4;)await new Promise(s=>setTimeout(s,100));return}this.isInitializing=!0;try{try{await l5("webgl"),await c5(),console.log("[Skindu] TensorFlow.js initialized with backend:",pF())}catch(s){console.warn("[Skindu] WebGL backend failed, trying CPU:",s),await l5("cpu"),await c5(),console.log("[Skindu] TensorFlow.js initialized with CPU backend")}const e=rDe(iy.MediaPipeFaceMesh,{runtime:"tfjs",refineLandmarks:!0,maxFaces:1}),n=new Promise((s,r)=>setTimeout(()=>r(new Error("Model loading timeout")),3e4));this.model=await Promise.race([e,n]),this.isInitialized=!0,console.log("[Skindu] MediaPipe Face Mesh model loaded successfully")}catch(e){throw console.error("[Skindu] Failed to initialize face detector:",e),e}finally{this.isInitializing=!1}}}async detectFace(e){(!this.isInitialized||!this.model)&&await this.initialize();try{const n=await this.model.estimateFaces(e,{flipHorizontal:!1});if(n.length===0)return console.log("[Skindu] No face detected"),null;const s=n[0],i=s.keypoints.map(d=>({x:d.x,y:d.y,z:d.z})),a=this.calculateFaceZones(i,e.width,e.height),l=this.calculateBoundingBox(i),c=this.estimateFaceAngle(i),u=this.calculateConfidence(s,i);return{detected:!0,landmarks:i,zones:a,boundingBox:l,faceAngle:c,confidence:u}}catch(n){return console.error("[Skindu] Face detection error:",n),null}}calculateFaceZones(e,n,s){const r=i=>{const a=i.map(g=>e[g]).filter(g=>g);if(a.length===0)return{x:0,y:0,width:0,height:0};const l=a.map(g=>g.x),c=a.map(g=>g.y),u=Math.max(0,Math.min(...l)),d=Math.min(n,Math.max(...l)),h=Math.max(0,Math.min(...c)),p=Math.min(s,Math.max(...c));return{x:u,y:h,width:d-u,height:p-h}};return{forehead:r(Do.forehead),leftCheek:r(Do.leftCheek),rightCheek:r(Do.rightCheek),nose:r(Do.nose),tZone:r(Do.tZone),leftEye:r(Do.leftEye),rightEye:r(Do.rightEye),jawline:r(Do.jawline),lips:r(Do.lips),fullFace:r(Do.faceOval)}}calculateBoundingBox(e){const n=e.map(c=>c.x),s=e.map(c=>c.y),r=Math.min(...n),i=Math.max(...n),a=Math.min(...s),l=Math.max(...s);return{x:r,y:a,width:i-r,height:l-a}}estimateFaceAngle(e){const n=e[1],s=e[33],r=e[263];if(!n||!s||!r)return{roll:0,pitch:0,yaw:0};const i=r.y-s.y,a=r.x-s.x,l=Math.atan2(i,a)*(180/Math.PI),c=(s.x+r.x)/2,d=(n.x-c)/(r.x-s.x)*45,h=(s.y+r.y)/2,p=n.y-h,g=(r.x-s.x)*.6,y=(p-g)/g*30;return{roll:l,pitch:y,yaw:d}}calculateConfidence(e,n){let s=85;n.length>=468&&(s+=5);const r=n[33],i=n[263],a=n[1];if(r&&i&&a){const l=Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2)),c=Math.sqrt(Math.pow(i.x-a.x,2)+Math.pow(i.y-a.y,2));Math.min(l,c)/Math.max(l,c)>.85&&(s+=5)}return e.score&&(s=Math.round((s+e.score*100)/2)),Math.min(98,Math.max(60,s))}async analyzeZones(e,n){const s=document.createElement("canvas");s.width=e.width,s.height=e.height;const r=s.getContext("2d");r.drawImage(e,0,0);const i=l=>{if(l.width===0||l.height===0)return this.getDefaultZoneAnalysis();const c=r.getImageData(Math.max(0,Math.floor(l.x)),Math.max(0,Math.floor(l.y)),Math.min(s.width-l.x,Math.ceil(l.width)),Math.min(s.height-l.y,Math.ceil(l.height)));return this.analyzeZonePixels(c)},a={x:Math.min(n.leftEye.x,n.rightEye.x),y:Math.max(n.leftEye.y+n.leftEye.height*.7,n.rightEye.y+n.rightEye.height*.7),width:Math.max(n.leftEye.x+n.leftEye.width,n.rightEye.x+n.rightEye.width)-Math.min(n.leftEye.x,n.rightEye.x),height:n.leftEye.height*.5};return{forehead:i(n.forehead),leftCheek:i(n.leftCheek),rightCheek:i(n.rightCheek),nose:i(n.nose),tZone:i(n.tZone),underEyes:i(a),jawline:i(n.jawline)}}analyzeZonePixels(e){const n=e.data,s=n.length/4;if(s===0)return this.getDefaultZoneAnalysis();let r=0,i=0,a=0,l=0;const c=[];let u=0,d=0;for(let w=0;w<n.length;w+=4){const N=n[w],k=n[w+1],C=n[w+2];r+=N,i+=k,a+=C;const j=N*.299+k*.587+C*.114;l+=j,c.push(j),j>200&&u++,N>k+15&&N>C+15&&j>80&&d++}const h=r/s,p=i/s,g=a/s,x=l/s;let y=0;for(const w of c)y+=Math.pow(w-x,2);const v=y/s;return{avgRed:h,avgGreen:p,avgBlue:g,avgBrightness:x,variance:v,rednessScore:d/s*100,oilinessIndicator:u/s*100,textureScore:Math.max(0,100-Math.sqrt(v)*2)}}getDefaultZoneAnalysis(){return{avgRed:180,avgGreen:160,avgBlue:150,avgBrightness:165,variance:400,rednessScore:10,oilinessIndicator:15,textureScore:70}}generateOverlayCanvas(e,n,s){const r=document.createElement("canvas");r.width=e.width,r.height=e.height;const i=r.getContext("2d");i.drawImage(e,0,0);const a=n.zones;Object.entries({forehead:{fill:"rgba(64, 224, 208, 0.25)",stroke:"#40E0D0",label:"Forehead"},leftCheek:{fill:"rgba(255, 107, 53, 0.25)",stroke:"#FF6B35",label:"L-Cheek"},rightCheek:{fill:"rgba(255, 107, 53, 0.25)",stroke:"#FF6B35",label:"R-Cheek"},nose:{fill:"rgba(0, 180, 216, 0.25)",stroke:"#00B4D8",label:"T-Zone"},jawline:{fill:"rgba(147, 51, 234, 0.25)",stroke:"#9333EA",label:"Jawline"}}).forEach(([d,h])=>{const p=a[d];p&&p.width>0&&p.height>0&&(i.fillStyle=h.fill,i.beginPath(),i.roundRect(p.x,p.y,p.width,p.height,8),i.fill(),i.strokeStyle=h.stroke,i.lineWidth=2,i.stroke(),i.fillStyle=h.stroke,i.font="bold 10px sans-serif",i.textAlign="center",i.fillText(h.label,p.x+p.width/2,p.y-5))});const c={x:a.leftEye.x,y:a.leftEye.y+a.leftEye.height*.7,width:a.leftEye.width,height:a.leftEye.height*.4},u={x:a.rightEye.x,y:a.rightEye.y+a.rightEye.height*.7,width:a.rightEye.width,height:a.rightEye.height*.4};return[c,u].forEach((d,h)=>{i.fillStyle="rgba(139, 92, 246, 0.25)",i.strokeStyle="#8B5CF6",i.lineWidth=2,i.beginPath(),i.ellipse(d.x+d.width/2,d.y+d.height/2,d.width/2,d.height/2,0,0,Math.PI*2),i.fill(),i.stroke(),h===0&&(i.fillStyle="#8B5CF6",i.font="bold 9px sans-serif",i.fillText("Under-Eye",d.x+d.width/2,d.y-3))}),i.fillStyle="rgba(0, 0, 0, 0.7)",i.beginPath(),i.roundRect(10,10,120,30,8),i.fill(),i.fillStyle="#00B4D8",i.font="bold 11px sans-serif",i.textAlign="left",i.fillText(`Confidence: ${n.confidence}%`,18,30),i.fillStyle="rgba(0, 0, 0, 0.7)",i.beginPath(),i.roundRect(r.width-130,r.height-35,120,25,8),i.fill(),i.fillStyle="#FFFFFF",i.font="10px sans-serif",i.textAlign="center",i.fillText("Powered by Skindu",r.width-70,r.height-18),r}isReady(){return this.isInitialized&&this.model!==null}}const Mi=Kh.getInstance();async function iDe(){await Mi.initialize()}async function aDe(t){if(typeof t=="string"){const e=new Image;return e.crossOrigin="anonymous",new Promise(n=>{e.onload=async()=>{const s=await Mi.detectFace(e);n(s)},e.onerror=()=>n(null),e.src=t})}return Mi.detectFace(t)}async function oDe(t,e){if(typeof t=="string"){const n=new Image;return n.crossOrigin="anonymous",new Promise(s=>{n.onload=async()=>{const r=await Mi.analyzeZones(n,e);s(r)},n.onerror=()=>s({forehead:Mi.getDefaultZoneAnalysis(),leftCheek:Mi.getDefaultZoneAnalysis(),rightCheek:Mi.getDefaultZoneAnalysis(),nose:Mi.getDefaultZoneAnalysis(),tZone:Mi.getDefaultZoneAnalysis(),underEyes:Mi.getDefaultZoneAnalysis(),jawline:Mi.getDefaultZoneAnalysis()}),n.src=t})}return Mi.analyzeZones(t,e)}function lDe(t,e){return new Promise(n=>{if(typeof t=="string"){const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{try{const r=Mi.generateOverlayCanvas(s,e);n(r.toDataURL("image/jpeg",.9))}catch(r){console.warn("[Skindu] Failed to generate overlay:",r),n("")}},s.onerror=()=>{console.warn("[Skindu] Failed to load image for overlay"),n("")},s.src=t}else try{const s=Mi.generateOverlayCanvas(t,e);n(s.toDataURL("image/jpeg",.9))}catch(s){console.warn("[Skindu] Failed to generate overlay:",s),n("")}})}class qh{config;static instance;constructor(e={}){this.config={apiKey:e.apiKey||void 0||"",endpoint:e.endpoint||void 0||"https://api.skindu.ai/v1",enableDebug:e.enableDebug||!1,timeout:e.timeout||3e4,retryAttempts:e.retryAttempts||3}}static getInstance(e){return qh.instance||(qh.instance=new qh(e)),qh.instance}async analyze(e){const n=Date.now();console.log("[Skindu] Starting analysis...",{hasImage:!!e.base64Image,imageLength:e.base64Image?.length||0,userId:e.userId});try{return this.validateImageInput(e),console.log("[Skindu] Validation passed, proceeding with analysis..."),this.config.apiKey&&this.config.apiKey!==""?await this.analyzeWithAPI(e):(console.log("[Skindu] Using local analysis (no API key)..."),await this.analyzeLocally(e,n))}catch(s){throw console.error("[Skindu] Analysis failed:",s),new Ph("Analysis failed","ANALYSIS_FAILED",s)}}validateImageInput(e){if(!e.base64Image)throw console.error("[Skindu] Validation failed: No image provided"),new Ph("No image provided","MISSING_IMAGE");const n=e.base64Image.startsWith("data:image/"),s=/^[A-Za-z0-9+/=]+$/.test(e.base64Image.substring(0,100));if(!n&&!s)throw console.error("[Skindu] Validation failed: Invalid image format",e.base64Image.substring(0,50)),new Ph("Invalid image format","INVALID_FORMAT");const i=(n&&e.base64Image.split(",")[1]||e.base64Image).length*3/4/1024;if(this.config.enableDebug&&console.log("[Skindu] Image validation:",{hasDataPrefix:n,sizeInKB:i.toFixed(2)+"KB"}),i<5)throw console.error("[Skindu] Validation failed: Image too small",i.toFixed(2)+"KB"),new Ph("Image quality too low","LOW_QUALITY")}async analyzeWithAPI(e){const n=new AbortController,s=setTimeout(()=>n.abort(),this.config.timeout);try{const r=await fetch(`${this.config.endpoint}/analyze`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`,"X-Powered-By":"Skindu"},body:JSON.stringify({image:e.base64Image,userId:e.userId,metadata:e.metadata}),signal:n.signal});if(clearTimeout(s),!r.ok)throw new Ph(`API error: ${r.status}`,"API_ERROR");const i=await r.json();return this.transformAPIResponse(i)}catch(r){throw clearTimeout(s),r.name==="AbortError"?new Ph("Request timeout","TIMEOUT"):r}}async analyzeLocally(e,n){let s,r=!1,i=0,a=null,l=0;try{this.config.enableDebug&&console.log("[Skindu] Initializing MediaPipe Face Mesh..."),await iDe();const k=await aDe(e.base64Image);if(k){r=!0,i=k.landmarks.length,l=k.confidence||80,this.config.enableDebug&&(console.log(`[Skindu] Face detected with ${i} landmarks`),console.log("[Skindu] Face zones:",Object.keys(k.zones))),a=await oDe(e.base64Image,k.zones);const C=await lDe(e.base64Image,k);s=C&&C.length>50?C:void 0,this.config.enableDebug&&console.log("[Skindu] Overlay generated:",s?"success":"skipped")}else this.config.enableDebug&&console.log("[Skindu] No face detected, using fallback analysis")}catch(k){console.warn("[Skindu] MediaPipe Face Mesh unavailable, using fallback analysis:",k),r=!1,i=0,a=null,s=void 0}console.log("[Skindu] Extracting image features...");let c;try{c=await this.extractImageFeatures(e.base64Image),console.log("[Skindu] Image features extracted successfully")}catch(k){console.warn("[Skindu] Feature extraction failed, using defaults:",k),c=this.getDefaultFeatures()}const u=a?this.mergeZoneAnalysis(c,a):c,d=this.calculateHealthMetrics(u),h=a?this.calculateConcernsFromZones(a,u):this.calculateConcerns(u),p=this.calculateZoneAnalysis(u),g=this.calculateOverallScore(d,h),x=this.determineSkinType(d),y=this.generateInsights(d,h,x),v=this.generateRecommendations(d,h,x),w=Date.now()-n,N=r?Math.min(98,Math.round((l+this.calculateConfidence(u))/2)):this.calculateConfidence(u);return{analysisId:this.generateAnalysisId(),timestamp:new Date().toISOString(),processingTime:w,confidence:N,poweredBy:"Skindu",overallScore:g,estimatedSkinAge:this.calculateSkinAge(d,h),skinType:x,skinTone:this.determineSkinTone(u),healthMetrics:d,concerns:h,zoneAnalysis:p,insights:y,recommendations:v,skinSummary:this.generateSkinSummary(g,x,h),overlayImageUrl:s,faceDetected:r,faceLandmarksCount:i,comparedToAverage:{overallScore:g>=75?"better":g>=60?"average":"below",percentile:Math.min(99,Math.max(1,Math.round(g*1.1)))}}}mergeZoneAnalysis(e,n){const s=[n.forehead,n.leftCheek,n.rightCheek,n.nose,n.jawline],r=s.reduce((c,u)=>c+u.oilinessIndicator,0)/s.length,i=s.reduce((c,u)=>c+u.rednessScore,0)/s.length,a=s.reduce((c,u)=>c+u.textureScore,0)/s.length,l=s.reduce((c,u)=>c+u.avgBrightness,0)/s.length;return{...e,avgBrightness:(e.avgBrightness+l)/2,rednessRatio:i/100,brightRatio:r/100,variance:e.variance*(1-a/200)}}calculateConcernsFromZones(e,n){const s=(d,h)=>Math.max(0,Math.min(100,Math.round(d+(Math.random()*h*2-h)))),r=e.underEyes?(255-e.underEyes.avgBrightness)/2.55:25,i=(e.leftCheek.rednessScore+e.rightCheek.rednessScore)/2;e.tZone?.oilinessIndicator||(e.forehead.oilinessIndicator+e.nose.oilinessIndicator)/2;const a=(e.forehead.textureScore+e.leftCheek.textureScore+e.rightCheek.textureScore)/3,l=Math.max(0,100-a),c=e.jawline.textureScore,u=Math.max(0,60-c+i*.5);return{acne:s(u,8),wrinkles:s(l*.4,10),darkCircles:s(r,12),darkSpots:s(15+n.darkRatio*40,10),redness:s(i,8),uvDamage:s(20+n.darkRatio*25,10),sensitivity:s(i*.5+10,8),dehydration:s(30-n.avgBrightness/10,10)}}async extractImageFeatures(e){return new Promise(n=>{const s=new Image;s.crossOrigin="anonymous";const r=setTimeout(()=>{console.warn("[Skindu] Image loading timeout, using defaults"),n(this.getDefaultFeatures())},1e4);s.onload=()=>{clearTimeout(r);try{const i=document.createElement("canvas"),a=i.getContext("2d");if(!a){console.warn("[Skindu] Canvas context unavailable, using defaults"),n(this.getDefaultFeatures());return}const l=256,c=Math.min(l/s.width,l/s.height);i.width=Math.max(1,s.width*c),i.height=Math.max(1,s.height*c),a.drawImage(s,0,0,i.width,i.height);const u=a.getImageData(0,0,i.width,i.height),d=this.analyzePixelData(u);n(d)}catch(i){console.warn("[Skindu] Image processing error, using defaults:",i),n(this.getDefaultFeatures())}},s.onerror=()=>{clearTimeout(r),console.warn("[Skindu] Image load error, using defaults"),n(this.getDefaultFeatures())},s.src=e})}analyzePixelData(e){const n=e.data,s=n.length/4;let r=0,i=0,a=0,l=0,c=0,u=0;const d=[];for(let g=0;g<n.length;g+=4){const x=n[g],y=n[g+1],v=n[g+2],w=x*.299+y*.587+v*.114;r+=w,d.push(w),x>y+20&&x>v+20&&w>100&&(l++,i+=x-Math.max(y,v)),w>180&&c++,w<70&&u++}const h=r/s;for(const g of d)a+=Math.pow(g-h,2);const p=a/s;return{avgBrightness:h,variance:p,rednessRatio:l/s,avgRedness:l>0?i/l:0,brightRatio:c/s,darkRatio:u/s,contrast:Math.sqrt(p)}}getDefaultFeatures(){return{avgBrightness:140,variance:800,rednessRatio:.15,avgRedness:25,brightRatio:.2,darkRatio:.1,contrast:28}}calculateHealthMetrics(e){const n=(a,l)=>Math.max(0,Math.min(100,Math.round(a+(Math.random()*l*2-l)))),s=Math.min(100,e.avgBrightness/255*100),r=Math.max(0,100-e.variance/20),i=s*.6+(100-e.rednessRatio*100)*.4;return{hydration:n(70+s*.15,10),moisture:n(68+s*.12,8),oiliness:n(40+e.brightRatio*50,15),evenness:n(65+r*.2,12),texture:n(r*.8+10,10),clarity:n(i*.8+10,8),firmness:n(72+(100-e.contrast)*.1,10),elasticity:n(75,12),poreSize:n(35+e.contrast*.5,15),smoothness:n(r*.7+20,10),radiance:n(s*.5+35,10)}}calculateConcerns(e){const n=(s,r)=>Math.max(0,Math.min(100,Math.round(s+(Math.random()*r*2-r))));return{acne:n(15+e.rednessRatio*80,10),wrinkles:n(e.variance/30,12),darkCircles:n(20+e.darkRatio*50,15),darkSpots:n(15+e.darkRatio*30,10),redness:n(e.rednessRatio*100,12),uvDamage:n(20+e.darkRatio*20,10),sensitivity:n(15+e.rednessRatio*40,10),dehydration:n(25-e.avgBrightness*.1,12)}}calculateZoneAnalysis(e){const n=(s,r)=>Math.max(0,Math.min(100,Math.round(s+(Math.random()*r*2-r))));return{forehead:{oiliness:n(55+e.brightRatio*30,10),wrinkles:n(e.variance/40,8),texture:n(70-e.variance/25,10)},tZone:{oiliness:n(60+e.brightRatio*35,12),poreSize:n(40+e.contrast*.6,10)},cheeks:{hydration:n(72+e.avgBrightness*.08,10),redness:n(e.rednessRatio*80,12),evenness:n(75-e.variance/30,8)},underEye:{darkCircles:n(25+e.darkRatio*60,15),puffiness:n(20,10),wrinkles:n(e.variance/35,10)},jawline:{acne:n(15+e.rednessRatio*40,12),texture:n(70,10)},nose:{oiliness:n(65+e.brightRatio*30,10),poreSize:n(45+e.contrast*.5,12),blackheads:n(25+e.darkRatio*30,10)}}}calculateOverallScore(e,n){const s=e.hydration*.15+e.clarity*.15+e.evenness*.12+e.texture*.12+e.firmness*.1+e.elasticity*.1+e.radiance*.1+e.smoothness*.08+(100-e.poreSize)*.04+(100-e.oiliness)*.04,r=(n.acne*.2+n.wrinkles*.15+n.darkSpots*.15+n.redness*.15+n.darkCircles*.1+n.uvDamage*.1+n.sensitivity*.08+n.dehydration*.07)*.3;return Math.max(0,Math.min(100,Math.round(s-r)))}determineSkinType(e){const{oiliness:n,hydration:s}=e;return n>70?"oily":s<50&&n<40?"dry":n>50&&s>60?"combination":e.poreSize>60||n>55?"sensitive":"normal"}determineSkinTone(e){const n=e.avgBrightness;return n>200?"fair":n>170?"light":n>130?"medium":n>90?"tan":"deep"}calculateSkinAge(e,n){let s=25;return s+=(100-e.firmness)*.15,s+=(100-e.elasticity)*.12,s+=n.wrinkles*.2,s+=n.uvDamage*.1,Math.max(18,Math.min(70,Math.round(s)))}calculateConfidence(e){let n=85;return(e.avgBrightness<80||e.avgBrightness>220)&&(n-=10),e.contrast>60&&(n-=5),Math.max(60,Math.min(98,n+Math.random()*5))}generateInsights(e,n,s){const r=[];return e.hydration>=70?r.push("Your skin shows excellent hydration levels, indicating good moisture retention."):e.hydration<50&&r.push("Your skin appears dehydrated. Consider increasing water intake and using hydrating products."),e.clarity>=75&&r.push("Skin clarity is above average, showing good overall skin health."),n.acne>30&&r.push("Signs of acne activity detected. Consider salicylic acid or benzoyl peroxide treatments."),n.wrinkles>35&&r.push("Fine lines are visible. Retinol and peptide-based products can help improve this."),n.darkCircles>40&&r.push("Under-eye darkness detected. Ensure adequate sleep and consider vitamin C eye cream."),n.uvDamage>30&&r.push("Some sun damage indicators present. Daily SPF 50+ sunscreen is recommended."),s==="oily"?r.push("T-zone shows elevated oil production. Use oil-free, non-comedogenic products."):s==="dry"&&r.push("Skin barrier may need strengthening. Look for ceramide-rich moisturizers."),e.radiance>=70&&r.push("Your natural skin radiance is showing - keep up your current routine!"),r.slice(0,5)}generateRecommendations(e,n,s){const r=[];return r.push({category:"sunscreen",priority:"high",title:"Daily Broad-Spectrum Sunscreen",description:"SPF 50+ sunscreen to protect against UV damage and prevent premature aging.",ingredients:["Zinc Oxide","Titanium Dioxide","Niacinamide"]}),(e.hydration<65||s==="dry")&&r.push({category:"moisturizer",priority:"high",title:"Intensive Hydrating Moisturizer",description:"Rich moisturizer with hyaluronic acid to boost skin hydration.",ingredients:["Hyaluronic Acid","Ceramides","Glycerin"]}),n.acne>25&&r.push({category:"treatment",priority:n.acne>40?"high":"medium",title:"Acne Control Treatment",description:"Targeted treatment to reduce breakouts and control oil production.",ingredients:["Salicylic Acid","Niacinamide","Tea Tree Oil"]}),(n.wrinkles>25||e.firmness<70)&&r.push({category:"serum",priority:"medium",title:"Retinol Night Serum",description:"Anti-aging serum to reduce fine lines and improve skin texture.",ingredients:["Retinol","Vitamin E","Peptides"]}),(n.darkSpots>25||e.radiance<65)&&r.push({category:"serum",priority:"medium",title:"Vitamin C Brightening Serum",description:"Antioxidant serum to brighten skin and reduce dark spots.",ingredients:["Vitamin C","Ferulic Acid","Alpha Arbutin"]}),r.push({category:"cleanser",priority:"medium",title:s==="oily"?"Oil-Control Gel Cleanser":s==="dry"?"Cream Cleanser":"Gentle Foaming Cleanser",description:`Cleanser formulated for ${s} skin type to maintain skin balance.`,ingredients:s==="oily"?["Salicylic Acid","Green Tea","Zinc"]:s==="dry"?["Squalane","Oat Extract","Aloe Vera"]:["Glycerin","Aloe Vera","Chamomile"]}),r.slice(0,6)}generateSkinSummary(e,n,s){const r=e>=80?"excellent":e>=70?"good":e>=60?"fair":"needs attention",a=Object.entries(s).reduce((c,u)=>c[1]>u[1]?c:u);return`Your skin shows ${r} overall health with a ${n} skin type. Based on our analysis, we recommend focusing on ${{acne:"acne management",wrinkles:"anti-aging care",darkCircles:"under-eye treatment",darkSpots:"brightening",redness:"soothing and calming",uvDamage:"sun protection",sensitivity:"barrier repair",dehydration:"hydration"}[a[0]]} to achieve optimal skin balance. Continue with consistent skincare and sun protection.`}simulateProcessing(e,n){const s=Math.random()*(n-e)+e;return new Promise(r=>setTimeout(r,s))}generateAnalysisId(){return`skindu_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}transformAPIResponse(e){return e}}class Ph extends Error{code;originalError;constructor(e,n,s){super(e),this.name="SkinduError",this.code=n,this.originalError=s}}function cDe({user:t,onScanComplete:e,onViewProducts:n,onUpgrade:s}){const{t:r,isRTL:i}=Hm(),[a,l]=T.useState(!1),[c,u]=T.useState(!1),[d,h]=T.useState(""),[p,g]=T.useState(!1),[x,y]=T.useState("user"),[v,w]=T.useState(null),[N,k]=T.useState(""),[C,j]=T.useState(!1),R=T.useRef(null),_=T.useRef(null),A=T.useRef(null),O=t.scansToday<t.maxScans;T.useEffect(()=>()=>{v&&v.getTracks().forEach(G=>G.stop())},[v]);const L=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){k("Camera not supported on this device"),He.error("Camera not supported. Please use file upload instead.");return}k("");const G=await navigator.mediaDevices.getUserMedia({video:{facingMode:x,width:{ideal:1280},height:{ideal:720}}});R.current&&(R.current.srcObject=G,R.current.play()),w(G),g(!0),j(!1)}catch(G){console.log("[Camera] Access error:",G.name,"-",G.message);let H="Unable to access camera";G.name==="NotAllowedError"||G.name==="PermissionDeniedError"?(H="Camera permission denied",k("permission_denied"),j(!0),He.error("Camera access denied. See instructions below or use upload option.",{duration:5e3})):G.name==="NotFoundError"||G.name==="DevicesNotFoundError"?(H="No camera found on this device",k("no_camera"),He.error("No camera detected. Please use file upload instead.")):G.name==="NotReadableError"||G.name==="TrackStartError"?(H="Camera is already in use",k("camera_busy"),He.error("Camera is being used by another application. Please close it and try again.")):(k("unknown"),He.error(H+". Please try the upload option."))}},D=()=>{v&&(v.getTracks().forEach(G=>G.stop()),w(null)),g(!1)},q=async()=>{D(),y(G=>G==="user"?"environment":"user"),setTimeout(()=>L(),100)},V=()=>{if(!O)return;const G=R.current,H=_.current;if(G&&H){H.width=G.videoWidth,H.height=G.videoHeight;const ie=H.getContext("2d");if(ie){ie.drawImage(G,0,0);const de=H.toDataURL("image/jpeg",.9);h(de),u(!0),D()}}},ne=G=>{const H=G.target.files?.[0];if(!H)return;if(!H.type.startsWith("image/")){He.error("Please select an image file");return}const ie=new FileReader;ie.onload=de=>{const ke=de.target?.result;h(ke),u(!0),k("")},ie.readAsDataURL(H)},J=()=>{A.current?.click()},ee=(G,H)=>({id:G.analysisId,date:G.timestamp,imageUrl:H,overallScore:G.overallScore,estimatedAge:G.estimatedSkinAge,actualAge:t.skinProfile?.lifestyle?30:void 0,hydration:G.healthMetrics.hydration,moisture:G.healthMetrics.moisture,oiliness:G.healthMetrics.oiliness,evenness:G.healthMetrics.evenness,texture:G.healthMetrics.texture,clarity:G.healthMetrics.clarity,firmness:G.healthMetrics.firmness,elasticity:G.healthMetrics.elasticity,poreSize:G.healthMetrics.poreSize,smoothness:G.healthMetrics.smoothness,radiance:G.healthMetrics.radiance,acne:G.concerns.acne,wrinkles:G.concerns.wrinkles,darkCircles:G.concerns.darkCircles,darkSpots:G.concerns.darkSpots,redness:G.concerns.redness,skinType:G.skinType,uvDamage:G.concerns.uvDamage,recommendations:G.recommendations.map(ie=>ie.title),aiAnalysis:G.skinSummary+`

Powered by Skindu AI`,overlayImageUrl:G.overlayImageUrl,faceDetected:G.faceDetected,faceLandmarksCount:G.faceLandmarksCount}),te=async G=>{try{const ie=await qh.getInstance({enableDebug:!1}).analyze({base64Image:G,userId:t.id,metadata:{deviceType:/Mobile|Android|iPhone/i.test(navigator.userAgent)?"mobile":"desktop",captureTime:new Date().toISOString(),lightingCondition:"unknown",cameraType:x==="user"?"front":"back"}});console.log("[Skindu] Analysis complete:",{analysisId:ie.analysisId,confidence:ie.confidence,processingTime:ie.processingTime,poweredBy:ie.poweredBy});const de=ee(ie,G);try{const ke=await Ln.createScan({imageBase64:G,skinType:de.skinType||t.skinProfile?.skinType||"normal",overallScore:de.overallScore,hydrationLevel:ie.metrics.hydration,oilinessLevel:ie.metrics.oiliness,acneLevel:ie.metrics.acne,wrinkleLevel:ie.metrics.wrinkles,pigmentationLevel:ie.metrics.pigmentation,sensitivityLevel:ie.metrics.sensitivity,poreSize:"medium",analysisNotes:de.aiAnalysis||""});console.log("[API] Scan saved to backend:",ke.id),de.id=ke.id}catch(ke){console.warn("[API] Failed to save scan to backend (offline mode):",ke)}return de}catch(H){throw console.error("[Skindu] Analysis error:",H),He.error(r("errors.analysisFailedRetry","Analysis failed. Please try again.")),H}},X=async()=>{if(!d){console.error("[Skindu] No captured image available"),He.error("No image captured. Please take a photo first.");return}console.log("[Skindu] Starting analysis with image size:",d.length),l(!0);try{const G=await te(d);console.log("[Skindu] Analysis successful:",G.id),l(!1),u(!1),e(G)}catch(G){console.error("[Skindu] Analysis error in startScan:",G),l(!1),He.error("Analysis failed. Please try again.")}},Q=()=>{u(!1),h(""),L()};return a?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:o.jsxs("div",{className:"text-center space-y-6 max-w-sm",children:[o.jsx(Rl.div,{className:"w-24 h-24 bg-primary/20 rounded-full flex items-center justify-center mx-auto",animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(gi,{className:"w-12 h-12 text-primary"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xl font-semibold",children:r("camera.analyzing")}),o.jsx("p",{className:"text-muted-foreground text-sm",children:r("camera.processingParams","AI is processing 15+ skin parameters...")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:o.jsx(Rl.div,{className:"bg-primary h-2 rounded-full",initial:{width:0},animate:{width:"100%"},transition:{duration:3,ease:"easeInOut"}})}),o.jsx("p",{className:"text-xs text-muted-foreground",children:r("camera.analyzingMetrics","Analyzing hydration, texture, clarity, age markers...")})]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 pt-4 border-t border-border mt-4",children:[o.jsx(ln,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:r("camera.poweredBySkindu","Powered by Skindu")})]})]})}):c?o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-4",children:[o.jsxs("div",{className:`flex items-center justify-between mb-2 ${i?"flex-row-reverse":""}`,children:[o.jsx("h2",{className:"text-lg font-semibold",children:r("camera.reviewPhoto","Review Your Photo")}),o.jsx(it,{variant:"outline",children:r("common.preview","Preview")})]}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsx("div",{className:"aspect-[3/4] bg-muted rounded-lg overflow-hidden mb-4 relative",children:d?o.jsx("img",{src:d,alt:"Captured",className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(zo,{className:"w-16 h-16 text-muted-foreground"})})}),o.jsxs(x1,{className:"mb-4",children:[o.jsx(Hp,{className:`h-4 w-4 ${i?"ml-2":"mr-2"}`}),o.jsx(y1,{className:"text-xs",children:r("camera.faceVisibleTip","Make sure your face is clearly visible and well-lit for accurate analysis")})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(be,{onClick:X,className:"w-full",size:"lg",disabled:!O,children:O?o.jsxs(o.Fragment,{children:[o.jsx(gi,{className:`w-4 h-4 ${i?"ml-2":"mr-2"}`}),r("camera.startAnalysis","Start AI Analysis")]}):r("camera.scanLimitReached")}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs(be,{onClick:Q,variant:"outline",className:"w-full",children:[o.jsx(rP,{className:`w-4 h-4 ${i?"ml-2":"mr-2"}`}),r("camera.retake")]}),o.jsxs(be,{onClick:J,variant:"outline",className:"w-full",children:[o.jsx(h0,{className:`w-4 h-4 ${i?"ml-2":"mr-2"}`}),r("common.upload")]})]})]})]})})]}):p?o.jsxs("div",{className:"min-h-screen bg-black relative",children:[o.jsx("video",{ref:R,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),o.jsx("canvas",{ref:_,className:"hidden"}),o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("div",{className:"w-64 h-80 border-2 border-white rounded-[40px] relative",children:[o.jsx("div",{className:"absolute inset-2 border border-white/50 rounded-[36px]"}),o.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-primary rounded-tl-[12px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-primary rounded-tr-[12px]"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-primary rounded-bl-[12px]"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-primary rounded-br-[12px]"})]})}),o.jsx("div",{className:"absolute top-6 left-0 right-0 px-4",children:o.jsxs("div",{className:"bg-black/70 backdrop-blur-sm text-white text-sm p-3 rounded-lg text-center",children:[o.jsx("p",{className:"font-medium",children:"Position your face within the frame"}),o.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Ensure good lighting for best results"})]})})]}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 pointer-events-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx(be,{onClick:D,variant:"ghost",size:"icon",className:"bg-black/50 backdrop-blur-sm text-white hover:bg-black/70 h-12 w-12 rounded-full",children:o.jsx(Us,{className:"w-6 h-6"})}),o.jsx(be,{onClick:q,variant:"ghost",size:"icon",className:"bg-black/50 backdrop-blur-sm text-white hover:bg-black/70 h-12 w-12 rounded-full",children:o.jsx(Lq,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"flex justify-center",children:o.jsx(Rl.button,{onClick:V,disabled:!O,className:"w-20 h-20 bg-white rounded-full border-4 border-primary flex items-center justify-center disabled:opacity-50 shadow-lg",whileTap:{scale:.9},animate:O?{scale:[1,1.05,1]}:{},transition:{duration:2,repeat:1/0},children:o.jsx(zo,{className:"w-8 h-8 text-primary"})})})]})]}):o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-6",children:[o.jsx(ze,{children:o.jsx(Ue,{className:"p-6",children:o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(it,{variant:t.type==="member"?"default":"secondary",className:"text-sm",children:t.type==="member"?" Member":" Guest"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-2xl font-semibold",children:r("camera.title")}),o.jsx("p",{className:"text-muted-foreground text-sm",children:r("camera.subtitle")})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-4",children:[o.jsxs("div",{className:"p-3 bg-primary/5 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Age Detection"}),o.jsx("p",{className:"text-sm font-medium",children:"AI Powered"})]}),o.jsxs("div",{className:"p-3 bg-primary/5 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Parameters"}),o.jsx("p",{className:"text-sm font-medium",children:"15+ Metrics"})]}),o.jsxs("div",{className:"p-3 bg-primary/5 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Analysis Time"}),o.jsx("p",{className:"text-sm font-medium",children:"~3 seconds"})]}),o.jsxs("div",{className:"p-3 bg-primary/5 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Accuracy"}),o.jsx("p",{className:"text-sm font-medium",children:"95%+"})]})]})]})})}),!N&&!C&&o.jsxs(x1,{className:"border-primary/20 bg-primary/5",children:[o.jsx(Hp,{className:"h-4 w-4 text-primary"}),o.jsxs(y1,{className:"text-sm",children:[o.jsx("p",{className:"font-medium mb-1",children:"Camera Access Required"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:`When you click "Start Camera", your browser will ask for permission to access your camera. Please click "Allow" to continue. Don't worry - we only access the camera when you're actively scanning.`})]})]}),C&&o.jsxs(x1,{className:"border-orange-200 bg-orange-50",children:[o.jsx(Hp,{className:"h-4 w-4 text-orange-600"}),o.jsxs(y1,{className:"text-sm text-orange-900",children:[o.jsx("p",{className:"font-medium mb-2",children:"Camera access was denied"}),o.jsxs("div",{className:"space-y-1 text-xs",children:[o.jsx("p",{children:o.jsx("strong",{children:"To enable camera:"})}),o.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[o.jsx("li",{children:"Click the camera icon in your browser's address bar"}),o.jsx("li",{children:'Select "Allow" for camera access'}),o.jsx("li",{children:"Refresh the page and try again"})]}),o.jsx("p",{className:"mt-2",children:'Or use the "Upload Photo" option below'})]})]})]}),N&&N!=="permission_denied"&&o.jsxs(x1,{className:"border-orange-200 bg-orange-50",children:[o.jsx(od,{className:"h-4 w-4 text-orange-600"}),o.jsxs(y1,{className:"text-sm text-orange-900",children:[N==="no_camera"&&"No camera detected on this device. Please use the upload option below.",N==="camera_busy"&&"Camera is being used by another application. Please close it and try again.",N==="unknown"&&"Unable to access camera. Please try uploading a photo instead."]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(be,{onClick:L,className:"w-full",size:"lg",disabled:!O,children:O?o.jsxs(o.Fragment,{children:[o.jsx(zo,{className:`w-5 h-5 ${i?"ml-2":"mr-2"}`}),r("camera.startCamera")]}):r("camera.scanLimitReached")}),o.jsxs(be,{onClick:J,variant:"outline",className:"w-full",size:"lg",disabled:!O,children:[o.jsx(h0,{className:`w-5 h-5 ${i?"ml-2":"mr-2"}`}),r("camera.uploadPhoto")]}),o.jsx("input",{ref:A,type:"file",accept:"image/*",onChange:ne,className:"hidden"})]}),!O&&o.jsx(ze,{className:"border-orange-200 bg-orange-50",children:o.jsxs(Ue,{className:"p-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(od,{className:"w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"space-y-1 flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-orange-900",children:t.type==="guest"?"Free scan used":"Daily limit reached"}),o.jsx("p",{className:"text-xs text-orange-700",children:t.type==="guest"?"Sign up to get 3 scans per day + track your skin progress":t.type==="member"?"Upgrade to Pro for unlimited scans":"You can scan again tomorrow."})]})]}),t.type==="guest"&&o.jsx(be,{className:"w-full mt-3 bg-[#00B4D8] hover:bg-[#00B4D8]/90",onClick:s,children:"Sign Up Free"}),t.type==="member"&&o.jsx(be,{className:"w-full mt-3 bg-gradient-to-r from-amber-500 to-orange-500",onClick:s,children:"Upgrade to Pro"})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsxs("h3",{className:`font-medium mb-3 flex items-center gap-2 ${i?"flex-row-reverse":""}`,children:[o.jsx(gi,{className:"w-4 h-4 text-primary"}),r("camera.tips")]}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-primary mt-0.5",children:""}),o.jsx("span",{children:"Allow camera access when prompted by your browser"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-primary mt-0.5",children:""}),o.jsx("span",{children:"Ensure your face is well-lit with natural or bright lighting"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-primary mt-0.5",children:""}),o.jsx("span",{children:"Remove makeup for more accurate skin analysis"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-primary mt-0.5",children:""}),o.jsx("span",{children:"Look directly at the camera and remain still"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-primary mt-0.5",children:""}),o.jsx("span",{children:"Position your entire face within the frame guides"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-primary mt-0.5",children:""}),o.jsx("span",{children:"Alternatively, upload a clear selfie photo"})]})]})]})}),N&&o.jsx(ze,{className:"border-muted",children:o.jsxs(Ue,{className:"p-4",children:[o.jsxs("h3",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(od,{className:"w-4 h-4 text-primary"}),"Common Issues & Solutions"]}),o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium mb-1",children:"Camera Permission Denied?"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:`Click the camera/lock icon in your browser's address bar, select "Allow" for camera, then refresh the page.`})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium mb-1",children:"No Camera Available?"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:'No problem! Use the "Upload Photo" button to select a selfie from your device.'})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium mb-1",children:"Camera Already in Use?"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Close other apps that might be using your camera (Zoom, Teams, etc.) and try again."})]})]})]})})]})}function uDe(t,e=[]){let n=[];function s(i,a){const l=T.createContext(a);l.displayName=i+"Context";const c=n.length;n=[...n,a];const u=h=>{const{scope:p,children:g,...x}=h,y=p?.[t]?.[c]||l,v=T.useMemo(()=>x,Object.values(x));return o.jsx(y.Provider,{value:v,children:g})};u.displayName=i+"Provider";function d(h,p){const g=p?.[t]?.[c]||l,x=T.useContext(g);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=n.map(a=>T.createContext(a));return function(l){const c=l?.[t]||i;return T.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return r.scopeName=t,[s,dDe(r,...e)]}function dDe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const a=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var hDe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nz=hDe.reduce((t,e)=>{const n=Dm(`Primitive.${e}`),s=T.forwardRef((r,i)=>{const{asChild:a,...l}=r,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{}),UT="Progress",WT=100,[fDe]=uDe(UT),[pDe,mDe]=fDe(UT),sz=T.forwardRef((t,e)=>{const{__scopeProgress:n,value:s=null,max:r,getValueLabel:i=gDe,...a}=t;(r||r===0)&&!sD(r)&&console.error(xDe(`${r}`,"Progress"));const l=sD(r)?r:WT;s!==null&&!rD(s,l)&&console.error(yDe(`${s}`,"Progress"));const c=rD(s,l)?s:null,u=ay(c)?i(c,l):void 0;return o.jsx(pDe,{scope:n,value:c,max:l,children:o.jsx(nz.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":ay(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":az(c,l),"data-value":c??void 0,"data-max":l,...a,ref:e})})});sz.displayName=UT;var rz="ProgressIndicator",iz=T.forwardRef((t,e)=>{const{__scopeProgress:n,...s}=t,r=mDe(rz,n);return o.jsx(nz.div,{"data-state":az(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:e})});iz.displayName=rz;function gDe(t,e){return`${Math.round(t/e*100)}%`}function az(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function ay(t){return typeof t=="number"}function sD(t){return ay(t)&&!isNaN(t)&&t>0}function rD(t,e){return ay(t)&&!isNaN(t)&&t<=e&&t>=0}function xDe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${WT}\`.`}function yDe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${WT} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var vDe=sz,bDe=iz;function uo({className:t,value:e,...n}){return o.jsx(vDe,{"data-slot":"progress",className:Bt("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:o.jsx(bDe,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function wDe({result:t,onViewProducts:e,user:n}){const{t:s,isRTL:r,formatDate:i,formatNumber:a}=Hm(),[l,c]=T.useState("overview"),u=[{name:s("results.hydration"),value:t.hydration,icon:sm,color:"bg-blue-500",description:s("results.hydrationDesc","Skin water content")},{name:s("results.moisture"),value:t.moisture,icon:sm,color:"bg-cyan-500",description:s("results.moistureDesc","Surface moisture level")},{name:s("results.texture"),value:t.texture,icon:TN,color:"bg-green-500",description:s("results.textureDesc","Skin smoothness")},{name:s("results.clarity"),value:t.clarity,icon:Ea,color:"bg-purple-500",description:s("results.clarityDesc","Skin transparency")},{name:s("results.firmness"),value:t.firmness,icon:Sa,color:"bg-orange-500",description:s("results.firmnessDesc","Skin structure")},{name:s("results.elasticity"),value:t.elasticity,icon:uX,color:"bg-pink-500",description:s("results.elasticityDesc","Skin bounce")},{name:s("results.evenness"),value:t.evenness,icon:ln,color:"bg-indigo-500",description:s("results.evennessDesc","Tone uniformity")},{name:s("results.smoothness"),value:t.smoothness,icon:Yn,color:"bg-rose-500",description:s("results.smoothnessDesc","Surface quality")},{name:s("results.radiance"),value:t.radiance,icon:om,color:"bg-yellow-500",description:s("results.radianceDesc","Skin glow")},{name:s("results.poreQuality","Pore Quality"),value:100-t.poreSize,icon:gi,color:"bg-teal-500",description:s("results.poreDesc","Pore refinement")}],d=[{name:s("results.acne"),severity:t.acne,icon:od,color:"bg-red-500"},{name:s("results.wrinkles"),severity:t.wrinkles,icon:TN,color:"bg-orange-500"},{name:s("results.darkCircles"),severity:t.darkCircles,icon:Ea,color:"bg-purple-500"},{name:s("results.darkSpots"),severity:t.darkSpots,icon:ln,color:"bg-amber-500"},{name:s("results.redness"),severity:t.redness,icon:Yn,color:"bg-rose-500"},{name:s("results.uvDamage"),severity:t.uvDamage,icon:om,color:"bg-yellow-600"}],h=y=>y>=80?"text-green-600":y>=60?"text-yellow-600":"text-orange-600",p=y=>y>=80?{text:s("results.excellent","Excellent"),variant:"default",color:"bg-green-500"}:y>=60?{text:s("results.good","Good"),variant:"secondary",color:"bg-yellow-500"}:{text:s("results.needsCare","Needs Care"),variant:"outline",color:"bg-orange-500"},g=y=>y<20?{text:s("results.minimal","Minimal"),color:"bg-green-500"}:y<40?{text:s("results.mild","Mild"),color:"bg-yellow-500"}:y<60?{text:s("results.moderate","Moderate"),color:"bg-orange-500"}:{text:s("results.significant","Significant"),color:"bg-red-500"},x=t.actualAge?t.estimatedAge-t.actualAge:0;return o.jsxs("div",{className:`min-h-screen bg-background p-4 space-y-4 pb-20 ${r?"text-right":""}`,dir:r?"rtl":"ltr",children:[o.jsx(ze,{className:"border-primary/20",children:o.jsxs(Ue,{className:"p-6",children:[o.jsxs("div",{className:`flex items-center justify-between mb-4 ${r?"flex-row-reverse":""}`,children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:`flex items-center gap-2 mb-2 ${r?"flex-row-reverse":""}`,children:[o.jsx(ln,{className:"w-5 h-5 text-primary"}),o.jsx("h2",{className:"text-lg font-semibold",children:s("results.overallScore")})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:i(t.date)})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Rl.div,{className:`text-5xl font-bold ${h(t.overallScore)}`,initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},children:a(t.overallScore)}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("results.outOf","out of 100")})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(it,{...p(t.overallScore),children:p(t.overallScore).text}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(ho,{className:"w-4 h-4 text-muted-foreground"}),o.jsxs("span",{children:[s("results.skinAge","Skin Age"),": ",o.jsx("strong",{className:"font-bold text-primary",children:t.estimatedAge})]}),t.actualAge&&x!==0&&o.jsx(it,{variant:x<0?"default":"outline",className:"text-xs",children:x<0?`${Math.abs(x)} years younger`:`${x} years older`})]})]})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[t.faceDetected&&o.jsxs("div",{className:`flex items-center gap-2 mb-3 ${r?"flex-row-reverse":""}`,children:[o.jsxs(it,{variant:"default",className:"bg-green-500",children:[o.jsx(ln,{className:"w-3 h-3 mr-1"}),s("results.faceDetected","Face Detected")]}),t.faceLandmarksCount&&o.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.faceLandmarksCount," ",s("results.landmarks","landmarks")]})]}),o.jsxs("div",{className:"relative aspect-[3/4] bg-muted rounded-lg overflow-hidden",children:[o.jsx("img",{src:t.overlayImageUrl||t.imageUrl,alt:"Skin analysis",className:"w-full h-full object-cover"}),t.overlayImageUrl&&o.jsx("div",{className:"absolute top-2 right-2 z-10",children:o.jsxs(it,{variant:"secondary",className:"bg-black/60 text-white text-xs backdrop-blur-sm",children:[o.jsx(Ea,{className:"w-3 h-3 mr-1"}),s("results.aiOverlay","AI Analysis")]})}),!t.overlayImageUrl&&o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[t.hydration<60&&o.jsxs("div",{className:"absolute top-1/4 left-1/4 w-8 h-8",children:[o.jsx("div",{className:"w-full h-full border-2 border-blue-400 rounded-full bg-blue-400/20 animate-pulse"}),o.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs bg-blue-500 text-white px-2 py-1 rounded whitespace-nowrap",children:"Low Hydration"})]}),t.darkSpots>30&&o.jsxs("div",{className:"absolute top-1/3 right-1/4 w-6 h-6",children:[o.jsx("div",{className:"w-full h-full border-2 border-amber-400 rounded-full bg-amber-400/20"}),o.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs bg-amber-500 text-white px-2 py-1 rounded whitespace-nowrap",children:"Pigmentation"})]}),t.wrinkles>25&&o.jsxs("div",{className:"absolute bottom-1/3 left-1/3 w-10 h-2",children:[o.jsx("div",{className:"w-full h-full border-2 border-orange-400 rounded bg-orange-400/20"}),o.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs bg-orange-500 text-white px-2 py-1 rounded whitespace-nowrap",children:"Fine Lines"})]}),t.redness>30&&o.jsxs("div",{className:"absolute top-1/2 right-1/3 w-10 h-10",children:[o.jsx("div",{className:"w-full h-full border-2 border-rose-400 rounded-full bg-rose-400/20"}),o.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs bg-rose-500 text-white px-2 py-1 rounded",children:"Redness"})]})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsxs(be,{variant:"outline",size:"sm",className:"flex-1",children:[o.jsx(gK,{className:"w-4 h-4 mr-2"}),"Download"]}),o.jsxs(be,{variant:"outline",size:"sm",className:"flex-1",children:[o.jsx(iP,{className:"w-4 h-4 mr-2"}),"Share"]})]})]})}),o.jsxs(ze,{children:[o.jsxs(Ot,{className:"pb-3",children:[o.jsxs(Ft,{className:"flex items-center gap-2 text-lg",children:[o.jsx(Zr,{className:"w-5 h-5"}),"Detailed Analysis"]}),o.jsx(as,{children:"15+ skin parameters analyzed"})]}),o.jsx(Ue,{children:o.jsxs(Sr,{value:l,onValueChange:c,children:[o.jsxs(kr,{className:"grid w-full grid-cols-2 mb-4",children:[o.jsx(Jt,{value:"overview",children:"Overview"}),o.jsx(Jt,{value:"concerns",children:"Concerns"})]}),o.jsxs(Qt,{value:"overview",className:"space-y-3",children:[o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Skin Type"}),o.jsx(it,{variant:"outline",className:"capitalize",children:t.skinType})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-xs",children:[o.jsx("span",{className:"text-muted-foreground",children:"Oiliness Level"}),o.jsxs("span",{className:"font-medium",children:[t.oiliness,"/100"]})]}),o.jsx(uo,{value:t.oiliness,className:"h-1.5"})]})]}),o.jsx("div",{className:"space-y-3",children:u.map((y,v)=>{const w=y.icon;return o.jsxs(Rl.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:v*.05},className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-8 h-8 ${y.color} rounded-lg flex items-center justify-center`,children:o.jsx(w,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:y.name}),o.jsx("p",{className:"text-xs text-muted-foreground",children:y.description})]})]}),o.jsxs("span",{className:"text-sm font-bold",children:[y.value,"/100"]})]}),o.jsx(uo,{value:y.value,className:"h-2"})]},y.name)})})]}),o.jsxs(Qt,{value:"concerns",className:"space-y-3",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Lower values indicate better skin condition"}),d.map((y,v)=>{const w=y.icon,N=g(y.severity);return o.jsxs(Rl.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:v*.05},className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-8 h-8 ${y.color} rounded-lg flex items-center justify-center`,children:o.jsx(w,{className:"w-4 h-4 text-white"})}),o.jsx("span",{className:"text-sm font-medium",children:y.name})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm font-medium",children:[y.severity,"/100"]}),o.jsx(it,{variant:"outline",className:`${N.color} text-white border-0 text-xs`,children:N.text})]})]}),o.jsx(uo,{value:y.severity,className:"h-2"})]},y.name)})]})]})})]}),t.aiAnalysis&&o.jsxs(ze,{className:"border-primary/20 bg-primary/5",children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2 text-base",children:[o.jsx(ln,{className:"w-4 h-4"}),"AI Insight"]})}),o.jsx(Ue,{children:o.jsx("p",{className:"text-sm text-muted-foreground",children:t.aiAnalysis})})]}),o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Go,{className:"w-5 h-5"}),"Personalized Recommendations"]}),o.jsxs(as,{children:[t.recommendations.length," products matched to your skin"]})]}),o.jsxs(Ue,{children:[o.jsx("div",{className:"space-y-2 mb-4",children:t.recommendations.map((y,v)=>o.jsxs(Rl.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:v*.1},className:"flex items-start gap-3 p-2 rounded-lg hover:bg-secondary/50 transition-colors",children:[o.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:o.jsx("span",{className:"text-white text-xs font-bold",children:v+1})}),o.jsx("span",{className:"text-sm flex-1",children:y})]},v))}),o.jsxs(be,{onClick:e,className:"w-full",size:"lg",children:[o.jsx(Go,{className:"w-4 h-4 mr-2"}),"Shop Recommended Products"]})]})]}),n?.type==="guest"&&o.jsx(ze,{className:"border-primary/20 bg-gradient-to-br from-primary/10 to-primary/5",children:o.jsxs(Ue,{className:"p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center mx-auto mb-3",children:o.jsx(Zr,{className:"w-6 h-6 text-white"})}),o.jsx("h4",{className:"font-semibold mb-2",children:s("results.trackJourney","Track Your Skin Journey")}),o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:s("results.upgradePrompt","Upgrade to Member for scan history, progress tracking, and personalized routines")}),o.jsx(be,{className:"w-full",children:s("results.upgradeToMember","Upgrade to Member")})]})}),o.jsxs("div",{className:`flex items-center justify-center gap-2 py-4 border-t border-border ${r?"flex-row-reverse":""}`,children:[o.jsx(ln,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:s("results.poweredBySkindu","Analysis powered by Skindu")})]})]})}function NDe(t){const e=SDe(t),n=T.forwardRef((s,r)=>{const{children:i,...a}=s,l=T.Children.toArray(i),c=l.find(CDe);if(c){const u=c.props.children,d=l.map(h=>h===c?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return o.jsx(e,{...a,ref:r,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return o.jsx(e,{...a,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function SDe(t){const e=T.forwardRef((n,s)=>{const{children:r,...i}=n;if(T.isValidElement(r)){const a=IDe(r),l=TDe(i,r.props);return r.type!==T.Fragment&&(l.ref=s?Xl(s,a):a),T.cloneElement(r,l)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var kDe=Symbol("radix.slottable");function CDe(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===kDe}function TDe(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function IDe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ev="Dialog",[oz]=ei(Ev),[jDe,wo]=oz(Ev),lz=t=>{const{__scopeDialog:e,children:n,open:s,defaultOpen:r,onOpenChange:i,modal:a=!0}=t,l=T.useRef(null),c=T.useRef(null),[u,d]=ra({prop:s,defaultProp:r??!1,onChange:i,caller:Ev});return o.jsx(jDe,{scope:e,triggerRef:l,contentRef:c,contentId:ja(),titleId:ja(),descriptionId:ja(),open:u,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:a,children:n})};lz.displayName=Ev;var cz="DialogTrigger",uz=T.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=wo(cz,n),i=qt(e,r.triggerRef);return o.jsx(Dt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":KT(r.open),...s,ref:i,onClick:gt(t.onClick,r.onOpenToggle)})});uz.displayName=cz;var GT="DialogPortal",[EDe,dz]=oz(GT,{forceMount:void 0}),hz=t=>{const{__scopeDialog:e,forceMount:n,children:s,container:r}=t,i=wo(GT,e);return o.jsx(EDe,{scope:e,forceMount:n,children:T.Children.map(s,a=>o.jsx(ti,{present:n||i.open,children:o.jsx(Cy,{asChild:!0,container:r,children:a})}))})};hz.displayName=GT;var oy="DialogOverlay",fz=T.forwardRef((t,e)=>{const n=dz(oy,t.__scopeDialog),{forceMount:s=n.forceMount,...r}=t,i=wo(oy,t.__scopeDialog);return i.modal?o.jsx(ti,{present:s||i.open,children:o.jsx(ADe,{...r,ref:e})}):null});fz.displayName=oy;var $De=NDe("DialogOverlay.RemoveScroll"),ADe=T.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=wo(oy,n);return o.jsx(Iy,{as:$De,allowPinchZoom:!0,shards:[r.contentRef],children:o.jsx(Dt.div,{"data-state":KT(r.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Dd="DialogContent",pz=T.forwardRef((t,e)=>{const n=dz(Dd,t.__scopeDialog),{forceMount:s=n.forceMount,...r}=t,i=wo(Dd,t.__scopeDialog);return o.jsx(ti,{present:s||i.open,children:i.modal?o.jsx(RDe,{...r,ref:e}):o.jsx(DDe,{...r,ref:e})})});pz.displayName=Dd;var RDe=T.forwardRef((t,e)=>{const n=wo(Dd,t.__scopeDialog),s=T.useRef(null),r=qt(e,n.contentRef,s);return T.useEffect(()=>{const i=s.current;if(i)return H4(i)},[]),o.jsx(mz,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gt(t.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:gt(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:gt(t.onFocusOutside,i=>i.preventDefault())})}),DDe=T.forwardRef((t,e)=>{const n=wo(Dd,t.__scopeDialog),s=T.useRef(!1),r=T.useRef(!1);return o.jsx(mz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(s.current||n.triggerRef.current?.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=i.target;n.triggerRef.current?.contains(a)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),mz=T.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,...a}=t,l=wo(Dd,n),c=T.useRef(null),u=qt(e,c);return F4(),o.jsxs(o.Fragment,{children:[o.jsx(vy,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:o.jsx(yy,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":KT(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(PDe,{titleId:l.titleId}),o.jsx(ODe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),HT="DialogTitle",gz=T.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=wo(HT,n);return o.jsx(Dt.h2,{id:r.titleId,...s,ref:e})});gz.displayName=HT;var xz="DialogDescription",yz=T.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=wo(xz,n);return o.jsx(Dt.p,{id:r.descriptionId,...s,ref:e})});yz.displayName=xz;var vz="DialogClose",bz=T.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=wo(vz,n);return o.jsx(Dt.button,{type:"button",...s,ref:e,onClick:gt(t.onClick,()=>r.onOpenChange(!1))})});bz.displayName=vz;function KT(t){return t?"open":"closed"}var wz="DialogTitleWarning",[BOe,Nz]=GG(wz,{contentName:Dd,titleName:HT,docsSlug:"dialog"}),PDe=({titleId:t})=>{const e=Nz(wz),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return T.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},_De="DialogDescriptionWarning",ODe=({contentRef:t,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Nz(_De).contentName}}.`;return T.useEffect(()=>{const r=t.current?.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(s))},[s,t,e]),null},Sz=lz,FDe=uz,kz=hz,qT=fz,Cz=pz,Tz=gz,Iz=yz,jz=bz;function Jo({...t}){return o.jsx(Sz,{"data-slot":"dialog",...t})}function MDe({...t}){return o.jsx(kz,{"data-slot":"dialog-portal",...t})}function LDe({className:t,...e}){return o.jsx(qT,{"data-slot":"dialog-overlay",className:Bt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function Qo({className:t,children:e,...n}){return o.jsxs(MDe,{"data-slot":"dialog-portal",children:[o.jsx(LDe,{}),o.jsxs(Cz,{"data-slot":"dialog-content",className:Bt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[e,o.jsxs(jz,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[o.jsx(Us,{}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Bc({className:t,...e}){return o.jsx("div",{"data-slot":"dialog-header",className:Bt("flex flex-col gap-2 text-center sm:text-left",t),...e})}function zc({className:t,...e}){return o.jsx(Tz,{"data-slot":"dialog-title",className:Bt("text-lg leading-none font-semibold",t),...e})}function XT({className:t,...e}){return o.jsx(Iz,{"data-slot":"dialog-description",className:Bt("text-muted-foreground text-sm",t),...e})}function Rm(t,[e,n]){return Math.min(n,Math.max(e,t))}function BDe(t){const e=zDe(t),n=T.forwardRef((s,r)=>{const{children:i,...a}=s,l=T.Children.toArray(i),c=l.find(UDe);if(c){const u=c.props.children,d=l.map(h=>h===c?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return o.jsx(e,{...a,ref:r,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return o.jsx(e,{...a,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function zDe(t){const e=T.forwardRef((n,s)=>{const{children:r,...i}=n;if(T.isValidElement(r)){const a=GDe(r),l=WDe(i,r.props);return r.type!==T.Fragment&&(l.ref=s?Xl(s,a):a),T.cloneElement(r,l)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var VDe=Symbol("radix.slottable");function UDe(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===VDe}function WDe(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function GDe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ez=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),HDe="VisuallyHidden",KDe=T.forwardRef((t,e)=>o.jsx(Dt.span,{...t,ref:e,style:{...Ez,...t.style}}));KDe.displayName=HDe;var qDe=[" ","Enter","ArrowUp","ArrowDown"],XDe=[" ","Enter"],Pd="Select",[$v,Av,YDe]=Pm(Pd),[ep]=ei(Pd,[YDe,ky]),Rv=ky(),[ZDe,wu]=ep(Pd),[JDe,QDe]=ep(Pd),$z=t=>{const{__scopeSelect:e,children:n,open:s,defaultOpen:r,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:p,required:g,form:x}=t,y=Rv(e),[v,w]=T.useState(null),[N,k]=T.useState(null),[C,j]=T.useState(!1),R=ou(u),[_,A]=ra({prop:s,defaultProp:r??!1,onChange:i,caller:Pd}),[O,L]=ra({prop:a,defaultProp:l,onChange:c,caller:Pd}),D=T.useRef(null),q=v?x||!!v.closest("form"):!0,[V,ne]=T.useState(new Set),J=Array.from(V).map(ee=>ee.props.value).join(";");return o.jsx(UP,{...y,children:o.jsxs(ZDe,{required:g,scope:e,trigger:v,onTriggerChange:w,valueNode:N,onValueNodeChange:k,valueNodeHasChildren:C,onValueNodeHasChildrenChange:j,contentId:ja(),value:O,onValueChange:L,open:_,onOpenChange:A,dir:R,triggerPointerDownPosRef:D,disabled:p,children:[o.jsx($v.Provider,{scope:e,children:o.jsx(JDe,{scope:t.__scopeSelect,onNativeOptionAdd:T.useCallback(ee=>{ne(te=>new Set(te).add(ee))},[]),onNativeOptionRemove:T.useCallback(ee=>{ne(te=>{const X=new Set(te);return X.delete(ee),X})},[]),children:n})}),q?o.jsxs(Jz,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:O,onChange:ee=>L(ee.target.value),disabled:p,form:x,children:[O===void 0?o.jsx("option",{value:""}):null,Array.from(V)]},J):null]})})};$z.displayName=Pd;var Az="SelectTrigger",Rz=T.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:s=!1,...r}=t,i=Rv(n),a=wu(Az,n),l=a.disabled||s,c=qt(e,a.onTriggerChange),u=Av(n),d=T.useRef("touch"),[h,p,g]=eV(y=>{const v=u().filter(k=>!k.disabled),w=v.find(k=>k.value===a.value),N=tV(v,y,w);N!==void 0&&a.onValueChange(N.value)}),x=y=>{l||(a.onOpenChange(!0),g()),y&&(a.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return o.jsx(WP,{asChild:!0,...i,children:o.jsx(Dt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Qz(a.value)?"":void 0,...r,ref:c,onClick:gt(r.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&x(y)}),onPointerDown:gt(r.onPointerDown,y=>{d.current=y.pointerType;const v=y.target;v.hasPointerCapture(y.pointerId)&&v.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:gt(r.onKeyDown,y=>{const v=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(v&&y.key===" ")&&qDe.includes(y.key)&&(x(),y.preventDefault())})})})});Rz.displayName=Az;var Dz="SelectValue",Pz=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:r,children:i,placeholder:a="",...l}=t,c=wu(Dz,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=qt(e,c.onValueNodeChange);return Gs(()=>{u(d)},[u,d]),o.jsx(Dt.span,{...l,ref:h,style:{pointerEvents:"none"},children:Qz(c.value)?o.jsx(o.Fragment,{children:a}):i})});Pz.displayName=Dz;var ePe="SelectIcon",_z=T.forwardRef((t,e)=>{const{__scopeSelect:n,children:s,...r}=t;return o.jsx(Dt.span,{"aria-hidden":!0,...r,ref:e,children:s||""})});_z.displayName=ePe;var tPe="SelectPortal",Oz=t=>o.jsx(Cy,{asChild:!0,...t});Oz.displayName=tPe;var _d="SelectContent",Fz=T.forwardRef((t,e)=>{const n=wu(_d,t.__scopeSelect),[s,r]=T.useState();if(Gs(()=>{r(new DocumentFragment)},[]),!n.open){const i=s;return i?_m.createPortal(o.jsx(Mz,{scope:t.__scopeSelect,children:o.jsx($v.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(Lz,{...t,ref:e})});Fz.displayName=_d;var eo=10,[Mz,Nu]=ep(_d),nPe="SelectContentImpl",sPe=BDe("SelectContent.RemoveScroll"),Lz=T.forwardRef((t,e)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:x,hideWhenDetached:y,avoidCollisions:v,...w}=t,N=wu(_d,n),[k,C]=T.useState(null),[j,R]=T.useState(null),_=qt(e,Ce=>C(Ce)),[A,O]=T.useState(null),[L,D]=T.useState(null),q=Av(n),[V,ne]=T.useState(!1),J=T.useRef(!1);T.useEffect(()=>{if(k)return H4(k)},[k]),F4();const ee=T.useCallback(Ce=>{const[Re,...se]=q().map(Ye=>Ye.ref.current),[Te]=se.slice(-1),Me=document.activeElement;for(const Ye of Ce)if(Ye===Me||(Ye?.scrollIntoView({block:"nearest"}),Ye===Re&&j&&(j.scrollTop=0),Ye===Te&&j&&(j.scrollTop=j.scrollHeight),Ye?.focus(),document.activeElement!==Me))return},[q,j]),te=T.useCallback(()=>ee([A,k]),[ee,A,k]);T.useEffect(()=>{V&&te()},[V,te]);const{onOpenChange:X,triggerPointerDownPosRef:Q}=N;T.useEffect(()=>{if(k){let Ce={x:0,y:0};const Re=Te=>{Ce={x:Math.abs(Math.round(Te.pageX)-(Q.current?.x??0)),y:Math.abs(Math.round(Te.pageY)-(Q.current?.y??0))}},se=Te=>{Ce.x<=10&&Ce.y<=10?Te.preventDefault():k.contains(Te.target)||X(!1),document.removeEventListener("pointermove",Re),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",se,{capture:!0})}}},[k,X,Q]),T.useEffect(()=>{const Ce=()=>X(!1);return window.addEventListener("blur",Ce),window.addEventListener("resize",Ce),()=>{window.removeEventListener("blur",Ce),window.removeEventListener("resize",Ce)}},[X]);const[G,H]=eV(Ce=>{const Re=q().filter(Me=>!Me.disabled),se=Re.find(Me=>Me.ref.current===document.activeElement),Te=tV(Re,Ce,se);Te&&setTimeout(()=>Te.ref.current.focus())}),ie=T.useCallback((Ce,Re,se)=>{const Te=!J.current&&!se;(N.value!==void 0&&N.value===Re||Te)&&(O(Ce),Te&&(J.current=!0))},[N.value]),de=T.useCallback(()=>k?.focus(),[k]),ke=T.useCallback((Ce,Re,se)=>{const Te=!J.current&&!se;(N.value!==void 0&&N.value===Re||Te)&&D(Ce)},[N.value]),we=s==="popper"?y4:Bz,Ee=we===y4?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:x,hideWhenDetached:y,avoidCollisions:v}:{};return o.jsx(Mz,{scope:n,content:k,viewport:j,onViewportChange:R,itemRefCallback:ie,selectedItem:A,onItemLeave:de,itemTextRefCallback:ke,focusSelectedItem:te,selectedItemText:L,position:s,isPositioned:V,searchRef:G,children:o.jsx(Iy,{as:sPe,allowPinchZoom:!0,children:o.jsx(vy,{asChild:!0,trapped:N.open,onMountAutoFocus:Ce=>{Ce.preventDefault()},onUnmountAutoFocus:gt(r,Ce=>{N.trigger?.focus({preventScroll:!0}),Ce.preventDefault()}),children:o.jsx(yy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:Ce=>Ce.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:o.jsx(we,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:Ce=>Ce.preventDefault(),...w,...Ee,onPlaced:()=>ne(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:gt(w.onKeyDown,Ce=>{const Re=Ce.ctrlKey||Ce.altKey||Ce.metaKey;if(Ce.key==="Tab"&&Ce.preventDefault(),!Re&&Ce.key.length===1&&H(Ce.key),["ArrowUp","ArrowDown","Home","End"].includes(Ce.key)){let Te=q().filter(Me=>!Me.disabled).map(Me=>Me.ref.current);if(["ArrowUp","End"].includes(Ce.key)&&(Te=Te.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ce.key)){const Me=Ce.target,Ye=Te.indexOf(Me);Te=Te.slice(Ye+1)}setTimeout(()=>ee(Te)),Ce.preventDefault()}})})})})})})});Lz.displayName=nPe;var rPe="SelectItemAlignedPosition",Bz=T.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:s,...r}=t,i=wu(_d,n),a=Nu(_d,n),[l,c]=T.useState(null),[u,d]=T.useState(null),h=qt(e,_=>d(_)),p=Av(n),g=T.useRef(!1),x=T.useRef(!0),{viewport:y,selectedItem:v,selectedItemText:w,focusSelectedItem:N}=a,k=T.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&y&&v&&w){const _=i.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),O=i.valueNode.getBoundingClientRect(),L=w.getBoundingClientRect();if(i.dir!=="rtl"){const Me=L.left-A.left,Ye=O.left-Me,me=_.left-Ye,xe=_.width+me,$e=Math.max(xe,A.width),Ze=window.innerWidth-eo,bt=Rm(Ye,[eo,Math.max(eo,Ze-$e)]);l.style.minWidth=xe+"px",l.style.left=bt+"px"}else{const Me=A.right-L.right,Ye=window.innerWidth-O.right-Me,me=window.innerWidth-_.right-Ye,xe=_.width+me,$e=Math.max(xe,A.width),Ze=window.innerWidth-eo,bt=Rm(Ye,[eo,Math.max(eo,Ze-$e)]);l.style.minWidth=xe+"px",l.style.right=bt+"px"}const D=p(),q=window.innerHeight-eo*2,V=y.scrollHeight,ne=window.getComputedStyle(u),J=parseInt(ne.borderTopWidth,10),ee=parseInt(ne.paddingTop,10),te=parseInt(ne.borderBottomWidth,10),X=parseInt(ne.paddingBottom,10),Q=J+ee+V+X+te,G=Math.min(v.offsetHeight*5,Q),H=window.getComputedStyle(y),ie=parseInt(H.paddingTop,10),de=parseInt(H.paddingBottom,10),ke=_.top+_.height/2-eo,we=q-ke,Ee=v.offsetHeight/2,Ce=v.offsetTop+Ee,Re=J+ee+Ce,se=Q-Re;if(Re<=ke){const Me=D.length>0&&v===D[D.length-1].ref.current;l.style.bottom="0px";const Ye=u.clientHeight-y.offsetTop-y.offsetHeight,me=Math.max(we,Ee+(Me?de:0)+Ye+te),xe=Re+me;l.style.height=xe+"px"}else{const Me=D.length>0&&v===D[0].ref.current;l.style.top="0px";const me=Math.max(ke,J+y.offsetTop+(Me?ie:0)+Ee)+se;l.style.height=me+"px",y.scrollTop=Re-ke+y.offsetTop}l.style.margin=`${eo}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=q+"px",s?.(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,y,v,w,i.dir,s]);Gs(()=>k(),[k]);const[C,j]=T.useState();Gs(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const R=T.useCallback(_=>{_&&x.current===!0&&(k(),N?.(),x.current=!1)},[k,N]);return o.jsx(aPe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:o.jsx(Dt.div,{...r,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Bz.displayName=rPe;var iPe="SelectPopperPosition",y4=T.forwardRef((t,e)=>{const{__scopeSelect:n,align:s="start",collisionPadding:r=eo,...i}=t,a=Rv(n);return o.jsx(GP,{...a,...i,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});y4.displayName=iPe;var[aPe,YT]=ep(_d,{}),v4="SelectViewport",zz=T.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:s,...r}=t,i=Nu(v4,n),a=YT(v4,n),l=qt(e,i.onViewportChange),c=T.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx($v.Slot,{scope:n,children:o.jsx(Dt.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:gt(r.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=a;if(p?.current&&h){const g=Math.abs(c.current-d.scrollTop);if(g>0){const x=window.innerHeight-eo*2,y=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),w=Math.max(y,v);if(w<x){const N=w+g,k=Math.min(x,N),C=N-k;h.style.height=k+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});zz.displayName=v4;var Vz="SelectGroup",[oPe,lPe]=ep(Vz),cPe=T.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=ja();return o.jsx(oPe,{scope:n,id:r,children:o.jsx(Dt.div,{role:"group","aria-labelledby":r,...s,ref:e})})});cPe.displayName=Vz;var Uz="SelectLabel",uPe=T.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=lPe(Uz,n);return o.jsx(Dt.div,{id:r.id,...s,ref:e})});uPe.displayName=Uz;var ly="SelectItem",[dPe,Wz]=ep(ly),Gz=T.forwardRef((t,e)=>{const{__scopeSelect:n,value:s,disabled:r=!1,textValue:i,...a}=t,l=wu(ly,n),c=Nu(ly,n),u=l.value===s,[d,h]=T.useState(i??""),[p,g]=T.useState(!1),x=qt(e,N=>c.itemRefCallback?.(N,s,r)),y=ja(),v=T.useRef("touch"),w=()=>{r||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(dPe,{scope:n,value:s,disabled:r,textId:y,isSelected:u,onItemTextChange:T.useCallback(N=>{h(k=>k||(N?.textContent??"").trim())},[]),children:o.jsx($v.ItemSlot,{scope:n,value:s,disabled:r,textValue:d,children:o.jsx(Dt.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:x,onFocus:gt(a.onFocus,()=>g(!0)),onBlur:gt(a.onBlur,()=>g(!1)),onClick:gt(a.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:gt(a.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:gt(a.onPointerDown,N=>{v.current=N.pointerType}),onPointerMove:gt(a.onPointerMove,N=>{v.current=N.pointerType,r?c.onItemLeave?.():v.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:gt(a.onPointerLeave,N=>{N.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:gt(a.onKeyDown,N=>{c.searchRef?.current!==""&&N.key===" "||(XDe.includes(N.key)&&w(),N.key===" "&&N.preventDefault())})})})})});Gz.displayName=ly;var Wp="SelectItemText",Hz=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:r,...i}=t,a=wu(Wp,n),l=Nu(Wp,n),c=Wz(Wp,n),u=QDe(Wp,n),[d,h]=T.useState(null),p=qt(e,w=>h(w),c.onItemTextChange,w=>l.itemTextRefCallback?.(w,c.value,c.disabled)),g=d?.textContent,x=T.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:v}=u;return Gs(()=>(y(x),()=>v(x)),[y,v,x]),o.jsxs(o.Fragment,{children:[o.jsx(Dt.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?_m.createPortal(i.children,a.valueNode):null]})});Hz.displayName=Wp;var Kz="SelectItemIndicator",qz=T.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return Wz(Kz,n).isSelected?o.jsx(Dt.span,{"aria-hidden":!0,...s,ref:e}):null});qz.displayName=Kz;var b4="SelectScrollUpButton",Xz=T.forwardRef((t,e)=>{const n=Nu(b4,t.__scopeSelect),s=YT(b4,t.__scopeSelect),[r,i]=T.useState(!1),a=qt(e,s.onScrollButtonChange);return Gs(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?o.jsx(Zz,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Xz.displayName=b4;var w4="SelectScrollDownButton",Yz=T.forwardRef((t,e)=>{const n=Nu(w4,t.__scopeSelect),s=YT(w4,t.__scopeSelect),[r,i]=T.useState(!1),a=qt(e,s.onScrollButtonChange);return Gs(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?o.jsx(Zz,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Yz.displayName=w4;var Zz=T.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:s,...r}=t,i=Nu("SelectScrollButton",n),a=T.useRef(null),l=Av(n),c=T.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return T.useEffect(()=>()=>c(),[c]),Gs(()=>{l().find(d=>d.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),o.jsx(Dt.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:gt(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:gt(r.onPointerMove,()=>{i.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:gt(r.onPointerLeave,()=>{c()})})}),hPe="SelectSeparator",fPe=T.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return o.jsx(Dt.div,{"aria-hidden":!0,...s,ref:e})});fPe.displayName=hPe;var N4="SelectArrow",pPe=T.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=Rv(n),i=wu(N4,n),a=Nu(N4,n);return i.open&&a.position==="popper"?o.jsx(HP,{...r,...s,ref:e}):null});pPe.displayName=N4;var mPe="SelectBubbleInput",Jz=T.forwardRef(({__scopeSelect:t,value:e,...n},s)=>{const r=T.useRef(null),i=qt(s,r),a=zm(e);return T.useEffect(()=>{const l=r.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[a,e]),o.jsx(Dt.select,{...n,style:{...Ez,...n.style},ref:i,defaultValue:e})});Jz.displayName=mPe;function Qz(t){return t===""||t===void 0}function eV(t){const e=br(t),n=T.useRef(""),s=T.useRef(0),r=T.useCallback(a=>{const l=n.current+a;e(l),(function c(u){n.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),i=T.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,r,i]}function tV(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=gPe(t,Math.max(i,0));r.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function gPe(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var xPe=$z,yPe=Rz,vPe=Pz,bPe=_z,wPe=Oz,NPe=Fz,SPe=zz,kPe=Gz,CPe=Hz,TPe=qz,IPe=Xz,jPe=Yz;function Il({...t}){return o.jsx(xPe,{"data-slot":"select",...t})}function jl({...t}){return o.jsx(vPe,{"data-slot":"select-value",...t})}function El({className:t,size:e="default",children:n,...s}){return o.jsxs(yPe,{"data-slot":"select-trigger","data-size":e,className:Bt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s,children:[n,o.jsx(bPe,{asChild:!0,children:o.jsx(py,{className:"size-4 opacity-50"})})]})}function $l({className:t,children:e,position:n="popper",...s}){return o.jsx(wPe,{children:o.jsxs(NPe,{"data-slot":"select-content",className:Bt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...s,children:[o.jsx(EPe,{}),o.jsx(SPe,{className:Bt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),o.jsx($Pe,{})]})})}function Vs({className:t,children:e,...n}){return o.jsxs(kPe,{"data-slot":"select-item",className:Bt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[o.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:o.jsx(TPe,{children:o.jsx(an,{className:"size-4"})})}),o.jsx(CPe,{children:e})]})}function EPe({className:t,...e}){return o.jsx(IPe,{"data-slot":"select-scroll-up-button",className:Bt("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(JD,{className:"size-4"})})}function $Pe({className:t,...e}){return o.jsx(jPe,{"data-slot":"select-scroll-down-button",className:Bt("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(py,{className:"size-4"})})}var Dv="Switch",[APe]=ei(Dv),[RPe,DPe]=APe(Dv),nV=T.forwardRef((t,e)=>{const{__scopeSwitch:n,name:s,checked:r,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[p,g]=T.useState(null),x=qt(e,k=>g(k)),y=T.useRef(!1),v=p?d||!!p.closest("form"):!0,[w,N]=ra({prop:r,defaultProp:i??!1,onChange:u,caller:Dv});return o.jsxs(RPe,{scope:n,checked:w,disabled:l,children:[o.jsx(Dt.button,{type:"button",role:"switch","aria-checked":w,"aria-required":a,"data-state":aV(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onClick:gt(t.onClick,k=>{N(C=>!C),v&&(y.current=k.isPropagationStopped(),y.current||k.stopPropagation())})}),v&&o.jsx(iV,{control:p,bubbles:!y.current,name:s,value:c,checked:w,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});nV.displayName=Dv;var sV="SwitchThumb",rV=T.forwardRef((t,e)=>{const{__scopeSwitch:n,...s}=t,r=DPe(sV,n);return o.jsx(Dt.span,{"data-state":aV(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:e})});rV.displayName=sV;var PPe="SwitchBubbleInput",iV=T.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:s=!0,...r},i)=>{const a=T.useRef(null),l=qt(a,i),c=zm(n),u=Mm(e);return T.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&g){const x=new Event("click",{bubbles:s});g.call(d,n),d.dispatchEvent(x)}},[c,n,s]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:l,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});iV.displayName=PPe;function aV(t){return t?"checked":"unchecked"}var _Pe=nV,OPe=rV;function _i({className:t,...e}){return o.jsx(_Pe,{"data-slot":"switch",className:Bt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:o.jsx(OPe,{"data-slot":"switch-thumb",className:Bt("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function of(t,e){const[n,s]=T.useState(()=>{try{const i=window.localStorage.getItem(t);return i?JSON.parse(i):e}catch(i){return console.error(`Error loading ${t} from localStorage:`,i),e}});return[n,i=>{try{const a=i instanceof Function?i(n):i;s(a),window.localStorage.setItem(t,JSON.stringify(a))}catch(a){console.error(`Error saving ${t} to localStorage:`,a)}}]}const wa={getItem:(t,e)=>{try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):e}catch(n){return console.error(`Error reading ${t}:`,n),e}},setItem:(t,e)=>{try{window.localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error(`Error saving ${t}:`,n)}},removeItem:t=>{try{window.localStorage.removeItem(t)}catch(e){console.error(`Error removing ${t}:`,e)}},clear:()=>{try{window.localStorage.clear()}catch(t){console.error("Error clearing localStorage:",t)}},hasItem:t=>window.localStorage.getItem(t)!==null},Oo={USER:"skinpai_user",SCAN_HISTORY:"skinpai_scan_history",CURRENT_SCAN:"skinpai_current_scan"};function FPe({user:t,scanHistory:e,onNavigate:n,onViewScan:s}){const{t:r,direction:i,flexDir:a,textAlign:l}=Hm(),[c,u]=T.useState(null),[d,h]=T.useState(!0);T.useEffect(()=>{(async()=>{try{const{data:Te,error:Me}=await Ln.getSkinProgress(30);Te&&!Me&&u(Te)}catch(Te){console.error("Failed to load skin progress:",Te)}finally{h(!1)}})()},[]);const[p,g]=of("skinpai_routine_items",[{id:1,name:"Morning Cleanser",time:"AM",completed:!0,reminderTime:"07:00",reminderEnabled:!0},{id:2,name:"Vitamin C Serum",time:"AM",completed:!0,reminderTime:"07:05",reminderEnabled:!0},{id:3,name:"SPF 50 Sunscreen",time:"AM",completed:!1,reminderTime:"07:10",reminderEnabled:!1},{id:4,name:"Evening Cleanser",time:"PM",completed:!1,reminderTime:"21:00",reminderEnabled:!0},{id:5,name:"Retinol Treatment",time:"PM",completed:!1,reminderTime:"21:30",reminderEnabled:!0},{id:6,name:"Night Moisturizer",time:"PM",completed:!1,reminderTime:"21:35",reminderEnabled:!1}]);of("skinpai_reminders",[{id:"rem-1",routineItemId:1,time:"07:00",frequency:"daily",enabled:!0,soundEnabled:!0,vibrationEnabled:!0}]);const[x,y]=T.useState(null),[v,w]=T.useState(!1),[N,k]=T.useState(!1),[C,j]=T.useState(!1),[R,_]=T.useState({name:"",time:"AM",completed:!1,reminderTime:"07:00",reminderEnabled:!1}),[A,O]=T.useState({time:"07:00",frequency:"daily",soundEnabled:!0,vibrationEnabled:!0,enabled:!0}),L=se=>{if(!se||se.length<2)return{trend:"stable",value:0};const Te=se[se.length-1]?.value||0,Me=se[se.length-2]?.value||0,Ye=Te-Me;return Ye>0?{trend:"up",value:Math.round(Ye)}:Ye<0?{trend:"down",value:Math.round(Math.abs(Ye))}:{trend:"stable",value:0}},D=L(c?.hydrationProgress);L(c?.acneProgress);const q={trend:(c?.scoreChange||0)>0?"up":(c?.scoreChange||0)<0?"down":"stable",value:Math.abs(Math.round(c?.scoreChange||0))},V=c?.hydrationProgress?.slice(-1)[0]?.value??e[0]?.hydration??0;c?.acneProgress?.slice(-1)[0]?.value??e[0]?.acne;const ne=c?.averageScore??e[0]?.overallScore??0,J=[{id:"hydration",title:"Hydration Level",value:Math.round(V),maxValue:100,unit:"%",trend:D.trend,trendValue:D.value,color:"text-blue-600",icon:"droplets",description:"Skin moisture retention"},{id:"evenness",title:"Skin Evenness",value:e[0]?.evenness||0,maxValue:100,unit:"%",trend:"up",trendValue:3,color:"text-green-600",icon:"activity",description:"Skin tone uniformity"},{id:"clarity",title:"Clarity Score",value:e[0]?.clarity||0,maxValue:100,unit:"%",trend:"stable",trendValue:0,color:"text-purple-600",icon:"sparkles",description:"Skin transparency and radiance"},{id:"firmness",title:"Firmness",value:e[0]?.firmness||0,maxValue:100,unit:"%",trend:"up",trendValue:2,color:"text-orange-600",icon:"shield",description:"Skin elasticity and strength"},{id:"overall-score",title:"Overall Score",value:Math.round(ne),maxValue:100,unit:"%",trend:q.trend,trendValue:q.value,color:"text-emerald-600",icon:"bar-chart-3",description:c?`Based on ${c.totalScans} scans`:"Overall skin health"},{id:"routine-streak",title:"Routine Streak",value:12,maxValue:30,unit:"days",trend:"up",trendValue:1,color:"text-red-600",icon:"flame",description:"Consecutive days following routine"},{id:"weekly-scans",title:"Weekly Progress",value:2,maxValue:3,unit:"scans",trend:"stable",trendValue:0,color:"text-indigo-600",icon:"bar-chart-3",description:"Skin analysis frequency"},{id:"product-usage",title:"Product Consistency",value:85,maxValue:100,unit:"%",trend:"up",trendValue:7,color:"text-pink-600",icon:"heart",description:"Skincare product adherence"},{id:"uv-protection",title:"UV Protection",value:6,maxValue:7,unit:"days",trend:"down",trendValue:1,color:"text-yellow-600",icon:"sun",description:"Daily sunscreen application"},{id:"sleep-quality",title:"Sleep Impact",value:7.5,maxValue:10,unit:"hrs",trend:"up",trendValue:.5,color:"text-violet-600",icon:"moon",description:"Sleep quality affecting skin"},{id:"hydration-intake",title:"Water Intake",value:2.1,maxValue:3,unit:"L",trend:"stable",trendValue:0,color:"text-cyan-600",icon:"coffee",description:"Daily water consumption"}],ee=[{id:"first-scan",title:"First Scan",description:"Complete your first skin analysis",icon:"",earned:!0,earnedDate:"2024-12-01",progress:1,maxProgress:1},{id:"week-streak",title:"Week Warrior",description:"Maintain routine for 7 days",icon:"",earned:!0,earnedDate:"2024-12-08",progress:7,maxProgress:7},{id:"month-streak",title:"Monthly Master",description:"Maintain routine for 30 days",icon:"",earned:!1,progress:12,maxProgress:30},{id:"improvement",title:"Glow Up",description:"Improve overall score by 10 points",icon:"",earned:!1,progress:6,maxProgress:10}],X=(()=>{if(e.length<2)return null;const se=e[0].overallScore,Te=e[1].overallScore,Me=se-Te;return{value:Math.abs(Me),isPositive:Me>0,text:Me>0?"improvement":"decline"}})(),Q=(se,Te)=>({droplets:o.jsx(sm,{className:Te}),activity:o.jsx(TN,{className:Te}),sparkles:o.jsx(ln,{className:Te}),shield:o.jsx(Sa,{className:Te}),flame:o.jsx(EN,{className:Te}),"bar-chart-3":o.jsx(Vc,{className:Te}),heart:o.jsx(Yn,{className:Te}),sun:o.jsx(om,{className:Te}),moon:o.jsx(RN,{className:Te}),coffee:o.jsx(dK,{className:Te})})[se]||o.jsx(M1,{className:Te}),G=se=>o.jsxs(ze,{className:"p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[Q(se.icon,`w-5 h-5 ${se.color}`),o.jsx("h4",{className:"font-medium text-sm",children:se.title})]}),o.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[se.trend==="up"&&o.jsx(Zr,{className:"w-3 h-3 text-green-500"}),se.trend==="down"&&o.jsx(Hq,{className:"w-3 h-3 text-red-500"}),se.trend==="stable"&&o.jsx(JK,{className:"w-3 h-3 text-gray-500"}),se.trendValue>0&&o.jsxs("span",{className:se.trend==="up"?"text-green-600":"text-red-600",children:[se.trend==="up"?"+":"-",se.trendValue]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:`text-2xl font-bold ${se.color}`,children:se.value}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["/",se.maxValue," ",se.unit]})]}),o.jsx(uo,{value:se.value/se.maxValue*100,className:"h-2"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:se.description})]})]},se.id),H=se=>{y(se),w(!0)},ie=()=>{x&&(g(se=>se.map(Te=>Te.id===x.id?{...Te,reminderEnabled:!0,reminderTime:x.reminderTime}:Te)),w(!1),y(null))},de=se=>{g(Te=>Te.map(Me=>Me.id===se?{...Me,completed:!Me.completed}:Me))},ke=()=>{k(!0)},we=()=>{if(!R.name){He.error("Product name is required");return}const se=p.length>0?p[p.length-1].id+1:1;g(Te=>[...Te,{...R,id:se}]),k(!1),_({name:"",time:"AM",completed:!1,reminderTime:"07:00",reminderEnabled:!1})},Ee=se=>{y(se),j(!0)},Ce=()=>{if(x){if(!x.name){He.error("Product name is required");return}g(se=>se.map(Te=>Te.id===x.id?{...x}:Te)),j(!1),y(null)}},Re=se=>{g(Te=>Te.filter(Me=>Me.id!==se))};return o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-6",dir:i,children:[o.jsx(ze,{children:o.jsxs(Ue,{className:"p-6",children:[o.jsxs("div",{className:`flex items-center justify-between mb-4 ${a()}`,children:[o.jsxs("div",{children:[o.jsx("h2",{className:`text-2xl font-semibold ${l()}`,children:r("dashboard.welcomeBack",{name:t.name})}),o.jsx("p",{className:`text-muted-foreground ${l()}`,children:r("dashboard.trackJourney")})]}),o.jsx(it,{variant:"default",children:r("dashboard.member")})]}),e.length>0&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e[0].overallScore}),o.jsx("div",{className:"text-sm text-muted-foreground",children:r("dashboard.latestScore")})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold",children:e.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:r("dashboard.totalScans")})]})]})]})}),t.hasStation&&t.stationData&&o.jsx(ze,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-accent-foreground/5",children:o.jsxs(Ue,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(df,{className:"w-6 h-6 text-primary"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold truncate",children:t.stationData.stationName}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r("dashboard.yourCreatorStation")})]}),o.jsx(be,{size:"sm",onClick:()=>n?.("station-view"),children:r("common.view")})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 pt-3 border-t border-primary/10",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-semibold text-sm",children:"0"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:r("community.posts")})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-semibold text-sm",children:"0"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:r("community.followers")})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-semibold text-sm",children:"0%"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:r("community.engagement")})]})]})]})}),o.jsxs(Sr,{defaultValue:"progress",className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-3",children:[o.jsx(Jt,{value:"progress",children:r("dashboard.progress")}),o.jsx(Jt,{value:"routine",children:r("dashboard.routine")}),o.jsx(Jt,{value:"history",children:r("dashboard.history")})]}),o.jsxs(Qt,{value:"progress",className:"space-y-4",children:[o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Zr,{className:"w-5 h-5"}),"Skin Health Metrics"]})}),o.jsx(Ue,{children:o.jsx("div",{className:"grid grid-cols-2 gap-4",children:J.slice(0,4).map(G)})})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"w-5 h-5"}),"Lifestyle Impact"]})}),o.jsx(Ue,{children:o.jsx("div",{className:"grid grid-cols-2 gap-4",children:J.slice(4,8).map(G)})})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(gi,{className:"w-5 h-5"}),"Daily Habits"]})}),o.jsx(Ue,{children:o.jsx("div",{className:"grid grid-cols-2 gap-4",children:J.slice(8,10).map(G)})})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(df,{className:"w-5 h-5"}),"Achievements"]})}),o.jsx(Ue,{children:o.jsx("div",{className:"grid grid-cols-2 gap-3",children:ee.map(se=>o.jsxs("div",{className:`p-3 rounded-lg border ${se.earned?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-lg",children:se.icon}),o.jsx("h4",{className:"font-medium text-sm",children:se.title})]}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:se.description}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-xs",children:[o.jsxs("span",{children:[se.progress,"/",se.maxProgress]}),se.earned&&o.jsx(it,{variant:"default",className:"text-xs",children:"Earned"})]}),o.jsx(uo,{value:se.progress/se.maxProgress*100,className:"h-1"})]})]},se.id))})})]}),X&&o.jsx(ze,{children:o.jsx(Ue,{className:"p-4",children:o.jsx("div",{className:`p-3 rounded-lg ${X.isPositive?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(Zr,{className:`w-4 h-4 ${X.isPositive?"text-green-600":"text-red-600 rotate-180"}`}),o.jsxs("span",{className:X.isPositive?"text-green-800":"text-red-800",children:[X.value," point ",X.text," since last scan"]})]})})})})]}),o.jsxs(Qt,{value:"routine",className:"space-y-4",children:[o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsx(Ft,{children:o.jsx("span",{children:"Today's Routine"})})}),o.jsx(Ue,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Fq,{className:"w-5 h-5 text-yellow-600"}),o.jsx("h4",{className:"font-medium",children:"Morning Routine"})]}),o.jsx(be,{size:"sm",variant:"outline",onClick:()=>{_({...R,time:"AM"}),ke()},children:o.jsx(u0,{className:"w-4 h-4"})})]}),p.filter(se=>se.time==="AM").map(se=>o.jsxs("div",{className:"flex items-center gap-3 py-2 group",children:[o.jsx("button",{onClick:()=>de(se.id),className:"focus:outline-none",children:se.completed?o.jsx(Uc,{className:"w-5 h-5 text-green-500"}):o.jsx(M1,{className:"w-5 h-5 text-muted-foreground"})}),o.jsx("span",{className:`flex-1 ${se.completed?"line-through text-muted-foreground":""}`,children:se.name}),o.jsxs("div",{className:"flex items-center gap-1",children:[se.reminderEnabled&&o.jsxs(it,{variant:"outline",className:"text-xs",children:[o.jsx(md,{className:"w-3 h-3 mr-1"}),se.reminderTime]}),o.jsx(be,{size:"sm",variant:"ghost",onClick:()=>Ee(se),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(PN,{className:"w-4 h-4"})}),o.jsx(be,{size:"sm",variant:"ghost",onClick:()=>Re(se.id),className:"opacity-0 group-hover:opacity-100 transition-opacity text-destructive",children:o.jsx(gd,{className:"w-4 h-4"})}),o.jsx(be,{size:"sm",variant:"ghost",onClick:()=>H(se),children:o.jsx(Ll,{className:"w-4 h-4"})})]})]},se.id))]}),o.jsx(Bn,{}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(RN,{className:"w-5 h-5 text-indigo-600"}),o.jsx("h4",{className:"font-medium",children:"Evening Routine"})]}),o.jsx(be,{size:"sm",variant:"outline",onClick:()=>{_({...R,time:"PM"}),ke()},children:o.jsx(u0,{className:"w-4 h-4"})})]}),p.filter(se=>se.time==="PM").map(se=>o.jsxs("div",{className:"flex items-center gap-3 py-2 group",children:[o.jsx("button",{onClick:()=>de(se.id),className:"focus:outline-none",children:se.completed?o.jsx(Uc,{className:"w-5 h-5 text-green-500"}):o.jsx(M1,{className:"w-5 h-5 text-muted-foreground"})}),o.jsx("span",{className:`flex-1 ${se.completed?"line-through text-muted-foreground":""}`,children:se.name}),o.jsxs("div",{className:"flex items-center gap-1",children:[se.reminderEnabled&&o.jsxs(it,{variant:"outline",className:"text-xs",children:[o.jsx(md,{className:"w-3 h-3 mr-1"}),se.reminderTime]}),o.jsx(be,{size:"sm",variant:"ghost",onClick:()=>Ee(se),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(PN,{className:"w-4 h-4"})}),o.jsx(be,{size:"sm",variant:"ghost",onClick:()=>Re(se.id),className:"opacity-0 group-hover:opacity-100 transition-opacity text-destructive",children:o.jsx(gd,{className:"w-4 h-4"})}),o.jsx(be,{size:"sm",variant:"ghost",onClick:()=>H(se),children:o.jsx(Ll,{className:"w-4 h-4"})})]})]},se.id))]})]})})]}),o.jsx(Jo,{open:N,onOpenChange:k,children:o.jsxs(Qo,{className:"sm:max-w-md",children:[o.jsx(Bc,{children:o.jsx(zc,{children:"Add Routine Item"})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(_t,{children:"Product Name"}),o.jsx(sn,{value:R.name||"",onChange:se=>_(Te=>({...Te,name:se.target.value}))})]}),o.jsxs("div",{children:[o.jsx(_t,{children:"Time of Day"}),o.jsxs(Il,{value:R.time||"AM",onValueChange:se=>_(Te=>({...Te,time:se})),children:[o.jsx(El,{children:o.jsx(jl,{})}),o.jsxs($l,{children:[o.jsx(Vs,{value:"AM",children:"Morning"}),o.jsx(Vs,{value:"PM",children:"Evening"})]})]})]}),o.jsxs("div",{children:[o.jsx(_t,{children:"Reminder Time"}),o.jsxs(Il,{value:R.reminderTime||"07:00",onValueChange:se=>_(Te=>({...Te,reminderTime:se})),children:[o.jsx(El,{children:o.jsx(jl,{})}),o.jsx($l,{children:Array.from({length:24},(se,Te)=>{const Me=String(Te).padStart(2,"0");return o.jsxs(Vs,{value:`${Me}:00`,children:[Me,":00"]},Me)})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(_t,{children:"Reminder Enabled"}),o.jsx(_i,{checked:R.reminderEnabled||!1,onCheckedChange:se=>_(Te=>({...Te,reminderEnabled:se}))})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsxs(be,{onClick:we,className:"flex-1",children:[o.jsx(mw,{className:"w-4 h-4 mr-2"}),"Add Item"]}),o.jsx(be,{variant:"outline",onClick:()=>k(!1),children:"Cancel"})]})]})}),o.jsx(Jo,{open:C,onOpenChange:j,children:o.jsxs(Qo,{className:"sm:max-w-md",children:[o.jsx(Bc,{children:o.jsx(zc,{children:"Edit Routine Item"})}),x&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(_t,{children:"Product Name"}),o.jsx(sn,{value:x.name||"",onChange:se=>y(Te=>Te?{...Te,name:se.target.value}:null)})]}),o.jsxs("div",{children:[o.jsx(_t,{children:"Time of Day"}),o.jsxs(Il,{value:x.time||"AM",onValueChange:se=>y(Te=>Te?{...Te,time:se}:null),children:[o.jsx(El,{children:o.jsx(jl,{})}),o.jsxs($l,{children:[o.jsx(Vs,{value:"AM",children:"Morning"}),o.jsx(Vs,{value:"PM",children:"Evening"})]})]})]}),o.jsxs("div",{children:[o.jsx(_t,{children:"Reminder Time"}),o.jsxs(Il,{value:x.reminderTime||"07:00",onValueChange:se=>y(Te=>Te?{...Te,reminderTime:se}:null),children:[o.jsx(El,{children:o.jsx(jl,{})}),o.jsx($l,{children:Array.from({length:24},(se,Te)=>{const Me=String(Te).padStart(2,"0");return o.jsxs(Vs,{value:`${Me}:00`,children:[Me,":00"]},Me)})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(_t,{children:"Reminder Enabled"}),o.jsx(_i,{checked:x.reminderEnabled||!1,onCheckedChange:se=>y(Te=>Te?{...Te,reminderEnabled:se}:null)})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsxs(be,{onClick:Ce,className:"flex-1",children:[o.jsx(mw,{className:"w-4 h-4 mr-2"}),"Save Changes"]}),o.jsx(be,{variant:"outline",onClick:()=>j(!1),children:"Cancel"})]})]})}),o.jsx(Jo,{open:v,onOpenChange:w,children:o.jsxs(Qo,{className:"sm:max-w-md",children:[o.jsx(Bc,{children:o.jsx(zc,{children:"Set Reminder"})}),x&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsxs(_t,{children:["Product: ",x.name]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{children:"Reminder Time"}),o.jsxs(Il,{value:x.reminderTime||"07:00",onValueChange:se=>y(Te=>Te?{...Te,reminderTime:se}:null),children:[o.jsx(El,{children:o.jsx(jl,{})}),o.jsx($l,{children:Array.from({length:24},(se,Te)=>{const Me=String(Te).padStart(2,"0");return o.jsxs(Vs,{value:`${Me}:00`,children:[Me,":00"]},Me)})})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(_t,{children:"Notification Settings"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(uP,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"Sound"})]}),o.jsx(_i,{checked:A.soundEnabled,onCheckedChange:se=>O(Te=>({...Te,soundEnabled:se}))})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(aP,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"Vibration"})]}),o.jsx(_i,{checked:A.vibrationEnabled,onCheckedChange:se=>O(Te=>({...Te,vibrationEnabled:se}))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{children:"Frequency"}),o.jsxs(Il,{value:A.frequency,onValueChange:se=>O(Te=>({...Te,frequency:se})),children:[o.jsx(El,{children:o.jsx(jl,{})}),o.jsxs($l,{children:[o.jsx(Vs,{value:"daily",children:"Daily"}),o.jsx(Vs,{value:"weekly",children:"Weekly"}),o.jsx(Vs,{value:"custom",children:"Custom"})]})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsxs(be,{onClick:ie,className:"flex-1",children:[o.jsx(mw,{className:"w-4 h-4 mr-2"}),"Save Reminder"]}),o.jsx(be,{variant:"outline",onClick:()=>w(!1),children:"Cancel"})]})]})]})}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(bs,{className:"w-5 h-5"}),"Routine Statistics"]})}),o.jsx(Ue,{children:o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"text-center p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-lg font-semibold text-green-600",children:"83%"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"This Week"})]}),o.jsxs("div",{className:"text-center p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-lg font-semibold text-blue-600",children:"12"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Day Streak"})]})]})})]})]}),o.jsx(Qt,{value:"history",className:"space-y-4",children:o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsx(Ft,{children:"Scan History"})}),o.jsx(Ue,{children:e.length>0?o.jsx("div",{className:"space-y-4",children:e.map(se=>o.jsxs("div",{className:"flex items-center gap-4 p-3 border rounded-lg",children:[o.jsx("img",{src:se.imageUrl,alt:"Scan",className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsxs("span",{className:"font-medium",children:["Score: ",se.overallScore]}),o.jsx(it,{variant:"outline",className:"text-xs",children:new Date(se.date).toLocaleDateString()})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["H:",se.hydration," E:",se.evenness," C:",se.clarity," F:",se.firmness]})]}),o.jsx(be,{variant:"outline",size:"sm",onClick:()=>s?.(se),children:"View"})]},se.id))}):o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(ho,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No scan history available"})]})})]})})]})]})}function iD({user:t,scanHistory:e,onNavigate:n}){const[s,r]=T.useState("month"),i={stationViews:12547,stationViewsGrowth:23.5,followers:3842,followersGrowth:15.2,engagement:8.7,engagementGrowth:5.3,totalRevenue:2847.5,revenueGrowth:18.9,posts:47,totalLikes:18924,totalComments:3421,avgEngagementRate:8.7,topPerformingPosts:[{id:"1",title:"Morning Skincare Routine 2024",views:2341,likes:456,comments:89},{id:"2",title:"5 Tips for Glowing Skin",views:1987,likes:398,comments:72},{id:"3",title:"Product Review: Vitamin C Serum",views:1654,likes:312,comments:58}]},a={monthlyPrice:29.99,nextBillingDate:"2024-01-15",daysRemaining:12,features:["Unlimited Skin Scans","Creator Station Access","Advanced Analytics Dashboard","Priority Support","Ad-Free Experience","Export Data & Reports","Custom Branding","Monetization Tools"]};return o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-6",children:[o.jsx(ze,{className:"bg-gradient-to-r from-[#00B4D8]/10 via-[#006D77]/10 to-[#003D5C]/10 border-[#00B4D8]/30",children:o.jsxs(Ue,{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#00B4D8] to-[#006D77] rounded-full flex items-center justify-center",children:o.jsx(hs,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Pro Dashboard"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Welcome back, ",t.name,"!"]})]})]}),o.jsxs(it,{className:"bg-gradient-to-r from-[#FF6B35] to-[#FF8C5A] text-white border-0",children:[o.jsx(ln,{className:"w-3 h-3 mr-1"}),"PRO"]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-6",children:[o.jsxs("div",{className:"bg-background/50 p-3 rounded-lg border border-[#00B4D8]/20",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Ea,{className:"w-4 h-4 text-[#00B4D8]"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Views"})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsx("span",{className:"text-xl font-bold",children:i.stationViews.toLocaleString()}),o.jsxs("span",{className:"text-xs text-green-600 flex items-center",children:[o.jsx(jp,{className:"w-3 h-3"}),i.stationViewsGrowth,"%"]})]})]}),o.jsxs("div",{className:"bg-background/50 p-3 rounded-lg border border-[#00B4D8]/20",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(so,{className:"w-4 h-4 text-[#00B4D8]"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Followers"})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsx("span",{className:"text-xl font-bold",children:i.followers.toLocaleString()}),o.jsxs("span",{className:"text-xs text-green-600 flex items-center",children:[o.jsx(jp,{className:"w-3 h-3"}),i.followersGrowth,"%"]})]})]}),o.jsxs("div",{className:"bg-background/50 p-3 rounded-lg border border-[#00B4D8]/20",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Yn,{className:"w-4 h-4 text-[#00B4D8]"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Engagement"})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsxs("span",{className:"text-xl font-bold",children:[i.engagement,"%"]}),o.jsxs("span",{className:"text-xs text-green-600 flex items-center",children:[o.jsx(jp,{className:"w-3 h-3"}),i.engagementGrowth,"%"]})]})]}),o.jsxs("div",{className:"bg-background/50 p-3 rounded-lg border border-[#00B4D8]/20",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(nm,{className:"w-4 h-4 text-[#00B4D8]"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Revenue"})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsxs("span",{className:"text-xl font-bold",children:["$",i.totalRevenue.toLocaleString()]}),o.jsxs("span",{className:"text-xs text-green-600 flex items-center",children:[o.jsx(jp,{className:"w-3 h-3"}),i.revenueGrowth,"%"]})]})]})]})]})}),o.jsxs(ze,{className:"border-[#FF6B35]/30",children:[o.jsx(Ot,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(hs,{className:"w-5 h-5 text-[#FF6B35]"}),"Pro Membership"]}),o.jsx(be,{variant:"outline",size:"sm",onClick:()=>n("profile"),children:"Manage"})]})}),o.jsx(Ue,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Next billing date"}),o.jsx("p",{className:"font-semibold",children:a.nextBillingDate})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly plan"}),o.jsxs("p",{className:"text-2xl font-bold text-[#006D77]",children:["$",a.monthlyPrice]})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Time remaining"}),o.jsxs("span",{className:"text-sm font-medium",children:[a.daysRemaining," days"]})]}),o.jsx(uo,{value:a.daysRemaining/30*100,className:"h-2"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.features.slice(0,4).map((l,c)=>o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(gi,{className:"w-3 h-3 text-[#00B4D8]"}),o.jsx("span",{children:l})]},c))})]})})]}),o.jsxs(Sr,{defaultValue:"analytics",className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-3 bg-muted",children:[o.jsxs(Jt,{value:"analytics",children:[o.jsx(Vc,{className:"w-4 h-4 mr-2"}),"Analytics"]}),o.jsxs(Jt,{value:"content",children:[o.jsx(_p,{className:"w-4 h-4 mr-2"}),"Content"]}),o.jsxs(Jt,{value:"audience",children:[o.jsx(so,{className:"w-4 h-4 mr-2"}),"Audience"]})]}),o.jsxs(Qt,{value:"analytics",className:"space-y-4 mt-4",children:[o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ft,{children:"Performance Overview"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(be,{variant:s==="week"?"default":"outline",size:"sm",onClick:()=>r("week"),children:"Week"}),o.jsx(be,{variant:s==="month"?"default":"outline",size:"sm",onClick:()=>r("month"),children:"Month"}),o.jsx(be,{variant:s==="year"?"default":"outline",size:"sm",onClick:()=>r("year"),children:"Year"})]})]})}),o.jsx(Ue,{children:o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(_p,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Posts"})]}),o.jsx("p",{className:"text-2xl font-bold",children:i.posts})]}),o.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Yn,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Likes"})]}),o.jsx("p",{className:"text-2xl font-bold",children:i.totalLikes.toLocaleString()})]}),o.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(_r,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Comments"})]}),o.jsx("p",{className:"text-2xl font-bold",children:i.totalComments.toLocaleString()})]}),o.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(my,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg Engagement"})]}),o.jsxs("p",{className:"text-2xl font-bold",children:[i.avgEngagementRate,"%"]})]})]})})]}),o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(bs,{className:"w-5 h-5 text-yellow-500"}),"Top Performing Posts"]}),o.jsxs(as,{children:["Your best content this ",s]})]}),o.jsx(Ue,{children:o.jsx("div",{className:"space-y-3",children:i.topPerformingPosts.map((l,c)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#00B4D8] to-[#006D77] rounded-full flex items-center justify-center text-white font-bold",children:c+1}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-sm",children:l.title}),o.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ea,{className:"w-3 h-3"}),l.views]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Yn,{className:"w-3 h-3"}),l.likes]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(_r,{className:"w-3 h-3"}),l.comments]})]})]})]},l.id))})})]})]}),o.jsxs(Qt,{value:"content",className:"space-y-4 mt-4",children:[o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsx(Ft,{children:"Content Management"}),o.jsx(as,{children:"Manage your posts and station content"})]}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs(be,{className:"w-full justify-start bg-[#00B4D8] hover:bg-[#00B4D8]/90",onClick:()=>n("create-post"),children:[o.jsx(_p,{className:"w-4 h-4 mr-2"}),"Create New Post"]}),o.jsxs(be,{variant:"outline",className:"w-full justify-start",onClick:()=>n("station-view"),children:[o.jsx(im,{className:"w-4 h-4 mr-2"}),"Manage Station"]}),o.jsxs(be,{variant:"outline",className:"w-full justify-start",children:[o.jsx($N,{className:"w-4 h-4 mr-2"}),"Media Library"]}),o.jsxs(be,{variant:"outline",className:"w-full justify-start",children:[o.jsx(ho,{className:"w-4 h-4 mr-2"}),"Content Calendar"]})]})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsx(Ft,{children:"Content Statistics"})}),o.jsx(Ue,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($N,{className:"w-4 h-4 text-[#00B4D8]"}),o.jsx("span",{className:"text-sm",children:"Image Posts"})]}),o.jsx("span",{className:"font-semibold",children:"32"})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(O4,{className:"w-4 h-4 text-[#00B4D8]"}),o.jsx("span",{className:"text-sm",children:"Video Posts"})]}),o.jsx("span",{className:"font-semibold",children:"15"})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_p,{className:"w-4 h-4 text-[#00B4D8]"}),o.jsx("span",{className:"text-sm",children:"Article Posts"})]}),o.jsx("span",{className:"font-semibold",children:"8"})]})]})})]})]}),o.jsx(Qt,{value:"audience",className:"space-y-4 mt-4",children:o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsx(Ft,{children:"Audience Insights"}),o.jsx(as,{children:"Understand your followers better"})]}),o.jsx(Ue,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Follower Growth"}),o.jsxs("span",{className:"text-sm text-green-600 flex items-center",children:[o.jsx(jp,{className:"w-3 h-3"}),"+",i.followersGrowth,"% this ",s]})]}),o.jsx(uo,{value:i.followersGrowth*3,className:"h-3"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium mb-3",children:"Top Demographics"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[o.jsx("span",{className:"text-sm",children:"Ages 25-34"}),o.jsx("span",{className:"text-sm font-semibold",children:"45%"})]}),o.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[o.jsx("span",{className:"text-sm",children:"Ages 18-24"}),o.jsx("span",{className:"text-sm font-semibold",children:"32%"})]}),o.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[o.jsx("span",{className:"text-sm",children:"Ages 35-44"}),o.jsx("span",{className:"text-sm font-semibold",children:"18%"})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium mb-3",children:"Peak Engagement Times"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[o.jsx("span",{className:"text-sm",children:"Weekdays 6-9 PM"}),o.jsx(it,{variant:"secondary",children:"High"})]}),o.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[o.jsx("span",{className:"text-sm",children:"Weekends 12-3 PM"}),o.jsx(it,{variant:"secondary",children:"High"})]}),o.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[o.jsx("span",{className:"text-sm",children:"Mornings 7-9 AM"}),o.jsx(it,{variant:"secondary",children:"Medium"})]})]})]})]})})]})})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsx(Ft,{children:"Quick Actions"})}),o.jsxs(Ue,{className:"grid grid-cols-2 gap-3",children:[o.jsxs(be,{variant:"outline",className:"h-auto py-4 flex flex-col items-center gap-2",onClick:()=>n("community"),children:[o.jsx(so,{className:"w-5 h-5 text-[#00B4D8]"}),o.jsx("span",{className:"text-xs",children:"Community"})]}),o.jsxs(be,{variant:"outline",className:"h-auto py-4 flex flex-col items-center gap-2",onClick:()=>n("camera"),children:[o.jsx(ln,{className:"w-5 h-5 text-[#00B4D8]"}),o.jsx("span",{className:"text-xs",children:"New Scan"})]}),o.jsxs(be,{variant:"outline",className:"h-auto py-4 flex flex-col items-center gap-2",onClick:()=>n("products"),children:[o.jsx(Ml,{className:"w-5 h-5 text-[#00B4D8]"}),o.jsx("span",{className:"text-xs",children:"Products"})]}),o.jsxs(be,{variant:"outline",className:"h-auto py-4 flex flex-col items-center gap-2",onClick:()=>n("profile"),children:[o.jsx(Ll,{className:"w-5 h-5 text-[#00B4D8]"}),o.jsx("span",{className:"text-xs",children:"Settings"})]})]})]})]})}function MPe(t,e=[]){let n=[];function s(i,a){const l=T.createContext(a);l.displayName=i+"Context";const c=n.length;n=[...n,a];const u=h=>{const{scope:p,children:g,...x}=h,y=p?.[t]?.[c]||l,v=T.useMemo(()=>x,Object.values(x));return o.jsx(y.Provider,{value:v,children:g})};u.displayName=i+"Provider";function d(h,p){const g=p?.[t]?.[c]||l,x=T.useContext(g);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=n.map(a=>T.createContext(a));return function(l){const c=l?.[t]||i;return T.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return r.scopeName=t,[s,LPe(r,...e)]}function LPe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const a=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var BPe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ZT=BPe.reduce((t,e)=>{const n=Dm(`Primitive.${e}`),s=T.forwardRef((r,i)=>{const{asChild:a,...l}=r,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function zPe(){return yP.useSyncExternalStore(VPe,()=>!0,()=>!1)}function VPe(){return()=>{}}var JT="Avatar",[UPe]=MPe(JT),[WPe,oV]=UPe(JT),lV=T.forwardRef((t,e)=>{const{__scopeAvatar:n,...s}=t,[r,i]=T.useState("idle");return o.jsx(WPe,{scope:n,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:o.jsx(ZT.span,{...s,ref:e})})});lV.displayName=JT;var cV="AvatarImage",uV=T.forwardRef((t,e)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:r=()=>{},...i}=t,a=oV(cV,n),l=GPe(s,i),c=br(u=>{r(u),a.onImageLoadingStatusChange(u)});return Gs(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(ZT.img,{...i,ref:e,src:s}):null});uV.displayName=cV;var dV="AvatarFallback",hV=T.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:s,...r}=t,i=oV(dV,n),[a,l]=T.useState(s===void 0);return T.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(ZT.span,{...r,ref:e}):null});hV.displayName=dV;function aD(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function GPe(t,{referrerPolicy:e,crossOrigin:n}){const s=zPe(),r=T.useRef(null),i=s?(r.current||(r.current=new window.Image),r.current):null,[a,l]=T.useState(()=>aD(i,t));return Gs(()=>{l(aD(i,t))},[i,t]),Gs(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,n,e]),a}var HPe=lV,KPe=uV,qPe=hV;function xi({className:t,...e}){return o.jsx(HPe,{"data-slot":"avatar",className:Bt("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...e})}function yi({className:t,...e}){return o.jsx(KPe,{"data-slot":"avatar-image",className:Bt("aspect-square size-full",t),...e})}function vi({className:t,...e}){return o.jsx(qPe,{"data-slot":"avatar-fallback",className:Bt("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}const XPe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function En(t){const[e,n]=T.useState(!1),s=()=>{n(!0)},{src:r,alt:i,style:a,className:l,...c}=t;return e?o.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${l??""}`,style:a,children:o.jsx("div",{className:"flex items-center justify-center w-full h-full",children:o.jsx("img",{src:XPe,alt:"Error loading image",...c,"data-original-url":r})})}):o.jsx("img",{src:r,alt:i,className:l,style:a,...c,onError:s})}function fV({...t}){return o.jsx(Sz,{"data-slot":"sheet",...t})}function YPe({...t}){return o.jsx(FDe,{"data-slot":"sheet-trigger",...t})}function ZPe({...t}){return o.jsx(kz,{"data-slot":"sheet-portal",...t})}const pV=T.forwardRef(({className:t,...e},n)=>o.jsx(qT,{ref:n,"data-slot":"sheet-overlay",className:Bt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));pV.displayName=qT.displayName;function mV({className:t,children:e,side:n="right",...s}){return o.jsxs(ZPe,{children:[o.jsx(pV,{}),o.jsxs(Cz,{"data-slot":"sheet-content",className:Bt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...s,children:[e,o.jsxs(jz,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[o.jsx(Us,{className:"size-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function gV({className:t,...e}){return o.jsx("div",{"data-slot":"sheet-header",className:Bt("flex flex-col gap-1.5 p-4",t),...e})}function xV({className:t,...e}){return o.jsx(Tz,{"data-slot":"sheet-title",className:Bt("text-foreground font-semibold",t),...e})}function JPe({className:t,...e}){return o.jsx(Iz,{"data-slot":"sheet-description",className:Bt("text-muted-foreground text-sm",t),...e})}function QPe(t,e){return T.useReducer((n,s)=>e[n][s]??n,t)}var QT="ScrollArea",[yV]=ei(QT),[e6e,Ba]=yV(QT),vV=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:s="hover",dir:r,scrollHideDelay:i=600,...a}=t,[l,c]=T.useState(null),[u,d]=T.useState(null),[h,p]=T.useState(null),[g,x]=T.useState(null),[y,v]=T.useState(null),[w,N]=T.useState(0),[k,C]=T.useState(0),[j,R]=T.useState(!1),[_,A]=T.useState(!1),O=qt(e,D=>c(D)),L=ou(r);return o.jsx(e6e,{scope:n,type:s,dir:L,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:p,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:j,onScrollbarXEnabledChange:R,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:_,onScrollbarYEnabledChange:A,onCornerWidthChange:N,onCornerHeightChange:C,children:o.jsx(Dt.div,{dir:L,...a,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":k+"px",...t.style}})})});vV.displayName=QT;var bV="ScrollAreaViewport",wV=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:s,nonce:r,...i}=t,a=Ba(bV,n),l=T.useRef(null),c=qt(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Dt.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});wV.displayName=bV;var ll="ScrollAreaScrollbar",NV=T.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=Ba(ll,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=r,l=t.orientation==="horizontal";return T.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),r.type==="hover"?o.jsx(t6e,{...s,ref:e,forceMount:n}):r.type==="scroll"?o.jsx(n6e,{...s,ref:e,forceMount:n}):r.type==="auto"?o.jsx(SV,{...s,ref:e,forceMount:n}):r.type==="always"?o.jsx(eI,{...s,ref:e}):null});NV.displayName=ll;var t6e=T.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=Ba(ll,t.__scopeScrollArea),[i,a]=T.useState(!1);return T.useEffect(()=>{const l=r.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},d=()=>{c=window.setTimeout(()=>a(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[r.scrollArea,r.scrollHideDelay]),o.jsx(ti,{present:n||i,children:o.jsx(SV,{"data-state":i?"visible":"hidden",...s,ref:e})})}),n6e=T.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=Ba(ll,t.__scopeScrollArea),i=t.orientation==="horizontal",a=_v(()=>c("SCROLL_END"),100),[l,c]=QPe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,r.scrollHideDelay,c]),T.useEffect(()=>{const u=r.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const p=()=>{const g=u[d];h!==g&&(c("SCROLL"),a()),h=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[r.viewport,i,c,a]),o.jsx(ti,{present:n||l!=="hidden",children:o.jsx(eI,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:gt(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:gt(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),SV=T.forwardRef((t,e)=>{const n=Ba(ll,t.__scopeScrollArea),{forceMount:s,...r}=t,[i,a]=T.useState(!1),l=t.orientation==="horizontal",c=_v(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:d)}},10);return If(n.viewport,c),If(n.content,c),o.jsx(ti,{present:s||i,children:o.jsx(eI,{"data-state":i?"visible":"hidden",...r,ref:e})})}),eI=T.forwardRef((t,e)=>{const{orientation:n="vertical",...s}=t,r=Ba(ll,t.__scopeScrollArea),i=T.useRef(null),a=T.useRef(0),[l,c]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=jV(l.viewport,l.content),d={...s,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function h(p,g){return l6e(p,a.current,l,g)}return n==="horizontal"?o.jsx(s6e,{...d,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const p=r.viewport.scrollLeft,g=oD(p,l,r.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{r.viewport&&(r.viewport.scrollLeft=p)},onDragScroll:p=>{r.viewport&&(r.viewport.scrollLeft=h(p,r.dir))}}):n==="vertical"?o.jsx(r6e,{...d,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const p=r.viewport.scrollTop,g=oD(p,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{r.viewport&&(r.viewport.scrollTop=p)},onDragScroll:p=>{r.viewport&&(r.viewport.scrollTop=h(p))}}):null}),s6e=T.forwardRef((t,e)=>{const{sizes:n,onSizesChange:s,...r}=t,i=Ba(ll,t.__scopeScrollArea),[a,l]=T.useState(),c=T.useRef(null),u=qt(e,c,i.onScrollbarXChange);return T.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(CV,{"data-orientation":"horizontal",...r,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Pv(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(p),$V(p,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:uy(a.paddingLeft),paddingEnd:uy(a.paddingRight)}})}})}),r6e=T.forwardRef((t,e)=>{const{sizes:n,onSizesChange:s,...r}=t,i=Ba(ll,t.__scopeScrollArea),[a,l]=T.useState(),c=T.useRef(null),u=qt(e,c,i.onScrollbarYChange);return T.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(CV,{"data-orientation":"vertical",...r,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Pv(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(p),$V(p,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:uy(a.paddingTop),paddingEnd:uy(a.paddingBottom)}})}})}),[i6e,kV]=yV(ll),CV=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:r,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...p}=t,g=Ba(ll,n),[x,y]=T.useState(null),v=qt(e,O=>y(O)),w=T.useRef(null),N=T.useRef(""),k=g.viewport,C=s.content-s.viewport,j=br(d),R=br(c),_=_v(h,10);function A(O){if(w.current){const L=O.clientX-w.current.left,D=O.clientY-w.current.top;u({x:L,y:D})}}return T.useEffect(()=>{const O=L=>{const D=L.target;x?.contains(D)&&j(L,C)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[k,x,C,j]),T.useEffect(R,[s,R]),If(x,_),If(g.content,_),o.jsx(i6e,{scope:n,scrollbar:x,hasThumb:r,onThumbChange:br(i),onThumbPointerUp:br(a),onThumbPositionChange:R,onThumbPointerDown:br(l),children:o.jsx(Dt.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:gt(t.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),w.current=x.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),A(O))}),onPointerMove:gt(t.onPointerMove,A),onPointerUp:gt(t.onPointerUp,O=>{const L=O.target;L.hasPointerCapture(O.pointerId)&&L.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=N.current,g.viewport&&(g.viewport.style.scrollBehavior=""),w.current=null})})})}),cy="ScrollAreaThumb",TV=T.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=kV(cy,t.__scopeScrollArea);return o.jsx(ti,{present:n||r.hasThumb,children:o.jsx(a6e,{ref:e,...s})})}),a6e=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:s,...r}=t,i=Ba(cy,n),a=kV(cy,n),{onThumbPositionChange:l}=a,c=qt(e,h=>a.onThumbChange(h)),u=T.useRef(void 0),d=_v(()=>{u.current&&(u.current(),u.current=void 0)},100);return T.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(d(),!u.current){const g=c6e(h,l);u.current=g,l()}};return l(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,d,l]),o.jsx(Dt.div,{"data-state":a.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:gt(t.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),x=h.clientX-g.left,y=h.clientY-g.top;a.onThumbPointerDown({x,y})}),onPointerUp:gt(t.onPointerUp,a.onThumbPointerUp)})});TV.displayName=cy;var tI="ScrollAreaCorner",IV=T.forwardRef((t,e)=>{const n=Ba(tI,t.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?o.jsx(o6e,{...t,ref:e}):null});IV.displayName=tI;var o6e=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,...s}=t,r=Ba(tI,n),[i,a]=T.useState(0),[l,c]=T.useState(0),u=!!(i&&l);return If(r.scrollbarX,()=>{const d=r.scrollbarX?.offsetHeight||0;r.onCornerHeightChange(d),c(d)}),If(r.scrollbarY,()=>{const d=r.scrollbarY?.offsetWidth||0;r.onCornerWidthChange(d),a(d)}),u?o.jsx(Dt.div,{...s,ref:e,style:{width:i,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function uy(t){return t?parseInt(t,10):0}function jV(t,e){const n=t/e;return isNaN(n)?0:n}function Pv(t){const e=jV(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=(t.scrollbar.size-n)*e;return Math.max(s,18)}function l6e(t,e,n,s="ltr"){const r=Pv(n),i=r/2,a=e||i,l=r-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=s==="ltr"?[0,d]:[d*-1,0];return EV([c,u],h)(t)}function oD(t,e,n="ltr"){const s=Pv(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-r,a=e.content-e.viewport,l=i-s,c=n==="ltr"?[0,a]:[a*-1,0],u=Rm(t,c);return EV([0,a],[0,l])(u)}function EV(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function $V(t,e){return t>0&&t<e}var c6e=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},s=0;return(function r(){const i={left:t.scrollLeft,top:t.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&e(),n=i,s=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(s)};function _v(t,e){const n=br(t),s=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(s.current),[]),T.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,e)},[n,e])}function If(t,e){const n=br(e);Gs(()=>{let s=0;if(t){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return r.observe(t),()=>{window.cancelAnimationFrame(s),r.unobserve(t)}}},[t,n])}var u6e=vV,d6e=wV,h6e=IV;function _l({className:t,children:e,...n}){return o.jsxs(u6e,{"data-slot":"scroll-area",className:Bt("relative",t),...n,children:[o.jsx(d6e,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),o.jsx(f6e,{}),o.jsx(h6e,{})]})}function f6e({className:t,orientation:e="vertical",...n}){return o.jsx(NV,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Bt("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:o.jsx(TV,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function p6e({user:t,onCreatePost:e,onCreateStation:n,onViewPost:s,onViewInfluencer:r,onViewBrand:i,onViewCampaign:a,userHasStation:l=!1,onViewStation:c,onUpgrade:u}){const{t:d,isRTL:h,direction:p}=Hm(),[g,x]=T.useState("following"),[y,v]=T.useState(null),[w,N]=T.useState([]),[k,C]=T.useState([]),[j,R]=T.useState([]),[_,A]=T.useState([]),[O,L]=T.useState([]),[D,q]=T.useState(null),[V,ne]=T.useState([]),[J,ee]=T.useState(!0),te=!t||t.type==="guest";t?.type;const X=t?.type==="pro",[Q,G]=T.useState(""),[H,ie]=T.useState(!1),[de,ke]=T.useState("recent"),[we,Ee]=T.useState("all"),[Ce,Re]=T.useState("all"),[se,Te]=T.useState([]),[Me,Ye]=T.useState(["#GlowChallenge30","#skincare","#vitaminc"]);T.useEffect(()=>{(async()=>{try{const[ft,on,Sn,An,Pn]=await Promise.all([Ln.getCommunityFeed(1,20),Ln.getStations(),Ln.getCampaigns(),Ln.getCommunityStats(),Ln.getTopInfluencers()]);if(ft.data?.items&&ft.data.items.length>0){const Ss=ft.data.items.map(Rn=>({id:Rn.postId,type:Rn.postType==="video"?"video":"image",author:{name:Rn.userName||"Anonymous",username:`@${Rn.userName?.toLowerCase().replace(/\s/g,"")||"user"}`,avatar:Rn.userProfileImage||"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop",verified:Rn.isVerified,isInfluencer:!!Rn.stationId,isBrand:!1},content:{media:Rn.mediaUrls?.[0]||Rn.thumbnailUrl||"",caption:Rn.content||"",products:[]},engagement:{likes:Rn.likeCount,comments:Rn.commentCount,shares:Rn.shareCount,liked:Rn.isLikedByCurrentUser},timestamp:new Date(Rn.createdAt).toLocaleDateString(),hashtags:Rn.hashtags||[]}));R(Ss)}on.data&&A(on.data),Sn.data&&L(Sn.data),An.data&&q(An.data),Pn.data&&ne(Pn.data)}catch(ft){console.error("Failed to load community data:",ft)}finally{ee(!1)}})()},[]);const me=j,xe=T.useMemo(()=>{const Ne=new Set;return me.forEach(ft=>{ft.hashtags&&ft.hashtags.forEach(on=>Ne.add(on))}),D?.topHashtags&&D.topHashtags.forEach(ft=>Ne.add(ft.startsWith("#")?ft:`#${ft}`)),Array.from(Ne).sort()},[me,D]),$e=T.useMemo(()=>me.filter(Ne=>{if(Q){const ft=Q.toLowerCase();if(!(Ne.content.caption.toLowerCase().includes(ft)||Ne.author.name.toLowerCase().includes(ft)||Ne.author.username.toLowerCase().includes(ft)||Ne.hashtags&&Ne.hashtags.some(Sn=>Sn.toLowerCase().includes(ft))||Ne.content.products&&Ne.content.products.some(Sn=>Sn.toLowerCase().includes(ft))))return!1}return!(se.length>0&&!se.some(on=>Ne.hashtags?.includes(on))||we!=="all"&&(we==="images"&&Ne.type!=="image"||we==="videos"&&Ne.type!=="video")||Ce!=="all"&&(Ce==="influencers"&&!Ne.author.isInfluencer||Ce==="brands"&&!Ne.author.isBrand||Ce==="users"&&(Ne.author.isInfluencer||Ne.author.isBrand)))}),[Q,se,we,Ce]),Ze=T.useMemo(()=>{const Ne=[...$e];switch(de){case"popular":return Ne.sort((ft,on)=>on.engagement.likes-ft.engagement.likes);case"trending":return Ne.sort((ft,on)=>on.engagement.likes+on.engagement.comments*2+on.engagement.shares*3-(ft.engagement.likes+ft.engagement.comments*2+ft.engagement.shares*3));case"recent":default:return Ne}},[$e,de]),bt=Ne=>{if(te){He.error(" Sign up to like posts",{description:"Create an account to interact with the community",action:u?{label:"Sign Up",onClick:u}:void 0});return}C(ft=>ft.includes(Ne)?ft.filter(on=>on!==Ne):[...ft,Ne]),He.success(k.includes(Ne)?"Like removed":"Post liked!")},$t=Ne=>{He.success("Link copied to clipboard!")},at=Ne=>{if(te){He.error(" Sign up to follow creators",{description:"Create an account to follow your favorite creators",action:u?{label:"Sign Up",onClick:u}:void 0});return}N(on=>on.includes(Ne)?on.filter(Sn=>Sn!==Ne):[...on,Ne]);const ft=w.includes(Ne);He.success(ft?"Unfollowed":"Following!")},nt=Ne=>{Te(ft=>ft.includes(Ne)?ft.filter(on=>on!==Ne):[...ft,Ne])},Xt=Ne=>{Ne&&!Me.includes(Ne)&&Ye(ft=>[Ne,...ft].slice(0,10))},dn=Ne=>{G(Ne),Ne&&Ne.length>2&&Xt(Ne)},Zn=()=>{G(""),Te([]),Ee("all"),Re("all"),ke("recent")},Gn=()=>{let Ne=0;return se.length>0&&(Ne+=se.length),we!=="all"&&(Ne+=1),Ce!=="all"&&(Ne+=1),de!=="recent"&&(Ne+=1),Ne},Jn=Ne=>o.jsx(ze,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>s(Ne.id),children:o.jsxs(Ue,{className:"p-0",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4",children:[o.jsxs(xi,{className:"cursor-pointer",onClick:ft=>{ft.stopPropagation(),Ne.author.isBrand?i(Ne.id):Ne.author.isInfluencer&&r(Ne.id)},children:[o.jsx(yi,{src:Ne.author.avatar}),o.jsx(vi,{children:Ne.author.name[0]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:Ne.author.name}),Ne.author.verified&&o.jsx(hi,{className:"w-4 h-4 text-blue-500"}),Ne.author.isBrand&&o.jsx(it,{variant:"secondary",className:"text-xs",children:"Brand"}),Ne.author.isInfluencer&&o.jsx(it,{variant:"default",className:"text-xs bg-[#00B4D8]",children:"Creator"})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[Ne.author.username,"  ",Ne.timestamp]})]}),o.jsx(be,{variant:"ghost",size:"sm",onClick:ft=>ft.stopPropagation(),children:o.jsx(tP,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{src:Ne.content.media,alt:"Post",className:"w-full aspect-square object-cover"}),Ne.type==="video"&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:o.jsx("div",{className:"w-16 h-16 bg-white/90 rounded-full flex items-center justify-center",children:o.jsx(td,{className:"w-8 h-8 text-black ml-1"})})})]}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[o.jsxs(be,{variant:"ghost",size:"sm",className:"gap-2",onClick:ft=>{ft.stopPropagation(),bt(Ne.id)},children:[o.jsx(Yn,{className:`w-5 h-5 ${k.includes(Ne.id)?"fill-red-500 text-red-500":""}`}),o.jsx("span",{className:"text-sm",children:Ne.engagement.likes})]}),o.jsxs(be,{variant:"ghost",size:"sm",className:"gap-2",onClick:ft=>ft.stopPropagation(),children:[o.jsx(_r,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm",children:Ne.engagement.comments})]}),o.jsxs(be,{variant:"ghost",size:"sm",className:"gap-2",onClick:ft=>{ft.stopPropagation(),$t(Ne.id)},children:[o.jsx(iP,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm",children:Ne.engagement.shares})]})]}),o.jsxs("p",{className:"text-sm mb-2",children:[o.jsx("span",{className:"font-medium",children:Ne.author.name})," ",Ne.content.caption]}),Ne.hashtags&&Ne.hashtags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Ne.hashtags.map((ft,on)=>o.jsx(it,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-[#00B4D8] hover:text-white",onClick:Sn=>{Sn.stopPropagation(),nt(ft)},children:ft},on))}),Ne.content.products&&Ne.content.products.length>0&&o.jsx("div",{className:"flex gap-1 flex-wrap",children:Ne.content.products.map((ft,on)=>o.jsxs(it,{variant:"outline",className:"text-xs",children:[o.jsx(Go,{className:"w-3 h-3 mr-1"}),ft]},on))})]})]})},Ne.id),$n=Ne=>o.jsxs(ze,{className:"overflow-hidden mb-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(En,{src:Ne.campaignImageUrl||"",alt:Ne.title,className:"w-full h-48 object-cover"}),o.jsx("div",{className:"absolute top-4 left-4",children:o.jsx(it,{className:"bg-primary text-white",children:Ne.featured?"Featured Campaign":"Active Campaign"})}),o.jsx("div",{className:"absolute top-4 right-4",children:o.jsxs(it,{variant:"secondary",className:"bg-white/90",children:[o.jsx(ho,{className:"w-3 h-3 mr-1"}),new Date(Ne.endDate).toLocaleDateString()]})})]}),o.jsxs(Ue,{className:"p-4",children:[o.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[o.jsx(En,{src:Ne.brand?.logoUrl||"",alt:Ne.brand?.brandName||"Brand",className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h3",{className:"font-semibold",children:Ne.title}),o.jsx(hi,{className:"w-4 h-4 text-blue-500"})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:Ne.brand?.brandName||"Brand"})]})]}),o.jsx("p",{className:"text-sm mb-4",children:Ne.description}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{className:"text-center p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-lg font-semibold text-primary",children:Ne.participantCount.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Participants"})]}),o.jsxs("div",{className:"text-center p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-lg font-semibold text-green-600",children:Ne.totalEngagement.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Engagement"})]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Gp,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium cursor-pointer hover:text-[#00B4D8]",onClick:()=>{G(Ne.hashtag||""),x("following")},children:Ne.hashtag})]}),Ne.prize&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(df,{className:"w-4 h-4 text-yellow-500"}),o.jsx("span",{className:"text-sm",children:Ne.prize})]})]}),o.jsxs(be,{className:"w-full bg-[#00B4D8] hover:bg-[#00B4D8]/90",onClick:()=>a(Ne.id),children:[o.jsx(ld,{className:"w-4 h-4 mr-2"}),"View Campaign"]})]})]},Ne.campaignId),ms=(Ne,ft)=>o.jsx(ze,{className:"p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>r(Ne.stationId),children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${ft===0?"bg-yellow-500 text-white":ft===1?"bg-gray-300 text-gray-700":ft===2?"bg-orange-400 text-white":"bg-secondary text-muted-foreground"}`,children:ft+1}),o.jsxs(xi,{children:[o.jsx(yi,{src:Ne.profileImageUrl||""}),o.jsx(vi,{children:Ne.stationName?.[0]||"U"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium",children:Ne.stationName}),Ne.isPublished&&o.jsx(hi,{className:"w-4 h-4 text-blue-500"})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[Ne.followersCount.toLocaleString()," followers"]})]}),o.jsx(be,{variant:Ne.isFollowedByCurrentUser?"outline":"default",size:"sm",onClick:on=>{on.stopPropagation(),at(Ne.stationId)},className:Ne.isFollowedByCurrentUser?"":"bg-[#00B4D8] hover:bg-[#00B4D8]/90",children:Ne.isFollowedByCurrentUser?"Following":"Follow"})]})},Ne.stationId),In=(Ne,ft)=>o.jsxs(ze,{className:"p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{G(Ne),x("following")},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Gp,{className:"w-5 h-5 text-primary"}),o.jsx("span",{className:"font-medium",children:Ne.startsWith("#")?Ne:`#${Ne}`})]}),o.jsx("div",{className:"flex items-center gap-1",children:o.jsx(Zr,{className:"w-4 h-4 text-green-500"})})]}),o.jsx("div",{className:"text-sm",children:o.jsxs(it,{variant:"outline",className:"text-xs",children:["Trending #",ft+1]})})]},Ne),As=Ne=>o.jsxs(ze,{className:"p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>i(Ne.stationId),children:[o.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[o.jsx(En,{src:Ne.profileImageUrl||"",alt:Ne.stationName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h4",{className:"font-medium",children:Ne.stationName}),Ne.isPublished&&o.jsx(hi,{className:"w-4 h-4 text-blue-500"})]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:Ne.bio||Ne.description||"No description"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:Ne.followersCount.toLocaleString()}),o.jsx("div",{className:"text-muted-foreground text-xs",children:"Followers"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:Ne.totalPosts}),o.jsx("div",{className:"text-muted-foreground text-xs",children:"Posts"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:Ne.totalLikes.toLocaleString()}),o.jsx("div",{className:"text-muted-foreground text-xs",children:"Likes"})]})]})]},Ne.stationId),gs=()=>o.jsx(fV,{open:H,onOpenChange:ie,children:o.jsxs(mV,{side:"left",className:"w-[320px]",children:[o.jsx(gV,{children:o.jsxs(xV,{className:"flex items-center gap-2",children:[o.jsx(DN,{className:"w-5 h-5 text-[#00B4D8]"}),"Advanced Search"]})}),o.jsx(_l,{className:"h-[calc(100vh-120px)] mt-6",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(Zr,{className:"w-4 h-4 text-[#00B4D8]"}),"Sort By"]}),o.jsxs(Il,{value:de,onValueChange:Ne=>ke(Ne),children:[o.jsx(El,{children:o.jsx(jl,{})}),o.jsxs($l,{children:[o.jsx(Vs,{value:"recent",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(md,{className:"w-4 h-4"}),"Most Recent"]})}),o.jsx(Vs,{value:"popular",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"w-4 h-4"}),"Most Popular"]})}),o.jsx(Vs,{value:"trending",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(EN,{className:"w-4 h-4"}),"Trending"]})})]})]})]}),o.jsx(Bn,{}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(nP,{className:"w-4 h-4 text-[#00B4D8]"}),"Content Type"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:we==="all",onCheckedChange:()=>Ee("all")}),o.jsx("span",{className:"text-sm",children:"All Content"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:we==="images",onCheckedChange:()=>Ee("images")}),o.jsx("span",{className:"text-sm",children:"Images Only"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:we==="videos",onCheckedChange:()=>Ee("videos")}),o.jsx("span",{className:"text-sm",children:"Videos Only"})]})]})]}),o.jsx(Bn,{}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(hf,{className:"w-4 h-4 text-[#00B4D8]"}),"Posted By"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:Ce==="all",onCheckedChange:()=>Re("all")}),o.jsx("span",{className:"text-sm",children:"Everyone"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:Ce==="influencers",onCheckedChange:()=>Re("influencers")}),o.jsxs("span",{className:"text-sm flex items-center gap-1",children:[o.jsx(hs,{className:"w-3 h-3"}),"Creators Only"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:Ce==="brands",onCheckedChange:()=>Re("brands")}),o.jsxs("span",{className:"text-sm flex items-center gap-1",children:[o.jsx(ZD,{className:"w-3 h-3"}),"Brands Only"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:Ce==="users",onCheckedChange:()=>Re("users")}),o.jsx("span",{className:"text-sm",children:"Community Users"})]})]})]}),o.jsx(Bn,{}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(Gp,{className:"w-4 h-4 text-[#00B4D8]"}),"Popular Hashtags"]}),o.jsx(_l,{className:"h-48",children:o.jsx("div",{className:"space-y-2 pr-4",children:xe.map(Ne=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:se.includes(Ne),onCheckedChange:()=>nt(Ne)}),o.jsx("span",{className:"text-sm",children:Ne})]},Ne))})})]}),Gn()>0&&o.jsxs(o.Fragment,{children:[o.jsx(Bn,{}),o.jsxs(be,{variant:"outline",onClick:Zn,className:"w-full border-[#FF6B35] text-[#FF6B35] hover:bg-[#FF6B35] hover:text-white",children:[o.jsx(Us,{className:"w-4 h-4 mr-2"}),"Clear All Filters"]})]})]})})]})});return o.jsxs("div",{className:"min-h-screen bg-background relative",dir:p,children:[X&&o.jsx(be,{size:"lg",className:`fixed bottom-20 ${h?"left-4":"right-4"} rounded-full w-14 h-14 shadow-lg z-20 bg-[#00B4D8] hover:bg-[#00B4D8]/90`,onClick:e,children:o.jsx(u0,{className:"w-6 h-6"})}),o.jsxs(Sr,{value:g,onValueChange:x,className:"w-full h-full",children:[o.jsxs("div",{className:"fixed top-16 left-0 right-0 bg-background border-b border-border z-10 max-w-md mx-auto",children:[o.jsxs("div",{className:"px-4 pt-4 pb-3 space-y-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(d0,{className:`absolute ${h?"right-3":"left-3"} top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4`}),o.jsx(sn,{placeholder:d("community.searchPlaceholder"),value:Q,onChange:Ne=>dn(Ne.target.value),className:h?"pr-10 pl-10":"pl-10 pr-10"}),Q&&o.jsx(be,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0",onClick:()=>G(""),children:o.jsx(Us,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[o.jsxs(be,{variant:"outline",size:"sm",onClick:()=>ie(!0),className:"flex-shrink-0",children:[o.jsx(DN,{className:`w-4 h-4 ${h?"ml-1":"mr-1"}`}),d("community.filters"),Gn()>0&&o.jsx(it,{className:`${h?"mr-2":"ml-2"} bg-[#FF6B35]`,children:Gn()})]}),o.jsxs(Il,{value:de,onValueChange:Ne=>ke(Ne),children:[o.jsx(El,{className:"w-[130px] h-8",children:o.jsx(jl,{})}),o.jsxs($l,{children:[o.jsx(Vs,{value:"recent",children:d("community.recent")}),o.jsx(Vs,{value:"popular",children:d("community.popular")}),o.jsx(Vs,{value:"trending",children:d("community.trending")})]})]}),!Q&&Me.length>0&&o.jsx(o.Fragment,{children:Me.slice(0,3).map((Ne,ft)=>o.jsxs(it,{variant:"secondary",className:"cursor-pointer hover:bg-[#00B4D8] hover:text-white flex-shrink-0",onClick:()=>G(Ne),children:[o.jsx(md,{className:"w-3 h-3 mr-1"}),Ne]},ft))})]}),se.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:se.map(Ne=>o.jsxs(it,{className:"bg-[#00B4D8] hover:bg-[#00B4D8]/90 gap-1",children:[Ne,o.jsx(Us,{className:"w-3 h-3 cursor-pointer",onClick:()=>nt(Ne)})]},Ne))})]}),o.jsxs(kr,{className:"grid w-full grid-cols-4 px-4",children:[o.jsx(Jt,{value:"following",children:"Following"}),o.jsx(Jt,{value:"trending",children:"Trending"}),o.jsx(Jt,{value:"brands",children:"Brands"}),o.jsx(Jt,{value:"influencers",children:"Creators"})]})]}),o.jsxs("div",{className:"pt-[155px] overflow-y-auto scrollbar-hide h-full",children:[o.jsx(Qt,{value:"following",className:"mt-0 px-4 pt-0 pb-4 space-y-4",children:Q||se.length>0||Gn()>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"font-semibold",children:[Ze.length," ",Ze.length===1?"result":"results"," found"]}),Gn()>0&&o.jsx(be,{variant:"ghost",size:"sm",onClick:Zn,className:"text-[#FF6B35]",children:"Clear all"})]}),Ze.length>0?Ze.map(Jn):o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(d0,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:"No results found"}),o.jsx("p",{className:"text-sm mb-4",children:"Try different keywords or filters"}),o.jsx(be,{onClick:Zn,variant:"outline",children:"Clear Filters"})]})]}):o.jsxs(o.Fragment,{children:[D&&o.jsx(ze,{children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-semibold",children:D.totalMembers.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Members"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-semibold text-green-600",children:D.activeToday.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Active Today"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-semibold text-blue-600",children:D.postsToday.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Posts Today"})]})]})})}),O.filter(Ne=>Ne.featured).length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(EN,{className:"w-5 h-5 text-orange-500"}),"Featured Campaigns"]}),O.filter(Ne=>Ne.featured).map($n)]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Recent Posts"}),me.length>0?me.map(Jn):o.jsx(ze,{children:o.jsx(Ue,{className:"p-8 text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"No posts yet. Be the first to share!"})})})]})]})}),o.jsxs(Qt,{value:"trending",className:"mt-0 px-4 pt-0 pb-4 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(Zr,{className:"w-5 h-5 text-green-500"}),"Trending Topics"]}),o.jsx("div",{className:"grid gap-4",children:D?.topHashtags&&D.topHashtags.length>0?D.topHashtags.map((Ne,ft)=>In(Ne,ft)):o.jsx(ze,{children:o.jsx(Ue,{className:"p-4 text-center text-muted-foreground",children:"No trending topics yet"})})})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(my,{className:"w-5 h-5 text-primary"}),"Active Campaigns"]}),O.filter(Ne=>Ne.isActive).length>0?O.filter(Ne=>Ne.isActive).map($n):o.jsx(ze,{children:o.jsx(Ue,{className:"p-4 text-center text-muted-foreground",children:"No active campaigns"})})]})]}),o.jsx(Qt,{value:"brands",className:"mt-0 px-4 pt-0 pb-4 space-y-6",children:o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(so,{className:"w-5 h-5 text-primary"}),"Creator Stations"]}),o.jsx("div",{className:"grid gap-4",children:_.length>0?_.map(As):o.jsx(ze,{children:o.jsx(Ue,{className:"p-4 text-center text-muted-foreground",children:"No stations yet"})})})]})}),o.jsxs(Qt,{value:"influencers",className:"mt-0 px-4 pt-0 pb-4 space-y-6",children:[X&&l?o.jsx(ze,{className:"border-green-500/20 bg-green-500/5",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center",children:o.jsx(hs,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:"Your Creator Station"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your content and followers"})]})]}),o.jsx(be,{onClick:c,size:"sm",className:"bg-[#00B4D8] hover:bg-[#00B4D8]/90",children:o.jsx(Gr,{className:"w-4 h-4"})})]})})}):X?o.jsx(ze,{className:"border-[#00B4D8]/20 bg-[#00B4D8]/5",children:o.jsxs(Ue,{className:"p-4 text-center",children:[o.jsx(hs,{className:"w-10 h-10 mx-auto mb-3 text-[#00B4D8]\\"}),o.jsx("h4",{className:"font-semibold mb-2",children:"Become a SkinPAI Creator"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Share your skincare expertise and build your community. One station per account."}),o.jsxs(be,{onClick:n,className:"bg-[#00B4D8] hover:bg-[#00B4D8]/90",children:[o.jsx(u0,{className:"w-4 h-4 mr-2"}),"Create Your Station"]})]})}):o.jsx(ze,{className:"border-amber-500/20 bg-amber-500/5",children:o.jsxs(Ue,{className:"p-4 text-center",children:[o.jsx(hs,{className:"w-10 h-10 mx-auto mb-3 text-amber-500"}),o.jsx("h4",{className:"font-semibold mb-2",children:"Creator Stations are Pro-Exclusive"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Upgrade to Pro to create your own station and share your skincare expertise with the community."}),o.jsxs(be,{onClick:u,className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:opacity-90",children:[o.jsx(ln,{className:"w-4 h-4 mr-2"}),"Upgrade to Pro"]})]})}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(df,{className:"w-5 h-5 text-yellow-500"}),"Creator Leaderboard"]}),o.jsx("div",{className:"space-y-3",children:V.length>0?V.slice(0,5).map((Ne,ft)=>ms(Ne,ft)):o.jsx(ze,{children:o.jsx(Ue,{className:"p-4 text-center text-muted-foreground",children:"No influencers yet"})})})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(bs,{className:"w-5 h-5 text-primary"}),"Featured Stations"]}),o.jsx("div",{className:"space-y-4",children:_.length>0?_.filter(Ne=>Ne.isPublished).map(Ne=>o.jsxs(ze,{className:"overflow-hidden",children:[o.jsxs("div",{className:"relative",children:[o.jsx(En,{src:Ne.bannerImageUrl||Ne.profileImageUrl||"",alt:Ne.stationName,className:"w-full h-32 object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),o.jsxs("div",{className:"absolute bottom-3 left-3 text-white",children:[o.jsx("h4",{className:"font-semibold",children:Ne.stationName}),o.jsx("p",{className:"text-sm opacity-90",children:Ne.bio||Ne.description||""})]})]}),o.jsx(Ue,{className:"p-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:Ne.followersCount?.toLocaleString()||"0"}),o.jsx("span",{className:"text-muted-foreground ml-1",children:"subscribers"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:Ne.totalPosts||0}),o.jsx("span",{className:"text-muted-foreground ml-1",children:"posts"})]})]}),o.jsx(be,{size:"sm",className:"bg-[#00B4D8] hover:bg-[#00B4D8]/90",onClick:()=>r(Ne.stationId),children:"Visit"})]})})]},Ne.stationId)):o.jsx(ze,{children:o.jsx(Ue,{className:"p-4 text-center text-muted-foreground",children:"No featured stations yet"})})})]})]})]})]}),gs()]})}var AV=["PageUp","PageDown"],RV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],DV={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},tp="Slider",[S4,m6e,g6e]=Pm(tp),[PV]=ei(tp,[g6e]),[x6e,Ov]=PV(tp),_V=T.forwardRef((t,e)=>{const{name:n,min:s=0,max:r=100,step:i=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[s],value:d,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:x,...y}=t,v=T.useRef(new Set),w=T.useRef(0),k=a==="horizontal"?y6e:v6e,[C=[],j]=ra({prop:d,defaultProp:u,onChange:D=>{[...v.current][w.current]?.focus(),h(D)}}),R=T.useRef(C);function _(D){const q=k6e(C,D);L(D,q)}function A(D){L(D,w.current)}function O(){const D=R.current[w.current];C[w.current]!==D&&p(C)}function L(D,q,{commit:V}={commit:!1}){const ne=j6e(i),J=E6e(Math.round((D-s)/i)*i+s,ne),ee=Rm(J,[s,r]);j((te=[])=>{const X=N6e(te,ee,q);if(I6e(X,c*i)){w.current=X.indexOf(ee);const Q=String(X)!==String(te);return Q&&V&&p(X),Q?X:te}else return te})}return o.jsx(x6e,{scope:t.__scopeSlider,name:n,disabled:l,min:s,max:r,valueIndexToChangeRef:w,thumbs:v.current,values:C,orientation:a,form:x,children:o.jsx(S4.Provider,{scope:t.__scopeSlider,children:o.jsx(S4.Slot,{scope:t.__scopeSlider,children:o.jsx(k,{"aria-disabled":l,"data-disabled":l?"":void 0,...y,ref:e,onPointerDown:gt(y.onPointerDown,()=>{l||(R.current=C)}),min:s,max:r,inverted:g,onSlideStart:l?void 0:_,onSlideMove:l?void 0:A,onSlideEnd:l?void 0:O,onHomeKeyDown:()=>!l&&L(s,0,{commit:!0}),onEndKeyDown:()=>!l&&L(r,C.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:q})=>{if(!l){const J=AV.includes(D.key)||D.shiftKey&&RV.includes(D.key)?10:1,ee=w.current,te=C[ee],X=i*J*q;L(te+X,ee,{commit:!0})}}})})})})});_V.displayName=tp;var[OV,FV]=PV(tp,{startEdge:"left",endEdge:"right",size:"width",direction:1}),y6e=T.forwardRef((t,e)=>{const{min:n,max:s,dir:r,inverted:i,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[h,p]=T.useState(null),g=qt(e,k=>p(k)),x=T.useRef(void 0),y=ou(r),v=y==="ltr",w=v&&!i||!v&&i;function N(k){const C=x.current||h.getBoundingClientRect(),j=[0,C.width],_=nI(j,w?[n,s]:[s,n]);return x.current=C,_(k-C.left)}return o.jsx(OV,{scope:t.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:o.jsx(MV,{dir:y,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:k=>{const C=N(k.clientX);a?.(C)},onSlideMove:k=>{const C=N(k.clientX);l?.(C)},onSlideEnd:()=>{x.current=void 0,c?.()},onStepKeyDown:k=>{const j=DV[w?"from-left":"from-right"].includes(k.key);u?.({event:k,direction:j?-1:1})}})})}),v6e=T.forwardRef((t,e)=>{const{min:n,max:s,inverted:r,onSlideStart:i,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=T.useRef(null),h=qt(e,d),p=T.useRef(void 0),g=!r;function x(y){const v=p.current||d.current.getBoundingClientRect(),w=[0,v.height],k=nI(w,g?[s,n]:[n,s]);return p.current=v,k(y-v.top)}return o.jsx(OV,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:o.jsx(MV,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const v=x(y.clientY);i?.(v)},onSlideMove:y=>{const v=x(y.clientY);a?.(v)},onSlideEnd:()=>{p.current=void 0,l?.()},onStepKeyDown:y=>{const w=DV[g?"from-bottom":"from-top"].includes(y.key);c?.({event:y,direction:w?-1:1})}})})}),MV=T.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=Ov(tp,n);return o.jsx(Dt.span,{...u,ref:e,onKeyDown:gt(t.onKeyDown,h=>{h.key==="Home"?(a(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):AV.concat(RV).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:gt(t.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(p)?p.focus():s(h)}),onPointerMove:gt(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&r(h)}),onPointerUp:gt(t.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),i(h))})})}),LV="SliderTrack",BV=T.forwardRef((t,e)=>{const{__scopeSlider:n,...s}=t,r=Ov(LV,n);return o.jsx(Dt.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...s,ref:e})});BV.displayName=LV;var k4="SliderRange",zV=T.forwardRef((t,e)=>{const{__scopeSlider:n,...s}=t,r=Ov(k4,n),i=FV(k4,n),a=T.useRef(null),l=qt(e,a),c=r.values.length,u=r.values.map(p=>WV(p,r.min,r.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return o.jsx(Dt.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:l,style:{...t.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});zV.displayName=k4;var C4="SliderThumb",VV=T.forwardRef((t,e)=>{const n=m6e(t.__scopeSlider),[s,r]=T.useState(null),i=qt(e,l=>r(l)),a=T.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return o.jsx(b6e,{...t,ref:i,index:a})}),b6e=T.forwardRef((t,e)=>{const{__scopeSlider:n,index:s,name:r,...i}=t,a=Ov(C4,n),l=FV(C4,n),[c,u]=T.useState(null),d=qt(e,N=>u(N)),h=c?a.form||!!c.closest("form"):!0,p=Mm(c),g=a.values[s],x=g===void 0?0:WV(g,a.min,a.max),y=S6e(s,a.values.length),v=p?.[l.size],w=v?C6e(v,x,l.direction):0;return T.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${w}px)`},children:[o.jsx(S4.ItemSlot,{scope:t.__scopeSlider,children:o.jsx(Dt.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":a.min,"aria-valuenow":g,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:d,style:g===void 0?{display:"none"}:t.style,onFocus:gt(t.onFocus,()=>{a.valueIndexToChangeRef.current=s})})}),h&&o.jsx(UV,{name:r??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:g},s)]})});VV.displayName=C4;var w6e="RadioBubbleInput",UV=T.forwardRef(({__scopeSlider:t,value:e,...n},s)=>{const r=T.useRef(null),i=qt(r,s),a=zm(e);return T.useEffect(()=>{const l=r.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&d){const h=new Event("input",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[a,e]),o.jsx(Dt.input,{style:{display:"none"},...n,ref:i,defaultValue:e})});UV.displayName=w6e;function N6e(t=[],e,n){const s=[...t];return s[n]=e,s.sort((r,i)=>r-i)}function WV(t,e,n){const i=100/(n-e)*(t-e);return Rm(i,[0,100])}function S6e(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function k6e(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),s=Math.min(...n);return n.indexOf(s)}function C6e(t,e,n){const s=t/2,i=nI([0,50],[0,s]);return(s-i(e)*n)*n}function T6e(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function I6e(t,e){if(e>0){const n=T6e(t);return Math.min(...n)>=e}return!0}function nI(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function j6e(t){return(String(t).split(".")[1]||"").length}function E6e(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var $6e=_V,A6e=BV,R6e=zV,D6e=VV;function P6e({className:t,defaultValue:e,value:n,min:s=0,max:r=100,...i}){const a=T.useMemo(()=>Array.isArray(n)?n:Array.isArray(e)?e:[s,r],[n,e,s,r]);return o.jsxs($6e,{"data-slot":"slider",defaultValue:e,value:n,min:s,max:r,className:Bt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...i,children:[o.jsx(A6e,{"data-slot":"slider-track",className:Bt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:o.jsx(R6e,{"data-slot":"slider-range",className:Bt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(l,c)=>o.jsx(D6e,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},c))]})}function _6e({product:t,open:e,onOpenChange:n}){const[s,r]=T.useState(!1),[i,a]=T.useState([{id:"1",author:{name:"Sarah M.",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop",verified:!0},content:"Absolutely love this product! My skin has never felt better. Highly recommend!",timestamp:"2 weeks ago",likes:24,liked:!1},{id:"2",author:{name:"Jessica L.",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop",verified:!0},content:"Great product, saw results after 2 weeks. Would give 5 stars but the price is a bit high.",timestamp:"1 month ago",likes:18,liked:!1,replies:[{id:"2-1",author:{name:"Brand Team",avatar:"https://images.unsplash.com/photo-1611930022073-b7a4ba5fcccd?w=150&h=150&fit=crop",verified:!0,isBrand:!0},content:"Thank you for your feedback! We're running a sale next week ",timestamp:"3 weeks ago",likes:5,liked:!1}]},{id:"3",author:{name:"Emily R.",avatar:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=150&h=150&fit=crop",verified:!0},content:"Perfect for sensitive skin. No irritation and amazing hydration.",timestamp:"1 month ago",likes:15,liked:!1}]);if(!t)return null;const l=()=>{r(!s),He.success(s?"Removed from favorites":"Added to favorites")},c=()=>{He.success("Share link copied to clipboard!")},u=[{name:"Hyaluronic Acid Serum",price:28.99,rating:4.7,image:"https://images.unsplash.com/photo-1620916566398-39f1143ab7be?w=200&h=200&fit=crop"},{name:"Gentle Daily Cleanser",price:22.5,rating:4.6,image:"https://images.unsplash.com/photo-1556228578-0d85b1a4d571?w=200&h=200&fit=crop"}];return o.jsx(Jo,{open:e,onOpenChange:n,children:o.jsxs(Qo,{className:"max-w-2xl max-h-[90vh] overflow-y-auto p-0",children:[o.jsxs("div",{className:"relative",children:[o.jsx(En,{src:t.image,alt:t.name,className:"w-full h-64 object-cover"}),t.discount&&o.jsx("div",{className:"absolute top-4 right-4",children:o.jsxs(it,{className:"bg-destructive text-white text-lg px-3 py-1",children:["-",t.discount,"%"]})}),t.isRecommended&&o.jsx("div",{className:"absolute top-4 left-4",children:o.jsxs(it,{className:"bg-primary text-white",children:[o.jsx(ln,{className:"w-3 h-3 mr-1"}),"AI Recommended"]})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-2xl font-bold mb-1",children:t.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(En,{src:t.brand.logo,alt:t.brand.name,className:"w-6 h-6 object-contain"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:t.brand.name}),t.brand.verified&&o.jsxs(it,{variant:"secondary",className:"text-xs",children:[o.jsx(an,{className:"w-3 h-3 mr-1"}),"Verified"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(be,{variant:"outline",size:"icon",onClick:l,children:o.jsx(Yn,{className:`w-5 h-5 ${s?"fill-current text-red-500":""}`})}),o.jsx(be,{variant:"outline",size:"icon",onClick:c,children:o.jsx(uf,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((d,h)=>o.jsx(bs,{className:`w-4 h-4 ${h<Math.floor(t.rating)?"fill-current text-yellow-500":"text-gray-300"}`},h))}),o.jsx("span",{className:"text-sm font-medium",children:t.rating}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",t.reviews," reviews)"]})]}),o.jsxs("div",{className:"flex items-baseline gap-2 mb-4",children:[o.jsxs("span",{className:"text-3xl font-bold",children:["$",t.price.toFixed(2)]}),t.originalPrice&&o.jsxs("span",{className:"text-lg text-muted-foreground line-through",children:["$",t.originalPrice.toFixed(2)]})]}),t.inStock?o.jsxs(it,{variant:"secondary",className:"bg-green-50 text-green-700",children:[o.jsx(an,{className:"w-3 h-3 mr-1"}),"In Stock"]}):o.jsxs(it,{variant:"secondary",className:"bg-red-50 text-red-700",children:[o.jsx(Us,{className:"w-3 h-3 mr-1"}),"Out of Stock"]})]}),o.jsx(Bn,{}),o.jsxs(Sr,{defaultValue:"details",className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-4",children:[o.jsx(Jt,{value:"details",children:"Details"}),o.jsx(Jt,{value:"ingredients",children:"Ingredients"}),o.jsx(Jt,{value:"howto",children:"How to Use"}),o.jsx(Jt,{value:"reviews",children:"Reviews"})]}),o.jsxs(Qt,{value:"details",className:"space-y-4 mt-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[o.jsx(cd,{className:"w-4 h-4 text-[#00B4D8]"}),"Category"]}),o.jsxs(it,{className:"text-sm",variant:"outline",children:[t.category.icon," ",t.category.name]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.category.description})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Suitable For"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.skinType.map((d,h)=>o.jsx(it,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:d},h))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Addresses Skin Concerns"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.skinConcerns.map((d,h)=>o.jsx(it,{variant:"secondary",className:"bg-purple-50 text-purple-700 border-purple-200",children:d},h))})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(ln,{className:"w-4 h-4 text-[#00B4D8]"}),"Key Benefits"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Clinically tested and dermatologist approved"})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Non-comedogenic and hypoallergenic formula"})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Visible results in 2-4 weeks with regular use"})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Cruelty-free and vegan friendly"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-[#00B4D8]/5 to-[#006D77]/5 p-4 rounded-lg space-y-3",children:[o.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[o.jsx(Yq,{className:"w-4 h-4 text-[#00B4D8]"}),"Shipping & Delivery"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(md,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-muted-foreground",children:"Free shipping on orders over $50"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(cd,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-muted-foreground",children:"Delivery in 3-5 business days"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(rP,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-muted-foreground",children:"30-day return policy"})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[o.jsx(Pq,{className:"w-4 h-4 text-[#00B4D8]"}),"Available At"]}),o.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg",children:[o.jsx(En,{src:t.distributor.logo,alt:t.distributor.name,className:"w-8 h-8 object-contain"}),o.jsx("span",{className:"flex-1 font-medium",children:t.distributor.name}),t.distributor.isPartner&&o.jsxs(it,{className:"bg-[#00B4D8] hover:bg-[#00B4D8]/90 text-xs",children:[o.jsx(Ml,{className:"w-3 h-3 mr-1"}),"Partner"]})]})]})]}),o.jsxs(Qt,{value:"ingredients",className:"space-y-4 mt-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Key Ingredients"}),o.jsx("div",{className:"space-y-3",children:t.keyIngredients.map((d,h)=>o.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg hover:border-[#00B4D8] transition-colors",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-[#00B4D8]/10 flex items-center justify-center flex-shrink-0",children:o.jsx(FK,{className:"w-4 h-4 text-[#00B4D8]"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-sm",children:d}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Beneficial for skin health, nourishment, and cellular repair"})]})]},h))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Sa,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm text-green-900 mb-1",children:"Clean Formula"}),o.jsx("p",{className:"text-xs text-green-700",children:"Free from parabens, sulfates, phthalates, and harmful chemicals"})]})]})}),o.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(sm,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm text-blue-900 mb-1",children:"pH Balanced"}),o.jsx("p",{className:"text-xs text-blue-700",children:"Formulated at optimal pH level to maintain skin barrier health"})]})]})}),o.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(od,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm text-amber-900 mb-1",children:"Patch Test Recommended"}),o.jsx("p",{className:"text-xs text-amber-700",children:"Always perform a patch test before first use. Discontinue if irritation occurs."})]})]})})]})]}),o.jsxs(Qt,{value:"howto",className:"space-y-4 mt-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(Hp,{className:"w-4 h-4 text-[#00B4D8]"}),"How to Use"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[#00B4D8] text-white flex items-center justify-center font-semibold text-sm",children:"1"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm mb-1",children:"Cleanse"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Start with clean, dry skin. Gently cleanse your face and pat dry."})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[#00B4D8] text-white flex items-center justify-center font-semibold text-sm",children:"2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm mb-1",children:"Apply"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Take a small amount and apply evenly to face and neck using gentle upward motions."})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[#00B4D8] text-white flex items-center justify-center font-semibold text-sm",children:"3"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm mb-1",children:"Massage"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Gently massage the product into skin using circular motions until fully absorbed."})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[#00B4D8] text-white flex items-center justify-center font-semibold text-sm",children:"4"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm mb-1",children:"Follow Up"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Continue with your regular skincare routine. Use twice daily for best results."})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-lg border border-purple-100",children:[o.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(lP,{className:"w-4 h-4 text-purple-600"}),"Best Practices"]}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 mt-1",children:""}),o.jsx("span",{children:"Use consistently for at least 4 weeks to see visible results"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 mt-1",children:""}),o.jsx("span",{children:"Store in a cool, dry place away from direct sunlight"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 mt-1",children:""}),o.jsx("span",{children:"Always apply sunscreen during the day when using active ingredients"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 mt-1",children:""}),o.jsx("span",{children:"Avoid contact with eyes. If contact occurs, rinse thoroughly with water"})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(ho,{className:"w-4 h-4 text-[#00B4D8]"}),"Recommended Usage"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-3 border rounded-lg text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:""}),o.jsx("p",{className:"font-medium text-sm",children:"Morning"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Before sunscreen"})]}),o.jsxs("div",{className:"p-3 border rounded-lg text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:""}),o.jsx("p",{className:"font-medium text-sm",children:"Evening"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Before moisturizer"})]})]})]})]}),o.jsxs(Qt,{value:"reviews",className:"space-y-4 mt-4",children:[o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-4xl font-bold mb-1",children:t.rating}),o.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((d,h)=>o.jsx(bs,{className:`w-3 h-3 ${h<Math.floor(t.rating)?"fill-current text-yellow-500":"text-gray-300"}`},h))}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.reviews," reviews"]})]}),o.jsx("div",{className:"flex-1 space-y-2",children:[5,4,3,2,1].map(d=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs w-4",children:d}),o.jsx(bs,{className:"w-3 h-3 fill-current text-yellow-500"}),o.jsx(uo,{value:d===5?75:d===4?20:5,className:"h-2"})]},d))})]})}),o.jsx("div",{className:"space-y-4",children:i.map(d=>o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium text-sm",children:d.author.name}),d.author.verified&&o.jsxs(it,{variant:"secondary",className:"text-xs",children:[o.jsx(an,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),o.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((h,p)=>o.jsx(bs,{className:`w-3 h-3 ${p<d.rating?"fill-current text-yellow-500":"text-gray-300"}`},p))})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:d.timestamp})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:d.content}),d.replies&&d.replies.map(h=>o.jsxs("div",{className:"p-3 border-t mt-2",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium text-sm",children:h.author.name}),h.author.verified&&o.jsxs(it,{variant:"secondary",className:"text-xs",children:[o.jsx(an,{className:"w-3 h-3 mr-1"}),"Verified"]}),h.author.isBrand&&o.jsx(it,{variant:"secondary",className:"text-xs",children:"Brand"})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:h.content}),o.jsx("span",{className:"text-xs text-muted-foreground",children:h.timestamp})]},h.id))]},d.id))})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"You Might Also Like"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.map((d,h)=>o.jsxs("div",{className:"border rounded-lg p-3 cursor-pointer hover:shadow-md transition-shadow",children:[o.jsx(En,{src:d.image,alt:d.name,className:"w-full h-24 object-cover rounded mb-2"}),o.jsx("p",{className:"text-sm font-medium line-clamp-2 mb-1",children:d.name}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-sm font-bold",children:["$",d.price]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(bs,{className:"w-3 h-3 fill-current text-yellow-500"}),o.jsx("span",{className:"text-xs",children:d.rating})]})]})]},h))})]}),o.jsxs("div",{className:"flex gap-3 pt-4 sticky bottom-0 bg-background pb-2",children:[o.jsxs(be,{variant:"outline",className:"flex-1",onClick:l,children:[o.jsx(Yn,{className:`w-4 h-4 mr-2 ${s?"fill-current":""}`}),s?"Saved":"Save"]}),o.jsxs(be,{className:"w-full h-12 bg-[#00B4D8] hover:bg-[#00B4D8]/90 text-base",onClick:()=>window.open(t.shopUrl,"_blank"),disabled:!t.inStock,children:[o.jsx(ld,{className:"w-4 h-4 mr-2"}),"Browse Source"]})]})]})]})})}function O6e({bundle:t,open:e,onOpenChange:n}){const[s,r]=T.useState("overview"),[i,a]=T.useState(!1);if(!t)return null;const l=()=>{a(!i),He.success(i?"Removed from favorites":"Added to favorites")};return o.jsx(Jo,{open:e,onOpenChange:n,children:o.jsxs(Qo,{className:"max-w-4xl max-h-[90vh] p-0 gap-0 flex flex-col",children:[o.jsxs(_l,{className:"flex-1 overflow-y-auto",children:[o.jsxs("div",{className:"relative h-64 sm:h-80 bg-gradient-to-br from-[#00B4D8]/10 to-[#006D77]/10",children:[o.jsx(En,{src:t.image,alt:t.name,className:"w-full h-full object-cover"}),o.jsxs("div",{className:"absolute top-4 left-4 right-4 flex justify-between items-start",children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs(it,{className:"bg-[#FF6B35] hover:bg-[#FF6B35]/90 shadow-lg w-fit",children:[o.jsx(sP,{className:"w-4 h-4 mr-1"}),"Save $",t.savings.toFixed(2)," (",Math.round(t.savings/t.originalPrice*100),"% OFF)"]}),t.isCustomized&&o.jsxs(it,{className:"bg-[#00B4D8] hover:bg-[#00B4D8]/90 shadow-lg w-fit",children:[o.jsx(ln,{className:"w-4 h-4 mr-1"}),"Customized for You"]})]}),o.jsx(be,{variant:"ghost",size:"sm",onClick:l,className:"h-10 w-10 p-0 bg-white/95 hover:bg-white shadow-lg rounded-full",children:o.jsx(Yn,{className:`w-5 h-5 ${i?"fill-red-500 text-red-500":"text-muted-foreground"}`})})]})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(cd,{className:"w-5 h-5 text-[#00B4D8]"}),o.jsx("span",{className:"font-medium text-[#006D77]",children:t.brand.name}),t.brand.verified&&o.jsx(hi,{className:"w-4 h-4 text-blue-500"}),o.jsx(it,{variant:"outline",className:"ml-auto",children:t.category})]}),o.jsx(Bc,{children:o.jsx(zc,{className:"text-2xl",children:t.name})}),o.jsx("p",{className:"text-muted-foreground mt-2",children:t.description})]}),o.jsxs("div",{className:"bg-gradient-to-r from-[#00B4D8]/5 to-[#006D77]/5 p-4 rounded-lg border border-[#00B4D8]/20",children:[o.jsxs("div",{className:"flex items-baseline gap-3 mb-2",children:[o.jsxs("span",{className:"text-3xl font-bold text-[#006D77]",children:["$",t.bundlePrice.toFixed(2)]}),o.jsxs("span",{className:"text-lg text-muted-foreground line-through",children:["$",t.originalPrice.toFixed(2)]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#FF6B35] font-medium",children:[o.jsx(Zr,{className:"w-4 h-4"}),"You save $",t.savings.toFixed(2)," with this bundle"]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[o.jsx(l0,{className:"w-5 h-5 mx-auto mb-1 text-[#00B4D8]"}),o.jsx("p",{className:"text-lg font-bold",children:t.products.length}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Products"})]}),o.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[o.jsx(bs,{className:"w-5 h-5 mx-auto mb-1 text-yellow-500"}),o.jsx("p",{className:"text-lg font-bold",children:"4.8"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Rating"})]}),o.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[o.jsx(so,{className:"w-5 h-5 mx-auto mb-1 text-[#006D77]"}),o.jsx("p",{className:"text-lg font-bold",children:"2.4k"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sold"})]})]}),o.jsx(Bn,{}),o.jsxs(Sr,{value:s,onValueChange:r,className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-3 bg-muted",children:[o.jsxs(Jt,{value:"overview",className:"text-xs sm:text-sm",children:[o.jsx(Hp,{className:"w-3 h-3 mr-1"}),"Overview"]}),o.jsxs(Jt,{value:"products",className:"text-xs sm:text-sm",children:[o.jsx(cd,{className:"w-3 h-3 mr-1"}),"Products (",t.products.length,")"]}),o.jsxs(Jt,{value:"reviews",className:"text-xs sm:text-sm",children:[o.jsx(bs,{className:"w-3 h-3 mr-1"}),"Reviews"]})]}),o.jsxs(Qt,{value:"overview",className:"space-y-6 mt-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(ln,{className:"w-5 h-5 text-[#00B4D8]"}),"Bundle Benefits"]}),o.jsx("div",{className:"space-y-2",children:(t.benefits||[]).map((c,u)=>o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-lg",children:[o.jsx(an,{className:"w-5 h-5 text-[#00B4D8] flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"text-sm",children:c})]},u))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Perfect For"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(t.forSkinType||[]).map((c,u)=>o.jsx(it,{variant:"outline",className:"border-[#00B4D8] text-[#006D77]",children:c},u))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"How to Use This Bundle"}),o.jsx("div",{className:"bg-gradient-to-r from-[#00B4D8]/5 to-[#006D77]/5 p-4 rounded-lg border border-[#00B4D8]/20",children:o.jsxs("ol",{className:"space-y-2",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-[#00B4D8] text-white flex items-center justify-center text-xs font-bold",children:"1"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Morning Routine"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Start with the cleanser, apply serum, and finish with moisturizer and SPF"})]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-[#00B4D8] text-white flex items-center justify-center text-xs font-bold",children:"2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Evening Routine"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Double cleanse, apply treatment products, and seal with night cream"})]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-[#00B4D8] text-white flex items-center justify-center text-xs font-bold",children:"3"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Weekly Care"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Use masks 2-3 times per week for enhanced results"})]})]})]})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Expected Results"}),o.jsxs("div",{className:"grid gap-3",children:[o.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[o.jsx(Gr,{className:"w-5 h-5 text-[#00B4D8] flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm",children:"Week 1-2"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Improved hydration and skin texture"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[o.jsx(Gr,{className:"w-5 h-5 text-[#00B4D8] flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm",children:"Week 3-4"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Visible reduction in targeted concerns"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[o.jsx(Gr,{className:"w-5 h-5 text-[#00B4D8] flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm",children:"Week 5+"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Long-term skin health improvement and glow"})]})]})]})]})]}),o.jsxs(Qt,{value:"products",className:"space-y-4 mt-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-[#00B4D8]/5 to-[#006D77]/5 p-3 rounded-lg border border-[#00B4D8]/20",children:o.jsxs("p",{className:"text-sm",children:[o.jsxs("span",{className:"font-semibold",children:[t.products.length," carefully selected products"]})," work together to deliver complete skincare results"]})}),t.products.map((c,u)=>o.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"w-20 h-20 flex-shrink-0 bg-muted rounded-lg overflow-hidden",children:o.jsx(En,{src:c.image,alt:c.name,className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[o.jsx("h4",{className:"font-medium text-sm line-clamp-2",children:c.name}),o.jsx(it,{variant:"outline",className:"flex-shrink-0 text-xs",children:c.category})]}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:c.size}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(bs,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),o.jsx("span",{className:"text-xs font-medium",children:c.rating})]}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["$",c.price.toFixed(2)," value"]})]})]})]}),o.jsxs("div",{className:"mt-3 pt-3 border-t",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Key Ingredients:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:c.keyIngredients.map((d,h)=>o.jsx(it,{variant:"secondary",className:"text-xs",children:d},h))})]})]},u)),o.jsxs("div",{className:"bg-gradient-to-r from-[#FF6B35]/10 to-[#FF6B35]/5 p-4 rounded-lg border border-[#FF6B35]/20",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Individual Value"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Bundle Price"})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"font-bold line-through text-muted-foreground",children:["$",t.originalPrice.toFixed(2)]}),o.jsxs("p",{className:"text-2xl font-bold text-[#006D77]",children:["$",t.bundlePrice.toFixed(2)]})]})]}),o.jsx(Bn,{className:"my-2"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-semibold text-[#FF6B35]",children:"Your Savings"}),o.jsxs("span",{className:"font-bold text-[#FF6B35] text-lg",children:["$",t.savings.toFixed(2)]})]})]})]}),o.jsxs(Qt,{value:"reviews",className:"space-y-4 mt-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-[#00B4D8]/5 to-[#006D77]/5 p-4 rounded-lg border border-[#00B4D8]/20",children:o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-[#006D77]",children:"4.8"}),o.jsx("div",{className:"flex items-center gap-1 justify-center my-1",children:[1,2,3,4,5].map(c=>o.jsx(bs,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},c))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Based on 287 reviews"})]}),o.jsx("div",{className:"flex-1 space-y-1",children:[5,4,3,2,1].map(c=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs w-3",children:c}),o.jsx(bs,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),o.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-[#00B4D8]",style:{width:`${c===5?78:c===4?15:c===3?5:1}%`}})}),o.jsxs("span",{className:"text-xs text-muted-foreground w-8",children:[c===5?78:c===4?15:c===3?5:1,"%"]})]},c))})]})}),o.jsx("div",{className:"space-y-4",children:[{name:"Sarah M.",rating:5,date:"2 weeks ago",verified:!0,review:"This bundle completely transformed my skin! The products work so well together and I love having a complete routine. Great value for money!",helpful:24},{name:"Jessica L.",rating:5,date:"1 month ago",verified:!0,review:"Best skincare investment I've made. My skin has never looked better. The step-by-step guide was super helpful.",helpful:18},{name:"Emily R.",rating:4,date:"3 weeks ago",verified:!0,review:"Really good bundle! Saw results within 2 weeks. Only wish the moisturizer was a bit larger.",helpful:12}].map((c,u)=>o.jsxs("div",{className:"border rounded-lg p-4",children:[o.jsx("div",{className:"flex items-start justify-between mb-2",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium text-sm",children:c.name}),c.verified&&o.jsxs(it,{variant:"outline",className:"text-xs border-green-500 text-green-700",children:[o.jsx(an,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex",children:[1,2,3,4,5].map(d=>o.jsx(bs,{className:`w-3 h-3 ${d<=c.rating?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},d))}),o.jsx("span",{className:"text-xs text-muted-foreground",children:c.date})]})]})}),o.jsx("p",{className:"text-sm mb-3",children:c.review}),o.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:o.jsxs(be,{variant:"ghost",size:"sm",className:"h-7 px-2",children:["Helpful (",c.helpful,")"]})})]},u))})]})]})]})]}),o.jsx("div",{className:"sticky bottom-0 bg-background border-t p-4",children:o.jsx("div",{className:"flex gap-3",children:o.jsxs(be,{onClick:()=>{He.success("Redirecting to bundle page..."),window.open("https://example.com/bundles/"+t.id,"_blank")},className:"flex-1 bg-[#00B4D8] hover:bg-[#00B4D8]/90 h-12",children:[o.jsx(ld,{className:"w-4 h-4 mr-2"}),"Learn More"]})})})]})})}const lD=t=>({id:t.productId,name:t.productName,brand:{id:t.brand?.brandId||"",name:t.brand?.brandName||"Unknown",logo:t.brand?.logoUrl||"",description:t.brand?.description||"",verified:t.brand?.isVerified||!1,distributors:[]},distributor:{id:t.distributor?.distributorId||"",name:t.distributor?.name||"Unknown",website:t.distributor?.websiteUrl||"",logo:t.distributor?.logoUrl||"",isPartner:t.distributor?.isPartner||!1},price:t.price,originalPrice:t.originalPrice,rating:t.averageRating||0,reviews:t.totalReviews,image:t.productImageUrl||"",category:{id:t.category?.categoryId||"",name:t.category?.categoryName||"General",description:t.category?.description||"",icon:t.category?.iconName||"package"},description:t.description||"",keyIngredients:t.keyIngredients||[],skinType:t.skinTypes||[],skinConcerns:t.skinConcerns||[],shopUrl:t.shopUrl||"",inStock:t.inStock,isRecommended:t.isRecommended,discount:t.discountPercent});function F6e({recommendations:t}){const[e,n]=T.useState("all"),[s,r]=of("skinpai_favorites",[]),[i,a]=T.useState(null),[l,c]=T.useState(!1),[u,d]=T.useState(null),[h,p]=T.useState(!1),[g,x]=T.useState(""),[y,v]=T.useState("recommended"),[w,N]=T.useState([]),[k,C]=T.useState([]),[j,R]=T.useState([]),[_,A]=T.useState([]),[O,L]=T.useState([]),[D,q]=T.useState(!0);T.useEffect(()=>{(async()=>{try{const[xe,$e,Ze,bt,$t]=await Promise.all([Ln.getProducts({pageSize:100}),Ln.getBrands(),Ln.getBundles(),Ln.getDistributors(),Ln.getCategories()]);xe.data?.items&&xe.data.items.length>0&&N(xe.data.items.map(lD)),$e.data&&$e.data.length>0&&C($e.data.map(at=>({id:at.brandId,name:at.brandName,logo:at.logoUrl||"",description:at.description||"",verified:at.isVerified,distributors:[]}))),Ze.data&&Ze.data.length>0&&R(Ze.data.map(at=>({id:at.bundleId,name:at.name,brand:{id:"",name:"SkinPAI",logo:"",description:"",verified:!0,distributors:[]},description:at.description||"",products:at.items?.map(nt=>lD({...nt.product,productId:nt.product?.productId||nt.productId,productName:nt.product?.productName||"Product",price:nt.product?.price||0,totalReviews:nt.product?.totalReviews||0,inStock:nt.product?.inStock??!0,isFeatured:nt.product?.isFeatured??!1,isRecommended:nt.product?.isRecommended??!1,brand:nt.product?.brand||{brandId:"",brandName:"",isVerified:!1},category:nt.product?.category||{categoryId:"",categoryName:""}}))||[],bundlePrice:at.discountedPrice,originalPrice:at.totalPrice,savings:at.totalPrice-at.discountedPrice,image:at.imageUrl||"",category:"routine",benefits:[]}))),bt.data&&bt.data.length>0&&A(bt.data.map(at=>({id:at.distributorId,name:at.name,website:at.website||"",logo:at.logoUrl||"",isPartner:at.isPartner}))),$t.data&&$t.data.length>0&&L($t.data.map(at=>({id:at.categoryId,name:at.categoryName,description:at.description||"",icon:at.categoryIcon||"package"})))}catch(xe){console.error("Failed to load products from API:",xe)}finally{q(!1)}})()},[]);const V=w,ne=k,[J,ee]=T.useState({brands:[],distributors:[],categories:[],priceRange:[0,100],inStock:!1,onSale:!1,skinTypes:[],skinConcerns:[],verifiedBrandsOnly:!1}),te=T.useMemo(()=>({brands:ne.map(me=>({id:me.id,name:me.name,verified:me.verified})),distributors:_.map(me=>({id:me.id,name:me.name,isPartner:me.isPartner})),categories:O,skinTypes:[...new Set(V.flatMap(me=>me.skinType))],skinConcerns:[...new Set(V.flatMap(me=>me.skinConcerns))]}),[V,ne,_,O]),X=T.useMemo(()=>V.filter(me=>{if(g){const xe=g.toLowerCase();if(!(me.name.toLowerCase().includes(xe)||me.brand.name.toLowerCase().includes(xe)||me.description.toLowerCase().includes(xe)||me.keyIngredients.some(Ze=>Ze.toLowerCase().includes(xe))||me.skinConcerns.some(Ze=>Ze.toLowerCase().includes(xe))))return!1}return!(J.brands.length>0&&!J.brands.includes(me.brand.id)||J.distributors.length>0&&!J.distributors.includes(me.distributor.id)||J.categories.length>0&&!J.categories.includes(me.category.id)||me.price<J.priceRange[0]||me.price>J.priceRange[1]||J.inStock&&!me.inStock||J.onSale&&!me.originalPrice||J.skinTypes.length>0&&!J.skinTypes.some(xe=>me.skinType.includes(xe))||J.skinConcerns.length>0&&!J.skinConcerns.some(xe=>me.skinConcerns.includes(xe))||J.verifiedBrandsOnly&&!me.brand.verified)}),[J,g]),Q=T.useMemo(()=>{const me=[...X];switch(y){case"price-low":return me.sort((xe,$e)=>xe.price-$e.price);case"price-high":return me.sort((xe,$e)=>$e.price-xe.price);case"rating":return me.sort((xe,$e)=>$e.rating-xe.rating);case"reviews":return me.sort((xe,$e)=>$e.reviews-xe.reviews);case"recommended":return me.sort((xe,$e)=>xe.isRecommended&&!$e.isRecommended?-1:!xe.isRecommended&&$e.isRecommended?1:$e.rating-xe.rating);case"newest":return me;default:return me}},[X,y]),G=T.useMemo(()=>Q.filter(me=>me.isRecommended),[Q]),H=T.useMemo(()=>productBundles.filter(me=>{if(J.brands.length>0&&!J.brands.includes(me.brand.id))return!1;if(g){const xe=g.toLowerCase();return me.name.toLowerCase().includes(xe)||me.description.toLowerCase().includes(xe)||me.category.toLowerCase().includes(xe)}return!0}),[J.brands,g]),ie=me=>{r($e=>$e.includes(me)?$e.filter(Ze=>Ze!==me):[...$e,me]);const xe=s.includes(me);He.success(xe?"Removed from favorites":"Added to favorites")},de=me=>{He.success("Redirecting to store..."),window.open(me,"_blank")},ke=me=>{a(me),c(!0)},we=me=>{d(me),p(!0)},Ee=(me,xe)=>{ee($e=>({...$e,[me]:xe}))},Ce=(me,xe)=>{ee($e=>({...$e,[me]:$e[me].includes(xe)?$e[me].filter(Ze=>Ze!==xe):[...$e[me],xe]}))},Re=()=>{ee({brands:[],distributors:[],categories:[],priceRange:[0,100],inStock:!1,onSale:!1,skinTypes:[],skinConcerns:[],verifiedBrandsOnly:!1}),x("")},se=()=>J.brands.length+J.distributors.length+J.categories.length+(J.inStock?1:0)+(J.onSale?1:0)+J.skinTypes.length+J.skinConcerns.length+(J.priceRange[0]>0||J.priceRange[1]<100?1:0),Te=me=>{const xe=$e=>({cleanser:"bg-blue-100 text-blue-700 border-blue-200",serum:"bg-purple-100 text-purple-700 border-purple-200",moisturizer:"bg-green-100 text-green-700 border-green-200",sunscreen:"bg-yellow-100 text-yellow-700 border-yellow-200",treatment:"bg-pink-100 text-pink-700 border-pink-200",mask:"bg-indigo-100 text-indigo-700 border-indigo-200",toner:"bg-teal-100 text-teal-700 border-teal-200",exfoliant:"bg-orange-100 text-orange-700 border-orange-200"})[$e]||"bg-gray-100 text-gray-700 border-gray-200";return o.jsx(ze,{className:"group overflow-hidden hover:shadow-xl transition-all duration-300 flex flex-col h-full",children:o.jsxs(Ue,{className:"p-0 flex flex-col h-full",children:[o.jsxs("div",{className:"relative aspect-square overflow-hidden bg-muted",children:[o.jsx(En,{src:me.image,alt:me.name,className:"w-full h-full object-cover cursor-pointer group-hover:scale-105 transition-transform duration-300",onClick:()=>ke(me)}),o.jsxs("div",{className:"absolute top-2 left-2 right-2 flex justify-between items-start gap-2",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[me.originalPrice&&o.jsxs(it,{className:"bg-[#FF6B35] hover:bg-[#FF6B35]/90 shadow-md text-xs",children:["-",me.discount,"%"]}),me.isRecommended&&o.jsxs(it,{className:"bg-[#00B4D8] hover:bg-[#00B4D8]/90 shadow-md text-xs",children:[o.jsx(ln,{className:"w-3 h-3 mr-1"}),"For You"]})]}),o.jsx(be,{variant:"ghost",size:"sm",onClick:$e=>{$e.stopPropagation(),ie(me.id)},className:"h-8 w-8 p-0 bg-white/95 hover:bg-white shadow-md rounded-full",children:o.jsx(Yn,{className:`w-4 h-4 ${s.includes(me.id)?"fill-red-500 text-red-500":"text-muted-foreground"}`})})]}),!me.inStock&&o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center",children:o.jsx(it,{variant:"secondary",className:"text-sm px-3 py-1",children:"Out of Stock"})})]}),o.jsxs("div",{className:"p-3 flex-1 flex flex-col",children:[o.jsxs(it,{className:`mb-2 w-fit text-xs border ${xe(me.category.id)}`,variant:"outline",children:[me.category.icon," ",me.category.name]}),o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx("span",{className:"text-xs text-muted-foreground line-clamp-1",children:me.brand.name}),me.brand.verified&&o.jsx(hi,{className:"w-3 h-3 text-blue-500 flex-shrink-0"})]}),o.jsx("h3",{className:"font-medium line-clamp-2 cursor-pointer hover:text-[#00B4D8] transition-colors mb-2 min-h-[2.5rem] text-sm",onClick:()=>ke(me),children:me.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(bs,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),o.jsx("span",{className:"text-xs font-medium",children:me.rating})]}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",me.reviews,")"]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[me.keyIngredients.slice(0,2).map(($e,Ze)=>o.jsx(it,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:$e.length>10?$e.substring(0,10)+"...":$e},Ze)),me.keyIngredients.length>2&&o.jsxs(it,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:["+",me.keyIngredients.length-2]})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsxs("span",{className:"font-semibold text-[#006D77]",children:["$",me.price]}),me.originalPrice&&o.jsxs("span",{className:"text-xs text-muted-foreground line-through",children:["$",me.originalPrice]})]}),o.jsxs("div",{className:"flex gap-2 mt-auto",children:[o.jsx(be,{onClick:()=>de(me.shopUrl),className:"flex-1 bg-[#00B4D8] hover:bg-[#00B4D8]/90 text-xs h-8",disabled:!me.inStock,children:me.inStock?o.jsxs(o.Fragment,{children:[o.jsx(ld,{className:"w-3 h-3 mr-1"}),"Browse Source"]}):"Notify"}),o.jsx(be,{variant:"outline",size:"sm",onClick:()=>ke(me),className:"px-2 h-8",children:o.jsx(ld,{className:"w-3 h-3"})})]})]})]})},me.id)},Me=me=>o.jsx(ze,{className:"group overflow-hidden hover:shadow-xl transition-all duration-300 border-[#00B4D8]/30",children:o.jsxs(Ue,{className:"p-0",children:[o.jsxs("div",{className:"relative h-48 overflow-hidden bg-gradient-to-br from-[#00B4D8]/10 to-[#006D77]/10 cursor-pointer",onClick:()=>we(me),children:[o.jsx(En,{src:me.image,alt:me.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),o.jsxs("div",{className:"absolute top-3 left-3 right-3 flex justify-between items-start",children:[o.jsxs(it,{className:"bg-[#FF6B35] hover:bg-[#FF6B35]/90 shadow-lg",children:[o.jsx(sP,{className:"w-3 h-3 mr-1"}),"Save $",me.savings.toFixed(2)]}),me.isCustomized&&o.jsxs(it,{className:"bg-[#00B4D8] hover:bg-[#00B4D8]/90 shadow-lg",children:[o.jsx(ln,{className:"w-3 h-3 mr-1"}),"Customized"]})]})]}),o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(cd,{className:"w-4 h-4 text-[#00B4D8]"}),o.jsx("span",{className:"text-sm font-medium text-[#006D77]",children:me.brand.name}),me.brand.verified&&o.jsx(hi,{className:"w-3 h-3 text-blue-500"})]}),o.jsxs("div",{className:"cursor-pointer",onClick:()=>we(me),children:[o.jsx("h3",{className:"font-semibold mb-1 hover:text-[#00B4D8] transition-colors",children:me.name}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:me.description})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(l0,{className:"w-4 h-4 text-[#006D77]"}),o.jsxs("span",{className:"text-muted-foreground",children:[me.products.length," products included"]})]}),o.jsx("div",{className:"space-y-1",children:me.benefits.slice(0,2).map((xe,$e)=>o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-[#00B4D8] flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:xe})]},$e))}),o.jsxs("div",{className:"pt-2 border-t",children:[o.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[o.jsxs("span",{className:"text-2xl font-bold text-[#006D77]",children:["$",me.bundlePrice]}),o.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",me.originalPrice]})]}),o.jsxs(be,{className:"w-full bg-[#00B4D8] hover:bg-[#00B4D8]/90",onClick:()=>we(me),children:[o.jsx(ld,{className:"w-4 h-4 mr-2"}),"Learn More"]})]})]})]})},me.id),Ye=()=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(hi,{className:"w-4 h-4 text-[#00B4D8]"}),"Brands"]}),o.jsx(_l,{className:"h-40",children:o.jsx("div",{className:"space-y-2 pr-4",children:te.brands.map(me=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:J.brands.includes(me.id),onCheckedChange:()=>Ce("brands",me.id)}),o.jsxs("span",{className:"text-sm flex items-center gap-1",children:[me.name,me.verified&&o.jsx(hi,{className:"w-3 h-3 text-blue-500"})]})]},me.id))})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(zq,{className:"w-4 h-4 text-[#00B4D8]"}),"Product Type"]}),o.jsx(_l,{className:"h-40",children:o.jsx("div",{className:"space-y-2 pr-4",children:te.categories.map(me=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:J.categories.includes(me.id),onCheckedChange:()=>Ce("categories",me.id)}),o.jsxs("span",{className:"text-sm",children:[me.icon," ",me.name]})]},me.id))})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(ln,{className:"w-4 h-4 text-[#00B4D8]"}),"Skin Concerns"]}),o.jsx(_l,{className:"h-32",children:o.jsx("div",{className:"space-y-2 pr-4",children:te.skinConcerns.map(me=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{checked:J.skinConcerns.includes(me),onCheckedChange:()=>Ce("skinConcerns",me)}),o.jsx("span",{className:"text-sm",children:me})]},me))})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-3",children:"Price Range"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(P6e,{value:J.priceRange,onValueChange:me=>Ee("priceRange",me),max:100,step:5,className:"w-full"}),o.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[o.jsxs("span",{children:["$",J.priceRange[0]]}),o.jsxs("span",{children:["$",J.priceRange[1],"+"]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-sm font-medium",children:"Quick Filters"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{id:"verified",checked:J.verifiedBrandsOnly,onCheckedChange:me=>ee(xe=>({...xe,verifiedBrandsOnly:me}))}),o.jsx("label",{htmlFor:"verified",className:"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Verified Brands Only"})]})]}),se()>0&&o.jsxs(be,{variant:"outline",onClick:Re,className:"w-full border-[#FF6B35] text-[#FF6B35] hover:bg-[#FF6B35] hover:text-white",children:[o.jsx(Us,{className:"w-4 h-4 mr-2"}),"Clear All Filters"]})]});return o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-6",children:[o.jsx(ze,{className:"border-[#00B4D8]/20",children:o.jsxs(Ot,{children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Go,{className:"w-5 h-5 text-[#00B4D8]"}),"Skincare Shop"]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[Q.length," products  ",H.length," bundles from verified brands"]})]})}),t.length>0&&o.jsx(ze,{className:"bg-gradient-to-r from-[#00B4D8]/10 to-[#006D77]/10 border-[#00B4D8]/20",children:o.jsxs(Ue,{className:"p-4",children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(ln,{className:"w-4 h-4 text-[#00B4D8]"}),"Recommended for your skin:"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((me,xe)=>o.jsx(it,{className:"bg-[#00B4D8] hover:bg-[#00B4D8]/90",children:me},xe))})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(d0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),o.jsx(sn,{placeholder:"Search products, brands, or ingredients...",value:g,onChange:me=>x(me.target.value),className:"pl-10 pr-10 h-12"}),g&&o.jsx(be,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>x(""),children:o.jsx(Us,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(fV,{children:[o.jsx(YPe,{asChild:!0,children:o.jsxs(be,{variant:"outline",className:"flex-1 sm:flex-initial",children:[o.jsx(nP,{className:"w-4 h-4 mr-2"}),"Filters",se()>0&&o.jsx(it,{className:"ml-2 bg-[#FF6B35]",children:se()})]})}),o.jsxs(mV,{side:"left",className:"w-[300px]",children:[o.jsxs(gV,{children:[o.jsxs(xV,{className:"flex items-center gap-2",children:[o.jsx(DN,{className:"w-5 h-5 text-[#00B4D8]"}),"Filters"]}),o.jsx(JPe,{className:"text-sm text-muted-foreground",children:"Adjust your filters to find the perfect products for your skin."})]}),o.jsx(_l,{className:"h-[calc(100vh-120px)] mt-6",children:Ye()})]})]}),o.jsxs(Il,{value:y,onValueChange:me=>v(me),children:[o.jsxs(El,{className:"flex-1 sm:w-[200px]",children:[o.jsx(Zr,{className:"w-4 h-4 mr-2"}),o.jsx(jl,{placeholder:"Sort by"})]}),o.jsxs($l,{children:[o.jsx(Vs,{value:"recommended",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ln,{className:"w-4 h-4"}),"Recommended"]})}),o.jsx(Vs,{value:"rating",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bs,{className:"w-4 h-4"}),"Highest Rated"]})}),o.jsx(Vs,{value:"reviews",children:"Most Popular"}),o.jsx(Vs,{value:"price-low",children:"Price: Low to High"}),o.jsx(Vs,{value:"price-high",children:"Price: High to Low"})]})]})]}),se()>0&&o.jsxs("div",{className:"flex flex-wrap gap-2",children:[J.brands.map(me=>{const xe=te.brands.find($e=>$e.id===me);return xe?o.jsxs(it,{variant:"secondary",className:"gap-1",children:[xe.name,o.jsx(Us,{className:"w-3 h-3 cursor-pointer",onClick:()=>Ce("brands",me)})]},me):null}),J.categories.map(me=>{const xe=te.categories.find($e=>$e.id===me);return xe?o.jsxs(it,{variant:"secondary",className:"gap-1",children:[xe.icon," ",xe.name,o.jsx(Us,{className:"w-3 h-3 cursor-pointer",onClick:()=>Ce("categories",me)})]},me):null}),J.skinConcerns.map(me=>o.jsxs(it,{variant:"secondary",className:"gap-1",children:[me,o.jsx(Us,{className:"w-3 h-3 cursor-pointer",onClick:()=>Ce("skinConcerns",me)})]},me)),J.inStock&&o.jsxs(it,{variant:"secondary",className:"gap-1",children:["In Stock",o.jsx(Us,{className:"w-3 h-3 cursor-pointer",onClick:()=>Ee("inStock",!1)})]}),J.onSale&&o.jsxs(it,{variant:"secondary",className:"gap-1",children:["On Sale",o.jsx(Us,{className:"w-3 h-3 cursor-pointer",onClick:()=>Ee("onSale",!1)})]})]})]}),o.jsxs(Sr,{value:e,onValueChange:n,className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-3 bg-muted p-1 h-auto gap-1",children:[o.jsxs(Jt,{value:"all",className:"data-[state=active]:bg-[#006D77] data-[state=active]:text-white data-[state=active]:shadow-md transition-all",children:[o.jsx(Go,{className:"w-3 h-3 mr-1"}),"All (",Q.length,")"]}),o.jsxs(Jt,{value:"recommended",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-[#00B4D8] data-[state=active]:to-[#006D77] data-[state=active]:text-white data-[state=active]:shadow-md transition-all",children:[o.jsx(ln,{className:"w-3 h-3 mr-1"}),"For You (",G.length,")"]}),o.jsxs(Jt,{value:"bundles",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-[#FF6B35] data-[state=active]:to-[#FF8C5A] data-[state=active]:text-white data-[state=active]:shadow-md transition-all",children:[o.jsx(cd,{className:"w-3 h-3 mr-1"}),"Bundles (",H.length,")"]})]}),o.jsx(Qt,{value:"all",className:"mt-6",children:Q.length>0?o.jsx("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:Q.map(Te)}):o.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[o.jsx(Go,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:"No products found"}),o.jsx("p",{className:"text-sm mb-4",children:"Try adjusting your filters or search terms"}),o.jsx(be,{onClick:Re,variant:"outline",children:"Clear Filters"})]})}),o.jsx(Qt,{value:"recommended",className:"mt-6",children:G.length>0?o.jsx("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:G.map(Te)}):o.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[o.jsx(ln,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:"No recommendations match your filters"}),o.jsx("p",{className:"text-sm mb-4",children:"Try adjusting your filters or browse all products"}),o.jsx(be,{onClick:Re,variant:"outline",children:"Clear Filters"})]})}),o.jsx(Qt,{value:"bundles",className:"mt-6",children:H.length>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-[#00B4D8]/10 to-[#006D77]/10 rounded-lg border border-[#00B4D8]/20",children:[o.jsxs("h3",{className:"font-semibold flex items-center gap-2 mb-1",children:[o.jsx(l0,{className:"w-5 h-5 text-[#00B4D8]"}),"Customized Bundles by Brand"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Save up to 20% on curated skincare sets"})]}),o.jsx("div",{className:"space-y-4",children:H.map(Me)})]}):o.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[o.jsx(cd,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:"No bundles found"}),o.jsx("p",{className:"text-sm mb-4",children:"Try adjusting your filters or search terms"}),o.jsx(be,{onClick:Re,variant:"outline",children:"Clear Filters"})]})})]}),o.jsx(ze,{className:"border-[#00B4D8]/20 bg-gradient-to-r from-[#00B4D8]/5 to-[#006D77]/5",children:o.jsxs(Ue,{className:"p-6 text-center",children:[o.jsx("h4",{className:"font-medium mb-2",children:"Need personalized advice?"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Connect with certified dermatologists for custom recommendations"}),o.jsx(be,{variant:"outline",onClick:()=>He.success("Coming soon!"),className:"border-[#00B4D8] text-[#00B4D8] hover:bg-[#00B4D8] hover:text-white",children:"Book Consultation"})]})}),o.jsx(_6e,{product:i,open:l,onOpenChange:c}),o.jsx(O6e,{bundle:u,open:h,onOpenChange:p})]})}function M6e({open:t,onOpenChange:e,currentBalance:n,onAddFunds:s}){const[r,i]=T.useState(""),[a,l]=T.useState(""),[c,u]=T.useState("card"),[d,h]=T.useState(!1),p=[10,25,50,100,200,500],g=10,x=1e3,y=()=>r==="custom"?parseFloat(a)||0:parseFloat(r)||0,v=()=>{const N=y();return!N||N<=0?(He.error("Please select or enter an amount"),!1):N<g?(He.error(`Minimum amount is $${g}`),!1):N>x?(He.error(`Maximum amount is $${x} per transaction`),!1):!0},w=async()=>{if(!v())return;h(!0),await new Promise(k=>setTimeout(k,2e3));const N=y();s(N),He.success("Funds added successfully!",{description:`$${N.toFixed(2)} has been added to your wallet`}),h(!1),e(!1),i(""),l("")};return o.jsx(Jo,{open:t,onOpenChange:e,children:o.jsxs(Qo,{className:"max-w-md",children:[o.jsxs(Bc,{children:[o.jsxs(zc,{className:"flex items-center gap-2",children:[o.jsx(gy,{className:"w-5 h-5 text-[#00B4D8]"}),"Add Funds to Wallet"]}),o.jsx(XT,{children:"Add money to your SkinPAI wallet for faster checkouts and exclusive rewards"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"p-4 bg-gradient-to-r from-[#00B4D8]/10 to-[#006D77]/10 rounded-lg border border-[#00B4D8]/20",children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Current Balance"}),o.jsxs("p",{className:"text-2xl font-bold text-[#006D77]",children:["$",n.toFixed(2)]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(_t,{children:"Select Amount"}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:p.map(N=>o.jsxs(be,{variant:r===N.toString()?"default":"outline",className:r===N.toString()?"bg-[#00B4D8] hover:bg-[#00B4D8]/90":"",onClick:()=>{i(N.toString()),l("")},children:["$",N]},N))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{children:"Or Enter Custom Amount"}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("div",{className:"relative flex-1",children:[o.jsx(nm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(sn,{type:"number",placeholder:"Enter amount",value:a,onChange:N=>{l(N.target.value),i("custom")},className:"pl-9",min:g,max:x,step:"0.01"})]})}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Min: $",g,"  Max: $",x," per transaction"]})]}),o.jsx(Bn,{}),o.jsxs(Sr,{value:c,onValueChange:N=>u(N),className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-3",children:[o.jsxs(Jt,{value:"card",className:"text-xs",children:[o.jsx(tm,{className:"w-3 h-3 mr-1"}),"Card"]}),o.jsxs(Jt,{value:"bank",className:"text-xs",children:[o.jsx(ZD,{className:"w-3 h-3 mr-1"}),"Bank"]}),o.jsxs(Jt,{value:"wallet",className:"text-xs",children:[o.jsx(aP,{className:"w-3 h-3 mr-1"}),"Digital"]})]}),o.jsx(Qt,{value:"card",className:"space-y-3 mt-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{children:"Card Information"}),o.jsx(sn,{placeholder:"Card number"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(sn,{placeholder:"MM/YY"}),o.jsx(sn,{placeholder:"CVC"})]})]})}),o.jsxs(Qt,{value:"bank",className:"space-y-3 mt-4",children:[o.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx(od,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Bank Transfer"}),o.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Funds will be available within 2-3 business days"})]})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{children:"Account Number"}),o.jsx(sn,{placeholder:"Enter account number"}),o.jsx(_t,{children:"Routing Number"}),o.jsx(sn,{placeholder:"Enter routing number"})]})]}),o.jsx(Qt,{value:"wallet",className:"space-y-3 mt-4",children:o.jsxs(iS,{defaultValue:"paypal",children:[o.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[o.jsx(dd,{value:"paypal",id:"paypal"}),o.jsx(_t,{htmlFor:"paypal",className:"flex-1 cursor-pointer",children:"PayPal"})]}),o.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[o.jsx(dd,{value:"applepay",id:"applepay"}),o.jsx(_t,{htmlFor:"applepay",className:"flex-1 cursor-pointer",children:"Apple Pay"})]}),o.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[o.jsx(dd,{value:"googlepay",id:"googlepay"}),o.jsx(_t,{htmlFor:"googlepay",className:"flex-1 cursor-pointer",children:"Google Pay"})]})]})})]}),y()>0&&o.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Amount to add"}),o.jsxs("span",{className:"font-medium",children:["$",y().toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Processing fee"}),o.jsx("span",{className:"font-medium",children:"$0.00"})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-semibold",children:"New Balance"}),o.jsxs("span",{className:"font-bold text-[#00B4D8]",children:["$",(n+y()).toFixed(2)]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(be,{variant:"outline",className:"flex-1",onClick:()=>e(!1),disabled:d,children:"Cancel"}),o.jsx(be,{className:"flex-1 bg-[#00B4D8] hover:bg-[#00B4D8]/90",onClick:w,disabled:d||y()===0,children:d?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(VE,{className:"w-4 h-4 mr-2"}),"Add Funds"]})})]}),o.jsxs("div",{className:"flex items-start gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[o.jsx(VE,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"text-xs text-green-800",children:"Your payment information is encrypted and secure. We never store your card details."})]})]})]})})}function L6e({user:t,onNavigate:e,onUpdateUser:n,onLogout:s}){const{t:r,isRTL:i,direction:a,flexDir:l,textAlign:c}=Hm(),[u,d]=T.useState(!1),[h,p]=T.useState(!1),[g,x]=T.useState(t.profileImage||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.id}`),[y,v]=T.useState({scanReminders:!0,routineReminders:!0,productDeals:!0,communityUpdates:!1,influencerPosts:!0,emailNotifications:!0}),[w,N]=T.useState({profileVisible:!0,showActivity:!0,allowMessages:!0}),[k,C]=T.useState(t.name||""),[j,R]=T.useState(t.email||""),_=V=>{const ne=V.target.files?.[0];if(ne){if(ne.size>5*1024*1024){He.error("Image size must be less than 5MB");return}if(!ne.type.startsWith("image/")){He.error("Please upload an image file");return}const J=new FileReader;J.onloadend=()=>{const ee=J.result;x(ee),n({...t,profileImage:ee}),He.success("Profile image updated!")},J.readAsDataURL(ne)}},A=()=>{n({...t,name:k,email:j}),He.success("Profile updated successfully!")},O=()=>{d(!u),document.documentElement.classList.toggle("dark"),He.success(u?"Light mode enabled":"Dark mode enabled")},L=V=>{v(ne=>({...ne,[V]:!ne[V]})),He.success("Notification settings updated")},D=V=>{N(ne=>({...ne,[V]:!ne[V]})),He.success("Privacy settings updated")},q=()=>{confirm("Are you sure you want to log out?")&&(s(),He.success("Logged out successfully"))};return o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-6",dir:a,children:[o.jsx(ze,{children:o.jsx(Ue,{className:"p-6",children:o.jsxs("div",{className:`flex items-center gap-4 ${l()}`,children:[o.jsxs("div",{className:"relative",children:[o.jsxs(xi,{className:"w-20 h-20",children:[o.jsx(yi,{src:g}),o.jsx(vi,{children:t.name?.charAt(0)||"U"})]}),o.jsx("input",{type:"file",id:"profile-image-upload",accept:"image/*",onChange:_,className:"hidden"}),o.jsx("button",{className:`absolute bottom-0 ${i?"left-0":"right-0"} p-1.5 bg-primary rounded-full text-white hover:bg-primary/90 transition-colors`,onClick:()=>document.getElementById("profile-image-upload")?.click(),children:o.jsx(zo,{className:"w-3 h-3"})})]}),o.jsxs("div",{className:`flex-1 ${c()}`,children:[o.jsx("h2",{className:"text-xl font-semibold",children:t.name||r("profile.guestUser")}),o.jsx("p",{className:"text-sm text-muted-foreground",children:t.email||"guest@skinpai.app"}),o.jsxs("div",{className:`flex gap-2 mt-2 ${l()}`,children:[o.jsx(it,{variant:t.type==="pro"||t.type==="member"?"default":"secondary",className:t.type==="pro"?"bg-gradient-to-r from-[#FF6B35] to-[#FF8C5A] border-0":"",children:t.type==="pro"?o.jsxs(o.Fragment,{children:[o.jsx(hs,{className:`w-3 h-3 ${i?"ml-1":"mr-1"}`})," ",r("profile.pro")]}):t.type==="member"?o.jsxs(o.Fragment,{children:[o.jsx(hs,{className:`w-3 h-3 ${i?"ml-1":"mr-1"}`})," ",r("profile.member")]}):r("profile.guest")}),t.type==="guest"&&o.jsxs(be,{size:"sm",variant:"outline",className:"h-6",onClick:()=>e("upgrade"),children:[o.jsx(ln,{className:`w-3 h-3 ${i?"ml-1":"mr-1"}`}),r("profile.upgrade")]}),t.type==="pro"&&o.jsx(be,{size:"sm",variant:"outline",className:"h-6",onClick:()=>e("pro-dashboard"),children:r("dashboard.title")})]})]})]})})}),o.jsxs(Sr,{defaultValue:"account",className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-3",children:[o.jsx(Jt,{value:"account",children:r("profile.account")}),o.jsx(Jt,{value:"notifications",children:r("profile.notifications")}),o.jsx(Jt,{value:"privacy",children:r("profile.privacy")})]}),o.jsxs(Qt,{value:"account",className:"space-y-4",children:[o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(hf,{className:"w-5 h-5"}),"Personal Information"]})}),o.jsxs(Ue,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"name",children:"Full Name"}),o.jsx(sn,{id:"name",value:k,onChange:V=>C(V.target.value),placeholder:"Enter your name"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"email",children:"Email Address"}),o.jsx(sn,{id:"email",type:"email",value:j,onChange:V=>R(V.target.value),placeholder:"Enter your email"})]}),o.jsx(be,{onClick:A,className:"w-full",children:"Save Changes"})]})]}),t.type==="pro"?o.jsxs(ze,{className:"border-[#FF6B35]/30 bg-gradient-to-r from-[#FF6B35]/10 to-[#FF8C5A]/10",children:[o.jsxs(Ot,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(hs,{className:"w-5 h-5 text-[#FF6B35]"}),"Pro Membership"]}),o.jsxs(it,{className:"bg-gradient-to-r from-[#FF6B35] to-[#FF8C5A] text-white border-0",children:[o.jsx(ln,{className:"w-3 h-3 mr-1"}),"PRO"]})]}),o.jsx(as,{children:"You have unlimited access to all features"})]}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-3 bg-background/50 rounded-lg border border-[#FF6B35]/20",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(c0,{className:"w-4 h-4 text-[#FF6B35]"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Scans"})]}),o.jsx("span",{className:"text-xl font-bold",children:"Unlimited"})]}),o.jsxs("div",{className:"p-3 bg-background/50 rounded-lg border border-[#FF6B35]/20",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(gi,{className:"w-4 h-4 text-[#FF6B35]"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Status"})]}),o.jsx("span",{className:"text-sm font-bold text-green-600",children:"Active"})]})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Subscription"}),o.jsx("span",{className:"font-medium",children:"Pro Plan"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Next billing"}),o.jsx("span",{className:"font-medium",children:t.subscriptionEndDate?new Date(t.subscriptionEndDate).toLocaleDateString():"N/A"})]})]}),o.jsxs(be,{variant:"outline",className:"w-full",onClick:()=>He.info("Manage subscription coming soon!"),children:[o.jsx(tm,{className:"w-4 h-4 mr-2"}),"Manage Subscription"]})]})]}):t.type==="member"?o.jsxs(ze,{className:"border-[#006D77]/30",children:[o.jsxs(Ot,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(hs,{className:"w-5 h-5 text-[#006D77]"}),"Member Plan"]}),o.jsx(it,{className:"bg-[#006D77] text-white",children:"MEMBER"})]}),o.jsx(as,{children:"Upgrade to Pro for unlimited access"})]}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Daily Scans"}),o.jsxs("p",{className:"text-xl font-bold",children:[t.scansToday,"/",t.maxScans]})]}),o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Status"}),o.jsx("p",{className:"text-sm font-bold text-green-600",children:"Active"})]})]}),o.jsx(Bn,{}),o.jsxs(be,{className:"w-full bg-gradient-to-r from-[#FF6B35] to-[#FF8C5A] hover:from-[#FF6B35]/90 hover:to-[#FF8C5A]/90",onClick:()=>e("upgrade"),children:[o.jsx(ln,{className:"w-4 h-4 mr-2"}),"Upgrade to Pro"]})]})]}):o.jsxs(ze,{className:"border-[#00B4D8]/30 bg-gradient-to-r from-[#00B4D8]/10 to-[#006D77]/10",children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(hs,{className:"w-5 h-5 text-[#00B4D8]"}),"Unlock Premium Features"]}),o.jsx(as,{children:"Choose your plan and get started"})]}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(c0,{className:"w-4 h-4 text-[#00B4D8] mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm",children:"Unlimited scans with Pro"})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(gi,{className:"w-4 h-4 text-[#00B4D8] mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm",children:"Advanced progress tracking"})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(hs,{className:"w-4 h-4 text-[#00B4D8] mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm",children:"Create your Creator Station (Pro)"})]})]}),o.jsx(Bn,{}),o.jsxs(be,{className:"w-full bg-gradient-to-r from-[#00B4D8] to-[#006D77] hover:from-[#00B4D8]/90 hover:to-[#006D77]/90",onClick:()=>e("upgrade"),children:[o.jsx(ln,{className:"w-4 h-4 mr-2"}),"View Plans"]})]})]}),o.jsxs(ze,{className:"border-[#00B4D8]/30",children:[o.jsxs(Ot,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(gy,{className:"w-5 h-5 text-[#00B4D8]"}),"SkinPAI Wallet"]}),o.jsx(be,{size:"sm",variant:"outline",onClick:()=>p(!0),children:"Add Funds"})]}),o.jsx(as,{children:"Manage your wallet balance and transactions"})]}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs("div",{className:"p-4 bg-gradient-to-r from-[#00B4D8]/10 to-[#006D77]/10 rounded-lg border border-[#00B4D8]/20",children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Available Balance"}),o.jsxs("p",{className:"text-3xl font-bold text-[#006D77]",children:["$",(t.walletBalance||0).toFixed(2)]})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(be,{variant:"outline",className:"w-full justify-between",onClick:()=>He.info("Transaction history coming soon!"),children:[o.jsx("span",{children:"Transaction History"}),o.jsx(Gr,{className:"w-4 h-4"})]}),o.jsxs(be,{variant:"outline",className:"w-full justify-between",onClick:()=>He.info("Payment methods coming soon!"),children:[o.jsx("span",{children:"Payment Methods"}),o.jsx(Gr,{className:"w-4 h-4"})]})]})]})]}),o.jsxs(ze,{className:"border-[#FF6B35]/30",children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"w-5 h-5 text-[#FF6B35]"}),"Saved Items"]}),o.jsx(as,{children:"Your favorite products and routines"})]}),o.jsx(Ue,{children:o.jsxs(be,{variant:"outline",className:"w-full justify-between hover:bg-[#FF6B35]/10",onClick:()=>e("favorites"),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"w-4 h-4 text-[#FF6B35]"}),o.jsx("span",{children:"View Saved Products"})]}),o.jsx(Gr,{className:"w-4 h-4"})]})})]}),o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(ln,{className:"w-5 h-5"}),"Skin Profile"]}),o.jsx(as,{children:"Your personalized skin information"})]}),o.jsx(Ue,{className:"space-y-4",children:t.skinProfile?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Skin Type"}),o.jsx("p",{className:"font-medium capitalize",children:t.skinProfile.skinType||"N/A"})]}),o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Main Concern"}),o.jsx("p",{className:"font-medium capitalize",children:t.skinProfile.skinConcerns||"N/A"})]}),o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Routine Level"}),o.jsx("p",{className:"font-medium capitalize",children:t.skinProfile.currentRoutine||"N/A"})]}),o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Sun Exposure"}),o.jsx("p",{className:"font-medium capitalize",children:t.skinProfile.sunExposure||"N/A"})]})]}),o.jsx(be,{variant:"outline",className:"w-full",onClick:()=>e("questionnaire"),children:"Update Skin Profile"})]}):o.jsxs("div",{className:"text-center py-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Complete your skin profile for better recommendations"}),o.jsxs(be,{className:"w-full",onClick:()=>e("questionnaire"),children:[o.jsx(ln,{className:"w-4 h-4 mr-2"}),"Complete Skin Profile"]})]})})]}),t.hasStation?o.jsxs(ze,{className:"border-primary/20",children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(hs,{className:"w-5 h-5 text-primary"}),"My Creator Station"]}),o.jsx(as,{children:"Manage your content and connect with your community"})]}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs("div",{className:"p-4 bg-primary/5 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:t.stationData?.stationName}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",t.stationData?.stationUsername]})]}),o.jsx(it,{className:"bg-green-500",children:"Active"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mt-3 pt-3 border-t border-primary/10",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"0"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Posts"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"0"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Followers"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"0"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Likes"})]})]})]}),o.jsxs(be,{className:"w-full",onClick:()=>e("station-view"),children:["View My Station",o.jsx(Gr,{className:"w-4 h-4 ml-2"})]}),o.jsxs(be,{variant:"outline",className:"w-full",onClick:()=>He.info("Station editing coming soon!"),children:[o.jsx(Ll,{className:"w-4 h-4 mr-2"}),"Station Settings"]})]})]}):o.jsxs(ze,{className:"border-primary/20 bg-primary/5",children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(ln,{className:"w-5 h-5 text-primary"}),"Become a Creator"]}),o.jsx(as,{children:"Share your skincare expertise and build your community"})]}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),o.jsx("span",{children:"Create your own content station"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),o.jsx("span",{children:"Build a following and earn badges"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),o.jsx("span",{children:"Collaborate with brands"})]})]}),o.jsxs(be,{className:"w-full",onClick:()=>e("create-station"),children:[o.jsx(hs,{className:"w-4 h-4 mr-2"}),"Create Your Station"]})]})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Ll,{className:"w-5 h-5"}),"App Settings"]})}),o.jsxs(Ue,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[u?o.jsx(RN,{className:"w-5 h-5"}):o.jsx(om,{className:"w-5 h-5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Dark Mode"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Toggle dark theme"})]})]}),o.jsx(_i,{checked:u,onCheckedChange:O})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Wc,{className:"w-5 h-5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Language"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"English (US)"})]})]}),o.jsx(Gr,{className:"w-5 h-5 text-muted-foreground"})]})]})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Sa,{className:"w-5 h-5"}),"Account Management"]})}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs(be,{variant:"outline",className:"w-full justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(cf,{className:"w-4 h-4"}),"Change Password"]}),o.jsx(Gr,{className:"w-4 h-4"})]}),t.type==="member"&&o.jsxs(be,{variant:"outline",className:"w-full justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(tm,{className:"w-4 h-4"}),"Billing & Subscription"]}),o.jsx(Gr,{className:"w-4 h-4"})]}),o.jsxs(be,{variant:"outline",className:"w-full justify-between",onClick:()=>e("help"),children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(QD,{className:"w-4 h-4"}),"Help & Support"]}),o.jsx(Gr,{className:"w-4 h-4"})]}),o.jsx(Bn,{}),o.jsxs(be,{variant:"destructive",className:"w-full",onClick:q,children:[o.jsx(zK,{className:"w-4 h-4 mr-2"}),"Log Out"]})]})]})]}),o.jsxs(Qt,{value:"notifications",className:"space-y-4",children:[o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(lf,{className:"w-5 h-5"}),"Push Notifications"]}),o.jsx(as,{children:"Manage your notification preferences"})]}),o.jsxs(Ue,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Scan Reminders"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Daily skin scan notifications"})]}),o.jsx(_i,{checked:y.scanReminders,onCheckedChange:()=>L("scanReminders")})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Routine Reminders"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Skincare routine alerts"})]}),o.jsx(_i,{checked:y.routineReminders,onCheckedChange:()=>L("routineReminders")})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Product Deals"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Special offers and discounts"})]}),o.jsx(_i,{checked:y.productDeals,onCheckedChange:()=>L("productDeals")})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Community Updates"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Likes, comments, and shares"})]}),o.jsx(_i,{checked:y.communityUpdates,onCheckedChange:()=>L("communityUpdates")})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Influencer Posts"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"New content from followed influencers"})]}),o.jsx(_i,{checked:y.influencerPosts,onCheckedChange:()=>L("influencerPosts")})]})]})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Gc,{className:"w-5 h-5"}),"Email Notifications"]})}),o.jsx(Ue,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Email Updates"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Weekly summaries and newsletters"})]}),o.jsx(_i,{checked:y.emailNotifications,onCheckedChange:()=>L("emailNotifications")})]})})]})]}),o.jsxs(Qt,{value:"privacy",className:"space-y-4",children:[o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Ea,{className:"w-5 h-5"}),"Privacy Settings"]}),o.jsx(as,{children:"Control who can see your information"})]}),o.jsxs(Ue,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Profile Visibility"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Make profile visible to others"})]}),o.jsx(_i,{checked:w.profileVisible,onCheckedChange:()=>D("profileVisible")})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Show Activity"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Display your skincare activity"})]}),o.jsx(_i,{checked:w.showActivity,onCheckedChange:()=>D("showActivity")})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Allow Messages"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive messages from other users"})]}),o.jsx(_i,{checked:w.allowMessages,onCheckedChange:()=>D("allowMessages")})]})]})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Sa,{className:"w-5 h-5"}),"Data & Privacy"]})}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs(be,{variant:"outline",className:"w-full justify-between",children:[o.jsx("span",{children:"Download Your Data"}),o.jsx(Gr,{className:"w-4 h-4"})]}),o.jsxs(be,{variant:"outline",className:"w-full justify-between",children:[o.jsx("span",{children:"Privacy Policy"}),o.jsx(Gr,{className:"w-4 h-4"})]}),o.jsxs(be,{variant:"outline",className:"w-full justify-between",children:[o.jsx("span",{children:"Terms of Service"}),o.jsx(Gr,{className:"w-4 h-4"})]}),o.jsx(Bn,{}),o.jsx(be,{variant:"destructive",className:"w-full",children:"Delete Account"})]})]})]})]}),o.jsx(M6e,{open:h,onOpenChange:p,currentBalance:t.walletBalance||0,onAddFunds:V=>{n({...t,walletBalance:(t.walletBalance||0)+V})}})]})}function B6e({onNavigate:t}){const[e,n]=T.useState([{id:"1",type:"scan",title:"Daily Scan Reminder",message:"Don't forget to complete your daily skin scan!",timestamp:"10 min ago",read:!1},{id:"2",type:"like",title:"Sarah Beauty liked your post",message:"Your skincare routine post received a new like",timestamp:"1h ago",read:!1,avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop"},{id:"3",type:"achievement",title:"Achievement Unlocked! ",message:'You earned the "Week Warrior" badge for maintaining your routine for 7 days!',timestamp:"2h ago",read:!1},{id:"4",type:"product",title:"Special Offer: 25% Off",message:"Limited time discount on Vitamin C Serum - Your recommended product!",timestamp:"3h ago",read:!0},{id:"5",type:"comment",title:"New comment on your post",message:'Alex Johnson commented: "This routine looks amazing! What serum do you use?"',timestamp:"5h ago",read:!0,avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop"},{id:"6",type:"follow",title:"Jessica Skin started following you",message:"You have a new follower in the community",timestamp:"1d ago",read:!0,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop"},{id:"7",type:"routine",title:"Evening Routine Reminder",message:"It's time for your evening skincare routine!",timestamp:"1d ago",read:!0},{id:"8",type:"scan",title:"Scan Analysis Complete",message:"Your skin scan results are ready to view. Overall score: 87/100",timestamp:"2d ago",read:!0}]),s=h=>{switch(h){case"like":return o.jsx(Yn,{className:"w-5 h-5 text-red-500"});case"comment":return o.jsx(_r,{className:"w-5 h-5 text-blue-500"});case"follow":return o.jsx(cP,{className:"w-5 h-5 text-green-500"});case"product":return o.jsx(Go,{className:"w-5 h-5 text-purple-500"});case"achievement":return o.jsx(Ml,{className:"w-5 h-5 text-yellow-500"});case"scan":return o.jsx(Zr,{className:"w-5 h-5 text-cyan-500"});case"routine":return o.jsx(ln,{className:"w-5 h-5 text-pink-500"});default:return o.jsx(lf,{className:"w-5 h-5"})}},r=h=>{n(p=>p.map(g=>g.id===h?{...g,read:!0}:g))},i=()=>{n(h=>h.map(p=>({...p,read:!0})))},a=h=>{n(p=>p.filter(g=>g.id!==h))},l=()=>{confirm("Are you sure you want to clear all notifications?")&&n([])},c=e.filter(h=>!h.read).length;e.filter(h=>h.read);const u=e.filter(h=>!h.read),d=({notification:h})=>o.jsx(ze,{className:`mb-3 cursor-pointer transition-all hover:shadow-md ${h.read?"":"border-l-4 border-l-primary bg-accent/10"}`,onClick:()=>r(h.id),children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex gap-3",children:[h.avatar?o.jsxs(xi,{className:"w-10 h-10",children:[o.jsx(yi,{src:h.avatar}),o.jsx(vi,{children:h.title.charAt(0)})]}):o.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary/50 flex items-center justify-center",children:s(h.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[o.jsx("h4",{className:"font-medium text-sm",children:h.title}),o.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:h.timestamp})]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:h.message}),!h.read&&o.jsx(it,{variant:"default",className:"mt-2 text-xs",children:"New"})]}),o.jsx("button",{onClick:p=>{p.stopPropagation(),a(h.id)},className:"text-muted-foreground hover:text-destructive transition-colors",children:o.jsx(gd,{className:"w-4 h-4"})})]})})});return o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"Notifications"}),c>0&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["You have ",c," unread notification",c!==1?"s":""]})]}),o.jsx(be,{variant:"ghost",size:"icon",onClick:()=>t("settings"),children:o.jsx(Ll,{className:"w-5 h-5"})})]}),e.length>0&&o.jsxs("div",{className:"flex gap-2",children:[c>0&&o.jsxs(be,{variant:"outline",size:"sm",onClick:i,children:[o.jsx(jN,{className:"w-4 h-4 mr-2"}),"Mark all as read"]}),o.jsxs(be,{variant:"outline",size:"sm",onClick:l,children:[o.jsx(gd,{className:"w-4 h-4 mr-2"}),"Clear all"]})]}),e.length===0?o.jsx(ze,{children:o.jsx(Ue,{className:"p-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx(lf,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50"}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:"No notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"You're all caught up! Check back later for new updates."})]})})}):o.jsxs(Sr,{defaultValue:"all",className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-2",children:[o.jsxs(Jt,{value:"all",children:["All (",e.length,")"]}),o.jsxs(Jt,{value:"unread",children:["Unread (",c,")"]})]}),o.jsx(Qt,{value:"all",className:"mt-4",children:e.map(h=>o.jsx(d,{notification:h},h.id))}),o.jsx(Qt,{value:"unread",className:"mt-4",children:u.length>0?u.map(h=>o.jsx(d,{notification:h},h.id)):o.jsx(ze,{children:o.jsx(Ue,{className:"p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx(jN,{className:"w-12 h-12 mx-auto mb-3 text-green-500"}),o.jsx("h3",{className:"font-medium mb-1",children:"All caught up!"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"No unread notifications"})]})})})})]})]})}function z6e({user:t,onUpgrade:e,onNavigate:n}){const[s,r]=T.useState("pro"),[i,a]=T.useState("monthly"),[l,c]=T.useState("card"),[u,d]=T.useState(!1),[h,p]=T.useState(""),[g,x]=T.useState(""),[y,v]=T.useState(""),[w,N]=T.useState(""),[k,C]=T.useState(t?.walletBalance||0),j=[{icon:Zr,text:"5 scans per day",included:!0},{icon:ho,text:"Progress tracking",included:!0},{icon:lf,text:"Routine reminders",included:!0},{icon:Ml,text:"Achievements",included:!0},{icon:Yn,text:"Personalized tips",included:!0},{icon:Sa,text:"Data backup",included:!0},{icon:im,text:"Creator Station",included:!1},{icon:Vc,text:"Analytics Dashboard",included:!1}],R=[{icon:c0,text:"Unlimited scans",included:!0,highlight:!0},{icon:im,text:"Create Creator Station",included:!0,highlight:!0},{icon:Vc,text:"Advanced Analytics Dashboard",included:!0,highlight:!0},{icon:so,text:"Audience insights",included:!0,highlight:!0},{icon:nm,text:"Monetization tools",included:!0},{icon:ln,text:"Priority support",included:!0},{icon:gi,text:"Early feature access",included:!0},{icon:Ll,text:"Custom branding",included:!0},{icon:bs,text:"Verified badge",included:!0},{icon:Sa,text:"Advanced data export",included:!0}],_={member:{monthly:9.99,yearly:79.99,yearlyMonthly:6.67},pro:{monthly:29.99,yearly:239.99,yearlyMonthly:19.99}},A=()=>i==="yearly"?_[s].yearly:_[s].monthly,O=()=>{if(i==="yearly"){const V=_[s].yearly;return _[s].monthly*12-V}return 0},L=()=>{d(!0)},D=()=>{const V=A();if(l==="wallet"&&k<V){He.error("Insufficient wallet balance!",{description:`You need $${V.toFixed(2)} but only have $${k.toFixed(2)} in your wallet.`});return}He.success(" Payment successful!",{description:`Welcome to SkinPAI ${s==="pro"?"Pro":"Member"}!`}),d(!1),e(s)},q=()=>{He.success("Add funds to wallet feature coming soon!")};return o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-6",children:[o.jsxs("div",{className:"text-center space-y-2 py-6",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-[#00B4D8] to-[#006D77] mb-4",children:o.jsx(hs,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold",children:"Choose Your Plan"}),o.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Unlock premium features and take your skincare journey to the next level"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:[o.jsxs(ze,{className:`cursor-pointer transition-all border-2 ${s==="member"?"border-[#006D77] shadow-xl":"border-muted hover:border-[#006D77]/50"}`,onClick:()=>r("member"),children:[o.jsxs(Ot,{className:"text-center pb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#006D77] to-[#003D5C] rounded-full mx-auto mb-3 flex items-center justify-center",children:o.jsx(hs,{className:"w-6 h-6 text-white"})}),o.jsx(Ft,{className:"text-2xl",children:"Member"}),o.jsx(as,{children:"Essential features for dedicated users"}),o.jsxs("div",{className:"mt-4",children:[o.jsxs("div",{className:"text-4xl font-bold text-[#006D77]",children:["$",i==="monthly"?_.member.monthly:_.member.yearlyMonthly]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:i==="monthly"?"per month":"per month, billed yearly"})]})]}),o.jsx(Ue,{className:"space-y-3",children:j.map((V,ne)=>o.jsxs("div",{className:"flex items-start gap-3",children:[V.included?o.jsx(an,{className:"w-5 h-5 text-[#00B4D8] flex-shrink-0 mt-0.5"}):o.jsx(Us,{className:"w-5 h-5 text-muted-foreground/40 flex-shrink-0 mt-0.5"}),o.jsx("span",{className:`text-sm ${V.included?"":"text-muted-foreground line-through"}`,children:V.text})]},ne))})]}),o.jsxs(ze,{className:`cursor-pointer transition-all border-2 relative ${s==="pro"?"border-[#FF6B35] shadow-xl":"border-muted hover:border-[#FF6B35]/50"}`,onClick:()=>r("pro"),children:[o.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:o.jsxs(it,{className:"bg-gradient-to-r from-[#FF6B35] to-[#FF8C5A] text-white border-0",children:[o.jsx(ln,{className:"w-3 h-3 mr-1"}),"RECOMMENDED"]})}),o.jsxs(Ot,{className:"text-center pb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#FF6B35] to-[#FF8C5A] rounded-full mx-auto mb-3 flex items-center justify-center",children:o.jsx(hs,{className:"w-6 h-6 text-white"})}),o.jsx(Ft,{className:"text-2xl",children:"Pro"}),o.jsx(as,{children:"For creators and power users"}),o.jsxs("div",{className:"mt-4",children:[o.jsxs("div",{className:"text-4xl font-bold bg-gradient-to-r from-[#FF6B35] to-[#FF8C5A] bg-clip-text text-transparent",children:["$",i==="monthly"?_.pro.monthly:_.pro.yearlyMonthly]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:i==="monthly"?"per month":"per month, billed yearly"})]})]}),o.jsx(Ue,{className:"space-y-3",children:R.map((V,ne)=>o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(an,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${V.highlight?"text-[#FF6B35]":"text-[#00B4D8]"}`}),o.jsx("span",{className:`text-sm ${V.highlight?"font-semibold":""}`,children:V.text})]},ne))})]})]}),o.jsxs(ze,{className:"max-w-4xl mx-auto",children:[o.jsx(Ot,{children:o.jsx(Ft,{className:"text-center",children:"Billing Period"})}),o.jsx(Ue,{children:o.jsx(iS,{value:i,onValueChange:V=>a(V),children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${i==="monthly"?"border-[#00B4D8] bg-[#00B4D8]/5":"border-muted"}`,onClick:()=>a("monthly"),children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[o.jsx(dd,{value:"monthly",id:"monthly"}),o.jsx(_t,{htmlFor:"monthly",className:"cursor-pointer font-medium",children:"Monthly"})]}),o.jsxs("div",{className:"ml-7",children:[o.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Pay month by month"}),o.jsxs("div",{className:"font-bold text-lg",children:["$",_[s].monthly,"/mo"]})]})]}),o.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all relative ${i==="yearly"?"border-[#00B4D8] bg-[#00B4D8]/5":"border-muted"}`,onClick:()=>a("yearly"),children:[o.jsxs(it,{className:"absolute -top-2 -right-2 bg-[#FF6B35]",children:["Save ",Math.round(O()/(_[s].monthly*12)*100),"%"]}),o.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[o.jsx(dd,{value:"yearly",id:"yearly"}),o.jsx(_t,{htmlFor:"yearly",className:"cursor-pointer font-medium",children:"Yearly"})]}),o.jsxs("div",{className:"ml-7",children:[o.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["$",_[s].yearlyMonthly,"/month billed annually"]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsxs("div",{className:"font-bold text-lg",children:["$",_[s].yearly,"/yr"]}),o.jsxs("div",{className:"text-xs text-muted-foreground line-through",children:["$",_[s].monthly*12]})]})]})]})]})})})]}),o.jsx(ze,{className:"max-w-4xl mx-auto bg-gradient-to-r from-[#00B4D8]/10 to-[#006D77]/10 border-[#00B4D8]/30",children:o.jsxs(Ue,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-lg",children:[s==="pro"?"Pro":"Member"," - ",i==="monthly"?"Monthly":"Yearly"]}),i==="yearly"&&o.jsxs("p",{className:"text-sm text-green-600 font-medium",children:[" Save $",O().toFixed(2)," per year!"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-3xl font-bold text-[#006D77]",children:["$",A()]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:i==="yearly"?"billed annually":"billed monthly"})]})]}),o.jsx(Bn,{className:"my-4"}),o.jsxs(be,{onClick:L,className:"w-full h-12 text-lg bg-gradient-to-r from-[#00B4D8] to-[#006D77] hover:from-[#00B4D8]/90 hover:to-[#006D77]/90",children:["Proceed to Payment",o.jsx(IN,{className:"w-5 h-5 ml-2"})]})]})}),o.jsx(Jo,{open:u,onOpenChange:d,children:o.jsxs(Qo,{className:"max-w-md",children:[o.jsxs(Bc,{children:[o.jsx(zc,{children:"Complete Your Payment"}),o.jsxs(XT,{children:["Choose your payment method to activate your ",s==="pro"?"Pro":"Member"," subscription"]})]}),o.jsxs(Sr,{defaultValue:"card",value:l,onValueChange:V=>c(V),children:[o.jsxs(kr,{className:"grid w-full grid-cols-2",children:[o.jsxs(Jt,{value:"card",children:[o.jsx(tm,{className:"w-4 h-4 mr-2"}),"Card"]}),o.jsxs(Jt,{value:"wallet",children:[o.jsx(gy,{className:"w-4 h-4 mr-2"}),"Wallet"]})]}),o.jsxs(Qt,{value:"card",className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"cardNumber",children:"Card Number"}),o.jsx(sn,{id:"cardNumber",placeholder:"1234 5678 9012 3456",value:h,onChange:V=>p(V.target.value),maxLength:19})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"cardHolder",children:"Card Holder Name"}),o.jsx(sn,{id:"cardHolder",placeholder:"John Doe",value:g,onChange:V=>x(V.target.value)})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"expiry",children:"Expiry Date"}),o.jsx(sn,{id:"expiry",placeholder:"MM/YY",value:y,onChange:V=>v(V.target.value),maxLength:5})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"cvv",children:"CVV"}),o.jsx(sn,{id:"cvv",type:"password",placeholder:"123",value:w,onChange:V=>N(V.target.value),maxLength:4})]})]}),o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg text-sm",children:[o.jsx(cf,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-muted-foreground",children:"Your payment is secure and encrypted"})]})]}),o.jsxs(Qt,{value:"wallet",className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-gradient-to-r from-[#00B4D8]/10 to-[#006D77]/10 rounded-lg border border-[#00B4D8]/20",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Wallet Balance"}),o.jsxs("div",{className:"text-2xl font-bold text-[#006D77]",children:["$",k.toFixed(2)]})]}),o.jsx(Bn,{className:"my-3"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Amount to Pay"}),o.jsxs("div",{className:"text-xl font-bold",children:["$",A()]})]}),k<A()&&o.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-600",children:["Insufficient balance! Need $",(A()-k).toFixed(2)," more."]})]}),o.jsxs(be,{variant:"outline",className:"w-full",onClick:q,children:[o.jsx(nm,{className:"w-4 h-4 mr-2"}),"Add Funds to Wallet"]})]})]}),o.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),o.jsxs("span",{className:"font-medium",children:["$",A()]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Tax"}),o.jsx("span",{className:"font-medium",children:"$0.00"})]}),o.jsx(Bn,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-semibold",children:"Total"}),o.jsxs("span",{className:"text-2xl font-bold text-[#006D77]",children:["$",A()]})]})]}),o.jsxs(be,{onClick:D,className:"w-full h-12 bg-gradient-to-r from-[#00B4D8] to-[#006D77] hover:from-[#00B4D8]/90 hover:to-[#006D77]/90",disabled:l==="wallet"&&k<A(),children:[o.jsx(cf,{className:"w-4 h-4 mr-2"}),"Confirm Payment $",A()]})]})})]})}function em({className:t,...e}){return o.jsx("textarea",{"data-slot":"textarea",className:Bt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}var Fv="Collapsible",[V6e,GV]=ei(Fv),[U6e,sI]=V6e(Fv),HV=T.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:s,defaultOpen:r,disabled:i,onOpenChange:a,...l}=t,[c,u]=ra({prop:s,defaultProp:r??!1,onChange:a,caller:Fv});return o.jsx(U6e,{scope:n,disabled:i,contentId:ja(),open:c,onOpenToggle:T.useCallback(()=>u(d=>!d),[u]),children:o.jsx(Dt.div,{"data-state":iI(c),"data-disabled":i?"":void 0,...l,ref:e})})});HV.displayName=Fv;var KV="CollapsibleTrigger",qV=T.forwardRef((t,e)=>{const{__scopeCollapsible:n,...s}=t,r=sI(KV,n);return o.jsx(Dt.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":iI(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:e,onClick:gt(t.onClick,r.onOpenToggle)})});qV.displayName=KV;var rI="CollapsibleContent",XV=T.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=sI(rI,t.__scopeCollapsible);return o.jsx(ti,{present:n||r.open,children:({present:i})=>o.jsx(W6e,{...s,ref:e,present:i})})});XV.displayName=rI;var W6e=T.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:s,children:r,...i}=t,a=sI(rI,n),[l,c]=T.useState(s),u=T.useRef(null),d=qt(e,u),h=T.useRef(0),p=h.current,g=T.useRef(0),x=g.current,y=a.open||l,v=T.useRef(y),w=T.useRef(void 0);return T.useEffect(()=>{const N=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(N)},[]),Gs(()=>{const N=u.current;if(N){w.current=w.current||{transitionDuration:N.style.transitionDuration,animationName:N.style.animationName},N.style.transitionDuration="0s",N.style.animationName="none";const k=N.getBoundingClientRect();h.current=k.height,g.current=k.width,v.current||(N.style.transitionDuration=w.current.transitionDuration,N.style.animationName=w.current.animationName),c(s)}},[a.open,s]),o.jsx(Dt.div,{"data-state":iI(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!y,...i,ref:d,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:y&&r})});function iI(t){return t?"open":"closed"}var G6e=HV,H6e=qV,K6e=XV,No="Accordion",q6e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[aI,X6e,Y6e]=Pm(No),[Mv]=ei(No,[Y6e,GV]),oI=GV(),YV=et.forwardRef((t,e)=>{const{type:n,...s}=t,r=s,i=s;return o.jsx(aI.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?o.jsx(e_e,{...i,ref:e}):o.jsx(Q6e,{...r,ref:e})})});YV.displayName=No;var[ZV,Z6e]=Mv(No),[JV,J6e]=Mv(No,{collapsible:!1}),Q6e=et.forwardRef((t,e)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},collapsible:i=!1,...a}=t,[l,c]=ra({prop:n,defaultProp:s??"",onChange:r,caller:No});return o.jsx(ZV,{scope:t.__scopeAccordion,value:et.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:et.useCallback(()=>i&&c(""),[i,c]),children:o.jsx(JV,{scope:t.__scopeAccordion,collapsible:i,children:o.jsx(QV,{...a,ref:e})})})}),e_e=et.forwardRef((t,e)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...i}=t,[a,l]=ra({prop:n,defaultProp:s??[],onChange:r,caller:No}),c=et.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=et.useCallback(d=>l((h=[])=>h.filter(p=>p!==d)),[l]);return o.jsx(ZV,{scope:t.__scopeAccordion,value:a,onItemOpen:c,onItemClose:u,children:o.jsx(JV,{scope:t.__scopeAccordion,collapsible:!0,children:o.jsx(QV,{...i,ref:e})})})}),[t_e,Lv]=Mv(No),QV=et.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:s,dir:r,orientation:i="vertical",...a}=t,l=et.useRef(null),c=qt(l,e),u=X6e(n),h=ou(r)==="ltr",p=gt(t.onKeyDown,g=>{if(!q6e.includes(g.key))return;const x=g.target,y=u().filter(A=>!A.ref.current?.disabled),v=y.findIndex(A=>A.ref.current===x),w=y.length;if(v===-1)return;g.preventDefault();let N=v;const k=0,C=w-1,j=()=>{N=v+1,N>C&&(N=k)},R=()=>{N=v-1,N<k&&(N=C)};switch(g.key){case"Home":N=k;break;case"End":N=C;break;case"ArrowRight":i==="horizontal"&&(h?j():R());break;case"ArrowDown":i==="vertical"&&j();break;case"ArrowLeft":i==="horizontal"&&(h?R():j());break;case"ArrowUp":i==="vertical"&&R();break}const _=N%w;y[_].ref.current?.focus()});return o.jsx(t_e,{scope:n,disabled:s,direction:r,orientation:i,children:o.jsx(aI.Slot,{scope:n,children:o.jsx(Dt.div,{...a,"data-orientation":i,ref:c,onKeyDown:s?void 0:p})})})}),dy="AccordionItem",[n_e,lI]=Mv(dy),eU=et.forwardRef((t,e)=>{const{__scopeAccordion:n,value:s,...r}=t,i=Lv(dy,n),a=Z6e(dy,n),l=oI(n),c=ja(),u=s&&a.value.includes(s)||!1,d=i.disabled||t.disabled;return o.jsx(n_e,{scope:n,open:u,disabled:d,triggerId:c,children:o.jsx(G6e,{"data-orientation":i.orientation,"data-state":aU(u),...l,...r,ref:e,disabled:d,open:u,onOpenChange:h=>{h?a.onItemOpen(s):a.onItemClose(s)}})})});eU.displayName=dy;var tU="AccordionHeader",nU=et.forwardRef((t,e)=>{const{__scopeAccordion:n,...s}=t,r=Lv(No,n),i=lI(tU,n);return o.jsx(Dt.h3,{"data-orientation":r.orientation,"data-state":aU(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:e})});nU.displayName=tU;var T4="AccordionTrigger",sU=et.forwardRef((t,e)=>{const{__scopeAccordion:n,...s}=t,r=Lv(No,n),i=lI(T4,n),a=J6e(T4,n),l=oI(n);return o.jsx(aI.ItemSlot,{scope:n,children:o.jsx(H6e,{"aria-disabled":i.open&&!a.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...l,...s,ref:e})})});sU.displayName=T4;var rU="AccordionContent",iU=et.forwardRef((t,e)=>{const{__scopeAccordion:n,...s}=t,r=Lv(No,n),i=lI(rU,n),a=oI(n);return o.jsx(K6e,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...a,...s,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});iU.displayName=rU;function aU(t){return t?"open":"closed"}var s_e=YV,r_e=eU,i_e=nU,a_e=sU,o_e=iU;function l_e({...t}){return o.jsx(s_e,{"data-slot":"accordion",...t})}function c_e({className:t,...e}){return o.jsx(r_e,{"data-slot":"accordion-item",className:Bt("border-b last:border-b-0",t),...e})}function u_e({className:t,children:e,...n}){return o.jsx(i_e,{className:"flex",children:o.jsxs(a_e,{"data-slot":"accordion-trigger",className:Bt("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,o.jsx(py,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function d_e({className:t,children:e,...n}){return o.jsx(o_e,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:o.jsx("div",{className:Bt("pt-0 pb-4",t),children:e})})}function oU({open:t,onOpenChange:e,onShowVideoTutorials:n}){const[s,r]=T.useState([{id:"1",text:"Hi!  Welcome to SkinPAI Support. I'm Sarah, your virtual assistant. How can I help you today?",sender:"agent",timestamp:new Date,status:"read"}]),[i,a]=T.useState(""),[l,c]=T.useState(!1),[u,d]=T.useState(!1),[h,p]=T.useState("online"),[g,x]=T.useState("initial"),y=T.useRef(null);T.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[s]);const v=_=>{c(!0),setTimeout(()=>{c(!1);let A=w(_);const O={id:Date.now().toString(),text:A,sender:"agent",timestamp:new Date,status:"read"};r(L=>[...L,O])},1500+Math.random()*1e3)},w=_=>{const A=_.toLowerCase();return A.includes("back to main")||A.includes("main topics")?`Sure! Here are the main topics I can help with:

 Skin scanning & analysis
 Membership & upgrades
 Product recommendations
 Account management
 Community features
 Billing & payments
 Privacy & security

What would you like to know about?`:A.includes("scan accuracy")||A.includes("accuracy tips")?` Tips for 95%+ accurate scans:

1. Clean & dry face (no makeup)
2. Natural lighting (face a window)
3. Eye-level camera angle
4. Keep still for 3 seconds
5. Center face in frame
6. Remove glasses/hats

Best times: Morning or early afternoon!`:A.includes("how many scans")||A.includes("scans left")?` Scan limits by tier:

 Guest: 1 scan per day
 Member: 5 scans total (not per day)
 Pro: Unlimited scans!

Your scans reset based on your membership. Want to upgrade for more?`:A.includes("scan history")||A.includes("view scan history")?` Scan history shows:

 All past skin analyses
 Progress over time
 Trend comparisons
 Improvement metrics

Members & Pro: Access full history in Dashboard
Guests: Upgrade to unlock history tracking!`:A.includes("best lighting")||A.includes("lighting for scans")?` Best lighting for scans:

 Natural daylight (near window)
 Bright but not harsh
 Even lighting on face
 Avoid direct sunlight

 Avoid:
 Overhead lights
 Flash photography
 Dark rooms
 Colored lighting`:A.includes("compare")||A.includes("membership tiers")?` Membership Comparison:

 GUEST (Free)
 1 scan/day
 Basic results

 MEMBER ($9.99/mo)
 5 total scans
 Full history tracking
 Priority support

 PRO ($19.99/mo)
 UNLIMITED scans
 Creator Station
 Advanced analytics
 Exclusive campaigns`:A.includes("how to upgrade")?` Upgrading is easy!

1. Go to Profile  Membership
2. Choose your tier (Member or Pro)
3. Enter payment details
4. Confirm & enjoy!

First 7 days: Full refund if not satisfied!`:A.includes("cancel membership")?` To cancel membership:

1. Profile  Settings
2. Subscription tab
3. Cancel Subscription
4. Confirm cancellation

 Keep access until period ends
 No questions asked
 Refund within 7 days

Need help? Contact support!`:A.includes("membership benefits")||A.includes("benefits")?` Membership Benefits:

 Member:
 5 scans (vs 1/day)
 Progress tracking
 Scan history
 Priority support

 Pro (All above +):
 Unlimited scans
 Creator Station
 Advanced analytics
 Exclusive events
 Early access features`:A.includes("payment methods")||A.includes("payment method")?` We accept:

 Credit/Debit Cards (Visa, MC, Amex)
 PayPal
 Apple Pay
 Google Pay
 SkinPAI Wallet

 All payments secured with bank-level encryption!`:A.includes("how recommendations work")?` Our AI Recommendation System:

1. Analyzes your skin scan
2. Identifies concerns (dryness, acne, etc.)
3. Matches with verified products
4. Prioritizes by effectiveness
5. Considers your skin type

95% accuracy  1000+ products  Verified brands`:A.includes("browse products")?` Browse our product catalog:

1. Tap "Shop" tab in bottom nav
2. Filter by category/concern
3. View details & ingredients
4. Save to favorites 
5. Shop directly from brands

All products are dermatologist-approved!`:A.includes("save to favorites")||A.includes("favorites")?` Save products to Favorites:

1. Tap heart icon on any product
2. Access via Profile  Favorites
3. Organize by category
4. Get price drop alerts
5. Quick reorder access

Perfect for tracking your routine!`:A.includes("product ingredients")||A.includes("ingredients")?` Product Ingredients:

Each product page shows:
 Full ingredient list
 Key actives highlighted
 Allergen warnings
 Clean beauty badges
 Cruelty-free status

Tap any ingredient for details!`:A.includes("shipping")?` Shipping Info:

 Products ship from brand partners
 Delivery times vary by brand
 Tracking provided
 Returns: Check brand policy

SkinPAI connects you to brands - we don't ship directly.`:A.includes("reset password")?` Reset Password:

1. Login screen  "Forgot Password"
2. Enter your email
3. Check email for reset link
4. Create new password
5. Login with new password

No email? Check spam or contact support!`:A.includes("update profile")?` Update Profile:

1. Go to Profile  Settings
2. Edit name, photo, bio
3. Update skin concerns
4. Set preferences
5. Save changes

Keep your profile updated for better recommendations!`:A.includes("privacy settings")?` Privacy Settings:

 Profile visibility
 Data sharing preferences
 Scan history privacy
 Marketing emails
 Push notifications

Access: Profile  Settings  Privacy`:A.includes("delete account")?` Delete Account:

This is permanent and will:
 Delete all scan data
 Remove saved products
 Cancel subscriptions
 Erase profile

To delete: Profile  Settings  Delete Account

Want to keep data but pause? Try deactivating instead!`:A.includes("login issues")?` Login Issues?

Try these:
1. Check email spelling
2. Verify password
3. Clear browser cache
4. Try "Forgot Password"
5. Check internet connection

Still stuck? Contact support for help!`:A.includes("follow influencers")?` Follow Influencers:

1. Go to Community tab
2. Browse influencer profiles
3. Tap "Follow" button
4. See their posts in feed
5. Get notifications

Discover skincare experts & beauty creators!`:A.includes("create a post")||A.includes("create post")?` Create a Post:

1. Community  + button
2. Upload photo/video
3. Write caption
4. Add hashtags
5. Tag products (optional)
6. Share!

Share your journey & inspire others!`:A.includes("join campaigns")||A.includes("campaigns")?` Join Campaigns:

 Brand collaborations
 Skincare challenges
 Product testing
 Giveaways
 Community events

Find active campaigns in Community  Campaigns tab!`:A.includes("creator stations")||A.includes("station")?` Creator Stations (Pro Only!):

 Your own content hub
 Share exclusive tips
 Build your community
 Monetization options
 Analytics dashboard

Upgrade to Pro to create your station!`:A.includes("community guidelines")?` Community Guidelines:

 Be respectful & kind
 Share authentic content
 No spam or promotions
 Respect privacy
 Report inappropriate content

Violations may result in account suspension.`:A.includes("wallet balance")||A.includes("view wallet")?` SkinPAI Wallet:

View balance: Profile  Wallet

Use wallet for:
 Membership payments
 In-app purchases
 Campaign prizes
 Referral bonuses

Current balance shown in profile!`:A.includes("add funds")?` Add Funds to Wallet:

1. Profile  Wallet
2. Tap "Add Funds"
3. Enter amount ($10-$1000)
4. Choose payment method
5. Confirm transaction

Instant credit  Secure processing!`:A.includes("payment history")?` Payment History:

View all transactions:
1. Profile  Wallet
2. Transaction History tab
3. Filter by date/type
4. Download statements

Track subscriptions, purchases & refunds!`:A.includes("refund policy")||A.includes("refund")?` Refund Policy:

 Memberships: 7-day money-back
 Wallet funds: Non-refundable
 Products: Contact brand directly
 Subscriptions: Pro-rated refunds

Request refund: support@skinpai.app`:A.includes("update payment method")?` Update Payment Method:

1. Profile  Wallet
2. Payment Methods
3. Add/remove cards
4. Set default payment
5. Update billing info

All changes are instant & secure!`:A.includes("data security")?` Data Security:

 AES-256 encryption
 Secure cloud storage
 Regular security audits
 No third-party sharing
 Compliant with GDPR/CCPA

Your data is protected with military-grade security!`:A.includes("privacy policy")?` Privacy Policy:

View full policy:
Profile  Settings  Privacy Policy

Key points:
 We don't sell your data
 You control your info
 Delete anytime
 Transparent practices

Questions? contact support!`:A.includes("delete my data")?` Delete Your Data:

Options:
1. Delete specific scans
2. Clear scan history
3. Delete entire account

To delete:
Profile  Settings  Privacy  Data Management

 Deletion is permanent!`:A.includes("gdpr")?` GDPR Rights:

You have the right to:
 Access your data
 Correct inaccuracies
 Delete information
 Data portability
 Withdraw consent

Exercise rights: support@skinpai.app`:A.includes("terms of service")?` Terms of Service:

View terms:
Profile  Settings  Terms of Service

Covers:
 Account usage
 Content guidelines
 Subscription terms
 Liability & disclaimers

Updated: Dec 2024`:A.includes("scan")||A.includes("analysis")?`For accurate skin scans:

 Clean your face thoroughly
 Use natural lighting
 Remove all makeup
 Hold camera at eye level
 Keep face centered

Guests get 1 scan/day, Members get 5 scans total. Would you like to upgrade for unlimited scans?`:A.includes("member")||A.includes("upgrade")||A.includes("pro")?`Great question! SkinPAI has 3 membership tiers:

 Guest: 1 scan/day
 Member ($9.99/mo): 5 total scans + history tracking
 Pro ($19.99/mo): Unlimited scans + Creator Station

Would you like help upgrading?`:A.includes("product")||A.includes("recommend")?`Our AI recommends products based on your skin scan results! After each scan, you'll see personalized recommendations for:

 Cleansers
 Moisturizers
 Serums
 Sunscreens

All products are from verified brands. Tap "Shop" to browse!`:A.includes("login")||A.includes("password")||A.includes("account")?`Having trouble with your account? I can help!

 Forgot password? Use the "Reset Password" option
 Can't log in? Check your email/password
 New to SkinPAI? Create a free account to get started

Need more help? I can connect you to a human agent.`:A.includes("community")||A.includes("influencer")?`Our Community features:

 Follow skincare influencers
 Share your journey
 Join campaigns & challenges
 Creator Stations (Pro only)

Check out the Community tab to explore!`:A.includes("pay")||A.includes("bill")||A.includes("wallet")?`For billing questions:

 View/update payment: Profile  Wallet
 Cancel membership: Settings  Subscription
 Refunds: Available within 7 days
 Add funds: Profile  Wallet  Add Funds

Need to speak with billing? I can transfer you.`:A.includes("private")||A.includes("secure")||A.includes("data")?` Your privacy is our priority!

 Bank-level encryption
 Scans stored securely
 Never shared without consent
 GDPR compliant
 Delete data anytime

View our Privacy Policy in Settings for details.`:A.includes("hi")||A.includes("hello")||A.includes("hey")?`Hello!  How can I assist you with SkinPAI today? I can help with:

 Skin scanning tips
 Membership upgrades
 Product recommendations
 Account issues
 Community features

What would you like to know?`:A.includes("thank")||A.includes("thanks")?"You're very welcome!  Is there anything else I can help you with today?":`I'm here to help! I can assist with:

 Skin scanning & analysis
 Membership & upgrades
 Product recommendations
 Account management
 Community features
 Billing & payments

What can I help you with?`},N=_=>{const A=_.toLowerCase();if(A.includes("back to main")||A.includes("main topics")){x("initial");return}A.includes("scan")||A.includes("analysis")||A.includes("accuracy")||A.includes("lighting")?x("scanning"):A.includes("member")||A.includes("upgrade")||A.includes("pro")||A.includes("tier")?x("membership"):A.includes("product")||A.includes("recommend")||A.includes("ingredient")||A.includes("shipping")?x("products"):A.includes("account")||A.includes("login")||A.includes("password")||A.includes("profile")?x("account"):A.includes("community")||A.includes("influencer")||A.includes("station")||A.includes("campaign")?x("community"):A.includes("wallet")||A.includes("billing")||A.includes("payment")||A.includes("refund")||A.includes("cancel")?x("billing"):(A.includes("privacy")||A.includes("security")||A.includes("data")||A.includes("gdpr"))&&x("privacy")},k=()=>{if(!i.trim())return;N(i);const _={id:Date.now().toString(),text:i,sender:"user",timestamp:new Date,status:"sent"};r(A=>[...A,_]),a(""),setTimeout(()=>{r(A=>A.map(O=>O.id===_.id?{...O,status:"delivered"}:O))},500),v(i)},C=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),k())},j={initial:["How do I scan?","Upgrade to Pro","Product help","Account issues","Community features","Wallet & Billing"],scanning:["Scan accuracy tips","How many scans left?","View scan history","Best lighting for scans","Upgrade for more scans","Back to main topics"],membership:["Compare membership tiers","How to upgrade?","Cancel membership","Membership benefits","Payment methods","Back to main topics"],products:["How recommendations work","Browse products","Save to favorites","Product ingredients","Shipping info","Back to main topics"],account:["Reset password","Update profile","Privacy settings","Delete account","Login issues","Back to main topics"],community:["Follow influencers","Create a post","Join campaigns","Creator Stations","Community guidelines","Back to main topics"],billing:["View wallet balance","Add funds","Payment history","Refund policy","Update payment method","Back to main topics"],privacy:["Data security","Privacy policy","Delete my data","GDPR rights","Terms of service","Back to main topics"]},R=_=>{a(_),setTimeout(()=>k(),100)};return o.jsx(Jo,{open:t,onOpenChange:e,children:o.jsxs(Qo,{className:`max-w-md ${u?"h-16":"h-[600px]"} transition-all duration-300 flex flex-col p-0 gap-0`,children:[o.jsx(Bc,{className:"p-4 border-b bg-gradient-to-r from-[#00B4D8] to-[#006D77] text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(xi,{className:"w-10 h-10 border-2 border-white",children:[o.jsx(yi,{src:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=100&h=100&fit=crop"}),o.jsx(vi,{children:"SA"})]}),o.jsxs("div",{children:[o.jsx(zc,{className:"text-white text-base",children:"SkinPAI Support"}),o.jsx(XT,{className:"text-white/90 text-xs sr-only",children:"Chat with SkinPAI support assistant"}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/90",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${h==="online"?"bg-green-400":"bg-gray-400"}`}),h==="online"?"Online now":"Away"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(be,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20",onClick:()=>d(!u),children:u?o.jsx(GK,{className:"w-4 h-4"}):o.jsx(YK,{className:"w-4 h-4"})}),o.jsx(be,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20",onClick:()=>e(!1),children:o.jsx(Us,{className:"w-4 h-4"})})]})]})}),!u&&o.jsxs(o.Fragment,{children:[o.jsx(_l,{className:"flex-1 p-4 overflow-y-auto",children:o.jsxs("div",{className:"space-y-4",children:[s.map(_=>o.jsx("div",{className:`flex ${_.sender==="user"?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${_.sender==="user"?"bg-[#00B4D8] text-white rounded-br-none":"bg-muted text-foreground rounded-bl-none"}`,children:[o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:_.text}),o.jsxs("div",{className:"flex items-center justify-end gap-1 mt-1",children:[o.jsx("span",{className:`text-xs ${_.sender==="user"?"text-white/70":"text-muted-foreground"}`,children:_.timestamp.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),_.sender==="user"&&_.status&&o.jsx(jN,{className:`w-3 h-3 ${_.status==="read"?"text-white":"text-white/50"}`})]})]})},_.id)),l&&o.jsx("div",{className:"flex justify-start",children:o.jsx("div",{className:"bg-muted rounded-2xl rounded-bl-none px-4 py-3",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),o.jsx("div",{ref:y})]})}),o.jsxs("div",{className:"px-4 pb-2 border-t pt-3",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Quick actions:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:j[g].map((_,A)=>o.jsx(it,{variant:"outline",className:"cursor-pointer hover:bg-[#00B4D8] hover:text-white hover:border-[#00B4D8] transition-colors",onClick:()=>R(_),children:_},A))})]}),o.jsxs("div",{className:"p-4 border-t bg-muted/30",children:[o.jsxs("div",{className:"flex items-end gap-2",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(sn,{placeholder:"Type your message...",value:i,onChange:_=>a(_.target.value),onKeyPress:C,className:"pr-20 resize-none"}),o.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[o.jsx(be,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>He.info("Attachments coming soon!"),children:o.jsx(nq,{className:"w-4 h-4 text-muted-foreground"})}),o.jsx(be,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>He.info("Emojis coming soon!"),children:o.jsx(oP,{className:"w-4 h-4 text-muted-foreground"})})]})]}),o.jsx(be,{size:"icon",className:"bg-[#00B4D8] hover:bg-[#00B4D8]/90 flex-shrink-0",onClick:k,disabled:!i.trim(),children:o.jsx(am,{className:"w-4 h-4"})})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Powered by SkinPAI AI  Available 24/7"})]})]})]})})}function h_e({video:t,open:e,onOpenChange:n}){const[s,r]=T.useState(!1),[i,a]=T.useState(!1),[l,c]=T.useState(0),u=()=>{if(r(!s),!s){const d=setInterval(()=>{c(h=>h>=100?(clearInterval(d),r(!1),100):h+1)},500)}};return o.jsx(Jo,{open:e,onOpenChange:n,children:o.jsxs(Qo,{className:"max-w-4xl h-[90vh] p-0 gap-0",children:[o.jsx(Bc,{className:"p-6 pb-4",children:o.jsx(zc,{children:t.title})}),o.jsxs("div",{className:"flex-1 flex flex-col",children:[o.jsxs("div",{className:"relative bg-black aspect-video",children:[o.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"}),!s&&o.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:o.jsx(be,{size:"icon",className:"w-20 h-20 rounded-full bg-white/90 hover:bg-white text-[#00B4D8]",onClick:u,children:o.jsx(td,{className:"w-10 h-10 ml-1"})})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"w-full h-1 bg-white/30 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-[#00B4D8] transition-all duration-300",style:{width:`${l}%`}})}),o.jsxs("div",{className:"flex items-center justify-between text-white",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(be,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20",onClick:u,children:s?o.jsx(rq,{className:"w-4 h-4"}):o.jsx(td,{className:"w-4 h-4"})}),o.jsx(be,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20",children:o.jsx(kq,{className:"w-4 h-4"})}),o.jsx(be,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20",children:o.jsx(Tq,{className:"w-4 h-4"})}),o.jsx(be,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20",onClick:()=>a(!i),children:i?o.jsx(oX,{className:"w-4 h-4"}):o.jsx(uP,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-xs",children:[Math.floor(l/100*5),":",String(Math.floor(l/100*300%60)).padStart(2,"0")," / ",t.duration]}),o.jsx(be,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20",children:o.jsx(KK,{className:"w-4 h-4"})})]})]})]})})]}),o.jsx(_l,{className:"flex-1 p-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(it,{variant:"secondary",children:t.level}),o.jsx(it,{variant:"outline",children:t.category})]}),o.jsx("p",{className:"text-muted-foreground",children:t.description})]})}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(md,{className:"w-4 h-4"}),t.duration]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ea,{className:"w-4 h-4"}),t.views," views"]}),t.completed&&o.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[o.jsx(Uc,{className:"w-4 h-4"}),"Completed"]})]}),o.jsxs("div",{className:"border-t pt-4",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"What you'll learn:"}),o.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground",children:f_e(t.category).map((d,h)=>o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(Uc,{className:"w-4 h-4 text-[#00B4D8] mt-0.5 flex-shrink-0"}),o.jsx("span",{children:d})]},h))})]})]})})]})]})})}function f_e(t){return{"getting-started":["Create your SkinPAI account and set up your profile","Navigate the main dashboard and understand key features","Configure notification and privacy settings","Connect with the SkinPAI community"],scanning:["Position your face correctly for accurate scans","Understand optimal lighting conditions","Interpret your skin analysis results","Track your skin health progress over time"],products:["How AI generates personalized recommendations","Filter products by skin concern and type","Save products to your favorites list","Read ingredient lists and reviews"],membership:["Compare Guest, Member, and Pro tiers","Upgrade your membership seamlessly","Manage billing and payment methods","Cancel or modify your subscription"],community:["Follow skincare influencers and experts","Create engaging posts and share your journey","Participate in brand campaigns and challenges","Build your own Creator Station (Pro only)"],advanced:["Create and customize your skincare routines","Set up automated reminders and tracking","Analyze advanced skin metrics and trends","Export your data and progress reports"]}[t]||[]}function p_e(){const[t,e]=T.useState(null),[n,s]=T.useState("all"),r=[{id:"1",title:"Getting Started with SkinPAI",description:"Learn the basics of SkinPAI and how to set up your account for the best skincare experience.",duration:"5:24",views:"12.5K",thumbnail:"https://images.unsplash.com/photo-1556228578-0d85b1a4d571?w=800&h=450&fit=crop",category:"getting-started",completed:!0,level:"Beginner"},{id:"2",title:"How to Scan Your Skin",description:"Master the art of scanning your skin for accurate AI analysis. Tips for lighting, positioning, and more.",duration:"4:15",views:"18.2K",thumbnail:"https://images.unsplash.com/photo-1512290923902-8a9f81dc236c?w=800&h=450&fit=crop",category:"scanning",completed:!0,level:"Beginner"},{id:"3",title:"Understanding Your Scan Results",description:"Deep dive into what each metric means and how to interpret your personalized skin health score.",duration:"6:42",views:"15.8K",thumbnail:"https://images.unsplash.com/photo-1570172619644-dfd03ed5d881?w=800&h=450&fit=crop",category:"scanning",level:"Intermediate"},{id:"4",title:"Finding the Perfect Products",description:"Discover how our AI matches you with products that target your specific skin concerns.",duration:"7:10",views:"22.1K",thumbnail:"https://images.unsplash.com/photo-1556228720-195a672e8a03?w=800&h=450&fit=crop",category:"products",level:"Beginner"},{id:"5",title:"Membership Benefits Explained",description:"Compare Guest, Member, and Pro tiers to find the perfect plan for your skincare journey.",duration:"3:55",views:"9.4K",thumbnail:"https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=800&h=450&fit=crop",category:"membership",level:"Beginner"},{id:"6",title:"Upgrading to Pro Membership",description:"Step-by-step guide to upgrading your account and unlocking unlimited scans and Creator Stations.",duration:"4:30",views:"11.7K",thumbnail:"https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=800&h=450&fit=crop",category:"membership",level:"Beginner"},{id:"7",title:"Community Features Tour",description:"Explore the SkinPAI community, follow influencers, and share your skincare journey.",duration:"5:50",views:"14.3K",thumbnail:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=800&h=450&fit=crop",category:"community",level:"Beginner"},{id:"8",title:"Creating Your First Post",description:"Learn how to create engaging posts, add photos, tag products, and connect with the community.",duration:"4:20",views:"8.9K",thumbnail:"https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=800&h=450&fit=crop",category:"community",level:"Beginner"},{id:"9",title:"Setting Up Your Creator Station",description:"Pro members only: Build your own content hub and start sharing exclusive skincare tips.",duration:"8:15",views:"6.2K",thumbnail:"https://images.unsplash.com/photo-1573164713714-d95e436ab8d6?w=800&h=450&fit=crop",category:"community",level:"Advanced"},{id:"10",title:"Advanced Routine Tracking",description:"Create custom routines, set reminders, and track your progress with advanced analytics.",duration:"6:30",views:"10.1K",thumbnail:"https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=800&h=450&fit=crop",category:"advanced",level:"Advanced"},{id:"11",title:"Reading Ingredient Lists",description:"Understand product ingredients, identify key actives, and spot potential allergens.",duration:"5:45",views:"13.6K",thumbnail:"https://images.unsplash.com/photo-1571875257727-256c39da42af?w=800&h=450&fit=crop",category:"products",level:"Intermediate"},{id:"12",title:"Maximizing Scan Accuracy",description:"Pro tips for getting the most accurate skin analysis results every time you scan.",duration:"3:40",views:"16.4K",thumbnail:"https://images.unsplash.com/photo-1598440947619-2c35fc9aa908?w=800&h=450&fit=crop",category:"scanning",level:"Advanced"}],i=n==="all"?r:r.filter(l=>l.category===n),a=[{id:"all",label:"All Videos",icon:VH,count:r.length},{id:"getting-started",label:"Getting Started",icon:td,count:r.filter(l=>l.category==="getting-started").length},{id:"scanning",label:"Skin Scanning",icon:zo,count:r.filter(l=>l.category==="scanning").length},{id:"products",label:"Products",icon:Go,count:r.filter(l=>l.category==="products").length},{id:"membership",label:"Membership",icon:hs,count:r.filter(l=>l.category==="membership").length},{id:"community",label:"Community",icon:so,count:r.filter(l=>l.category==="community").length},{id:"advanced",label:"Advanced",icon:Zr,count:r.filter(l=>l.category==="advanced").length}];return o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-6",children:[o.jsxs("div",{className:"text-center space-y-2 py-4",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-[#00B4D8] to-[#006D77] mb-4",children:o.jsx(td,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold",children:"Video Tutorials"}),o.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Learn everything about SkinPAI with our comprehensive video guides"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 max-w-2xl mx-auto",children:[o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-[#00B4D8]",children:r.length}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Videos"})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-[#00B4D8]",children:r.filter(l=>l.completed).length}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-[#00B4D8]",children:"45m"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Watch Time"})]})})]}),o.jsx("div",{className:"max-w-5xl mx-auto",children:o.jsxs(Sr,{value:n,onValueChange:s,children:[o.jsx(kr,{className:"grid grid-cols-3 lg:grid-cols-7 w-full mb-6",children:a.map(l=>o.jsxs(Jt,{value:l.id,className:"flex items-center gap-1 text-xs",children:[o.jsx(l.icon,{className:"w-3 h-3"}),o.jsx("span",{className:"hidden sm:inline",children:l.label}),o.jsx("span",{className:"sm:hidden",children:l.label.split(" ")[0]}),o.jsx(it,{variant:"secondary",className:"ml-1 text-xs px-1",children:l.count})]},l.id))}),o.jsxs(Qt,{value:n,className:"mt-0",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(l=>o.jsxs(ze,{className:"cursor-pointer hover:shadow-lg transition-shadow group overflow-hidden",onClick:()=>e(l),children:[o.jsxs("div",{className:"relative aspect-video overflow-hidden",children:[o.jsx("img",{src:l.thumbnail,alt:l.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),o.jsx("div",{className:"absolute inset-0 bg-black/40 group-hover:bg-black/50 transition-colors flex items-center justify-center",children:o.jsx("div",{className:"w-12 h-12 rounded-full bg-white/90 flex items-center justify-center group-hover:scale-110 transition-transform",children:o.jsx(td,{className:"w-6 h-6 text-[#00B4D8] ml-0.5"})})}),o.jsx("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded",children:l.duration}),l.completed&&o.jsx("div",{className:"absolute top-2 right-2 bg-green-600 text-white rounded-full p-1",children:o.jsx(Uc,{className:"w-4 h-4"})})]}),o.jsxs(Ot,{className:"p-4",children:[o.jsx("div",{className:"flex items-start justify-between gap-2 mb-2",children:o.jsx(it,{variant:"secondary",className:"text-xs",children:l.level})}),o.jsx(Ft,{className:"text-base line-clamp-2",children:l.title}),o.jsx(as,{className:"text-sm line-clamp-2",children:l.description})]}),o.jsx(Ue,{className:"p-4 pt-0",children:o.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ea,{className:"w-3 h-3"}),l.views]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(md,{className:"w-3 h-3"}),l.duration]})]})})]},l.id))}),i.length===0&&o.jsx(ze,{className:"p-12",children:o.jsxs("div",{className:"text-center text-muted-foreground",children:[o.jsx(td,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No tutorials found in this category"})]})})]})]})}),t&&o.jsx(h_e,{video:t,open:!!t,onOpenChange:l=>!l&&e(null)})]})}function m_e(){const[t,e]=T.useState(""),[n,s]=T.useState(!1),[r,i]=T.useState(!1),[a,l]=T.useState({name:"",email:"",subject:"",message:""});if(r)return o.jsxs("div",{children:[o.jsx(be,{variant:"ghost",onClick:()=>i(!1),className:"mb-4",children:" Back to Help & Support"}),o.jsx(p_e,{})]});const u=[{question:"How accurate is the skin analysis?",answer:"Our AI-powered skin analysis uses advanced computer vision technology with 95%+ accuracy. Results are based on multiple skin health indicators including hydration, evenness, clarity, and firmness."},{question:"How many scans can I do per day?",answer:"Guest users get 1 scan per day, while Members get 5 scans per day. We recommend scanning at consistent times for best tracking results."},{question:"Can I cancel my membership anytime?",answer:"Yes! You can cancel your membership at any time from your account settings. No questions asked, and you'll retain access until the end of your billing period."},{question:"How do product recommendations work?",answer:"Our AI analyzes your skin scan results and matches them with products that address your specific concerns. We partner with verified brands and distributors to provide accurate recommendations."},{question:"Is my data secure and private?",answer:"Absolutely. We use bank-level encryption for all data. Your scan images and personal information are never shared with third parties without your explicit consent."},{question:"How do I set up routine reminders?",answer:"Go to your Dashboard > Routine tab, and click on any routine item to set custom reminders. You can configure time, frequency, and notification preferences."},{question:"What should I do before scanning?",answer:"For best results: 1) Clean your face, 2) Use natural lighting, 3) Remove makeup, 4) Hold camera at eye level, 5) Keep face centered in the frame."},{question:"Can I track progress over time?",answer:"Yes! Members can access full scan history and progress tracking in the Dashboard. View trends in your skin metrics over days, weeks, and months."},{question:"How do I follow influencers?",answer:"Visit the Community tab, browse influencer profiles, and tap the Follow button. You'll see their posts in your feed and get notifications when they share new content."},{question:"Are product links affiliated?",answer:"Some product links may be affiliated, which helps us keep the app free. All products are independently recommended based on your skin analysis."}].filter(h=>h.question.toLowerCase().includes(t.toLowerCase())||h.answer.toLowerCase().includes(t.toLowerCase())),d=h=>{if(h.preventDefault(),!a.email||!a.message){He.error("Please fill in required fields");return}He.success("Message sent! We'll respond within 24 hours."),l({name:"",email:"",subject:"",message:""})};return o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-6",children:[o.jsxs("div",{className:"text-center space-y-2 py-4",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:o.jsx(QD,{className:"w-8 h-8 text-primary"})}),o.jsx("h1",{className:"text-3xl font-bold",children:"Help & Support"}),o.jsx("p",{className:"text-muted-foreground",children:"We're here to help you get the most out of SkinPAI"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 max-w-lg mx-auto",children:[o.jsx(ze,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>He.info("User guide coming soon!"),children:o.jsxs(Ue,{className:"p-4 text-center",children:[o.jsx(WH,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),o.jsx("p",{className:"text-sm font-medium",children:"User Guide"})]})}),o.jsx(ze,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>i(!0),children:o.jsxs(Ue,{className:"p-4 text-center",children:[o.jsx(O4,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),o.jsx("p",{className:"text-sm font-medium",children:"Video Tutorials"})]})}),o.jsx(ze,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>s(!0),children:o.jsxs(Ue,{className:"p-4 text-center",children:[o.jsx(_r,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),o.jsx("p",{className:"text-sm font-medium",children:"Live Chat"})]})}),o.jsx(ze,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>He.info("Community forum coming soon!"),children:o.jsxs(Ue,{className:"p-4 text-center",children:[o.jsx(Wc,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),o.jsx("p",{className:"text-sm font-medium",children:"Community"})]})})]}),o.jsxs(ze,{className:"max-w-2xl mx-auto",children:[o.jsxs(Ot,{children:[o.jsx(Ft,{children:"Frequently Asked Questions"}),o.jsx(as,{children:"Find quick answers to common questions"}),o.jsxs("div",{className:"relative mt-4",children:[o.jsx(d0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(sn,{placeholder:"Search FAQs...",value:t,onChange:h=>e(h.target.value),className:"pl-10"})]})]}),o.jsxs(Ue,{children:[o.jsx(l_e,{type:"single",collapsible:!0,className:"w-full",children:u.map((h,p)=>o.jsxs(c_e,{value:`item-${p}`,children:[o.jsx(u_e,{children:h.question}),o.jsx(d_e,{className:"text-muted-foreground",children:h.answer})]},p))}),u.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:o.jsxs("p",{children:['No FAQs found matching "',t,'"']})})]})]}),o.jsxs(ze,{className:"max-w-2xl mx-auto",children:[o.jsxs(Ot,{children:[o.jsx(Ft,{children:"Still need help?"}),o.jsx(as,{children:"Send us a message and we'll get back to you"})]}),o.jsx(Ue,{children:o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"name",children:"Name"}),o.jsx(sn,{id:"name",value:a.name,onChange:h=>l({...a,name:h.target.value}),placeholder:"Your name"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"email",children:"Email *"}),o.jsx(sn,{id:"email",type:"email",required:!0,value:a.email,onChange:h=>l({...a,email:h.target.value}),placeholder:"your@email.com"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"subject",children:"Subject"}),o.jsx(sn,{id:"subject",value:a.subject,onChange:h=>l({...a,subject:h.target.value}),placeholder:"How can we help?"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_t,{htmlFor:"message",children:"Message *"}),o.jsx(em,{id:"message",required:!0,value:a.message,onChange:h=>l({...a,message:h.target.value}),placeholder:"Describe your issue or question...",rows:5})]}),o.jsxs(be,{type:"submit",className:"w-full",children:[o.jsx(am,{className:"w-4 h-4 mr-2"}),"Send Message"]})]})})]}),o.jsxs(ze,{className:"max-w-2xl mx-auto",children:[o.jsx(Ot,{children:o.jsx(Ft,{children:"Additional Resources"})}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsx(be,{variant:"outline",className:"w-full justify-between",children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(_p,{className:"w-4 h-4"}),"Terms of Service"]})}),o.jsx(be,{variant:"outline",className:"w-full justify-between",children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Sa,{className:"w-4 h-4"}),"Privacy Policy"]})}),o.jsx(be,{variant:"outline",className:"w-full justify-between",children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Gc,{className:"w-4 h-4"}),"support@skinpai.app"]})})]})]}),o.jsxs("div",{className:"max-w-2xl mx-auto text-center text-sm text-muted-foreground space-y-2",children:[o.jsx("p",{children:"Need immediate assistance? We're available 24/7"}),o.jsxs("div",{className:"flex items-center justify-center gap-4",children:[o.jsxs("a",{href:"mailto:support@skinpai.app",className:"flex items-center gap-1 hover:text-primary",children:[o.jsx(Gc,{className:"w-4 h-4"}),"Email"]}),o.jsx("span",{children:""}),o.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-1 hover:text-primary",children:[o.jsx(_r,{className:"w-4 h-4"}),"Live Chat"]}),o.jsx("span",{children:""}),o.jsxs("a",{href:"#",className:"flex items-center gap-1 hover:text-primary",children:[o.jsx(_4,{className:"w-4 h-4"}),"Call"]})]})]}),o.jsx(oU,{open:n,onOpenChange:s,onShowVideoTutorials:()=>{s(!1),i(!0)}})]})}function g_e({onComplete:t,userName:e}){const[n,s]=T.useState(0),[r,i]=T.useState({}),[a,l]=T.useState(""),c=[{id:"skinType",question:"What is your skin type?",icon:o.jsx(ln,{className:"w-6 h-6 text-primary"}),options:[{id:"oily",label:"Oily",value:"oily",description:"Shiny, large pores, prone to breakouts"},{id:"dry",label:"Dry",value:"dry",description:"Flaky, tight feeling, rough texture"},{id:"combination",label:"Combination",value:"combination",description:"Oily T-zone, dry cheeks"},{id:"normal",label:"Normal",value:"normal",description:"Well-balanced, not too oily or dry"},{id:"sensitive",label:"Sensitive",value:"sensitive",description:"Easily irritated, prone to redness"}]},{id:"skinConcerns",question:"What is your primary skin concern?",icon:o.jsx(od,{className:"w-6 h-6 text-accent"}),options:[{id:"acne",label:"Acne & Breakouts",value:"acne",description:"Pimples, blackheads, blemishes"},{id:"aging",label:"Aging Signs",value:"aging",description:"Fine lines, wrinkles, loss of firmness"},{id:"pigmentation",label:"Dark Spots",value:"pigmentation",description:"Hyperpigmentation, uneven tone"},{id:"dryness",label:"Dehydration",value:"dryness",description:"Dull, tight, lacking moisture"},{id:"redness",label:"Redness & Sensitivity",value:"redness",description:"Irritation, inflammation"}]},{id:"currentRoutine",question:"How many steps is your current skincare routine?",icon:o.jsx(sm,{className:"w-6 h-6 text-primary"}),options:[{id:"minimal",label:"Minimal (1-2 steps)",value:"minimal",description:"Just cleanser or moisturizer"},{id:"basic",label:"Basic (3-4 steps)",value:"basic",description:"Cleanser, toner, moisturizer, SPF"},{id:"moderate",label:"Moderate (5-7 steps)",value:"moderate",description:"Includes serums and treatments"},{id:"extensive",label:"Extensive (8+ steps)",value:"extensive",description:"Full multi-step routine"},{id:"none",label:"No routine yet",value:"none",description:"Just starting my journey"}]},{id:"sunExposure",question:"How much sun exposure do you typically get?",icon:o.jsx(om,{className:"w-6 h-6 text-yellow-500"}),options:[{id:"minimal",label:"Minimal",value:"minimal",description:"Mostly indoors, limited outdoor time"},{id:"moderate",label:"Moderate",value:"moderate",description:"1-2 hours daily outdoor exposure"},{id:"high",label:"High",value:"high",description:"3+ hours daily, work outdoors"},{id:"variable",label:"Variable",value:"variable",description:"Depends on the day/season"}]},{id:"lifestyle",question:"Which lifestyle factor affects your skin most?",icon:o.jsx(Yn,{className:"w-6 h-6 text-red-500"}),options:[{id:"sleep",label:"Sleep Quality",value:"sleep",description:"Irregular sleep or lack of rest"},{id:"stress",label:"Stress Levels",value:"stress",description:"High stress affecting skin"},{id:"diet",label:"Diet & Nutrition",value:"diet",description:"Food sensitivities or poor diet"},{id:"hydration",label:"Water Intake",value:"hydration",description:"Not drinking enough water"},{id:"exercise",label:"Physical Activity",value:"exercise",description:"Sweat and exercise impact"}]}],u=c[n],d=(n+1)/c.length*100,h=n===c.length-1,p=n===0,g=w=>{l(w)},x=()=>{if(!a){He.error("Please select an option to continue");return}if(i(w=>({...w,[u.id]:a})),h){const w={...r,[u.id]:a};He.success("Profile complete! Ready to scan"),setTimeout(()=>t(w),300)}else s(w=>w+1),l("")},y=()=>{if(!p){s(N=>N-1);const w=c[n-1];l(r[w.id]||"")}},v=()=>{He.success("Questionnaire skipped"),t({})};return o.jsxs("div",{className:"min-h-screen bg-background p-4 flex flex-col",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-semibold",children:["Welcome",e?`, ${e}`:"","! "]}),o.jsx("p",{className:"text-muted-foreground",children:"Help us personalize your skin journey"})]}),o.jsx(be,{variant:"ghost",size:"sm",onClick:v,className:"text-muted-foreground",children:"Skip"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{className:"text-muted-foreground",children:["Question ",n+1," of ",c.length]}),o.jsxs("span",{className:"font-medium text-primary",children:[Math.round(d),"%"]})]}),o.jsx(uo,{value:d,className:"h-2"})]})]}),o.jsx(Ure,{mode:"wait",children:o.jsxs(Rl.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"flex-1 flex flex-col",children:[o.jsxs(ze,{className:"flex-1 flex flex-col",children:[o.jsxs(Ot,{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:u.icon}),o.jsxs(it,{variant:"outline",children:[n+1,"/",c.length]})]}),o.jsx(Ft,{className:"text-xl",children:u.question}),o.jsx(as,{children:"Select the option that best describes you"})]}),o.jsx(Ue,{className:"flex-1 space-y-3",children:u.options.map((w,N)=>o.jsx(Rl.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:N*.05},onClick:()=>g(w.value),className:`
                    w-full p-4 rounded-lg border-2 text-left transition-all
                    ${a===w.value?"border-primary bg-primary/5 shadow-md":"border-border hover:border-primary/50 hover:bg-accent/50"}
                  `,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`
                      w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 mt-0.5
                      ${a===w.value?"border-primary bg-primary":"border-muted-foreground"}
                    `,children:a===w.value&&o.jsx(an,{className:"w-3 h-3 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium mb-1",children:w.label}),w.description&&o.jsx("div",{className:"text-sm text-muted-foreground",children:w.description})]})]})},w.id))})]}),o.jsxs("div",{className:"flex gap-3 mt-4",children:[o.jsxs(be,{variant:"outline",onClick:y,disabled:p,className:"flex-1",children:[o.jsx(tK,{className:"w-4 h-4 mr-2"}),"Back"]}),o.jsx(be,{onClick:x,disabled:!a,className:"flex-1",children:h?o.jsxs(o.Fragment,{children:["Complete",o.jsx(an,{className:"w-4 h-4 ml-2"})]}):o.jsxs(o.Fragment,{children:["Next",o.jsx(Gr,{className:"w-4 h-4 ml-2"})]})})]})]},n)}),o.jsx("div",{className:"mt-6 p-3 bg-primary/5 rounded-lg border border-primary/20",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(ln,{className:"w-4 h-4 text-primary flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Your answers help us provide personalized product recommendations and track your progress more accurately"})]})})]})}function x_e({onClose:t,onPost:e}){const[n,s]=T.useState(""),[r,i]=T.useState([]),[a,l]=T.useState([]),c=["#skincare","#glowup","#routine","#selfcare","#beauty","#skincareroutine","#healthyskin","#skincaretips","#glowing","#skinpaicommunity","#skincarejourney","#skincarelover"],u=()=>{if(!n.trim()&&a.length===0){He.error("Please add content or media to your post");return}e(n,a,r),He.success("Post shared successfully! "),t()},d=p=>{r.includes(p)?i(g=>g.filter(x=>x!==p)):i(g=>[...g,p])},h=()=>{He.success("Media uploaded!"),l(p=>[...p,"https://images.unsplash.com/photo-1556228578-0d85b1a4d571?w=400&h=400&fit=crop"])};return o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Create Post"}),o.jsx(be,{variant:"ghost",size:"icon",onClick:t,children:o.jsx(Us,{className:"w-5 h-5"})})]}),o.jsx(ze,{children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(xi,{children:[o.jsx(yi,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=user"}),o.jsx(vi,{children:"U"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Your Name"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"@username"})]})]})})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4 space-y-4",children:[o.jsx(em,{placeholder:"Share your skincare journey, tips, or results... ",value:n,onChange:p=>s(p.target.value),rows:6,className:"resize-none"}),a.length>0&&o.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map((p,g)=>o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:p,alt:"Upload",className:"w-full h-32 object-cover rounded-lg"}),o.jsx("button",{onClick:()=>l(x=>x.filter((y,v)=>v!==g)),className:"absolute top-2 right-2 p-1 bg-destructive rounded-full text-white",children:o.jsx(Us,{className:"w-4 h-4"})})]},g))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(be,{variant:"outline",size:"sm",onClick:h,children:[o.jsx($N,{className:"w-4 h-4 mr-2"}),"Photo"]}),o.jsxs(be,{variant:"outline",size:"sm",onClick:h,children:[o.jsx(O4,{className:"w-4 h-4 mr-2"}),"Video"]}),o.jsxs(be,{variant:"outline",size:"sm",children:[o.jsx(oP,{className:"w-4 h-4 mr-2"}),"Emoji"]})]})]})}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2 text-base",children:[o.jsx(Gp,{className:"w-5 h-5"}),"Add Hashtags"]})}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(p=>o.jsx(it,{variant:r.includes(p)?"default":"outline",className:"cursor-pointer",onClick:()=>d(p),children:p},p))}),r.length>0&&o.jsxs("div",{className:"pt-2 border-t",children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Selected:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(p=>o.jsxs(it,{variant:"default",children:[p,o.jsx("button",{onClick:()=>d(p),className:"ml-1",children:o.jsx(Us,{className:"w-3 h-3"})})]},p))})]})]})]}),o.jsx(ze,{className:"border-primary/20 bg-primary/5",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(ln,{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium mb-1",children:"Tips for a great post:"}),o.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[o.jsx("li",{children:" Share your honest experience"}),o.jsx("li",{children:" Use relevant hashtags"}),o.jsx("li",{children:" Tag products you're using"}),o.jsx("li",{children:" Engage with comments"})]})]})]})})}),o.jsxs("div",{className:"flex gap-3 pb-4",children:[o.jsx(be,{variant:"outline",className:"flex-1",onClick:t,children:"Cancel"}),o.jsxs(be,{className:"flex-1",onClick:u,children:[o.jsx(am,{className:"w-4 h-4 mr-2"}),"Post"]})]})]})}function lU({comments:t,onAddComment:e,onLikeComment:n,onDeleteComment:s,onEditComment:r,placeholder:i="Add a comment...",showReplies:a=!0,maxDepth:l=3,currentDepth:c=0}){const[u,d]=T.useState(""),[h,p]=T.useState(null),[g,x]=T.useState(""),[y,v]=T.useState(null),[w,N]=T.useState(""),[k,C]=T.useState(new Set),j=()=>{u.trim()&&(e(u),d(""),He.success("Comment posted!"))},R=V=>{g.trim()&&(e(g,V),x(""),p(null),C(ne=>new Set(ne).add(V)),He.success("Reply posted!"))},_=(V,ne)=>{v(V),N(ne)},A=V=>{!w.trim()||!r||(r(V,w),v(null),N(""),He.success("Comment updated!"))},O=()=>{v(null),N("")},L=V=>{s&&(s(V),He.success("Comment deleted"))},D=V=>{C(ne=>{const J=new Set(ne);return J.has(V)?J.delete(V):J.add(V),J})},q=(V,ne=0)=>{const J=k.has(V.id),ee=V.replies&&V.replies.length>0,te=a&&ne<l;return o.jsx("div",{className:`${ne>0?"ml-8 mt-3":"mt-4"}`,children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(xi,{className:"w-8 h-8 flex-shrink-0",children:[o.jsx(yi,{src:V.author.avatar}),o.jsx(vi,{children:V.author.name.charAt(0)})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"bg-secondary/20 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"font-medium text-sm",children:V.author.name}),V.author.verified&&o.jsx(hi,{className:"w-3 h-3 text-blue-500 flex-shrink-0"}),V.author.isInfluencer&&o.jsx(it,{variant:"default",className:"text-xs bg-[#00B4D8] h-4 px-1",children:"Creator"}),V.author.isBrand&&o.jsx(it,{variant:"secondary",className:"text-xs h-4 px-1",children:"Brand"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:V.timestamp})]}),(V.isOwner||s)&&o.jsxs(eS,{children:[o.jsx(tS,{asChild:!0,children:o.jsx(be,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:o.jsx(eP,{className:"w-3 h-3"})})}),o.jsxs(nS,{align:"end",children:[V.isOwner&&r&&o.jsxs(ud,{onClick:()=>_(V.id,V.content),children:[o.jsx(aq,{className:"w-3 h-3 mr-2"}),"Edit"]}),V.isOwner&&s&&o.jsxs(ud,{onClick:()=>L(V.id),className:"text-destructive",children:[o.jsx(gd,{className:"w-3 h-3 mr-2"}),"Delete"]}),!V.isOwner&&o.jsxs(ud,{onClick:()=>He.info("Report submitted"),children:[o.jsx(CK,{className:"w-3 h-3 mr-2"}),"Report"]})]})]})]}),y===V.id?o.jsxs("div",{className:"space-y-2",children:[o.jsx(sn,{value:w,onChange:X=>N(X.target.value),className:"text-sm",autoFocus:!0}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(be,{size:"sm",onClick:()=>A(V.id),children:"Save"}),o.jsx(be,{size:"sm",variant:"outline",onClick:O,children:"Cancel"})]})]}):o.jsx("p",{className:"text-sm break-words",children:V.content})]}),o.jsxs("div",{className:"flex items-center gap-3 mt-1 ml-3",children:[o.jsxs(be,{variant:"ghost",size:"sm",className:"h-auto py-1 px-2 text-xs",onClick:()=>n(V.id),children:[o.jsx(lP,{className:`w-3 h-3 mr-1 ${V.liked?"fill-current text-[#00B4D8]":""}`}),V.likes>0&&o.jsx("span",{children:V.likes})]}),te&&o.jsxs(be,{variant:"ghost",size:"sm",className:"h-auto py-1 px-2 text-xs",onClick:()=>p(h===V.id?null:V.id),children:[o.jsx(_r,{className:"w-3 h-3 mr-1"}),"Reply"]}),ee&&o.jsx(be,{variant:"ghost",size:"sm",className:"h-auto py-1 px-2 text-xs",onClick:()=>D(V.id),children:J?o.jsxs(o.Fragment,{children:[o.jsx(JD,{className:"w-3 h-3 mr-1"}),"Hide ",V.replies.length," ",V.replies.length===1?"reply":"replies"]}):o.jsxs(o.Fragment,{children:[o.jsx(py,{className:"w-3 h-3 mr-1"}),"View ",V.replies.length," ",V.replies.length===1?"reply":"replies"]})})]}),h===V.id&&o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsxs(xi,{className:"w-6 h-6",children:[o.jsx(yi,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=user"}),o.jsx(vi,{children:"U"})]}),o.jsxs("div",{className:"flex-1 flex gap-2",children:[o.jsx(sn,{placeholder:`Reply to ${V.author.name}...`,value:g,onChange:X=>x(X.target.value),onKeyPress:X=>X.key==="Enter"&&R(V.id),className:"text-sm",autoFocus:!0}),o.jsx(be,{size:"sm",onClick:()=>R(V.id),children:o.jsx(am,{className:"w-3 h-3"})})]})]}),ee&&J&&o.jsx("div",{className:"mt-2",children:V.replies.map(X=>q(X,ne+1))})]})]})},V.id)};return o.jsxs("div",{className:"space-y-4",children:[c===0&&o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(xi,{className:"w-8 h-8",children:[o.jsx(yi,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=user"}),o.jsx(vi,{children:"U"})]}),o.jsxs("div",{className:"flex-1 flex gap-2",children:[o.jsx(sn,{placeholder:i,value:u,onChange:V=>d(V.target.value),onKeyPress:V=>V.key==="Enter"&&j()}),o.jsx(be,{size:"icon",onClick:j,children:o.jsx(am,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"space-y-1",children:t.map(V=>q(V,c))}),t.length===0&&c===0&&o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(_r,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),o.jsx("p",{className:"text-sm",children:"No comments yet. Be the first to comment!"})]})]})}function y_e({post:t,onBack:e}){const[n,s]=T.useState(t.engagement.liked),[r,i]=T.useState(t.engagement.saved),[a,l]=T.useState(t.engagement.likes),[c,u]=T.useState([{id:"1",author:{name:"Emma Wilson",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop",verified:!1},content:"This is so helpful! What brand is that serum? ",timestamp:"1h ago",likes:12,liked:!1,replies:[{id:"1-1",author:{name:"Sarah Beauty",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop",verified:!0,isInfluencer:!0},content:"Thanks! It's the Glow Serum from SkinLux! ",timestamp:"45m ago",likes:5,liked:!1},{id:"1-2",author:{name:"Emma Wilson",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop",verified:!1},content:"Perfect, thank you so much! ",timestamp:"30m ago",likes:2,liked:!1}]},{id:"2",author:{name:"Dr. Skin Expert",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop",verified:!0},content:"Great routine! Vitamin C in the morning is perfect for protection.",timestamp:"45m ago",likes:28,liked:!1},{id:"3",author:{name:"Jessica Lee",avatar:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=150&h=150&fit=crop",verified:!1},content:"Your skin looks amazing! How long have you been using this routine?",timestamp:"30m ago",likes:5,liked:!1,replies:[{id:"3-1",author:{name:"Sarah Beauty",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop",verified:!0,isInfluencer:!0},content:"About 3 months now! Consistency is key! ",timestamp:"20m ago",likes:8,liked:!1}]}]),d=()=>{s(!n),l(n?a-1:a+1),He.success(n?"Removed from likes":"Post liked! ")},h=()=>{i(!r),He.success(r?"Removed from saved":"Post saved! ")},p=()=>{He.success("Link copied to clipboard!")},g=(w,N)=>{const k={id:Date.now().toString(),author:{name:"You",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=user",verified:!1},content:w,timestamp:"Just now",likes:0,liked:!1,isOwner:!0};u(N?C=>{const j=R=>R.map(_=>_.id===N?{..._,replies:[..._.replies||[],k]}:_.replies?{..._,replies:j(_.replies)}:_);return j(C)}:C=>[k,...C])},x=w=>{u(N=>{const k=C=>C.map(j=>j.id===w?{...j,liked:!j.liked,likes:j.liked?j.likes-1:j.likes+1}:j.replies?{...j,replies:k(j.replies)}:j);return k(N)})},y=w=>{u(N=>{const k=C=>C.filter(j=>j.id===w?!1:(j.replies&&(j.replies=k(j.replies)),!0));return k(N)})},v=(w,N)=>{u(k=>{const C=j=>j.map(R=>R.id===w?{...R,content:N}:R.replies?{...R,replies:C(R.replies)}:R);return C(k)})};return o.jsxs("div",{className:"min-h-screen bg-background pb-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(En,{src:t.content.media,alt:"Post",className:"w-full h-96 object-cover"}),t.type==="video"&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(be,{size:"lg",className:"rounded-full w-16 h-16",children:o.jsx(_r,{className:"w-8 h-8"})})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(xi,{className:"w-12 h-12",children:[o.jsx(yi,{src:t.author.avatar}),o.jsx(vi,{children:t.author.name.charAt(0)})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-semibold",children:t.author.name}),t.author.verified&&o.jsx(hi,{className:"w-4 h-4 text-blue-500"}),t.author.isInfluencer&&o.jsx(it,{variant:"secondary",className:"text-xs",children:"Influencer"})]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.author.username,"  ",t.timestamp]})]})]}),o.jsx(be,{variant:"ghost",size:"icon",children:o.jsx(tP,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(be,{variant:"ghost",size:"sm",className:"gap-2",onClick:d,children:[o.jsx(Yn,{className:`w-5 h-5 ${n?"fill-red-500 text-red-500":""}`}),o.jsx("span",{children:a.toLocaleString()})]}),o.jsxs(be,{variant:"ghost",size:"sm",className:"gap-2",children:[o.jsx(_r,{className:"w-5 h-5"}),o.jsx("span",{children:c.length})]}),o.jsxs(be,{variant:"ghost",size:"sm",className:"gap-2",onClick:p,children:[o.jsx(uf,{className:"w-5 h-5"}),o.jsx("span",{children:t.engagement.shares})]})]}),o.jsx(be,{variant:"ghost",size:"icon",onClick:h,children:o.jsx(HH,{className:`w-5 h-5 ${r?"fill-current":""}`})})]}),o.jsx("div",{children:o.jsxs("p",{className:"text-sm",children:[o.jsx("span",{className:"font-semibold",children:t.author.name})," ",t.content.caption]})}),t.content.products&&t.content.products.length>0&&o.jsx(ze,{className:"bg-secondary/20",children:o.jsxs(Ue,{className:"p-3",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Products in this post:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.content.products.map((w,N)=>o.jsx(it,{variant:"outline",children:w},N))})]})}),o.jsx(Bn,{}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"font-semibold",children:["Comments (",c.length,")"]}),o.jsx(lU,{comments:c,onAddComment:g,onLikeComment:x,onDeleteComment:y,onEditComment:v,placeholder:"Add a comment...",showReplies:!0})]})]})]})}function v_e({influencerId:t,onBack:e,onViewPost:n}){const[s,r]=T.useState(!1),i={name:"Sarah Beauty",username:"@sarahbeauty",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop",cover:"https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?w=800&h=300&fit=crop",rank:1,bio:" Skincare enthusiast & certified esthetician  Helping you achieve your best skin  DM for collabs",location:"Los Angeles, CA",joinedDate:"January 2022",stats:{followers:234500,following:892,posts:1247,likes:345e4},specialties:["Anti-aging","Acne Treatment","Natural Skincare"],badges:[{icon:"",name:"Top Influencer"},{icon:"",name:"100 Day Streak"},{icon:"",name:"Expert Verified"},{icon:"",name:"Premium Creator"}],achievements:[{title:"Most Helpful",count:500},{title:"Community Hero",count:1},{title:"Trending Posts",count:50}]},a=[{id:"1",image:"https://images.unsplash.com/photo-1596462502278-27bfdc403348?w=400&h=400&fit=crop",likes:1247,comments:89},{id:"2",image:"https://images.unsplash.com/photo-1556228578-0d85b1a4d571?w=400&h=400&fit=crop",likes:2134,comments:156},{id:"3",image:"https://images.unsplash.com/photo-1620916566398-39f1143ab7be?w=400&h=400&fit=crop",likes:1876,comments:203},{id:"4",image:"https://images.unsplash.com/photo-1571875257727-256c39da42af?w=400&h=400&fit=crop",likes:1543,comments:98},{id:"5",image:"https://images.unsplash.com/photo-1598440947619-2c35fc9aa908?w=400&h=400&fit=crop",likes:1987,comments:134},{id:"6",image:"https://images.unsplash.com/photo-1570554886111-e80fcca6a029?w=400&h=400&fit=crop",likes:2301,comments:187}],l=()=>{r(!s),He.success(s?`Unfollowed ${i.name}`:`Following ${i.name}!`)},c=()=>{He.success("Opening messages...")},u=()=>{He.success("Profile link copied to clipboard!")};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("div",{className:"relative h-32",children:[o.jsx(En,{src:i.cover,alt:"Cover",className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-background"})]}),o.jsxs("div",{className:"px-4 -mt-16 relative z-10 space-y-4",children:[o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsxs("div",{className:"relative",children:[o.jsxs(xi,{className:"w-24 h-24 border-4 border-background",children:[o.jsx(yi,{src:i.avatar}),o.jsx(vi,{children:i.name.charAt(0)})]}),o.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:o.jsx(hs,{className:"w-4 h-4 text-white"})})]}),o.jsxs("div",{className:"flex gap-2 pb-2",children:[o.jsx(be,{variant:s?"outline":"default",size:"sm",onClick:l,children:s?o.jsxs(o.Fragment,{children:[o.jsx(eX,{className:"w-4 h-4 mr-2"})," Following"]}):o.jsxs(o.Fragment,{children:[o.jsx(cP,{className:"w-4 h-4 mr-2"})," Follow"]})}),o.jsx(be,{variant:"outline",size:"icon",onClick:c,children:o.jsx(_r,{className:"w-4 h-4"})}),o.jsx(be,{variant:"outline",size:"icon",onClick:u,children:o.jsx(uf,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h1",{className:"text-xl font-bold",children:i.name}),o.jsx(hi,{className:"w-5 h-5 text-blue-500"}),o.jsxs(it,{variant:"secondary",children:["Rank #",i.rank]})]}),o.jsx("p",{className:"text-muted-foreground",children:i.username}),o.jsx("p",{className:"mt-2",children:i.bio})]}),o.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(rm,{className:"w-4 h-4"}),i.location]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ho,{className:"w-4 h-4"}),"Joined ",i.joinedDate]})]}),o.jsx(ze,{children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:i.stats.posts.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Posts"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold",children:[(i.stats.followers/1e3).toFixed(1),"K"]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Followers"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:i.stats.following.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Following"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold",children:[(i.stats.likes/1e6).toFixed(1),"M"]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Likes"})]})]})})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Specialties"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:i.specialties.map((d,h)=>o.jsx(it,{variant:"secondary",children:d},h))})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Badges & Achievements"}),o.jsx("div",{className:"grid grid-cols-4 gap-3",children:i.badges.map((d,h)=>o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl mb-1",children:d.icon}),o.jsx("p",{className:"text-xs text-muted-foreground",children:d.name})]},h))})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Achievements"}),o.jsx("div",{className:"space-y-2",children:i.achievements.map((d,h)=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-secondary/20 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ml,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-sm",children:d.title})]}),o.jsx(it,{variant:"outline",children:d.count})]},h))})]})}),o.jsxs(Sr,{defaultValue:"posts",className:"w-full",children:[o.jsxs(kr,{className:"grid w-full grid-cols-2",children:[o.jsx(Jt,{value:"posts",children:"Posts"}),o.jsx(Jt,{value:"liked",children:"Liked"})]}),o.jsx(Qt,{value:"posts",className:"mt-4",children:o.jsx("div",{className:"grid grid-cols-3 gap-1",children:a.map(d=>o.jsxs("div",{className:"relative aspect-square cursor-pointer group",onClick:()=>n(d.id),children:[o.jsx(En,{src:d.image,alt:"Post",className:"w-full h-full object-cover"}),o.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-4 text-white",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Yn,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm",children:d.likes.toLocaleString()})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(_r,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm",children:d.comments})]})]})]},d.id))})}),o.jsx(Qt,{value:"liked",className:"mt-4",children:o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(Yn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"Liked posts are private"})]})})]})]})]})}function b_e({brandId:t,onBack:e,onViewProduct:n}){const[s,r]=T.useState(!1),i={name:"SkinGlow Naturals",logo:"https://images.unsplash.com/photo-1599305445671-ac291c95aaa9?w=200&h=200&fit=crop",cover:"https://images.unsplash.com/photo-1556228720-195a672e8a03?w=800&h=300&fit=crop",rating:4.8,reviews:12450,description:` Natural & Organic Skincare Brand
 Cruelty-free & Vegan
 Sustainable packaging
 Since 2015`,website:"https://skinglow.com",email:"hello@skinglow.com",phone:"+1 (555) 123-4567",location:"San Francisco, CA",stats:{followers:89600,products:47,posts:234,campaigns:12},categories:["Natural","Anti-aging","Hydration","Brightening"],achievements:[{icon:"",title:"Best Natural Brand 2024",year:"2024"},{icon:"",title:"Top Rated",year:"2023"},{icon:"",title:"Eco-Friendly Certified",year:"2022"}]},a=[{id:"1",name:"Vitamin C Brightening Serum",image:"https://images.unsplash.com/photo-1620916566398-39f1143ab7be?w=300&h=300&fit=crop",price:45.99,rating:4.9,reviews:1234},{id:"2",name:"Hyaluronic Acid Moisturizer",image:"https://images.unsplash.com/photo-1556228578-0d85b1a4d571?w=300&h=300&fit=crop",price:38.99,rating:4.7,reviews:892},{id:"3",name:"Retinol Night Cream",image:"https://images.unsplash.com/photo-1571875257727-256c39da42af?w=300&h=300&fit=crop",price:52.99,rating:4.8,reviews:1456},{id:"4",name:"Gentle Cleansing Foam",image:"https://images.unsplash.com/photo-1598440947619-2c35fc9aa908?w=300&h=300&fit=crop",price:24.99,rating:4.6,reviews:678}],l=[{id:"1",image:"https://images.unsplash.com/photo-1596462502278-27bfdc403348?w=400&h=400&fit=crop",likes:3421,comments:234},{id:"2",image:"https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?w=400&h=400&fit=crop",likes:2876,comments:189},{id:"3",image:"https://images.unsplash.com/photo-1570554886111-e80fcca6a029?w=400&h=400&fit=crop",likes:4123,comments:312}],c=()=>{r(!s),He.success(s?`Unfollowed ${i.name}`:`Following ${i.name}!`)},u=()=>{He.success("Opening website..."),window.open(i.website,"_blank")};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("div",{className:"relative h-40",children:[o.jsx(En,{src:i.cover,alt:"Cover",className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-background"})]}),o.jsxs("div",{className:"px-4 -mt-20 relative z-10 space-y-4",children:[o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsxs(xi,{className:"w-24 h-24 border-4 border-background",children:[o.jsx(yi,{src:i.logo}),o.jsx(vi,{children:i.name.charAt(0)})]}),o.jsxs("div",{className:"flex gap-2 pb-2",children:[o.jsx(be,{variant:s?"outline":"default",size:"sm",onClick:c,children:s?"Following":"Follow"}),o.jsxs(be,{variant:"outline",size:"sm",onClick:u,children:[o.jsx(Wc,{className:"w-4 h-4 mr-2"}),"Visit"]})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h1",{className:"text-xl font-bold",children:i.name}),o.jsx(hi,{className:"w-5 h-5 text-blue-500"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((d,h)=>o.jsx(bs,{className:`w-4 h-4 ${h<Math.floor(i.rating)?"fill-current text-yellow-500":"text-gray-300"}`},h))}),o.jsx("span",{className:"font-medium",children:i.rating}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",i.reviews.toLocaleString()," reviews)"]})]})]}),o.jsx("div",{className:"whitespace-pre-line text-sm",children:i.description}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(Wc,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("a",{href:i.website,className:"text-primary hover:underline",children:i.website})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(Gc,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{children:i.email})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(_4,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{children:i.phone})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(rm,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{children:i.location})]})]})}),o.jsx(ze,{children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:i.stats.products}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Products"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold",children:[(i.stats.followers/1e3).toFixed(1),"K"]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Followers"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:i.stats.posts}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Posts"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:i.stats.campaigns}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Campaigns"})]})]})})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Categories"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:i.categories.map((d,h)=>o.jsx(it,{variant:"secondary",children:d},h))})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Awards & Certifications"}),o.jsx("div",{className:"space-y-2",children:i.achievements.map((d,h)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-secondary/20 rounded-lg",children:[o.jsx("span",{className:"text-2xl",children:d.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-sm",children:d.title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:d.year})]})]},h))})]})}),o.jsxs(Sr,{defaultValue:"products",className:"w-full pb-4",children:[o.jsxs(kr,{className:"grid w-full grid-cols-2",children:[o.jsx(Jt,{value:"products",children:"Products"}),o.jsx(Jt,{value:"posts",children:"Posts"})]}),o.jsx(Qt,{value:"products",className:"mt-4 space-y-4",children:a.map(d=>o.jsx(ze,{className:"overflow-hidden cursor-pointer hover:shadow-md transition-shadow",onClick:()=>n(d.id),children:o.jsx(Ue,{className:"p-0",children:o.jsxs("div",{className:"flex gap-4",children:[o.jsx(En,{src:d.image,alt:d.name,className:"w-24 h-24 object-cover"}),o.jsxs("div",{className:"flex-1 p-3",children:[o.jsx("h4",{className:"font-medium mb-1 line-clamp-2",children:d.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(bs,{className:"w-3 h-3 fill-current text-yellow-500"}),o.jsx("span",{className:"text-sm",children:d.rating})]}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",d.reviews,")"]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"font-bold",children:["$",d.price]}),o.jsxs(be,{size:"sm",variant:"outline",children:[o.jsx(Go,{className:"w-4 h-4 mr-2"}),"Shop"]})]})]})]})})},d.id))}),o.jsx(Qt,{value:"posts",className:"mt-4",children:o.jsx("div",{className:"grid grid-cols-3 gap-1",children:l.map(d=>o.jsxs("div",{className:"relative aspect-square cursor-pointer group",children:[o.jsx(En,{src:d.image,alt:"Post",className:"w-full h-full object-cover"}),o.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-4 text-white",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Yn,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm",children:d.likes.toLocaleString()})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(_r,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm",children:d.comments})]})]})]},d.id))})})]})]})]})}function w_e({campaignId:t,onBack:e}){const[n,s]=T.useState(!1),r={title:"#GlowChallenge30",brandName:"SkinGlow Naturals",brandLogo:"https://images.unsplash.com/photo-1599305445671-ac291c95aaa9?w=200&h=200&fit=crop",campaignImage:"https://images.unsplash.com/photo-1556228720-195a672e8a03?w=800&h=400&fit=crop",description:"Join our 30-day skincare challenge and transform your skin! Share your daily routine using our products and track your progress. Win amazing prizes!",longDescription:`
 About the Challenge:
Transform your skin in just 30 days with our comprehensive skincare challenge. Follow the daily routine, track your progress, and share your journey with the community.

 How to Participate:
1. Purchase any SkinGlow product
2. Post daily updates with #GlowChallenge30
3. Tag @skinglow in your posts
4. Complete the 30-day journey

 Prizes:
 Grand Prize: $500 product bundle + Feature on our website
 5 Runner-ups: $100 gift cards
 20 Participants: Free full-size products

 Requirements:
 Post at least 20 updates during the 30 days
 Use our hashtag and tag our brand
 Share honest reviews and results
    `,hashtag:"#GlowChallenge30",startDate:"2024-12-01",endDate:"2024-12-31",prize:"Win up to $500 in products + Feature",participantCount:15600,totalEngagement:234e3,requirements:["Must use SkinGlow products","Post daily progress for 30 days","Use campaign hashtag","Tag brand in posts","Share honest reviews"],benefits:["Free product samples","Featured on brand page","Exclusive discounts","Community support","Expert tips"]},i=[{id:"1",name:"Sarah Beauty",username:"@sarahbeauty",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop",posts:28,engagement:45600,verified:!0},{id:"2",name:"Emma Glow",username:"@emmaglow",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop",posts:27,engagement:38900,verified:!1},{id:"3",name:"Jessica Lee",username:"@jessicalee",avatar:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=150&h=150&fit=crop",posts:26,engagement:35200,verified:!1}],a=[{id:"1",author:"Sarah Beauty",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop",image:"https://images.unsplash.com/photo-1596462502278-27bfdc403348?w=400&h=400&fit=crop",caption:"Day 28! My skin is glowing  #GlowChallenge30",likes:1247,comments:89},{id:"2",author:"Emma Glow",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop",image:"https://images.unsplash.com/photo-1556228578-0d85b1a4d571?w=400&h=400&fit=crop",caption:"Day 27 progress  Love these products!",likes:892,comments:54}],l=()=>{s(!n),He.success(n?"Left campaign":`Joined ${r.title}! Start posting to participate! `)},c=()=>{He.success("Campaign link copied to clipboard!")},u=Math.ceil((new Date(r.endDate).getTime()-new Date().getTime())/(1e3*60*60*24)),d=(30-u)/30*100;return o.jsxs("div",{className:"min-h-screen bg-background pb-4",children:[o.jsxs("div",{className:"relative h-48",children:[o.jsx(En,{src:r.campaignImage,alt:r.title,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/50 to-transparent"}),o.jsx("div",{className:"absolute top-4 left-4",children:o.jsxs(it,{className:"bg-primary text-white",children:[o.jsx(ln,{className:"w-3 h-3 mr-1"}),"Featured Campaign"]})})]}),o.jsxs("div",{className:"px-4 -mt-8 relative z-10 space-y-4",children:[o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsxs(xi,{className:"w-12 h-12",children:[o.jsx(yi,{src:r.brandLogo}),o.jsx(vi,{children:r.brandName.charAt(0)})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-semibold",children:r.brandName}),o.jsx(hi,{className:"w-4 h-4 text-blue-500"})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Verified Brand"})]}),o.jsx(be,{variant:"outline",size:"sm",children:o.jsx(ld,{className:"w-4 h-4"})})]}),o.jsx("h1",{className:"text-2xl font-bold mb-2",children:r.title}),o.jsx("p",{className:"text-muted-foreground mb-4",children:r.description}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{className:"text-center p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-xl font-bold text-primary",children:r.participantCount.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Participants"})]}),o.jsxs("div",{className:"text-center p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-xl font-bold text-green-600",children:r.totalEngagement.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Engagement"})]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Campaign Progress"}),o.jsxs("span",{className:"font-medium",children:[u," days left"]})]}),o.jsx(uo,{value:d,className:"h-2"})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(Gp,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"font-medium",children:r.hashtag})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(ho,{className:"w-4 h-4 text-muted-foreground"}),o.jsxs("span",{children:[new Date(r.startDate).toLocaleDateString()," - ",new Date(r.endDate).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(df,{className:"w-4 h-4 text-yellow-500"}),o.jsx("span",{children:r.prize})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(be,{className:"flex-1",variant:n?"outline":"default",onClick:l,children:n?o.jsxs(o.Fragment,{children:[o.jsx(Uc,{className:"w-4 h-4 mr-2"})," Participating"]}):o.jsxs(o.Fragment,{children:[o.jsx(my,{className:"w-4 h-4 mr-2"})," Join Campaign"]})}),o.jsx(be,{variant:"outline",size:"icon",onClick:c,children:o.jsx(uf,{className:"w-4 h-4"})})]})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Campaign Details"}),o.jsx("div",{className:"whitespace-pre-line text-sm text-muted-foreground",children:r.longDescription})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Requirements"}),o.jsx("div",{className:"space-y-2",children:r.requirements.map((h,p)=>o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Uc,{className:"w-4 h-4 text-primary flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"text-sm",children:h})]},p))})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(l0,{className:"w-5 h-5 text-primary"}),"Participant Benefits"]}),o.jsx("div",{className:"space-y-2",children:r.benefits.map((h,p)=>o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(ln,{className:"w-4 h-4 text-accent-foreground flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"text-sm",children:h})]},p))})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(df,{className:"w-5 h-5 text-yellow-500"}),"Top Participants"]}),o.jsx("div",{className:"space-y-3",children:i.map((h,p)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-secondary/20 rounded-lg",children:[o.jsxs("div",{className:"relative",children:[o.jsxs(xi,{children:[o.jsx(yi,{src:h.avatar}),o.jsx(vi,{children:h.name.charAt(0)})]}),o.jsx("div",{className:"absolute -top-1 -left-1 w-5 h-5 bg-primary rounded-full flex items-center justify-center text-white text-xs font-bold",children:p+1})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-sm",children:h.name}),h.verified&&o.jsx(hi,{className:"w-3 h-3 text-blue-500"})]}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[o.jsxs("span",{children:[h.posts," posts"]}),o.jsxs("span",{children:[(h.engagement/1e3).toFixed(1),"K engagement"]})]})]}),o.jsx(be,{variant:"outline",size:"sm",children:"View"})]},h.id))})]})}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Recent Posts"}),o.jsx("div",{className:"space-y-3",children:a.map(h=>o.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[o.jsx(En,{src:h.image,alt:"Post",className:"w-full h-48 object-cover"}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs(xi,{className:"w-8 h-8",children:[o.jsx(yi,{src:h.avatar}),o.jsx(vi,{children:h.author.charAt(0)})]}),o.jsx("span",{className:"font-medium text-sm",children:h.author})]}),o.jsx("p",{className:"text-sm mb-2",children:h.caption}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Yn,{className:"w-4 h-4"}),h.likes.toLocaleString()]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(_r,{className:"w-4 h-4"}),h.comments]})]})]})]},h.id))})]})})]})]})}function N_e({onBack:t,onComplete:e}){const[n,s]=T.useState(1),r=5,[i,a]=T.useState(""),[l,c]=T.useState(""),[u,d]=T.useState(""),[h,p]=T.useState(""),[g,x]=T.useState(""),[y,v]=T.useState(""),[w,N]=T.useState(""),[k,C]=T.useState([]),[j,R]=T.useState(""),[_,A]=T.useState({instagram:"",youtube:"",twitter:"",website:"",email:""}),[O,L]=T.useState([]),[D,q]=T.useState(""),[V,ne]=T.useState(""),[J,ee]=T.useState(!1),[te,X]=T.useState(!1),Q=["Anti-Aging","Acne Treatment","Sensitive Skin","Dry Skin","Oily Skin","Combination Skin","Natural Skincare","K-Beauty","Medical Skincare","Makeup","Routine Building","Product Reviews","Ingredient Analysis","Budget Skincare","Luxury Skincare","DIY Skincare"],G=[{id:"educational",name:"Educational",icon:"",desc:"Teach and inform about skincare"},{id:"routine",name:"Routine Focused",icon:"",desc:"Share daily routines and tips"},{id:"reviews",name:"Product Reviews",icon:"",desc:"Review and recommend products"},{id:"transformation",name:"Transformations",icon:"",desc:"Show before/after results"},{id:"lifestyle",name:"Lifestyle",icon:"",desc:"Holistic beauty and wellness"},{id:"professional",name:"Professional",icon:"",desc:"Expert medical advice"}],H=["Licensed Esthetician","Dermatologist","Cosmetologist","Skincare Specialist","Beauty Therapist","Makeup Artist","None - Self-taught enthusiast"],ie=[{value:"daily",label:"Daily",desc:"Post every day"},{value:"3-5",label:"3-5 times/week",desc:"Regular posting"},{value:"1-2",label:"1-2 times/week",desc:"Weekly updates"},{value:"occasional",label:"Occasional",desc:"When inspired"}],de=xe=>{k.includes(xe)?C($e=>$e.filter(Ze=>Ze!==xe)):k.length<5?C($e=>[...$e,xe]):He.error("Maximum 5 specialties allowed")},ke=xe=>{O.includes(xe)?L($e=>$e.filter(Ze=>Ze!==xe)):L($e=>[...$e,xe])},we=xe=>{const $e=xe==="cover"?"https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?w=800&h=300&fit=crop":"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop";xe==="cover"?v($e):N($e),He.success(`${xe==="cover"?"Cover":"Profile"} image uploaded!`)},Ee=()=>{if(!Ye(n)){switch(n){case 1:i.length<3?He.error("Station name must be at least 3 characters"):l.length<3?He.error("Username must be at least 3 characters"):u.length<10?He.error("Bio must be at least 10 characters"):He.error("Please complete all required fields");break;case 2:y?w||He.error("Please upload a profile picture"):He.error("Please upload a cover image");break;case 3:k.length===0?He.error("Please select at least one specialty"):j||He.error("Please select a station theme");break;case 4:O.length===0?He.error("Please select at least one certification"):V||He.error("Please select your posting frequency");break;case 5:J?te||He.error("Please verify your information"):He.error("Please accept the Creator Terms & Conditions");break;default:He.error("Please complete all required fields")}return}n<r&&(s(n+1),window.scrollTo({top:0,behavior:"smooth"}))},Ce=()=>{n>1&&s(n-1)},Re=()=>{if(!Ye(5)){He.error("Please accept the terms and verify your information");return}const xe={stationName:i,stationUsername:l,bio:u,description:h,location:g,coverImage:y,avatarImage:w,specialties:k,theme:j,socialLinks:_,certifications:O,experience:D,contentFrequency:V};console.log("Creating station:",xe),setTimeout(()=>{e(xe)},1500)};et.useEffect(()=>{const xe=$e=>{$e.key==="Enter"&&$e.ctrlKey&&Ye(n)&&(n<r?Ee():Re())};return window.addEventListener("keydown",xe),()=>window.removeEventListener("keydown",xe)},[n,i,l,u,y,w,k,j,O,V,J,te]);const se=n/r*100,Te=[{number:1,title:"Basic Info",description:"Station details",icon:ln},{number:2,title:"Visual Identity",description:"Images & branding",icon:zo},{number:3,title:"Expertise",description:"Focus & specialties",icon:bs},{number:4,title:"Credentials",description:"Experience & links",icon:Ml},{number:5,title:"Review",description:"Launch station",icon:an}],Me=xe=>{if(xe===1)return!0;for(let $e=1;$e<xe;$e++)if(!Ye($e))return!1;return!0},Ye=xe=>{switch(xe){case 1:return i.trim().length>=3&&l.trim().length>=3&&u.trim().length>=10;case 2:return y&&w;case 3:return k.length>0&&j;case 4:return O.length>0&&V;case 5:return J&&te;default:return!1}},me=xe=>{Me(xe)&&(s(xe),window.scrollTo({top:0,behavior:"smooth"}))};return o.jsxs("div",{className:"min-h-screen bg-background pb-32",children:[o.jsxs("div",{className:"sticky top-16 bg-background border-b border-border z-10",children:[o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx(be,{variant:"ghost",size:"icon",onClick:t,children:o.jsx(ad,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h1",{className:"text-xl font-bold",children:"Create Your Station"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",n," of ",r]})]}),o.jsx(hs,{className:"w-6 h-6 text-primary"})]}),o.jsx(uo,{value:se,className:"h-2"})]}),o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx("div",{className:"grid grid-cols-5 gap-1 sm:gap-2",children:Te.map(xe=>{const $e=n===xe.number,Ze=Ye(xe.number),bt=Me(xe.number);xe.number<n;const $t=xe.icon;return o.jsx("button",{onClick:()=>me(xe.number),disabled:!bt,className:`p-2 rounded-lg border-2 transition-all ${$e?"border-primary bg-primary/10 shadow-sm":Ze?"border-green-500/50 bg-green-500/5 cursor-pointer hover:bg-green-500/10 hover:border-green-500":bt?"border-accent-foreground/30 bg-accent-foreground/5 cursor-pointer hover:border-accent-foreground hover:bg-accent-foreground/10":"border-border bg-secondary/10 opacity-50 cursor-not-allowed"}`,title:`${xe.title} - ${xe.description}${bt?"":" (Complete previous steps first)"}`,children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center transition-all ${$e?"bg-primary text-primary-foreground shadow-sm":Ze?"bg-green-500 text-white":bt?"bg-accent-foreground text-white":"bg-muted/50 text-muted-foreground/50"}`,children:Ze&&!$e?o.jsx(an,{className:"w-3 h-3 sm:w-4 sm:h-4"}):o.jsx($t,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:`text-[10px] sm:text-xs font-medium truncate ${$e?"text-primary":Ze?"text-green-600":bt?"text-accent-foreground":""}`,children:xe.title}),o.jsx("div",{className:"text-[8px] sm:text-[10px] text-muted-foreground hidden sm:block truncate",children:xe.description})]})]})},xe.number)})}),o.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 h-1 bg-border rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-green-500 transition-all duration-300",style:{width:`${se}%`}})}),o.jsxs("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:[n,"/",r]})]}),o.jsxs("div",{className:"mt-2 text-center",children:[!Ye(n)&&o.jsx("p",{className:"text-xs text-muted-foreground",children:"Complete required fields to unlock next step"}),Ye(n)&&n<r&&o.jsx("p",{className:"text-xs text-green-600",children:" Step complete! Click next step to continue"})]})]})]}),o.jsxs("div",{className:"p-4 space-y-6",children:[n===1&&o.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[o.jsx(ze,{className:"border-primary/20 bg-primary/5",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ln,{className:"w-5 h-5 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-1",children:"Welcome, Creator! "}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Let's set up your station where you'll share your skincare expertise with the SkinPAI community."})]})]})})}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsx(Ft,{children:"Station Details"})}),o.jsxs(Ue,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(_t,{htmlFor:"stationName",children:"Station Name *"}),o.jsxs("div",{className:"relative",children:[o.jsx(sn,{id:"stationName",placeholder:"e.g., Sarah's Skincare Studio",value:i,onChange:xe=>a(xe.target.value),maxLength:50,className:"mt-1"}),i.length>=3&&o.jsx(an,{className:"w-5 h-5 text-green-500 absolute right-3 top-1/2 -translate-y-1/2"})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.length<3?"This is your station's public name (minimum 3 characters)":" Great name!"})]}),o.jsxs("div",{children:[o.jsx(_t,{htmlFor:"username",children:"Username *"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:"text-muted-foreground",children:"@"}),o.jsx(sn,{id:"username",placeholder:"sarahskincare",value:l,onChange:xe=>c(xe.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),className:"flex-1"}),l.length>=3&&o.jsx(an,{className:"w-5 h-5 text-green-500 flex-shrink-0"})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l.length<3?"Username must be at least 3 characters (letters, numbers, underscore only)":" Username looks good!"})]}),o.jsxs("div",{children:[o.jsx(_t,{htmlFor:"bio",children:"Short Bio *"}),o.jsx(em,{id:"bio",placeholder:"Tell your community about yourself in one sentence...",value:u,onChange:xe=>d(xe.target.value),maxLength:150,rows:2,className:"mt-1"}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:u.length<10?`At least ${10-u.length} more characters needed`:" Bio looks good!"}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.length,"/150"]})]})]}),o.jsxs("div",{children:[o.jsx(_t,{htmlFor:"description",children:"Full Description"}),o.jsx(em,{id:"description",placeholder:"Share more about your expertise, journey, and what followers can expect...",value:h,onChange:xe=>p(xe.target.value),rows:4,className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(_t,{htmlFor:"location",children:"Location"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(rm,{className:"w-4 h-4 text-muted-foreground"}),o.jsx(sn,{id:"location",placeholder:"e.g., Los Angeles, CA",value:g,onChange:xe=>x(xe.target.value),className:"flex-1"})]})]})]})]}),o.jsx(ze,{className:"border-accent-foreground/20 bg-accent-foreground/5",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(my,{className:"w-5 h-5 text-accent-foreground flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium mb-2 text-sm",children:"Pro Tips:"}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsx("li",{children:" Choose a memorable station name that reflects your niche"}),o.jsx("li",{children:" Keep your bio concise and highlight what makes you unique"}),o.jsx("li",{children:" Your username cannot be changed later, choose wisely!"})]})]})]})})})]}),n===2&&o.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsx(Ft,{children:"Visual Identity"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Make your station stand out with great visuals"})]}),o.jsxs(Ue,{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx(_t,{children:"Cover Image *"}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Recommended: 800x300px, max 5MB"}),y?o.jsxs("div",{className:"relative",children:[o.jsx(En,{src:y,alt:"Cover",className:"w-full h-40 object-cover rounded-lg"}),o.jsxs(be,{size:"sm",variant:"secondary",className:"absolute top-2 right-2",onClick:()=>we("cover"),children:[o.jsx(zo,{className:"w-4 h-4 mr-2"}),"Change"]})]}):o.jsxs("button",{onClick:()=>we("cover"),className:"w-full h-40 border-2 border-dashed border-border rounded-lg flex flex-col items-center justify-center gap-2 hover:border-primary hover:bg-primary/5 transition-colors",children:[o.jsx(h0,{className:"w-8 h-8 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Upload Cover Image"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Click to browse"})]})]}),o.jsxs("div",{children:[o.jsx(_t,{children:"Profile Picture *"}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Recommended: 400x400px, max 2MB"}),o.jsxs("div",{className:"flex items-center gap-4",children:[w?o.jsx("div",{className:"relative",children:o.jsx(En,{src:w,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover border-4 border-background shadow-lg"})}):o.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-dashed border-border flex items-center justify-center",children:o.jsx(zo,{className:"w-8 h-8 text-muted-foreground"})}),o.jsxs(be,{onClick:()=>we("avatar"),children:[o.jsx(h0,{className:"w-4 h-4 mr-2"}),w?"Change Photo":"Upload Photo"]})]})]}),y&&w&&o.jsxs("div",{className:"border-2 border-border rounded-lg overflow-hidden",children:[o.jsx("p",{className:"text-sm font-medium p-3 bg-secondary/20",children:"Preview"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{src:y,alt:"Preview Cover",className:"w-full h-32 object-cover"}),o.jsx("div",{className:"absolute -bottom-10 left-4",children:o.jsx(En,{src:w,alt:"Preview Avatar",className:"w-20 h-20 rounded-full object-cover border-4 border-background"})})]}),o.jsxs("div",{className:"pt-12 p-4",children:[o.jsx("h3",{className:"font-bold text-lg",children:i||"Station Name"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",l||"username"]}),o.jsx("p",{className:"text-sm mt-2",children:u||"Your bio will appear here..."})]})]})]})]}),o.jsx(ze,{className:"border-accent-foreground/20 bg-accent-foreground/5",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(zo,{className:"w-5 h-5 text-accent-foreground flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium mb-2 text-sm",children:"Image Tips:"}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsx("li",{children:" Use high-quality, well-lit images"}),o.jsx("li",{children:" Cover image should represent your station's vibe"}),o.jsx("li",{children:" Profile picture should clearly show your face"}),o.jsx("li",{children:" Avoid overly busy or cluttered backgrounds"})]})]})]})})})]}),n===3&&o.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsx(Ft,{children:"Your Expertise"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"What skincare topics will you focus on?"})]}),o.jsxs(Ue,{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx(_t,{children:"Specialties * (Select up to 5)"}),o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Q.map(xe=>o.jsxs(it,{variant:k.includes(xe)?"default":"outline",className:"cursor-pointer",onClick:()=>de(xe),children:[k.includes(xe)&&o.jsx(an,{className:"w-3 h-3 mr-1"}),xe]},xe))}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Selected: ",k.length,"/5"]})]}),o.jsxs("div",{children:[o.jsx(_t,{children:"Station Theme *"}),o.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Choose the primary focus of your content"}),o.jsx("div",{className:"grid gap-3",children:G.map(xe=>o.jsx("div",{onClick:()=>R(xe.id),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${j===xe.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:xe.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h4",{className:"font-medium",children:xe.name}),j===xe.id&&o.jsx(an,{className:"w-4 h-4 text-primary"})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:xe.desc})]})]})},xe.id))})]})]})]}),o.jsx(ze,{className:"border-accent-foreground/20 bg-accent-foreground/5",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(bs,{className:"w-5 h-5 text-accent-foreground flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium mb-2 text-sm",children:"Focus Tips:"}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsx("li",{children:" Choose specialties you're genuinely passionate about"}),o.jsx("li",{children:" Your theme will help users find relevant content"}),o.jsx("li",{children:" You can adjust these later as your station evolves"}),o.jsx("li",{children:" Niche expertise often builds stronger communities"})]})]})]})})})]}),n===4&&o.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[o.jsxs(ze,{children:[o.jsxs(Ot,{children:[o.jsx(Ft,{children:"Credentials & Experience"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Help your audience trust your expertise"})]}),o.jsxs(Ue,{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx(_t,{children:"Certifications & Qualifications *"}),o.jsx("div",{className:"space-y-2 mt-2",children:H.map(xe=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{id:xe,checked:O.includes(xe),onCheckedChange:()=>ke(xe)}),o.jsx("label",{htmlFor:xe,className:"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:xe})]},xe))})]}),o.jsxs("div",{children:[o.jsx(_t,{htmlFor:"experience",children:"Years of Experience"}),o.jsx(em,{id:"experience",placeholder:"Tell us about your skincare journey and experience...",value:D,onChange:xe=>q(xe.target.value),rows:3,className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(_t,{children:"Content Posting Frequency *"}),o.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"How often do you plan to post?"}),o.jsx("div",{className:"grid gap-3",children:ie.map(xe=>o.jsx("div",{onClick:()=>ne(xe.value),className:`p-3 border-2 rounded-lg cursor-pointer transition-all ${V===xe.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:xe.label}),o.jsx("p",{className:"text-sm text-muted-foreground",children:xe.desc})]}),V===xe.value&&o.jsx(an,{className:"w-5 h-5 text-primary"})]})},xe.value))})]}),o.jsxs("div",{children:[o.jsx(_t,{children:"Social Media Links (Optional)"}),o.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Connect your other platforms"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(AN,{className:"w-4 h-4 text-muted-foreground"}),o.jsx(sn,{placeholder:"Instagram username",value:_.instagram,onChange:xe=>A({..._,instagram:xe.target.value})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ON,{className:"w-4 h-4 text-muted-foreground"}),o.jsx(sn,{placeholder:"YouTube channel URL",value:_.youtube,onChange:xe=>A({..._,youtube:xe.target.value})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_N,{className:"w-4 h-4 text-muted-foreground"}),o.jsx(sn,{placeholder:"Twitter/X username",value:_.twitter,onChange:xe=>A({..._,twitter:xe.target.value})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wc,{className:"w-4 h-4 text-muted-foreground"}),o.jsx(sn,{placeholder:"Website URL",value:_.website,onChange:xe=>A({..._,website:xe.target.value})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Gc,{className:"w-4 h-4 text-muted-foreground"}),o.jsx(sn,{placeholder:"Contact email",type:"email",value:_.email,onChange:xe=>A({..._,email:xe.target.value})})]})]})]})]})]}),o.jsx(ze,{className:"border-accent-foreground/20 bg-accent-foreground/5",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(so,{className:"w-5 h-5 text-accent-foreground flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium mb-2 text-sm",children:"Building Trust:"}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsx("li",{children:" Transparency builds credibility with your audience"}),o.jsx("li",{children:" Posting consistently helps grow your following"}),o.jsx("li",{children:" Connect social media to expand your reach"}),o.jsx("li",{children:" Verified credentials increase follower confidence"})]})]})]})})})]}),n===5&&o.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[o.jsx(ze,{className:"border-primary/20 bg-primary/5",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(bs,{className:"w-5 h-5 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-1",children:"Almost there! "}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Review your station details and agree to our creator guidelines to launch."})]})]})})}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsx(Ft,{children:"Station Preview"})}),o.jsx(Ue,{children:o.jsxs("div",{className:"border-2 border-border rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"relative",children:[o.jsx(En,{src:y,alt:"Cover",className:"w-full h-32 object-cover"}),o.jsx("div",{className:"absolute -bottom-10 left-4",children:o.jsx(En,{src:w,alt:"Avatar",className:"w-20 h-20 rounded-full object-cover border-4 border-background"})})]}),o.jsxs("div",{className:"pt-12 p-4 space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:i}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",l]})]}),o.jsx("p",{className:"text-sm",children:u}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[k.slice(0,3).map((xe,$e)=>o.jsx(it,{variant:"secondary",className:"text-xs",children:xe},$e)),k.length>3&&o.jsxs(it,{variant:"outline",className:"text-xs",children:["+",k.length-3," more"]})]}),g&&o.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[o.jsx(rm,{className:"w-3 h-3"}),g]})]})]})})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsx(Ft,{children:"Station Details"})}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Theme"}),o.jsxs("div",{className:"font-medium text-sm",children:[G.find(xe=>xe.id===j)?.icon," ",G.find(xe=>xe.id===j)?.name]})]}),o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Specialties"}),o.jsxs("div",{className:"font-medium text-sm",children:[k.length," selected"]})]}),o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Post Frequency"}),o.jsx("div",{className:"font-medium text-sm",children:ie.find(xe=>xe.value===V)?.label})]}),o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Credentials"}),o.jsxs("div",{className:"font-medium text-sm",children:[O.length," selected"]})]})]}),Object.values(_).some(xe=>xe.trim())&&o.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Connected Platforms"}),o.jsxs("div",{className:"flex gap-2",children:[_.instagram&&o.jsx(AN,{className:"w-4 h-4"}),_.youtube&&o.jsx(ON,{className:"w-4 h-4"}),_.twitter&&o.jsx(_N,{className:"w-4 h-4"}),_.website&&o.jsx(Wc,{className:"w-4 h-4"}),_.email&&o.jsx(Gc,{className:"w-4 h-4"})]})]})]})]}),o.jsx(ze,{children:o.jsxs(Ue,{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Hr,{id:"terms",checked:J,onCheckedChange:xe=>ee(xe)}),o.jsx("label",{htmlFor:"terms",className:"text-sm leading-relaxed cursor-pointer",children:"I agree to the SkinPAI Creator Terms & Conditions, including community guidelines and content policies. *"})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Hr,{id:"verify",checked:te,onCheckedChange:xe=>X(xe)}),o.jsx("label",{htmlFor:"verify",className:"text-sm leading-relaxed cursor-pointer",children:"I confirm that all information provided is accurate and I have the right to use the uploaded images. *"})]})]})}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Ml,{className:"w-5 h-5 text-primary"}),"What You'll Get"]})}),o.jsx(Ue,{children:o.jsxs("ul",{className:"space-y-2 text-sm",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),o.jsx("span",{children:"Dedicated station page with custom branding"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),o.jsx("span",{children:"Analytics dashboard to track your impact"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),o.jsx("span",{children:"Priority visibility in community feed"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),o.jsx("span",{children:"Ability to join brand campaigns & collaborations"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),o.jsx("span",{children:"Monetization opportunities through partnerships"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),o.jsx("span",{children:"Verified creator badge for credibility"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),o.jsx("span",{children:"Access to creator-only features and tools"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(an,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),o.jsx("span",{children:"Direct messaging with your followers"})]})]})})]}),o.jsx(ze,{className:"border-green-500/20 bg-green-500/5",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(gi,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"After Launching Your Station:"}),o.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[o.jsx("li",{children:"1. Create your first post to introduce yourself"}),o.jsx("li",{children:"2. Join relevant brand campaigns to grow your audience"}),o.jsx("li",{children:"3. Engage with other creators and build connections"}),o.jsx("li",{children:"4. Post consistently to build your following"}),o.jsx("li",{children:"5. Monitor your analytics to understand your audience"})]})]})]})})})]})]}),n>1&&o.jsx(be,{variant:"outline",size:"icon",onClick:Ce,className:"hidden md:flex fixed left-4 top-1/2 -translate-y-1/2 z-20 w-12 h-12 rounded-full shadow-lg border-2 hover:scale-110 transition-transform",title:`Go back to ${Te[n-2].title}`,children:o.jsx(ad,{className:"w-6 h-6"})}),n<r&&Ye(n)&&o.jsx(be,{size:"icon",onClick:Ee,className:"hidden md:flex fixed right-4 top-1/2 -translate-y-1/2 z-20 w-12 h-12 rounded-full shadow-lg hover:scale-110 transition-transform",title:`Continue to ${Te[n].title}`,children:o.jsx(IN,{className:"w-6 h-6"})}),o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t-2 border-border p-4 shadow-2xl z-30",children:o.jsx("div",{className:"max-w-2xl mx-auto",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"text-center mb-1 sm:hidden",children:[o.jsx("p",{className:"text-sm font-medium",children:Te[n-1].title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:Te[n-1].description})]}),o.jsxs("div",{className:"flex gap-3",children:[n>1?o.jsxs(be,{variant:"outline",onClick:Ce,className:"flex-1 h-12 border-2",size:"lg",children:[o.jsx(ad,{className:"w-5 h-5 mr-2"}),o.jsxs("div",{className:"flex flex-col items-start",children:[o.jsx("span",{className:"text-xs text-muted-foreground",children:"Back to"}),o.jsx("span",{className:"font-medium",children:Te[n-2].title})]})]}):o.jsx("div",{className:"flex-1"}),n<r?o.jsxs(be,{onClick:Ee,disabled:!Ye(n),className:"flex-1 h-12 shadow-md",size:"lg",children:[o.jsxs("div",{className:"flex flex-col items-start mr-2",children:[o.jsx("span",{className:"text-xs opacity-90",children:Ye(n)?"Continue to":"Complete this step"}),o.jsx("span",{className:"font-medium",children:Ye(n)?Te[n].title:"to proceed"})]}),o.jsx(IN,{className:"w-5 h-5 ml-auto"})]}):o.jsxs(be,{onClick:Re,disabled:!Ye(5),className:"flex-1 h-12 bg-green-600 hover:bg-green-700 shadow-lg",size:"lg",children:[o.jsx(gi,{className:"w-5 h-5 mr-2"}),o.jsxs("div",{className:"flex flex-col items-start",children:[o.jsx("span",{className:"text-xs opacity-90",children:"Ready to"}),o.jsx("span",{className:"font-medium",children:"Launch Your Station"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between gap-3 px-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[Ye(n)&&n<r&&o.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[o.jsx(an,{className:"w-3 h-3"}),"Ready"]}),!Ye(n)&&o.jsx("span",{className:"text-accent-foreground",children:"Complete required fields"})]}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Step ",n," of ",r]})]}),Ye(n)&&o.jsxs("p",{className:"text-xs text-center text-muted-foreground pb-1",children:[" Press ",o.jsx("kbd",{className:"px-1.5 py-0.5 bg-secondary rounded text-[10px]",children:"Ctrl"})," + ",o.jsx("kbd",{className:"px-1.5 py-0.5 bg-secondary rounded text-[10px]",children:"Enter"})," to ",n<r?"continue":"launch"]})]})})})]})}function S_e({station:t,onBack:e,onEdit:n,onDelete:s}){const[r,i]=T.useState(!1),[a,l]=T.useState("posts"),[c,u]=T.useState(null),[d,h]=T.useState({1:[{id:"c1",author:{name:"Alice Johnson",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop",verified:!1},content:"This product changed my life! ",timestamp:"2h ago",likes:15,liked:!1},{id:"c2",author:{name:"Beauty Expert",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop",verified:!0,isInfluencer:!0},content:"Great review! I love seeing real results like this.",timestamp:"1h ago",likes:8,liked:!1,replies:[{id:"c2-1",author:{name:"Alice Johnson",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop",verified:!1},content:"Thank you! Your tips helped so much!",timestamp:"30m ago",likes:3,liked:!1}]}],2:[],3:[]}),[p,g]=T.useState({}),x={followers:1234,posts:45,likes:8932,views:24567,engagement:8.5},y=[{id:"1",image:"https://images.unsplash.com/photo-1596462502278-27bfdc403348?w=400&h=400&fit=crop",likes:234,comments:12,views:1234},{id:"2",image:"https://images.unsplash.com/photo-1571875257727-256c39da42af?w=400&h=400&fit=crop",likes:189,comments:8,views:987},{id:"3",image:"https://images.unsplash.com/photo-1556228578-8c89e6adf883?w=400&h=400&fit=crop",likes:345,comments:21,views:1567}],v=()=>{He.success("Station link copied to clipboard!")},w=()=>{window.confirm("Are you sure you want to delete your station? This action cannot be undone.")&&s()},N={educational:{name:"Educational",icon:""},routine:{name:"Routine Focused",icon:""},reviews:{name:"Product Reviews",icon:""},transformation:{name:"Transformations",icon:""},lifestyle:{name:"Lifestyle",icon:""},professional:{name:"Professional",icon:""}},k={daily:"Daily","3-5":"3-5 times/week","1-2":"1-2 times/week",occasional:"Occasional"},C=(D,q,V)=>{const ne={id:Date.now().toString(),author:{name:"You",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=user",verified:!1},content:q,timestamp:"Just now",likes:0,liked:!1,isOwner:!0};h(J=>{const ee=J[D]||[];if(V){const te=X=>X.map(Q=>Q.id===V?{...Q,replies:[...Q.replies||[],ne]}:Q.replies?{...Q,replies:te(Q.replies)}:Q);return{...J,[D]:te(ee)}}else return{...J,[D]:[ne,...ee]}})},j=(D,q)=>{h(V=>{const ne=V[D]||[],J=ee=>ee.map(te=>te.id===q?{...te,liked:!te.liked,likes:te.liked?te.likes-1:te.likes+1}:te.replies?{...te,replies:J(te.replies)}:te);return{...V,[D]:J(ne)}})},R=(D,q)=>{h(V=>{const ne=V[D]||[],J=ee=>ee.filter(te=>te.id===q?!1:(te.replies&&(te.replies=J(te.replies)),!0));return{...V,[D]:J(ne)}})},_=(D,q,V)=>{h(ne=>{const J=ne[D]||[],ee=te=>te.map(X=>X.id===q?{...X,content:V}:X.replies?{...X,replies:ee(X.replies)}:X);return{...ne,[D]:ee(J)}})},A=D=>{u(D)},O=D=>{g(q=>({...q,[D]:!q[D]})),He.success(p[D]?"Like removed":"Post liked!")},L=y.find(D=>D.id===c);return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"sticky top-16 bg-background border-b border-border z-10 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(be,{variant:"ghost",size:"icon",onClick:e,children:o.jsx(ad,{className:"w-5 h-5"})}),o.jsx("h1",{className:"font-bold",children:"Creator Station"}),o.jsxs(eS,{children:[o.jsx(tS,{asChild:!0,children:o.jsx(be,{variant:"ghost",size:"icon",children:o.jsx(eP,{className:"w-5 h-5"})})}),o.jsxs(nS,{align:"end",children:[o.jsxs(ud,{onClick:v,children:[o.jsx(uf,{className:"w-4 h-4 mr-2"}),"Share Station"]}),o.jsxs(ud,{onClick:n,children:[o.jsx(PN,{className:"w-4 h-4 mr-2"}),"Edit Station"]}),o.jsx(HQ,{}),o.jsxs(ud,{onClick:w,className:"text-red-600 focus:text-red-600",children:[o.jsx(gd,{className:"w-4 h-4 mr-2"}),"Delete Station"]})]})]})]})}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{src:t.coverImage,alt:"Cover",className:"w-full h-48 object-cover"}),o.jsxs("div",{className:"absolute -bottom-16 left-4",children:[o.jsx(En,{src:t.avatarImage,alt:"Avatar",className:"w-32 h-32 rounded-full object-cover border-4 border-background shadow-lg"}),o.jsx("div",{className:"absolute -bottom-2 -right-2 bg-primary text-primary-foreground rounded-full p-2",children:o.jsx(hs,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"p-4 pt-20",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h2",{className:"text-2xl font-bold",children:t.stationName}),o.jsx(Uc,{className:"w-5 h-5 text-primary fill-primary"})]}),o.jsxs("p",{className:"text-muted-foreground",children:["@",t.stationUsername]})]}),o.jsxs(be,{onClick:n,size:"sm",variant:"outline",children:[o.jsx(Ll,{className:"w-4 h-4 mr-2"}),"Manage"]})]}),o.jsx("p",{className:"text-sm mb-3",children:t.bio}),o.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[t.location&&o.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[o.jsx(rm,{className:"w-4 h-4"}),t.location]}),o.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[o.jsx(ho,{className:"w-4 h-4"}),"Joined ",new Date(t.createdDate).toLocaleDateString("en-US",{month:"short",year:"numeric"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[o.jsx("span",{children:N[t.theme]?.icon}),o.jsx("span",{className:"text-muted-foreground",children:N[t.theme]?.name})]})]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.specialties.map((D,q)=>o.jsx(it,{variant:"secondary",children:D},q))}),o.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-lg",children:x.posts}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Posts"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-lg",children:x.followers.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Followers"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-lg",children:x.likes.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Likes"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"font-bold text-lg",children:[x.engagement,"%"]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Engagement"})]})]}),Object.values(t.socialLinks).some(D=>D.trim())&&o.jsxs("div",{className:"flex gap-3 mb-4 pb-4 border-b border-border",children:[t.socialLinks.instagram&&o.jsx("a",{href:`https://instagram.com/${t.socialLinks.instagram}`,target:"_blank",rel:"noopener noreferrer",children:o.jsx(be,{variant:"ghost",size:"icon",className:"hover:text-primary",children:o.jsx(AN,{className:"w-5 h-5"})})}),t.socialLinks.youtube&&o.jsx("a",{href:t.socialLinks.youtube,target:"_blank",rel:"noopener noreferrer",children:o.jsx(be,{variant:"ghost",size:"icon",className:"hover:text-primary",children:o.jsx(ON,{className:"w-5 h-5"})})}),t.socialLinks.twitter&&o.jsx("a",{href:`https://twitter.com/${t.socialLinks.twitter}`,target:"_blank",rel:"noopener noreferrer",children:o.jsx(be,{variant:"ghost",size:"icon",className:"hover:text-primary",children:o.jsx(_N,{className:"w-5 h-5"})})}),t.socialLinks.website&&o.jsx("a",{href:t.socialLinks.website,target:"_blank",rel:"noopener noreferrer",children:o.jsx(be,{variant:"ghost",size:"icon",className:"hover:text-primary",children:o.jsx(Wc,{className:"w-5 h-5"})})}),t.socialLinks.email&&o.jsx("a",{href:`mailto:${t.socialLinks.email}`,children:o.jsx(be,{variant:"ghost",size:"icon",className:"hover:text-primary",children:o.jsx(Gc,{className:"w-5 h-5"})})})]}),o.jsxs(Sr,{value:a,onValueChange:l,className:"w-full",children:[o.jsxs(kr,{className:"w-full grid grid-cols-3",children:[o.jsx(Jt,{value:"posts",children:"Posts"}),o.jsx(Jt,{value:"about",children:"About"}),o.jsx(Jt,{value:"analytics",children:"Analytics"})]}),o.jsx(Qt,{value:"posts",className:"mt-4",children:y.length>0?o.jsx("div",{className:"grid grid-cols-3 gap-1",children:y.map(D=>o.jsxs("div",{className:"relative aspect-square group cursor-pointer",onClick:()=>A(D.id),children:[o.jsx(En,{src:D.image,alt:"Post",className:"w-full h-full object-cover rounded"}),o.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded flex items-center justify-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-1 text-white text-sm",children:[o.jsx(Yn,{className:"w-4 h-4 fill-white"}),D.likes]}),o.jsxs("div",{className:"flex items-center gap-1 text-white text-sm",children:[o.jsx(_r,{className:"w-4 h-4"}),d[D.id]?.length||0]})]})]},D.id))}):o.jsx(ze,{children:o.jsxs(Ue,{className:"p-8 text-center",children:[o.jsx(ln,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground"}),o.jsx("h3",{className:"font-semibold mb-2",children:"No posts yet"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Start creating content to build your station!"}),o.jsx(be,{onClick:()=>He.info("Create Post feature coming soon!"),children:"Create Your First Post"})]})})}),o.jsxs(Qt,{value:"about",className:"mt-4 space-y-4",children:[t.description&&o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsx(Ft,{children:"About"})}),o.jsx(Ue,{children:o.jsx("p",{className:"text-sm",children:t.description})})]}),o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsx(Ft,{children:"Credentials"})}),o.jsxs(Ue,{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium mb-2",children:"Certifications"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.certifications.map((D,q)=>o.jsxs(it,{variant:"outline",className:"text-xs",children:[o.jsx(Ml,{className:"w-3 h-3 mr-1"}),D]},q))})]}),t.experience&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium mb-2",children:"Experience"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:t.experience})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium mb-2",children:"Posting Frequency"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:k[t.contentFrequency]})]})]})]})]}),o.jsxs(Qt,{value:"analytics",className:"mt-4 space-y-4",children:[o.jsxs(ze,{children:[o.jsx(Ot,{children:o.jsxs(Ft,{className:"flex items-center gap-2",children:[o.jsx(Vc,{className:"w-5 h-5 text-primary"}),"Performance Overview"]})}),o.jsxs(Ue,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"p-4 bg-primary/5 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Ea,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Total Views"})]}),o.jsx("div",{className:"text-2xl font-bold",children:x.views.toLocaleString()}),o.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1 mt-1",children:[o.jsx(Zr,{className:"w-3 h-3"}),"+12% this week"]})]}),o.jsxs("div",{className:"p-4 bg-accent-foreground/5 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Yn,{className:"w-4 h-4 text-accent-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Engagement"})]}),o.jsxs("div",{className:"text-2xl font-bold",children:[x.engagement,"%"]}),o.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1 mt-1",children:[o.jsx(Zr,{className:"w-3 h-3"}),"+2.3% this week"]})]})]}),o.jsxs("div",{className:"p-4 border border-border rounded-lg",children:[o.jsx("h4",{className:"font-medium mb-3",children:"Growth Stats"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"text-muted-foreground",children:"Follower Growth"}),o.jsx("span",{className:"font-medium",children:"+89 this month"})]}),o.jsx("div",{className:"h-2 bg-secondary rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary w-3/4"})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"text-muted-foreground",children:"Content Performance"}),o.jsx("span",{className:"font-medium",children:"Excellent"})]}),o.jsx("div",{className:"h-2 bg-secondary rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-green-500 w-4/5"})})]})]})]})]})]}),o.jsx(ze,{className:"border-primary/20 bg-primary/5",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(bs,{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-1",children:"Pro Tip"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Post consistently at peak times (7-9 PM) to maximize engagement with your audience!"})]})]})})})]})]})]}),c&&L&&o.jsx(Jo,{open:!!c,onOpenChange:()=>u(null),children:o.jsxs(Qo,{className:"max-w-2xl max-h-[90vh] overflow-y-auto p-0",children:[o.jsx("div",{className:"relative",children:o.jsx(En,{src:L.image,alt:"Post",className:"w-full h-64 object-cover"})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(be,{variant:"ghost",size:"sm",className:"gap-2",onClick:()=>O(c),children:[o.jsx(Yn,{className:`w-5 h-5 ${p[c]?"fill-red-500 text-red-500":""}`}),o.jsx("span",{children:L.likes.toLocaleString()})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_r,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm",children:d[c]?.length||0})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ea,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm",children:L.views.toLocaleString()})]})]}),o.jsx(be,{variant:"ghost",size:"sm",onClick:()=>He.success("Link copied to clipboard!"),children:o.jsx(uf,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"border-t border-border pt-4",children:[o.jsxs("h3",{className:"font-semibold mb-4",children:["Comments (",d[c]?.length||0,")"]}),o.jsx(lU,{comments:d[c]||[],onAddComment:(D,q)=>C(c,D,q),onLikeComment:D=>j(c,D),onDeleteComment:D=>R(c,D),onEditComment:(D,q)=>_(c,D,q),placeholder:"Add a comment...",showReplies:!0})]})]})]})})]})}const k_e=t=>({id:t.productId,name:t.productName,brand:{id:t.brand?.brandId||"",name:t.brand?.brandName||"Unknown",logo:t.brand?.logoUrl||"",description:t.brand?.description||"",verified:t.brand?.isVerified||!1,distributors:[]},distributor:{id:t.distributor?.distributorId||"",name:t.distributor?.name||"Unknown",website:t.distributor?.websiteUrl||"",logo:t.distributor?.logoUrl||"",isPartner:t.distributor?.isPartner||!1},price:t.price,originalPrice:t.originalPrice,rating:t.averageRating||0,reviews:t.totalReviews,image:t.productImageUrl||"",category:{id:t.category?.categoryId||"",name:t.category?.categoryName||"General",description:t.category?.description||"",icon:t.category?.iconName||"package"},description:t.description||"",keyIngredients:t.keyIngredients||[],skinType:t.skinTypes||[],skinConcerns:t.skinConcerns||[],shopUrl:t.shopUrl||"",inStock:t.inStock,isRecommended:t.isRecommended,discount:t.discountPercent});function C_e({onNavigate:t,onViewProduct:e}){const[n,s]=T.useState([]),[r,i]=T.useState(!0);T.useEffect(()=>{a()},[]);const a=async()=>{i(!0);try{const{data:u,error:d}=await Ln.getFavorites();u&&!d&&s(u.map(k_e))}catch(u){console.error("Failed to load favorites:",u)}finally{i(!1)}},l=async u=>{try{const{error:d}=await Ln.removeFavorite(u);d?He.error("Failed to remove from favorites"):(s(h=>h.filter(p=>p.id!==u)),He.success("Removed from favorites"))}catch{He.error("Failed to remove from favorites")}},c=u=>{He.success("Redirecting to store..."),window.open(u,"_blank")};return r?o.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:o.jsx(Xh,{className:"w-8 h-8 animate-spin text-primary"})}):o.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(be,{variant:"ghost",size:"icon",onClick:()=>t("settings"),children:o.jsx(ad,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"Saved Items"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.length," ",n.length===1?"product":"products"," saved"]})]})]}),n.length>0?o.jsx("div",{className:"space-y-4",children:n.map(u=>o.jsx(ze,{className:"overflow-hidden",children:o.jsx(Ue,{className:"p-4",children:o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden cursor-pointer",onClick:()=>e?.(u),children:o.jsx(En,{src:u.image,alt:u.name,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"cursor-pointer",onClick:()=>e?.(u),children:[o.jsx("h3",{className:"font-semibold truncate mb-1",children:u.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(En,{src:u.brand.logo,alt:u.brand.name,className:"w-4 h-4 object-contain"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:u.brand.name})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:"text-lg font-bold text-primary",children:[u.price.toLocaleString()," IQD"]}),o.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[o.jsx("span",{className:"text-yellow-500",children:""}),o.jsx("span",{children:u.rating}),o.jsxs("span",{className:"text-muted-foreground",children:["(",u.reviews,")"]})]})]}),o.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:u.skinConcerns.slice(0,2).map((d,h)=>o.jsx(it,{variant:"outline",className:"text-xs",children:d},h))})]}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsxs(be,{size:"sm",className:"flex-1 bg-[#00B4D8] hover:bg-[#00B4D8]/90",onClick:()=>c(u.shopUrl),disabled:!u.inStock,children:[o.jsx(Nq,{className:"w-4 h-4 mr-2"}),u.inStock?"Shop Now":"Out of Stock"]}),o.jsx(be,{size:"sm",variant:"outline",onClick:()=>l(u.id),children:o.jsx(gd,{className:"w-4 h-4"})})]})]})]})})},u.id))}):o.jsx(ze,{children:o.jsxs(Ue,{className:"p-12 text-center",children:[o.jsx(Yn,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Saved Items"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"Start saving products you love by tapping the heart icon"}),o.jsx(be,{onClick:()=>t("products"),children:"Browse Products"})]})})]})}function T_e({currentScreen:t,user:e,onBack:n,onNavigate:s,onOpenChat:r,hasUnreadMessages:i}){const{t:a}=Ef(),{isRTL:l}=Rf();if(t==="auth")return null;const c={camera:a("navigation.camera"),results:a("navigation.results"),products:a("navigation.products"),shop:a("navigation.shop"),dashboard:a("navigation.dashboard"),community:a("navigation.community"),profile:a("navigation.profile"),settings:a("navigation.settings"),notifications:a("navigation.notifications"),upgrade:a("navigation.upgrade"),help:a("navigation.help")},u=!["camera","dashboard","community","shop"].includes(t);return o.jsx("div",{className:"fixed top-0 left-0 right-0 glass border-b z-50",children:o.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[o.jsxs("div",{className:`flex items-center gap-2 flex-1 ${l?"flex-row-reverse":""}`,children:[u&&o.jsx(be,{variant:"ghost",size:"sm",onClick:n,children:o.jsx(ad,{className:`w-5 h-5 ${l?"rotate-180":""}`})}),t==="camera"&&!u?o.jsx("h1",{className:"text-2xl font-bold",style:{color:"#00b4d8"},children:a("common.appName")}):o.jsx("h1",{className:"text-lg font-medium",children:c[t]||a("common.appName")})]}),o.jsxs("div",{className:`flex items-center gap-2 ${l?"flex-row-reverse":""}`,children:[o.jsx(P6,{}),e&&t==="camera"&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.scansToday,"/",e.maxScans]}),e&&o.jsxs(o.Fragment,{children:[o.jsxs(be,{variant:"ghost",size:"sm",onClick:()=>s("notifications"),className:"relative",children:[o.jsx(lf,{className:"w-7 h-7"}),o.jsx(it,{className:"absolute -top-1 -right-1 w-5 h-5 p-0 flex items-center justify-center text-xs",variant:"destructive",children:"3"})]}),r&&o.jsxs(be,{variant:"ghost",size:"sm",onClick:r,className:"relative",children:[o.jsx(_r,{className:"w-7 h-7"}),i&&o.jsx(it,{className:"absolute -top-1 -right-1 w-5 h-5 p-0 flex items-center justify-center text-xs",variant:"destructive",children:"1"})]}),o.jsx(be,{variant:"ghost",size:"sm",onClick:()=>s("profile"),children:o.jsx(hf,{className:"w-7 h-7"})})]})]})]})})}function I_e({user:t,currentScreen:e,onNavigate:n}){const{t:s}=Ef(),{isRTL:r}=Rf();if(!t||e==="auth")return null;const i=t.type==="guest"&&!t.email,a=t.type==="member",l=t.type==="pro",c=(u,d)=>{if(i){He.error(` ${d} requires an account`,{description:"Sign up to access this feature",action:{label:"Sign Up",onClick:()=>n("auth")}});return}n(u)};return o.jsx("div",{className:"fixed bottom-0 left-0 right-0 glass border-t",children:o.jsxs("div",{className:`flex justify-around items-center py-2 max-w-md mx-auto ${r?"flex-row-reverse":""}`,children:[o.jsxs(be,{variant:e==="camera"?"default":"ghost",size:"sm",onClick:()=>n("camera"),className:"flex flex-col items-center gap-1 h-auto py-2",children:[o.jsx(zo,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs",children:s("navigation.scan")})]}),o.jsxs(be,{variant:e==="shop"||e==="products"?"default":"ghost",size:"sm",onClick:()=>n("shop"),className:"flex flex-col items-center gap-1 h-auto py-2",children:[o.jsx(Go,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs",children:s("navigation.shop")})]}),a&&o.jsxs(be,{variant:e==="dashboard"?"default":"ghost",size:"sm",onClick:()=>n("dashboard"),className:"flex flex-col items-center gap-1 h-auto py-2",children:[o.jsx(Vc,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs",children:s("navigation.dashboard")})]}),l&&o.jsxs(be,{variant:e==="pro-dashboard"||e==="station-view"?"default":"ghost",size:"sm",onClick:()=>n("pro-dashboard"),className:"flex flex-col items-center gap-1 h-auto py-2",children:[o.jsx(ln,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs",children:s("navigation.station","Station")})]}),o.jsxs(be,{variant:e==="community"?"default":"ghost",size:"sm",onClick:()=>n("community"),className:"flex flex-col items-center gap-1 h-auto py-2 relative",children:[o.jsx(so,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs",children:s("navigation.community")})]}),o.jsxs(be,{variant:e==="profile"?"default":"ghost",size:"sm",onClick:()=>i?c("profile","Profile"):n("profile"),className:`flex flex-col items-center gap-1 h-auto py-2 ${i?"opacity-60":""}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx(hf,{className:"w-5 h-5"}),i&&o.jsx(cf,{className:"w-2.5 h-2.5 absolute -top-1 -right-1 text-muted-foreground"})]}),o.jsx("span",{className:"text-xs",children:s("navigation.profile","Profile")})]})]})})}var j_e=(t,e,n,s,r,i,a,l)=>{let c=document.documentElement,u=["light","dark"];function d(g){(Array.isArray(t)?t:[t]).forEach(x=>{let y=x==="class",v=y&&i?r.map(w=>i[w]||w):r;y?(c.classList.remove(...v),c.classList.add(i&&i[g]?i[g]:g)):c.setAttribute(x,g)}),h(g)}function h(g){l&&u.includes(g)&&(c.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)d(s);else try{let g=localStorage.getItem(e)||n,x=a&&g==="system"?p():g;d(x)}catch{}},E_e=T.createContext(void 0),$_e={setTheme:t=>{},themes:[]},A_e=()=>{var t;return(t=T.useContext(E_e))!=null?t:$_e};T.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:s,enableColorScheme:r,defaultTheme:i,value:a,themes:l,nonce:c,scriptProps:u})=>{let d=JSON.stringify([n,e,i,t,l,a,s,r]).slice(1,-1);return T.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${j_e.toString()})(${d})`}})});const R_e=({...t})=>{const{theme:e="system"}=A_e();return o.jsx(Nee,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};function D_e(){const t=()=>{const l=wa.getItem(Oo.USER,null),c=wa.getItem("skinpai_current_screen","auth");return l?c!=="auth"&&c!=="create-account"?c:"camera":"auth"},[e,n]=T.useState(t()),[s,r]=T.useState([t()]);T.useEffect(()=>{window.history.replaceState({screen:e},"","");const l=c=>{if(c.state&&c.state.screen)n(c.state.screen),wa.setItem("skinpai_current_screen",c.state.screen),r(u=>u[u.length-1]!==c.state.screen?[...u,c.state.screen]:u);else{const d=wa.getItem(Oo.USER,null)?"camera":"auth";n(d),wa.setItem("skinpai_current_screen",d)}};return window.addEventListener("popstate",l),()=>{window.removeEventListener("popstate",l)}},[e]);const i=l=>{n(l),r(c=>[...c,l]),wa.setItem("skinpai_current_screen",l),window.history.pushState({screen:l},"","")};return{currentScreen:e,setCurrentScreen:i,handleBack:()=>{if(s.length>1)window.history.back();else{const l=wa.getItem(Oo.USER,null);switch(e){case"results":i("camera");break;case"products":i("results");break;case"shop":i("camera");break;case"dashboard":case"community":case"pro-dashboard":i("camera");break;case"create-account":i("auth");break;default:i(l?"camera":"auth")}}}}}function P_e(t,e){const{onSwipeLeft:n,onSwipeRight:s,minSwipeDistance:r=50,maxVerticalMovement:i=100}=e,a=T.useRef(null),l=T.useRef(null);T.useEffect(()=>{const c=t.current;if(!c)return;const u=p=>{l.current=null,a.current={x:p.targetTouches[0].clientX,y:p.targetTouches[0].clientY}},d=p=>{l.current={x:p.targetTouches[0].clientX,y:p.targetTouches[0].clientY}},h=()=>{if(!a.current||!l.current)return;const p=a.current.x-l.current.x;if(Math.abs(a.current.y-l.current.y)>i)return;const x=p>r,y=p<-r;x&&n?n():y&&s&&s()};return c.addEventListener("touchstart",u,{passive:!0}),c.addEventListener("touchmove",d,{passive:!0}),c.addEventListener("touchend",h,{passive:!0}),()=>{c.removeEventListener("touchstart",u),c.removeEventListener("touchmove",d),c.removeEventListener("touchend",h)}},[t,n,s,r,i])}function __e(){const{currentScreen:t,setCurrentScreen:e,handleBack:n}=D_e(),{isRTL:s,direction:r}=Rf(),{user:i,logout:a,updateUser:l,isLoading:c}=sS(),u=T.useRef(null),[d,h]=of(Oo.USER,null),[p,g]=of(Oo.CURRENT_SCAN,null),[x,y]=of(Oo.SCAN_HISTORY,[]),[v,w]=T.useState(null),[N,k]=T.useState(null),[C,j]=T.useState(null),[R,_]=T.useState(null);T.useEffect(()=>{i&&!c&&h($e=>({...i,questionnaireCompleted:i.questionnaireCompleted??$e?.questionnaireCompleted,skinProfile:i.skinProfile??$e?.skinProfile,stationData:$e?.stationData}))},[i,c]);const[A,O]=T.useState(!1),[L,D]=T.useState(!1);T.useEffect(()=>{(async()=>{if(d?.type==="member"||d?.type==="pro")try{const{data:Ze,error:bt}=await Ln.getScans();if(Ze&&Ze.length>0){const $t=Ze.map(at=>({id:at.scanId,date:at.scanDate,imageUrl:at.scanImageUrl||"",overallScore:at.overallScore,estimatedAge:at.estimatedAge||0,hydration:at.analysis?.hydrationLevel||0,moisture:at.analysis?.moistureLevel||0,oiliness:at.analysis?.oilLevel||0,evenness:at.analysis?.evennessScore||0,texture:at.analysis?.textureScore||0,clarity:at.analysis?.clarityScore||0,firmness:at.analysis?.firmnessScore||0,elasticity:at.analysis?.elasticityScore||0,poreSize:at.analysis?.poreSizeScore||0,smoothness:at.analysis?.smoothnessScore||0,radiance:at.analysis?.radianceScore||0,acne:at.analysis?.acneSeverity||0,wrinkles:at.analysis?.wrinkleScore||0,darkCircles:at.analysis?.darkCircleScore||0,darkSpots:at.analysis?.darkSpotScore||0,redness:at.analysis?.rednessLevel||0,skinType:at.analysis?.skinType||"normal",uvDamage:at.analysis?.uvDamageScore||0,recommendations:at.analysis?.recommendations||[],aiAnalysis:at.analysis?.aiSummary}));y($t)}}catch(Ze){console.error("Failed to load scan history:",Ze)}})()},[d?.type,d?.id]),T.useEffect(()=>{d&&wa.setItem(Oo.USER,d)},[d]);const q=$e=>{h($e),$e.questionnaireCompleted?e("camera"):e("questionnaire")},V=$e=>{g($e),d&&(h({...d,scansToday:d.scansToday+1}),d.type==="member"&&y(Ze=>[$e,...Ze])),e("results")},ne=$e=>{if(d){const bt={...d,type:$e,maxScans:$e==="pro"?9999:5,subscriptionStatus:"active",subscriptionEndDate:new Date(Date.now()+720*60*60*1e3).toISOString(),walletBalance:d.walletBalance||0};h(bt),e($e==="pro"?"pro-dashboard":"dashboard")}},J=async()=>{await a(),wa.removeItem(Oo.USER),wa.removeItem(Oo.CURRENT_SCAN),wa.removeItem(Oo.SCAN_HISTORY),wa.removeItem("skinpai_current_screen"),h(null),g(null),y([]),e("auth"),He.success("Successfully logged out")},ee=$e=>{h($e)},te=async $e=>{if(d)try{const{data:Ze,error:bt}=await Ln.updateSkinProfile({skinType:$e.skinType,skinConcerns:$e.skinConcerns,currentRoutine:$e.currentRoutine,sunExposure:$e.sunExposure,lifestyle:$e.lifestyle});bt&&(console.error("Failed to save skin profile:",bt),He.error("Failed to save skin profile"));const $t={...d,questionnaireCompleted:!0,skinProfile:{skinType:$e.skinType,skinConcerns:$e.skinConcerns,currentRoutine:$e.currentRoutine,sunExposure:$e.sunExposure,lifestyle:$e.lifestyle}};h($t),e("camera")}catch(Ze){console.error("Error saving skin profile:",Ze),He.error("Failed to save skin profile")}},X=["dashboard","pro-dashboard","profile","favorites","notifications"],Q=d?.type==="guest"&&!d?.email,G=$e=>{const Ze=$e;if(Q&&X.includes(Ze)){He.error(" Sign up to access this feature",{description:"Create an account to unlock full access",action:{label:"Sign Up",onClick:()=>e("auth")}});return}if(Ze==="create-station"&&d?.type!=="pro"){He.error(" Creator Stations are Pro-exclusive",{description:"Upgrade to Pro to create your own station",action:{label:"Upgrade",onClick:()=>e("upgrade")}});return}e(Ze)},H=($e,Ze,bt)=>{console.log("Creating post:",{content:$e,media:Ze,hashtags:bt}),e("community")},ie=$e=>{w($e),e("post-detail")},de=$e=>{k($e),e("influencer-profile")},ke=$e=>{j($e),e("brand-profile")},we=$e=>{_($e),e("campaign-detail")},Ee=$e=>{console.log("Viewing product:",$e),e("products")},Ce=()=>{if(d?.type!=="pro"){He.error(" Creator Stations are exclusive to Pro members!",{description:"Upgrade to Pro to create your own station and grow your community.",action:{label:"Upgrade to Pro",onClick:()=>e("upgrade")}});return}if(d?.hasStation){He.error("You already have a station. You can only create one station per account."),e("station-view");return}e("create-station")},Re=$e=>{if(d){const Ze={...d,hasStation:!0,stationData:{...$e,createdDate:new Date().toISOString()}};h(Ze),He.success(" Your Creator Station is now live!"),e("station-view")}},se=()=>{d?.hasStation&&He.info("Station editing will be available soon!")},Te=()=>{if(d){const $e={...d,hasStation:!1,stationData:void 0};h($e),He.success("Station deleted successfully"),e("community")}},Me=()=>{d?.hasStation?e("station-view"):(He.error("You don't have a station yet"),e("community"))},Ye=["camera","shop","dashboard","community"];return P_e(u,{onSwipeLeft:()=>{if(!Ye.includes(t))return;const $e=Ye.indexOf(t);if($e<Ye.length-1){const Ze=Ye[$e+1];Ze==="dashboard"&&d?.type==="pro"?e("pro-dashboard"):e(Ze),"vibrate"in navigator&&navigator.vibrate(10)}},onSwipeRight:()=>{const $e=t==="pro-dashboard"?"dashboard":t;if(!Ye.includes($e))return;const Ze=Ye.indexOf($e);if(Ze>0){const bt=Ye[Ze-1];e(bt),"vibrate"in navigator&&navigator.vibrate(10)}},minSwipeDistance:75,maxVerticalMovement:100}),o.jsxs("div",{className:"min-h-screen relative",dir:r,children:[o.jsx(T_e,{currentScreen:t,user:d,onBack:n,onNavigate:G,onOpenChat:()=>{O(!0),D(!1)},hasUnreadMessages:L}),o.jsx("div",{ref:u,className:`${t!=="auth"&&t!=="questionnaire"&&t!=="create-account"?"fixed top-16 bottom-16 left-0 right-0 overflow-y-auto scrollbar-hide":""} max-w-md mx-auto`,children:o.jsxs("div",{className:"px-2",children:[t==="auth"&&o.jsx(Dee,{onAuth:q,onCreateAccount:()=>e("create-account")}),t==="create-account"&&o.jsx(tte,{onAccountCreated:q,onBack:()=>e("auth")}),t==="questionnaire"&&d&&o.jsx(g_e,{onComplete:te,userName:d.name}),t==="camera"&&d&&o.jsx(cDe,{user:d,onScanComplete:V,onViewProducts:()=>e("products"),onUpgrade:()=>e("upgrade")}),t==="results"&&p&&o.jsx(wDe,{result:p,onViewProducts:()=>e("products"),user:d}),(t==="products"||t==="shop")&&o.jsx(F6e,{recommendations:p?.recommendations||[]}),t==="dashboard"&&d&&o.jsx(FPe,{user:d,scanHistory:x,onNavigate:G,onViewScan:$e=>{g($e),e("results")}}),t==="dashboard"&&d?.type==="pro"&&o.jsx(iD,{user:d,scanHistory:x,onNavigate:G}),t==="pro-dashboard"&&d?.type==="pro"&&o.jsx(iD,{user:d,scanHistory:x,onNavigate:G}),t==="community"&&o.jsx(p6e,{user:d,onCreatePost:()=>e("create-post"),onCreateStation:Ce,onViewPost:ie,onViewInfluencer:de,onViewBrand:ke,onViewCampaign:we,userHasStation:d?.hasStation,onViewStation:Me,onUpgrade:()=>e("upgrade")}),t==="create-post"&&o.jsx(x_e,{onClose:()=>e("community"),onPost:H}),t==="post-detail"&&v&&o.jsx(y_e,{post:{id:v,type:"image",author:{name:"Sarah Beauty",username:"@sarahbeauty",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b7a1?w=150&h=150&fit=crop",verified:!0,isInfluencer:!0},content:{media:"https://images.unsplash.com/photo-1596462502278-27bfdc403348?w=400&h=400&fit=crop",caption:" Day 15 of #GlowChallenge30! The vitamin C serum is working wonders! My skin has never looked better! ",products:["Vitamin C Serum","Hyaluronic Moisturizer"]},engagement:{likes:1247,comments:89,shares:34,liked:!1,saved:!1},timestamp:"2h"},onBack:()=>e("community")}),t==="influencer-profile"&&N&&o.jsx(v_e,{influencerId:N,onBack:()=>e("community"),onViewPost:ie}),t==="brand-profile"&&C&&o.jsx(b_e,{brandId:C,onBack:()=>e("community"),onViewProduct:Ee}),t==="campaign-detail"&&R&&o.jsx(w_e,{campaignId:R,onBack:()=>e("community")}),t==="create-station"&&o.jsx(N_e,{onBack:()=>e("community"),onComplete:Re}),t==="station-view"&&d?.stationData&&o.jsx(S_e,{station:d.stationData,onBack:()=>e("community"),onEdit:se,onDelete:Te}),(t==="profile"||t==="settings")&&d&&o.jsx(L6e,{user:d,onNavigate:G,onUpdateUser:ee,onLogout:J}),t==="favorites"&&o.jsx(C_e,{onNavigate:G,onViewProduct:$e=>{console.log("View product:",$e),e("products")}}),t==="notifications"&&o.jsx(B6e,{onNavigate:G}),t==="upgrade"&&o.jsx(z6e,{user:d,onUpgrade:ne,onNavigate:G}),t==="help"&&o.jsx(m_e,{})]})}),o.jsx(I_e,{user:d,currentScreen:t,onNavigate:e}),d&&t!=="auth"&&t!=="create-account"&&o.jsx(oU,{open:A,onOpenChange:O}),o.jsx(R_e,{})]})}const{slice:O_e,forEach:F_e}=[];function M_e(t){return F_e.call(O_e.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function L_e(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const cD=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,B_e=function(t,e){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let i=`${t}=${r}`;if(s.maxAge>0){const a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(a)}`}if(s.domain){if(!cD.test(s.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${s.domain}`}if(s.path){if(!cD.test(s.path))throw new TypeError("option path is invalid");i+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(i+="; Partitioned"),i},uD={create(t,e,n,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+n*60*1e3)),s&&(r.domain=s),document.cookie=B_e(t,e,r)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let r=n[s];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var z_e={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return uD.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:s,cookieDomain:r,cookieOptions:i}=e;n&&typeof document<"u"&&uD.create(n,t,s,r,i)}},V_e={name:"querystring",lookup(t){let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const i=s.substring(1).split("&");for(let a=0;a<i.length;a++){const l=i[a].indexOf("=");l>0&&i[a].substring(0,l)===e&&(n=i[a].substring(l+1))}}return n}},U_e={name:"hash",lookup(t){let{lookupHash:e,lookupFromHashIndex:n}=t,s;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const i=r.substring(1);if(e){const a=i.split("&");for(let l=0;l<a.length;l++){const c=a[l].indexOf("=");c>0&&a[l].substring(0,c)===e&&(s=a[l].substring(c+1))}}if(s)return s;if(!s&&n>-1){const a=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?a[typeof n=="number"?n:0]?.replace("/",""):void 0}}}return s}};let _h=null;const dD=()=>{if(_h!==null)return _h;try{if(_h=typeof window<"u"&&window.localStorage!==null,!_h)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{_h=!1}return _h};var W_e={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&dD())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&dD()&&window.localStorage.setItem(n,t)}};let Oh=null;const hD=()=>{if(Oh!==null)return Oh;try{if(Oh=typeof window<"u"&&window.sessionStorage!==null,!Oh)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Oh=!1}return Oh};var G_e={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&hD())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&hD()&&window.sessionStorage.setItem(n,t)}},H_e={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:s,language:r}=navigator;if(n)for(let i=0;i<n.length;i++)e.push(n[i]);s&&e.push(s),r&&e.push(r)}return e.length>0?e:void 0}},K_e={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const s=e||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(n=s.getAttribute("lang")),n}},q_e={name:"path",lookup(t){let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?n[typeof e=="number"?e:0]?.replace("/",""):void 0}},X_e={name:"subdomain",lookup(t){let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[n]}};let cU=!1;try{document.cookie,cU=!0}catch{}const uU=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];cU||uU.splice(1,1);const Y_e=()=>({order:uU,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class dU{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=M_e(n,this.options||{},Y_e()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(z_e),this.addDetector(V_e),this.addDetector(W_e),this.addDetector(G_e),this.addDetector(H_e),this.addDetector(K_e),this.addDetector(q_e),this.addDetector(X_e),this.addDetector(U_e)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(s=>{if(this.detectors[s]){let r=this.detectors[s].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(n=n.concat(r))}}),n=n.filter(s=>s!=null&&!L_e(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(e,this.options)}))}}dU.type="languageDetector";const Z_e={appName:"SkinPAI",loading:"Loading...",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",back:"Back",next:"Next",submit:"Submit",confirm:"Confirm",yes:"Yes",no:"No",ok:"OK",error:"Error",success:"Success",warning:"Warning",info:"Info",search:"Search",filter:"Filter",sort:"Sort",view:"View",share:"Share",download:"Download",upload:"Upload",retry:"Retry",skip:"Skip",continue:"Continue",finish:"Finish",start:"Start",stop:"Stop",pause:"Pause",resume:"Resume",refresh:"Refresh",settings:"Settings",help:"Help",logout:"Logout",login:"Login",signUp:"Sign Up",signIn:"Sign In",profile:"Profile",notifications:"Notifications",language:"Language",english:"English",arabic:"",changeLanguage:"Change Language"},J_e={title:"SkinPAI",subtitle:"AI-powered skin analysis with personalized recommendations",guest:"Guest",member:"Member",quickStart:"Quick Start",trySkinPAI:"Try SkinPAI with limited access",guestFeatures:"Guest Features:",guestFeature1:"1 skin scan per day",guestFeature2:"Basic AI analysis",guestFeature3:"Product recommendations",guestFeature4:"Community access",continueAsGuest:"Continue as Guest",memberAccess:"Member Access",signInForFeatures:"Sign in for full features",memberBenefits:"Member Benefits:",memberBenefit1:"5 scans per day",memberBenefit2:"Advanced skin tracking",memberBenefit3:"Routine management",memberBenefit4:"Progress analytics",memberBenefit5:"Exclusive content",name:"Name",email:"Email",password:"Password",createAccount:"Create Account",termsAgreement:"By continuing, you agree to our Terms of Service and Privacy Policy"},Q_e={scan:"Scan",shop:"Shop",dashboard:"Dashboard",community:"Community",camera:"SkinPAI",results:"Scan Results",products:"Shop Products",profile:"Profile",settings:"Settings",notifications:"Notifications",upgrade:"Upgrade",help:"Help & Support"},eOe={title:"AI Skin Analysis",subtitle:"Capture or upload a photo for instant skin analysis",startCamera:"Start Camera",capturePhoto:"Capture Photo",uploadPhoto:"Upload Photo",switchCamera:"Switch Camera",analyzing:"Analyzing your skin...",processingParams:"AI is processing 15+ skin parameters...",analyzingMetrics:"Analyzing hydration, texture, clarity, age markers...",poweredBySkindu:"Powered by Skindu",permissionDenied:"Camera permission denied",permissionHelp:"See instructions below or use upload option",noCamera:"No camera found on this device",cameraBusy:"Camera is being used by another application",retake:"Retake",analyze:"Analyze Skin",scansRemaining:"Scans remaining today",upgradeForMore:"Upgrade for unlimited scans",scanLimitReached:"Daily scan limit reached",tips:"Tips for best results:",tip1:"Use natural lighting",tip2:"Keep face centered",tip3:"Remove makeup if possible",tip4:"Clean camera lens"},tOe={title:"Scan Results",overallScore:"Overall Skin Score",estimatedAge:"Estimated Skin Age",skinType:"Skin Type",healthMetrics:"Health Metrics",concerns:"Skin Concerns",recommendations:"Product Recommendations",aiAnalysis:"AI Analysis",viewProducts:"View Recommended Products",shareResults:"Share Results",saveResults:"Save Results",newScan:"New Scan",hydration:"Hydration",moisture:"Moisture",oiliness:"Oiliness",evenness:"Evenness",texture:"Texture",clarity:"Clarity",firmness:"Firmness",elasticity:"Elasticity",poreSize:"Pore Size",smoothness:"Smoothness",radiance:"Radiance",acne:"Acne",wrinkles:"Wrinkles",darkCircles:"Dark Circles",darkSpots:"Dark Spots",redness:"Redness",uvDamage:"UV Damage",outOf:"out of 100",skinAge:"Skin Age",minimal:"Minimal",mild:"Mild",moderate:"Moderate",significant:"Significant",trackJourney:"Track Your Skin Journey",upgradePrompt:"Upgrade to Member for scan history, progress tracking, and personalized routines",upgradeToMember:"Upgrade to Member",poweredBySkindu:"Analysis powered by Skindu",skinTypes:{oily:"Oily",dry:"Dry",combination:"Combination",normal:"Normal",sensitive:"Sensitive"}},nOe={title:"Dashboard",welcome:"Welcome back",welcomeBack:"Welcome back, {{name}}!",trackJourney:"Track your skin journey",member:"Member",latestScore:"Latest Score",totalScans:"Total Scans",yourCreatorStation:"Your Creator Station",history:"History",overview:"Overview",routine:"Routine",progress:"Progress",achievements:"Achievements",skinScore:"Skin Score",scanHistory:"Scan History",noScans:"No scans yet",startFirstScan:"Start your first scan to track progress",routineStreak:"Routine Streak",days:"days",weeklyProgress:"Weekly Progress",scans:"scans",morningRoutine:"Morning Routine",eveningRoutine:"Evening Routine",addRoutineItem:"Add Routine Item",editRoutine:"Edit Routine",setReminder:"Set Reminder",reminderSet:"Reminder Set",dailyReminder:"Daily Reminder",weeklyReminder:"Weekly Reminder",customReminder:"Custom Reminder",soundEnabled:"Sound Enabled",vibrationEnabled:"Vibration Enabled",hydrationLevel:"Hydration Level",skinEvenness:"Skin Evenness",clarityScore:"Clarity Score",firmness:"Firmness",trendUp:"Improving",trendDown:"Declining",trendStable:"Stable",viewAll:"View All",lastScan:"Last Scan",compare:"Compare"},sOe={title:"Community",feed:"Feed",trending:"Trending",influencers:"Influencers",brands:"Brands",campaigns:"Campaigns",createPost:"Create Post",createStation:"Create Station",myStation:"My Station",followers:"Followers",following:"Following",posts:"Posts",likes:"Likes",comments:"Comments",shares:"Shares",share:"Share",like:"Like",comment:"Comment",save:"Save",saved:"Saved",follow:"Follow",unfollow:"Unfollow",writeComment:"Write a comment...",postComment:"Post",searchPlaceholder:"Search posts, users, hashtags...",filters:"Filters",recent:"Recent",popular:"Popular",engagement:"Engagement",viewAllComments:"View all comments",noComments:"No comments yet",beFirstToComment:"Be the first to comment!",joinCampaign:"Join Campaign",activeCampaigns:"Active Campaigns",endingSoon:"Ending Soon",prize:"Prize",participants:"Participants",hashtag:"Hashtag",requirements:"Requirements",proOnly:"Creator Stations are exclusive to Pro members!",upgradeForStation:"Upgrade to Pro to create your own station and grow your community."},rOe={title:"Shop",recommendations:"Recommended For You",allProducts:"All Products",categories:"Categories",brands:"Brands",filters:"Filters",sortBy:"Sort By",priceRange:"Price Range",inStock:"In Stock",outOfStock:"Out of Stock",onSale:"On Sale",addToCart:"Add to Cart",buyNow:"Buy Now",viewDetails:"View Details",reviews:"Reviews",rating:"Rating",price:"Price",originalPrice:"Original Price",discount:"Discount",keyIngredients:"Key Ingredients",skinTypes:"Skin Types",skinConcerns:"Skin Concerns",shopNow:"Shop Now",addToFavorites:"Add to Favorites",removeFromFavorites:"Remove from Favorites",bundles:"Bundles",bundlePrice:"Bundle Price",savings:"You Save",products:"Products"},iOe={title:"Profile Settings",personalInfo:"Personal Information",skinProfile:"Skin Profile",preferences:"Preferences",subscription:"Subscription",wallet:"Wallet",security:"Security",editProfile:"Edit Profile",changePicture:"Change Picture",name:"Name",email:"Email",phone:"Phone",dateOfBirth:"Date of Birth",gender:"Gender",skinType:"Skin Type",skinConcerns:"Skin Concerns",allergies:"Allergies",currentPlan:"Current Plan",upgradePlan:"Upgrade Plan",managePlan:"Manage Plan",billingHistory:"Billing History",paymentMethods:"Payment Methods",addPaymentMethod:"Add Payment Method",walletBalance:"Wallet Balance",addFunds:"Add Funds",transactionHistory:"Transaction History",changePassword:"Change Password",twoFactorAuth:"Two-Factor Authentication",deleteAccount:"Delete Account",darkMode:"Dark Mode",pushNotifications:"Push Notifications",emailNotifications:"Email Notifications",marketingEmails:"Marketing Emails",guestUser:"Guest User",pro:"Pro",member:"Member",guest:"Guest",upgrade:"Upgrade",account:"Account",notifications:"Notifications",privacy:"Privacy"},aOe={title:"Upgrade Your Plan",currentPlan:"Current Plan",choosePlan:"Choose Your Plan",member:"Member",pro:"Pro",proBenefits:"Pro Benefits",proBenefit1:"Unlimited daily scans",proBenefit2:"Advanced AI analysis",proBenefit3:"Create your own Creator Station",proBenefit4:"Priority customer support",proBenefit5:"Early access to new features",proBenefit6:"Exclusive community badges",perMonth:"per month",perYear:"per year",savePercent:"Save {{percent}}%",upgradeNow:"Upgrade Now",startFreeTrial:"Start Free Trial",cancelAnytime:"Cancel anytime",moneyBackGuarantee:"30-day money-back guarantee"},oOe={title:"Notifications",all:"All",unread:"Unread",markAllRead:"Mark All as Read",noNotifications:"No notifications",routineReminder:"Routine Reminder",scanReminder:"Time for your daily scan!",newFollower:"New Follower",newLike:"New Like",newComment:"New Comment",campaignUpdate:"Campaign Update",productRecommendation:"New Product Recommendation",achievementUnlocked:"Achievement Unlocked!"},lOe={title:"Help & Support",faq:"FAQ",contactUs:"Contact Us",liveChat:"Live Chat",tutorials:"Video Tutorials",reportBug:"Report a Bug",featureRequest:"Feature Request",termsOfService:"Terms of Service",privacyPolicy:"Privacy Policy",about:"About SkinPAI"},cOe={title:"Skin Profile",subtitle:"Help us understand your skin better",skinType:"What is your skin type?",skinConcerns:"What are your main skin concerns?",currentRoutine:"Describe your current skincare routine",sunExposure:"How much sun exposure do you get daily?",lifestyle:"Describe your lifestyle",complete:"Complete Profile"},uOe={title:"Live Chat",online:"Online",offline:"Offline",typingIndicator:"Agent is typing...",sendMessage:"Send Message",placeholder:"Type your message...",welcome:"Hi! How can we help you today?",closed:"Chat is currently closed. Please try again later."},dOe={generic:"Something went wrong. Please try again.",network:"Network error. Please check your connection.",unauthorized:"Please log in to continue.",notFound:"The requested resource was not found.",serverError:"Server error. Please try again later.",validationError:"Please check your input and try again.",scanFailed:"Scan failed. Please try again.",uploadFailed:"Upload failed. Please try again.",paymentFailed:"Payment failed. Please try again."},hOe={profileUpdated:"Profile updated successfully",passwordChanged:"Password changed successfully",settingsSaved:"Settings saved successfully",scanCompleted:"Scan completed successfully",postCreated:"Post created successfully",commentPosted:"Comment posted successfully",subscriptionUpdated:"Subscription updated successfully",loggedOut:"Successfully logged out"},fOe={common:Z_e,auth:J_e,navigation:Q_e,camera:eOe,results:tOe,dashboard:nOe,community:sOe,products:rOe,profile:iOe,upgrade:aOe,notifications:oOe,help:lOe,questionnaire:cOe,liveChat:uOe,errors:dOe,success:hOe},pOe={appName:" ",loading:" ...",save:"",cancel:"",delete:"",edit:"",close:"",back:"",next:"",submit:"",confirm:"",yes:"",no:"",ok:"",error:"",success:"",warning:"",info:"",search:"",filter:"",sort:"",view:"",share:"",download:"",upload:"",retry:" ",skip:"",continue:"",finish:"",start:"",stop:"",pause:" ",resume:"",refresh:"",settings:"",help:"",logout:" ",login:" ",signUp:" ",signIn:" ",profile:" ",notifications:"",language:"",english:"English",arabic:"",changeLanguage:" "},mOe={title:" ",subtitle:"      ",guest:"",member:"",quickStart:" ",trySkinPAI:"     ",guestFeatures:" :",guestFeature1:"   ",guestFeature2:"   ",guestFeature3:" ",guestFeature4:" ",continueAsGuest:" ",memberAccess:" ",signInForFeatures:"   ",memberBenefits:" :",memberBenefit1:"  ",memberBenefit2:"  ",memberBenefit3:" ",memberBenefit4:" ",memberBenefit5:" ",name:"",email:" ",password:" ",createAccount:" ",termsAgreement:"       "},gOe={scan:"",shop:"",dashboard:" ",community:"",camera:" ",results:" ",products:" ",profile:" ",settings:"",notifications:"",upgrade:"",help:" "},xOe={title:"   ",subtitle:"      ",startCamera:" ",capturePhoto:" ",uploadPhoto:" ",switchCamera:" ",analyzing:"  ...",processingParams:"     15  ...",analyzingMetrics:"     ...",poweredBySkindu:"  Skindu",permissionDenied:"   ",permissionHelp:"      ",noCamera:"       ",cameraBusy:"     ",retake:" ",analyze:" ",scansRemaining:"  ",upgradeForMore:"    ",scanLimitReached:"   ",tips:"  :",tip1:"  ",tip2:"   ",tip3:"   ",tip4:"  "},yOe={title:" ",overallScore:"  ",estimatedAge:"  ",skinType:" ",healthMetrics:" ",concerns:" ",recommendations:" ",aiAnalysis:"  ",viewProducts:"   ",shareResults:" ",saveResults:" ",newScan:" ",hydration:"",moisture:"",oiliness:"",evenness:"",texture:"",clarity:"",firmness:"",elasticity:"",poreSize:" ",smoothness:"",radiance:"",acne:" ",wrinkles:"",darkCircles:" ",darkSpots:" ",redness:"",uvDamage:"   ",outOf:" 100",skinAge:" ",minimal:" ",mild:"",moderate:"",significant:"",trackJourney:"  ",upgradePrompt:"          ",upgradeToMember:"  ",poweredBySkindu:"   Skindu",skinTypes:{oily:"",dry:"",combination:"",normal:"",sensitive:""}},vOe={title:" ",welcome:" ",welcomeBack:"  {{name}}!",trackJourney:"  ",member:"",latestScore:" ",totalScans:" ",yourCreatorStation:"   ",history:"",overview:" ",routine:"",progress:"",achievements:"",skinScore:" ",scanHistory:" ",noScans:"   ",startFirstScan:"    ",routineStreak:" ",days:"",weeklyProgress:" ",scans:"",morningRoutine:" ",eveningRoutine:" ",addRoutineItem:"  ",editRoutine:" ",setReminder:" ",reminderSet:"  ",dailyReminder:" ",weeklyReminder:" ",customReminder:" ",soundEnabled:" ",vibrationEnabled:" ",hydrationLevel:" ",skinEvenness:" ",clarityScore:" ",firmness:"",trendUp:"",trendDown:"",trendStable:"",viewAll:" ",lastScan:" ",compare:""},bOe={title:"",feed:"",trending:"",influencers:"",brands:" ",campaigns:"",createPost:" ",createStation:" ",myStation:"",followers:"",following:"",posts:"",likes:"",comments:"",shares:"",share:"",like:"",comment:"",save:"",saved:"",follow:"",unfollow:" ",writeComment:" ...",postComment:"",searchPlaceholder:"    ...",filters:"",recent:"",popular:" ",engagement:"",viewAllComments:"  ",noComments:"   ",beFirstToComment:"   !",joinCampaign:" ",activeCampaigns:" ",endingSoon:" ",prize:"",participants:"",hashtag:"",requirements:"",proOnly:"    Pro!",upgradeForStation:"   Pro     ."},wOe={title:"",recommendations:" ",allProducts:" ",categories:"",brands:" ",filters:"",sortBy:" ",priceRange:" ",inStock:"",outOfStock:" ",onSale:"",addToCart:" ",buyNow:" ",viewDetails:" ",reviews:"",rating:"",price:"",originalPrice:" ",discount:"",keyIngredients:" ",skinTypes:" ",skinConcerns:" ",shopNow:" ",addToFavorites:" ",removeFromFavorites:"  ",bundles:"",bundlePrice:" ",savings:"",products:""},NOe={title:"  ",personalInfo:" ",skinProfile:" ",preferences:"",subscription:"",wallet:"",security:"",editProfile:"  ",changePicture:" ",name:"",email:" ",phone:" ",dateOfBirth:" ",gender:"",skinType:" ",skinConcerns:" ",allergies:"",currentPlan:" ",upgradePlan:" ",managePlan:" ",billingHistory:" ",paymentMethods:" ",addPaymentMethod:"  ",walletBalance:" ",addFunds:" ",transactionHistory:" ",changePassword:"  ",twoFactorAuth:" ",deleteAccount:" ",darkMode:" ",pushNotifications:" ",emailNotifications:"  ",marketingEmails:" ",guestUser:" ",pro:"",member:"",guest:"",upgrade:"",account:"",notifications:"",privacy:""},SOe={title:" ",currentPlan:" ",choosePlan:" ",member:"",pro:"",proBenefits:" ",proBenefit1:"   ",proBenefit2:"   ",proBenefit3:"    ",proBenefit4:"  ",proBenefit5:"   ",proBenefit6:"  ",perMonth:"",perYear:"",savePercent:" {{percent}}%",upgradeNow:" ",startFreeTrial:"   ",cancelAnytime:"   ",moneyBackGuarantee:"    30 "},kOe={title:"",all:"",unread:" ",markAllRead:"  ",noNotifications:"  ",routineReminder:" ",scanReminder:"   !",newFollower:" ",newLike:" ",newComment:" ",campaignUpdate:" ",productRecommendation:"  ",achievementUnlocked:"  !"},COe={title:" ",faq:" ",contactUs:" ",liveChat:" ",tutorials:" ",reportBug:"  ",featureRequest:" ",termsOfService:" ",privacyPolicy:" ",about:"  "},TOe={title:" ",subtitle:"     ",skinType:"   ",skinConcerns:"    ",currentRoutine:"    ",sunExposure:"   ",lifestyle:"  ",complete:" "},IOe={title:" ",online:"",offline:" ",typingIndicator:" ...",sendMessage:" ",placeholder:" ...",welcome:"!    ",closed:"  .   ."},jOe={generic:"  .    .",network:"  .    .",unauthorized:"   .",notFound:"     .",serverError:"  .   .",validationError:"      .",scanFailed:" .    .",uploadFailed:" .    .",paymentFailed:" .    ."},EOe={profileUpdated:"    ",passwordChanged:"    ",settingsSaved:"   ",scanCompleted:"   ",postCreated:"   ",commentPosted:"   ",subscriptionUpdated:"   ",loggedOut:"   "},$Oe={common:pOe,auth:mOe,navigation:gOe,camera:xOe,results:yOe,dashboard:vOe,community:bOe,products:wOe,profile:NOe,upgrade:SOe,notifications:kOe,help:COe,questionnaire:TOe,liveChat:IOe,errors:jOe,success:EOe},AOe={en:{translation:fOe},ar:{translation:$Oe}};Si.use(dU).use(qX).init({resources:AOe,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});HW.createRoot(document.getElementById("root")).render(o.jsx(KQ,{children:o.jsx(XQ,{children:o.jsx(__e,{})})}));
